{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{\"9st3\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return BaseSlideComponentDirective})),__webpack_require__(\"Ri39\");var _angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"fXoL\");let BaseSlideComponentDirective=(()=>{class BaseSlideComponentDirective{constructor(){}}return BaseSlideComponentDirective.ɵfac=function(t){return new(t||BaseSlideComponentDirective)},BaseSlideComponentDirective.ɵdir=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ob({type:BaseSlideComponentDirective,inputs:{data:\"data\",projector:\"projector\"}}),BaseSlideComponentDirective})()},Xm5O:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"MotionSlideModule\",(function(){return motion_slide_module_MotionSlideModule}));var common=__webpack_require__(\"ofXK\"),shared_module=__webpack_require__(\"PCNd\"),slide_token=__webpack_require__(\"DGVe\"),change_recommendation_repository_service=__webpack_require__(\"pSLD\"),motion_repository_service=__webpack_require__(\"dOok\"),diff_service=__webpack_require__(\"4X/P\"),linenumbering_service=__webpack_require__(\"a9XT\"),view_unified_change=__webpack_require__(\"GEzB\"),motions_constants=__webpack_require__(\"3Y4h\"),base_motion_slide=__webpack_require__(\"EV9s\");class motion_slide_obj_amendment_paragraph_MotionSlideObjAmendmentParagraph{constructor(data,paragraphNo,newText,lineRange){this.paragraphNo=paragraphNo,this.newText=newText,this.lineRange=lineRange,this.id=data.id,this.merge_amendment_into_final=data.merge_amendment_into_final,this.merge_amendment_into_diff=data.merge_amendment_into_diff}getChangeId(){return\"amendment-\"+this.id.toString(10)+\"-\"+this.paragraphNo.toString(10)}getChangeType(){return view_unified_change.a.TYPE_AMENDMENT}getChangeNewText(){return this.newText}getLineFrom(){return this.lineRange.from}getLineTo(){return this.lineRange.to}isAccepted(){return 1===this.merge_amendment_into_final}isRejected(){return 0===this.merge_amendment_into_final}showInDiffView(){return 1===this.merge_amendment_into_diff}showInFinalView(){return 1===this.merge_amendment_into_final}isTitleChange(){return!1}}class motion_slide_obj_change_reco_MotionSlideObjChangeReco{constructor(data){Object.assign(this,data)}getChangeId(){return\"recommendation-\"+this.id.toString(10)}getChangeNewText(){return this.text}getChangeType(){return view_unified_change.a.TYPE_CHANGE_RECOMMENDATION}getLineFrom(){return this.line_from}getLineTo(){return this.line_to}isAccepted(){return!this.rejected}isRejected(){return this.rejected}showInDiffView(){return!0}showInFinalView(){return!this.rejected}isTitleChange(){return 0===this.line_from&&0===this.line_to}}var core=__webpack_require__(\"fXoL\"),ngx_translate_core=__webpack_require__(\"sYmb\"),trust_pipe=__webpack_require__(\"7jBc\");function MotionSlideComponent_div_0_div_1_h3_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"h3\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Submitters\")))}function MotionSlideComponent_div_0_div_1_span_2_span_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\", \"),core.Yb())}function MotionSlideComponent_div_0_div_1_span_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.Qc(2,MotionSlideComponent_div_0_div_1_span_2_span_2_Template,2,0,\"span\",0),core.Yb()),2&rf){const submitter_r13=ctx.$implicit,last_r14=ctx.last;core.Gb(1),core.Uc(\" \",submitter_r13,\"\"),core.Gb(1),core.tc(\"ngIf\",!last_r14)}}function MotionSlideComponent_div_0_div_1_div_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"h3\"),core.Sc(2),core.Yb(),core.Sc(3),core.Yb()),2&rf){const ctx_r12=core.lc(3);core.Gb(2),core.Tc(ctx_r12.data.data.recommender),core.Gb(1),core.Uc(\" \",ctx_r12.getRecommendationLabel(),\" \")}}const _c0=function(a0){return{\"margin-top\":a0}};function MotionSlideComponent_div_0_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",11),core.Qc(1,MotionSlideComponent_div_0_div_1_h3_1_Template,3,3,\"h3\",0),core.Qc(2,MotionSlideComponent_div_0_div_1_span_2_Template,3,2,\"span\",12),core.Qc(3,MotionSlideComponent_div_0_div_1_div_3_Template,4,2,\"div\",0),core.Yb()),2&rf){const ctx_r1=core.lc(2);core.tc(\"ngStyle\",core.zc(4,_c0,ctx_r1.projector.show_header_footer?\"144px\":\"94px\")),core.Gb(1),core.tc(\"ngIf\",(null==ctx_r1.data.data||null==ctx_r1.data.data.submitters?null:ctx_r1.data.data.submitters.length)>0),core.Gb(1),core.tc(\"ngForOf\",ctx_r1.data.data.submitters),core.Gb(1),core.tc(\"ngIf\",ctx_r1.data.data.recommendation&&ctx_r1.data.data.recommender)}}function MotionSlideComponent_div_0_span_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.Yb()),2&rf){const ctx_r2=core.lc(2);core.Gb(1),core.Uc(\"\",ctx_r2.data.data.identifier,\":\")}}function MotionSlideComponent_div_0_h2_8_span_5_span_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\",\"),core.Yb())}function MotionSlideComponent_div_0_h2_8_span_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.Qc(2,MotionSlideComponent_div_0_h2_8_span_5_span_2_Template,2,0,\"span\",0),core.Yb()),2&rf){const titleInformation_r17=ctx.$implicit,last_r18=ctx.last,ctx_r16=core.lc(3);core.Gb(1),core.Uc(\" \",ctx_r16.getIdentifierOrTitle(titleInformation_r17),\"\"),core.Gb(1),core.tc(\"ngIf\",!last_r18)}}function MotionSlideComponent_div_0_h2_8_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"h2\"),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Sc(4,\": \"),core.Qc(5,MotionSlideComponent_div_0_h2_8_span_5_Template,3,2,\"span\",12),core.Yb()),2&rf){const ctx_r3=core.lc(2);core.Gb(2),core.Tc(core.nc(3,2,\"Referring motions\")),core.Gb(3),core.tc(\"ngForOf\",ctx_r3.referencingMotions)}}function MotionSlideComponent_div_0_table_9_tr_1_span_6_span_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\", \"),core.Yb())}function MotionSlideComponent_div_0_table_9_tr_1_span_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.Qc(2,MotionSlideComponent_div_0_table_9_tr_1_span_6_span_2_Template,2,0,\"span\",0),core.Yb()),2&rf){const submitter_r24=ctx.$implicit,last_r25=ctx.last;core.Gb(1),core.Uc(\" \",submitter_r24,\"\"),core.Gb(1),core.tc(\"ngIf\",!last_r25)}}function MotionSlideComponent_div_0_table_9_tr_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"tr\"),core.Zb(1,\"td\",14),core.Zb(2,\"b\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Zb(5,\"td\"),core.Qc(6,MotionSlideComponent_div_0_table_9_tr_1_span_6_Template,3,2,\"span\",12),core.Yb(),core.Yb()),2&rf){const ctx_r20=core.lc(3);core.Gb(3),core.Uc(\"\",core.nc(4,2,\"Submitters\"),\":\"),core.Gb(3),core.tc(\"ngForOf\",ctx_r20.data.data.submitters)}}function MotionSlideComponent_div_0_table_9_tr_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"tr\"),core.Zb(1,\"td\",14),core.Zb(2,\"b\"),core.Sc(3),core.Yb(),core.Yb(),core.Zb(4,\"td\"),core.Sc(5),core.Yb(),core.Yb()),2&rf){const ctx_r21=core.lc(3);core.Gb(3),core.Uc(\"\",ctx_r21.data.data.recommender,\":\"),core.Gb(2),core.Uc(\" \",ctx_r21.getRecommendationLabel(),\" \")}}function MotionSlideComponent_div_0_table_9_tr_3_span_6_span_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\",\"),core.Yb())}function MotionSlideComponent_div_0_table_9_tr_3_span_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.Qc(2,MotionSlideComponent_div_0_table_9_tr_3_span_6_span_2_Template,2,0,\"span\",0),core.Yb()),2&rf){const titleInformation_r28=ctx.$implicit,last_r29=ctx.last,ctx_r27=core.lc(4);core.Gb(1),core.Uc(\" \",ctx_r27.getIdentifierOrTitle(titleInformation_r28),\"\"),core.Gb(1),core.tc(\"ngIf\",!last_r29)}}function MotionSlideComponent_div_0_table_9_tr_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"tr\"),core.Zb(1,\"td\",14),core.Zb(2,\"b\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Zb(5,\"td\"),core.Qc(6,MotionSlideComponent_div_0_table_9_tr_3_span_6_Template,3,2,\"span\",12),core.Yb(),core.Yb()),2&rf){const ctx_r22=core.lc(3);core.Gb(3),core.Uc(\"\",core.nc(4,2,\"Referring motions\"),\":\"),core.Gb(3),core.tc(\"ngForOf\",ctx_r22.referencingMotions)}}function MotionSlideComponent_div_0_table_9_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"table\",13),core.Qc(1,MotionSlideComponent_div_0_table_9_tr_1_Template,7,4,\"tr\",0),core.Qc(2,MotionSlideComponent_div_0_table_9_tr_2_Template,6,2,\"tr\",0),core.Qc(3,MotionSlideComponent_div_0_table_9_tr_3_Template,7,4,\"tr\",0),core.Yb()),2&rf){const ctx_r4=core.lc(2);core.Gb(1),core.tc(\"ngIf\",(null==ctx_r4.data.data||null==ctx_r4.data.data.submitters?null:ctx_r4.data.data.submitters.length)>0),core.Gb(1),core.tc(\"ngIf\",ctx_r4.data.data.recommendation&&ctx_r4.data.data.recommender),core.Gb(1),core.tc(\"ngIf\",ctx_r4.data.data.recommendation_referencing_motions)}}function MotionSlideComponent_div_0_span_12_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\",15),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const ctx_r5=core.lc(2);core.Gb(1),core.Tc(core.nc(2,1,ctx_r5.preamble))}}function MotionSlideComponent_div_0_ng_container_13_div_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"div\",18),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Ub(4,\"div\",19),core.mc(5,\"trust\"),core.Yb()),2&rf){const ctx_r31=core.lc(3);core.Gb(2),core.Uc(\"\",core.nc(3,2,\"Changed title\"),\":\"),core.Gb(2),core.tc(\"innerHTML\",core.oc(5,4,ctx_r31.getFormattedTitleDiff(),\"html\"),core.Jc)}}function MotionSlideComponent_div_0_ng_container_13_div_3_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"div\",19),core.mc(1,\"trust\")),2&rf){const ctx_r32=core.lc(3);core.tc(\"innerHTML\",core.oc(1,1,ctx_r32.getFormattedText(),\"html\"),core.Jc)}}function MotionSlideComponent_div_0_ng_container_13_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Zb(1,\"div\",16),core.Qc(2,MotionSlideComponent_div_0_ng_container_13_div_2_Template,6,7,\"div\",0),core.Qc(3,MotionSlideComponent_div_0_ng_container_13_div_3_Template,2,4,\"div\",17),core.Yb(),core.Wb()),2&rf){const ctx_r6=core.lc(2);core.Gb(1),core.Kb(\"line-numbers-none\",ctx_r6.isLineNumberingNone())(\"line-numbers-inline\",ctx_r6.isLineNumberingInline())(\"line-numbers-outside\",ctx_r6.isLineNumberingOutside()),core.Gb(1),core.tc(\"ngIf\",ctx_r6.getTitleChangingObject()&&\"diff\"===ctx_r6.crMode),core.Gb(1),core.tc(\"ngIf\",ctx_r6.getFormattedText())}}function MotionSlideComponent_div_0_div_14_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"div\",20),core.mc(1,\"trust\")),2&rf){const ctx_r7=core.lc(2);core.tc(\"innerHTML\",core.oc(1,1,ctx_r7.getFormattedStatuteAmendment(),\"html\"),core.Jc)}}function MotionSlideComponent_div_0_section_15_div_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",24),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(2),core.Tc(core.nc(3,1,\"No changes at the text.\")))}function MotionSlideComponent_div_0_section_15_div_2_h3_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"h3\",28),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Sc(4),core.Yb()),2&rf){const paragraph_r35=core.lc().$implicit;core.Gb(2),core.Tc(core.nc(3,2,\"Line\")),core.Gb(2),core.Uc(\" \",paragraph_r35.diffLineFrom,\": \")}}function MotionSlideComponent_div_0_section_15_div_2_h3_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"h3\",28),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Sc(4),core.Yb()),2&rf){const paragraph_r35=core.lc().$implicit;core.Gb(2),core.Tc(core.nc(3,3,\"Line\")),core.Gb(2),core.Vc(\" \",paragraph_r35.diffLineFrom,\" - \",paragraph_r35.diffLineTo-1,\": \")}}function MotionSlideComponent_div_0_section_15_div_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",25),core.Qc(1,MotionSlideComponent_div_0_section_15_div_2_h3_1_Template,5,4,\"h3\",26),core.Qc(2,MotionSlideComponent_div_0_section_15_div_2_h3_2_Template,5,5,\"h3\",26),core.Ub(3,\"div\",27),core.mc(4,\"trust\"),core.Yb()),2&rf){const paragraph_r35=ctx.$implicit,ctx_r34=core.lc(3);core.Kb(\"line-numbers-none\",ctx_r34.isLineNumberingNone())(\"line-numbers-inline\",ctx_r34.isLineNumberingInline())(\"line-numbers-outside\",ctx_r34.isLineNumberingOutside()),core.Gb(1),core.tc(\"ngIf\",paragraph_r35.diffLineTo===paragraph_r35.diffLineFrom+1),core.Gb(1),core.tc(\"ngIf\",paragraph_r35.diffLineTo!==paragraph_r35.diffLineFrom+1),core.Gb(1),core.tc(\"innerHtml\",core.oc(4,9,paragraph_r35.text,\"html\"),core.Jc)}}function MotionSlideComponent_div_0_section_15_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"section\",21),core.Qc(1,MotionSlideComponent_div_0_section_15_div_1_Template,4,3,\"div\",22),core.Qc(2,MotionSlideComponent_div_0_section_15_div_2_Template,5,12,\"div\",23),core.Yb()),2&rf){const ctx_r8=core.lc(2);core.Gb(1),core.tc(\"ngIf\",0===ctx_r8.getAmendedParagraphs().length),core.Gb(1),core.tc(\"ngForOf\",ctx_r8.getAmendedParagraphs())}}function MotionSlideComponent_div_0_div_16_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"h3\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Ub(4,\"div\",19),core.mc(5,\"trust\"),core.Yb()),2&rf){const ctx_r9=core.lc(2);core.Gb(2),core.Tc(core.nc(3,2,\"Reason\")),core.Gb(2),core.tc(\"innerHTML\",core.oc(5,4,ctx_r9.data.data.reason,\"html\"),core.Jc)}}const _c1=function(a0){return{width:a0}},_c2=function(a0){return{height:a0}},_c3=function(a0){return{slidetitle:a0}};function MotionSlideComponent_div_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MotionSlideComponent_div_0_div_1_Template,4,6,\"div\",1),core.Zb(2,\"div\",2),core.Ub(3,\"div\",3),core.Zb(4,\"div\",4),core.Zb(5,\"h1\"),core.Qc(6,MotionSlideComponent_div_0_span_6_Template,2,1,\"span\",0),core.Sc(7),core.Yb(),core.Qc(8,MotionSlideComponent_div_0_h2_8_Template,6,4,\"h2\",0),core.Qc(9,MotionSlideComponent_div_0_table_9_Template,4,3,\"table\",5),core.Yb(),core.Yb(),core.Zb(10,\"div\",6),core.Zb(11,\"div\",7),core.Qc(12,MotionSlideComponent_div_0_span_12_Template,3,3,\"span\",8),core.Qc(13,MotionSlideComponent_div_0_ng_container_13_Template,4,8,\"ng-container\",0),core.Qc(14,MotionSlideComponent_div_0_div_14_Template,2,4,\"div\",9),core.Qc(15,MotionSlideComponent_div_0_section_15_Template,3,2,\"section\",10),core.Qc(16,MotionSlideComponent_div_0_div_16_Template,6,7,\"div\",0),core.Yb(),core.Yb(),core.Yb()),2&rf){const ctx_r0=core.lc();core.Gb(1),core.tc(\"ngIf\",ctx_r0.data.data.show_meta_box),core.Gb(1),core.tc(\"ngStyle\",core.zc(14,_c1,ctx_r0.data.data.show_meta_box?\"calc(100% - 250px)\":\"100%\")),core.Gb(1),core.tc(\"ngStyle\",core.zc(16,_c2,ctx_r0.projector.show_header_footer?\"50px\":\"0\")),core.Gb(1),core.tc(\"ngClass\",core.zc(18,_c3,ctx_r0.data.data.show_meta_box)),core.Gb(2),core.tc(\"ngIf\",ctx_r0.data.data.identifier),core.Gb(1),core.Uc(\" \",ctx_r0.getTitleWithChanges(),\" \"),core.Gb(1),core.tc(\"ngIf\",ctx_r0.data.data.show_meta_box&&ctx_r0.data.data.recommendation_referencing_motions),core.Gb(1),core.tc(\"ngIf\",ctx_r0.showMetaTable),core.Gb(2),core.tc(\"ngStyle\",ctx_r0.textDivStyles),core.Gb(1),core.tc(\"ngIf\",ctx_r0.isStatuteAmendment()||ctx_r0.isParagraphBasedAmendment()||!!ctx_r0.getFormattedText()),core.Gb(1),core.tc(\"ngIf\",!ctx_r0.isStatuteAmendment()&&!ctx_r0.isParagraphBasedAmendment()),core.Gb(1),core.tc(\"ngIf\",ctx_r0.isStatuteAmendment()),core.Gb(1),core.tc(\"ngIf\",ctx_r0.isParagraphBasedAmendment()),core.Gb(1),core.tc(\"ngIf\",ctx_r0.data.data.reason)}}let motion_slide_component_MotionSlideComponent=(()=>{class MotionSlideComponent extends base_motion_slide.a{constructor(translate,motionRepo,changeRepo,lineNumbering,diff){super(translate,motionRepo),this.changeRepo=changeRepo,this.lineNumbering=lineNumbering,this.diff=diff,this.referencingMotions=[],this._scroll=0,this._scale=0,this.textDivStyles={}}set data(value){this._data=value,this.lnMode=value.data.line_numbering_mode,this.lineLength=value.data.line_length,this.preamble=value.data.preamble,this.crMode=value.element.mode||\"original\",this.textDivStyles.width=value.data.show_meta_box?\"calc(100% - 250px)\":\"100%\",value.data.recommendation_referencing_motions&&(this.referencingMotions=value.data.recommendation_referencing_motions.sort((a,b)=>a.identifier.localeCompare(b.identifier))),this.recalcUnifiedChanges()}get data(){return this._data}get showMetaTable(){var _a;return!this.data.data.show_meta_box&&((null===(_a=this.data.data)||void 0===_a?void 0:_a.submitters.length)>0||!!this.data.data.recommendation&&!!this.data.data.recommender||!!this.data.data.recommendation_referencing_motions)}set scroll(value){this._scroll=value,value*=-100,this.textDivStyles[\"margin-top\"]=(value+=40)+\"px\"}get scroll(){return this._scroll}set scale(value){this._scale=value,value*=10,this.textDivStyles[\"font-size\"]=(value+=100)+\"%\"}get scale(){return this._scale}getIdentifierOrTitle(titleInformation){return this.motionRepo.getIdentifierOrTitle(titleInformation)}getRecommendationLabel(){let recommendation=this.translate.instant(this.data.data.recommendation);return this.data.data.recommendation_extension&&(recommendation+=\" \"+this.replaceReferencedMotions(this.data.data.recommendation_extension,this.data.data.referenced_motions)),recommendation}getAmendmentAmendedParagraphs(amendment){if(!amendment.amendment_paragraphs)return[];let baseHtml=this.data.data.text;baseHtml=this.lineNumbering.insertLineNumbers(baseHtml,this.lineLength);const baseParagraphs=this.lineNumbering.splitToParagraphs(baseHtml);return amendment.amendment_paragraphs.map((newText,paraNo)=>{if(null===newText)return null;const diff=this.diff.diff(baseParagraphs[paraNo],newText),affectedLines=this.diff.detectAffectedLineRange(diff);if(null===affectedLines)return null;const affectedDiff=this.diff.formatDiff(this.diff.extractRangeByLineNumbers(diff,affectedLines.from,affectedLines.to)),affectedConsolidated=this.diff.diffHtmlToFinalText(affectedDiff);return new motion_slide_obj_amendment_paragraph_MotionSlideObjAmendmentParagraph(amendment,paraNo,affectedConsolidated,affectedLines)}).filter(para=>null!==para)}recalcUnifiedChanges(){this.allChangingObjects=[],this.data.data.change_recommendations&&this.data.data.change_recommendations.forEach(change=>{this.allChangingObjects.push(new motion_slide_obj_change_reco_MotionSlideObjChangeReco(change))}),this.data.data.amendments&&this.data.data.amendments.forEach(amendment=>{this.getAmendmentAmendedParagraphs(amendment).forEach(para=>this.allChangingObjects.push(para))}),this.allChangingObjects.sort((a,b)=>a.getLineFrom()<b.getLineFrom()?-1:a.getLineFrom()>b.getLineFrom()?1:0)}isStatuteAmendment(){return!!this.data.data.base_statute}isParagraphBasedAmendment(){return this.data.data.is_child&&this.data.data.amendment_paragraphs&&this.data.data.amendment_paragraphs.length>0}isLineNumberingNone(){return this.lnMode===motions_constants.d.None}isLineNumberingInline(){return this.lnMode===motions_constants.d.Inside}isLineNumberingOutside(){return this.lnMode===motions_constants.d.Outside}extractMotionLineRange(motionHtml,lineRange,lineNumbers,lineLength){const extracted=this.diff.extractRangeByLineNumbers(motionHtml,lineRange.from,lineRange.to);let html=extracted.outerContextStart+extracted.innerContextStart+extracted.html+extracted.innerContextEnd+extracted.outerContextEnd;return lineNumbers&&(html=this.lineNumbering.insertLineNumbers(html,lineLength,null,null,lineRange.from)),html}getAllTextChangingObjects(){return this.allChangingObjects.filter(obj=>!obj.isTitleChange())}getTitleChangingObject(){return this.allChangingObjects.find(obj=>obj.isTitleChange())}getTitleWithChanges(){return this.changeRepo.getTitleWithChanges(this.data.data.title,this.getTitleChangingObject(),this.crMode)}getFormattedTitleDiff(){const change=this.getTitleChangingObject();return this.changeRepo.getTitleChangesAsDiff(this.data.data.title,change)}getFormattedText(){const motion=this.data.data;if(!motion.text)return null;switch(this.crMode){case motions_constants.b.Original:return this.lineNumbering.insertLineNumbers(motion.text,this.lineLength,this.highlightedLine);case motions_constants.b.Changed:const changeRecommendations=this.getAllTextChangingObjects().filter(change=>change.getChangeType()===view_unified_change.a.TYPE_CHANGE_RECOMMENDATION);return this.diff.getTextWithChanges(motion.text,changeRecommendations,this.lineLength,this.highlightedLine);case motions_constants.b.Diff:let text=\"\";const changes=this.getAllTextChangingObjects().filter(change=>change.showInDiffView()),motionText=this.lineNumbering.insertLineNumbers(motion.text,this.lineLength);return changes.forEach((change,idx)=>{if(0===idx){const lineRange={from:1,to:change.getLineFrom()};text+=this.extractMotionLineRange(motionText,lineRange,!0,this.lineLength)}else if(changes[idx-1].getLineTo()<change.getLineFrom()){const lineRange={from:changes[idx-1].getLineTo(),to:change.getLineFrom()};text+=this.extractMotionLineRange(motionText,lineRange,!0,this.lineLength)}text+=this.diff.getChangeDiff(motionText,change,this.lineLength,this.highlightedLine)}),text+=this.diff.getTextRemainderAfterLastChange(motionText,changes,this.lineLength,this.highlightedLine),text;case motions_constants.b.Final:const appliedChanges=this.getAllTextChangingObjects().filter(change=>change.showInFinalView());return this.diff.getTextWithChanges(motion.text,appliedChanges,this.lineLength,this.highlightedLine);case motions_constants.b.ModifiedFinal:if(motion.modified_final_version)return this.lineNumbering.insertLineNumbers(motion.modified_final_version,this.lineLength,this.highlightedLine,null,1);{const appliedChangeObjects=this.getAllTextChangingObjects().filter(change=>change.showInFinalView());return this.diff.getTextWithChanges(motion.text,appliedChangeObjects,this.lineLength,this.highlightedLine)}default:return console.error(\"unrecognized ChangeRecoMode option (\"+this.crMode+\")\"),null}}getAmendedParagraphs(){let baseHtml=this.data.data.base_motion.text;baseHtml=this.lineNumbering.insertLineNumbers(baseHtml,this.lineLength);const baseParagraphs=this.lineNumbering.splitToParagraphs(baseHtml);return this.data.data.amendment_paragraphs.map((newText,paraNo)=>null===newText?null:this.diff.getAmendmentParagraphsLines(paraNo,baseParagraphs[paraNo],newText,this.lineLength)).filter(para=>null!==para)}getFormattedStatuteAmendment(){const diffHtml=this.diff.diff(this.data.data.base_statute.text,this.data.data.text);return this.lineNumbering.insertLineBreaksWithoutNumbers(diffHtml,this.lineLength,!0)}}return MotionSlideComponent.ɵfac=function(t){return new(t||MotionSlideComponent)(core.Tb(ngx_translate_core.k),core.Tb(motion_repository_service.a),core.Tb(change_recommendation_repository_service.a),core.Tb(linenumbering_service.a),core.Tb(diff_service.a))},MotionSlideComponent.ɵcmp=core.Nb({type:MotionSlideComponent,selectors:[[\"os-motion-slide\"]],inputs:{data:\"data\",scroll:\"scroll\",scale:\"scale\"},features:[core.Db],decls:1,vars:1,consts:[[4,\"ngIf\"],[\"id\",\"sidebox\",3,\"ngStyle\",4,\"ngIf\"],[3,\"ngStyle\"],[1,\"spacer\",3,\"ngStyle\"],[3,\"ngClass\"],[\"class\",\"metatable spacer-top-20\",\"cellpadding\",\"0\",\"cellspacing\",\"0\",4,\"ngIf\"],[\"id\",\"text-wrapper\"],[\"id\",\"text\",3,\"ngStyle\"],[\"class\",\"text-prefix-label\",4,\"ngIf\"],[\"class\",\"motion-text line-numbers-none\",3,\"innerHTML\",4,\"ngIf\"],[\"class\",\"text-holder\",4,\"ngIf\"],[\"id\",\"sidebox\",3,\"ngStyle\"],[4,\"ngFor\",\"ngForOf\"],[\"cellpadding\",\"0\",\"cellspacing\",\"0\",1,\"metatable\",\"spacer-top-20\"],[1,\"min\"],[1,\"text-prefix-label\"],[1,\"motion-text\"],[3,\"innerHTML\",4,\"ngIf\"],[1,\"bold\"],[3,\"innerHTML\"],[1,\"motion-text\",\"line-numbers-none\",3,\"innerHTML\"],[1,\"text-holder\"],[\"class\",\"alert alert-info\",4,\"ngIf\"],[\"class\",\"motion-text motion-text-diff amendment-view\",3,\"line-numbers-none\",\"line-numbers-inline\",\"line-numbers-outside\",4,\"ngFor\",\"ngForOf\"],[1,\"alert\",\"alert-info\"],[1,\"motion-text\",\"motion-text-diff\",\"amendment-view\"],[\"class\",\"amendment-line-header\",4,\"ngIf\"],[3,\"innerHtml\"],[1,\"amendment-line-header\"]],template:function(rf,ctx){1&rf&&core.Qc(0,MotionSlideComponent_div_0_Template,17,20,\"div\",0),2&rf&&core.tc(\"ngIf\",ctx.data)},directives:[common.t,common.w,common.q,common.s],pipes:[ngx_translate_core.j,trust_pipe.a],styles:['.motion-text .insert,.motion-text ins{color:green;text-decoration:underline}.motion-text .delete,.motion-text del{color:red;text-decoration:line-through}.motion-text li{padding-bottom:10px}.motion-text ol,.motion-text ul{margin-left:15px;margin-bottom:0}.motion-text .highlight{background-color:#ff0}.motion-text.line-numbers-outside{padding-left:40px;position:relative}.motion-text.line-numbers-outside .os-line-number{display:inline-block;font-size:0;line-height:0;width:22px;height:22px;position:absolute;left:0;padding-right:55px}.motion-text.line-numbers-outside .os-line-number:after{content:attr(data-line-number);position:absolute;top:13px;vertical-align:top;color:grey;font-size:12px;font-weight:400}.motion-text.line-numbers-outside .os-line-number.selectable:hover:before,.motion-text.line-numbers-outside .os-line-number.selected:before{position:absolute;top:4px;left:20px;display:inline-block;cursor:pointer;content:\"\";width:16px;height:16px;background:url(\\'data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\" fill=\"%23337ab7\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>\\');background-size:16px 16px}.motion-text.line-numbers-inline .os-line-break{display:none}.motion-text.line-numbers-inline .os-line-number{display:inline-block}.motion-text.line-numbers-inline .os-line-number:after{display:inline-block;content:attr(data-line-number);vertical-align:top;font-size:10px;font-weight:400;color:grey;margin-top:-3px;margin-left:0;margin-right:0}.motion-text.line-numbers-none .os-line-break,.motion-text.line-numbers-none .os-line-number{display:none}.motion-text .os-split-before{margin-top:0;padding-top:0}.motion-text .os-split-after{margin-bottom:0;padding-bottom:0}.motion-text li.os-split-before{list-style:none}.amendment-view .os-split-after{margin-bottom:0}.amendment-view .os-split-before{margin-top:0}.amendment-view .paragraphcontext{opacity:.5}.amendment-view.amendment-context .paragraphcontext{opacity:1}.paragraph-context{opacity:.5}.slidetitle{margin-bottom:0!important}.slidetitle h1{margin:0!important}#sidebox{width:260px;right:0;background:#d3d3d3;border-radius:7px 0 0 7px;padding:3px 7px 10px 10px;position:fixed;z-index:5;word-break:break-word}#sidebox h3{margin-top:10px;margin-bottom:0}.metatable{background-color:#ddd;width:100%;font-size:120%}.metatable td{border-bottom:2px solid #fff}.metatable td.min{width:1%;white-space:nowrap;font-weight:500;padding:0 10px 0 7px;vertical-align:top}.spacer{min-width:1px}#text-wrapper{overflow:hidden}#text{position:relative}.motion-text.line-numbers-outside .os-line-number:after{top:17px;font-size:16px}'],encapsulation:2}),MotionSlideComponent})(),motion_slide_module_MotionSlideModule=(()=>{class MotionSlideModule{}return MotionSlideModule.ɵmod=core.Rb({type:MotionSlideModule}),MotionSlideModule.ɵinj=core.Qb({factory:function(t){return new(t||MotionSlideModule)},providers:[{provide:slide_token.a.token,useValue:motion_slide_component_MotionSlideComponent}],imports:[[common.c,shared_module.a]]}),MotionSlideModule})()}}]);","extractedComments":[]}