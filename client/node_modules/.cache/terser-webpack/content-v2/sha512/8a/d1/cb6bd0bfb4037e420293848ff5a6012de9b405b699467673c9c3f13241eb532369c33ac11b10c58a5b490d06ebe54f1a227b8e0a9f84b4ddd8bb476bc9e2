{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{AP8A:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return PersonalNoteService}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mrSG\"),_core_services_data_store_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"xTJg\"),_core_services_http_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"Hila\"),_core_services_operator_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"OwvW\"),_shared_models_users_personal_note__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"/iaR\"),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(\"fXoL\");let PersonalNoteService=(()=>{class PersonalNoteService{constructor(operator,DS,http){this.operator=operator,this.DS=DS,this.http=http,operator.getUserObservable().subscribe(()=>this.updatePersonalNoteObject()),this.DS.getChangeObservable(_shared_models_users_personal_note__WEBPACK_IMPORTED_MODULE_4__.a).subscribe(_=>{this.updatePersonalNoteObject()})}updatePersonalNoteObject(){if(this.operator.isAnonymous)return void(this.personalNoteObject=null);const operatorId=this.operator.user.id,objects=this.DS.filter(_shared_models_users_personal_note__WEBPACK_IMPORTED_MODULE_4__.a,pn=>pn.user_id===operatorId);this.personalNoteObject=0===objects.length?null:objects[0]}savePersonalNote(model,content){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){yield this.savePersonalNoteObject([{collection:model.collectionString,id:model.id,content:content}])}))}bulkSetStar(models,star){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){if(!models.length)return;const pnObject=this.personalNoteObject||{};pnObject.notes||(pnObject.notes={});const requestData=models.map(model=>(pnObject.notes[model.collectionString]||(pnObject.notes[model.collectionString]={}),pnObject.notes[model.collectionString][model.id]?pnObject.notes[model.collectionString][model.id].star=star:pnObject.notes[model.collectionString][model.id]={star:star,note:\"\"},{collection:model.collectionString,id:model.id,content:pnObject.notes[model.collectionString][model.id]}));yield this.savePersonalNoteObject(requestData)}))}savePersonalNoteObject(requestData){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){yield this.http.post(\"/rest/users/personal-note/create_or_update/\",requestData)}))}}return PersonalNoteService.ɵfac=function(t){return new(t||PersonalNoteService)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.dc(_core_services_operator_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_5__.dc(_core_services_data_store_service__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_5__.dc(_core_services_http_service__WEBPACK_IMPORTED_MODULE_2__.a))},PersonalNoteService.ɵprov=_angular_core__WEBPACK_IMPORTED_MODULE_5__.Pb({token:PersonalNoteService,factory:PersonalNoteService.ɵfac,providedIn:\"root\"}),PersonalNoteService})()},Q5D0:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return MotionFilterListService}));var app_core_core_services_openslides_status_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"D/ll\"),app_core_core_services_operator_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"OwvW\"),app_core_core_services_storage_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"AqIO\"),app_core_repositories_motions_category_repository_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"iTQr\"),app_core_repositories_motions_motion_block_repository_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"D5Qf\"),app_core_repositories_motions_motion_comment_section_repository_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(\"+B0n\"),app_core_repositories_motions_workflow_repository_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(\"s3dr\"),app_core_repositories_tags_tag_repository_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(\"lv9T\"),app_core_ui_services_base_filter_list_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(\"+8Rz\"),app_core_ui_services_config_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(\"+KbT\"),app_shared_models_motions_state__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(\"gtli\"),_motions_constants__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(\"3Y4h\"),_angular_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(\"fXoL\"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(\"sYmb\");let MotionFilterListService=(()=>{class MotionFilterListService extends app_core_ui_services_base_filter_list_service__WEBPACK_IMPORTED_MODULE_8__.a{constructor(store,OSStatus,categoryRepo,motionBlockRepo,commentRepo,tagRepo,workflowRepo,translate,operator,config){super(store,OSStatus),this.workflowRepo=workflowRepo,this.translate=translate,this.operator=operator,this.config=config,this.storageKey=\"MotionList\",this.enabledWorkflows={statuteEnabled:!1,statute:null,motion:null},this.stateFilterOptions={property:\"state_id\",label:\"State\",options:[]},this.categoryFilterOptions={property:\"category_id\",label:\"Category\",options:[]},this.motionBlockFilterOptions={property:\"motion_block_id\",label:\"Motion block\",options:[]},this.motionCommentFilterOptions={property:\"commentSectionIds\",label:\"Comment\",options:[]},this.recommendationFilterOptions={property:\"recommendation_id\",label:\"Recommendation\",options:[]},this.tagFilterOptions={property:\"tags_id\",label:\"Tags\",options:[]},this.hasSpeakerOptions={property:\"hasSpeakers\",label:\"Speakers\",options:[{condition:!0,label:this.translate.instant(\"Has speakers\")},{condition:!1,label:this.translate.instant(\"Has no speakers\")}]},this.AmendmentFilterOption={property:\"amendmentType\",label:\"Amendment\",options:[{condition:_motions_constants__WEBPACK_IMPORTED_MODULE_11__.a.Amendment,label:this.translate.instant(\"Is amendment\")},{condition:_motions_constants__WEBPACK_IMPORTED_MODULE_11__.a.Parent,label:this.translate.instant(\"Has amendments\")},{condition:_motions_constants__WEBPACK_IMPORTED_MODULE_11__.a.Lead,label:this.translate.instant(\"Is no amendment and has no amendments\")}]},this.personalNoteFilterOptions=[{property:\"star\",label:this.translate.instant(\"Favorites\"),options:[{condition:!0,label:this.translate.instant(\"Is favorite\")},{condition:!1,label:this.translate.instant(\"Is not favorite\")}]},{property:\"hasNotes\",label:this.translate.instant(\"Personal notes\"),options:[{condition:!0,label:this.translate.instant(\"Has notes\")},{condition:!1,label:this.translate.instant(\"Does not have notes\")}]}],this.getWorkflowConfig(),this.getShowAmendmentConfig(),this.updateFilterForRepo(categoryRepo,this.categoryFilterOptions,this.translate.instant(\"No category set\")),this.updateFilterForRepo(motionBlockRepo,this.motionBlockFilterOptions,this.translate.instant(\"No motion block set\")),this.updateFilterForRepo(commentRepo,this.motionCommentFilterOptions,this.translate.instant(\"No comment\")),this.updateFilterForRepo(tagRepo,this.tagFilterOptions,this.translate.instant(\"No tags\")),this.subscribeWorkflows(),this.operator.getUserObservable().subscribe(()=>{this.setFilterDefinitions()})}preFilter(motions){if(!this.showAmendmentsInMainTable)return motions.filter(motion=>!motion.parent_id)}getShowAmendmentConfig(){this.config.get(\"motions_amendments_main_table\").subscribe(show=>{this.showAmendmentsInMainTable=show})}getWorkflowConfig(){this.config.get(\"motions_statute_amendments_workflow\").subscribe(id=>{this.enabledWorkflows.statute=+id}),this.config.get(\"motions_workflow\").subscribe(id=>{this.enabledWorkflows.motion=+id}),this.config.get(\"motions_statutes_enabled\").subscribe(bool=>{this.enabledWorkflows.statuteEnabled=bool})}getFilterDefinitions(){let filterDefinitions=[this.stateFilterOptions,this.categoryFilterOptions,this.motionBlockFilterOptions,this.recommendationFilterOptions,this.motionCommentFilterOptions,this.tagFilterOptions];return this.operator.hasPerms(app_core_core_services_operator_service__WEBPACK_IMPORTED_MODULE_1__.b.agendaCanSeeListOfSpeakers)&&filterDefinitions.push(this.hasSpeakerOptions),this.showAmendmentsInMainTable&&filterDefinitions.push(this.AmendmentFilterOption),this.operator.isAnonymous||(filterDefinitions=filterDefinitions.concat(this.personalNoteFilterOptions)),filterDefinitions}subscribeWorkflows(){this.workflowRepo.getViewModelListObservable().subscribe(workflows=>{if(workflows&&workflows.length){const workflowFilters=[],recoFilters=[],finalStates=[],nonFinalStates=[];for(const workflow of workflows)if(this.isWorkflowEnabled(workflow.id)){workflowFilters.push({name:workflow.name,filter:[]}),recoFilters.push({name:workflow.name,filter:[]});for(const state of workflow.states){const restrictions=state.restriction.filter(r=>r!==app_shared_models_motions_state__WEBPACK_IMPORTED_MODULE_10__.b.motionsIsSubmitter);restrictions.length&&!this.operator.hasPerms(...restrictions)||(state.isFinalState?finalStates.push(state.id):nonFinalStates.push(state.id),workflowFilters[workflowFilters.length-1].filter.push({condition:state.id,label:state.name}),state.recommendation_label&&recoFilters[workflowFilters.length-1].filter.push({condition:state.id,label:state.recommendation_label}))}}if(workflowFilters&&workflowFilters.length){let workflowOptions=[];workflowOptions.push({label:\"Done\",condition:finalStates}),workflowOptions.push({label:this.translate.instant(\"Undone\"),condition:nonFinalStates}),workflowOptions.push(\"-\");for(const filterDef of workflowFilters)workflowOptions.push(filterDef.name),workflowOptions=workflowOptions.concat(filterDef.filter);this.stateFilterOptions.options=workflowOptions}if(recoFilters&&recoFilters.length){let recoOptions=[];for(const filterDef of recoFilters)recoOptions.push(filterDef.name),recoOptions=recoOptions.concat(filterDef.filter);recoOptions.push(\"-\"),recoOptions.push({label:this.translate.instant(\"No recommendation\"),condition:null}),this.recommendationFilterOptions.options=recoOptions}this.setFilterDefinitions()}})}isWorkflowEnabled(workflowId){return workflowId===this.enabledWorkflows.motion||this.enabledWorkflows.statuteEnabled&&workflowId===this.enabledWorkflows.statute}}return MotionFilterListService.ɵfac=function(t){return new(t||MotionFilterListService)(_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_core_services_storage_service__WEBPACK_IMPORTED_MODULE_2__.a),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_core_services_openslides_status_service__WEBPACK_IMPORTED_MODULE_0__.a),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_repositories_motions_category_repository_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_repositories_motions_motion_block_repository_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_repositories_motions_motion_comment_section_repository_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_repositories_tags_tag_repository_service__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_repositories_motions_workflow_repository_service__WEBPACK_IMPORTED_MODULE_6__.a),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__.k),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_core_services_operator_service__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_ui_services_config_service__WEBPACK_IMPORTED_MODULE_9__.a))},MotionFilterListService.ɵprov=_angular_core__WEBPACK_IMPORTED_MODULE_12__.Pb({token:MotionFilterListService,factory:MotionFilterListService.ɵfac,providedIn:\"root\"}),MotionFilterListService})()},QDTn:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"MotionDetailModule\",(function(){return motion_detail_module_MotionDetailModule}));var common=__webpack_require__(\"ofXK\"),shared_module=__webpack_require__(\"PCNd\"),fesm2015_router=__webpack_require__(\"tyNb\"),tslib_es6=__webpack_require__(\"mrSG\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),motion_repository_service=__webpack_require__(\"dOok\"),config_service=__webpack_require__(\"+KbT\"),prompt_service=__webpack_require__(\"F48D\"),base_view=__webpack_require__(\"mV3u\"),create_motion=__webpack_require__(\"VaoK\"),core=__webpack_require__(\"fXoL\"),platform_browser=__webpack_require__(\"jhN1\"),ngx_translate_core=__webpack_require__(\"sYmb\"),snack_bar=__webpack_require__(\"dNgK\"),head_bar_component=__webpack_require__(\"mksl\"),stepper=__webpack_require__(\"xHqg\"),tinymce_tinymce_angular=__webpack_require__(\"fB2i\"),fesm2015_button=__webpack_require__(\"bTqV\"),fesm2015_checkbox=__webpack_require__(\"bSwM\"),fesm2015_radio=__webpack_require__(\"QibW\"),trust_pipe=__webpack_require__(\"7jBc\");function AmendmentCreateWizardComponent_div_6_Template(rf,ctx){if(1&rf){const _r10=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",15),core.hc(\"click\",(function(){return core.Ic(_r10),core.lc(),core.Ec(10).next()})),core.Zb(2,\"span\",16),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r0=core.lc();core.Gb(1),core.tc(\"disabled\",0===ctx_r0.contentForm.value.selectedParagraphs.length),core.Gb(2),core.Tc(core.nc(4,2,\"Next\"))}}function AmendmentCreateWizardComponent_div_7_Template(rf,ctx){if(1&rf){const _r12=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",17),core.hc(\"click\",(function(){return core.Ic(_r12),core.lc(),core.Ec(10).previous()})),core.Zb(2,\"span\",16),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Yb()}2&rf&&(core.Gb(3),core.Tc(core.nc(4,1,\"Previous\")))}function AmendmentCreateWizardComponent_ng_template_12_Template(rf,ctx){1&rf&&(core.Sc(0),core.mc(1,\"translate\")),2&rf&&core.Tc(core.nc(1,1,\"Select paragraphs\"))}function AmendmentCreateWizardComponent_section_14_mat_checkbox_1_Template(rf,ctx){if(1&rf){const _r18=core.ac();core.Zb(0,\"mat-checkbox\",22),core.hc(\"click\",(function($event){return core.Ic(_r18),core.lc(2).checkboxClicked($event)})),core.Yb()}if(2&rf){const paragraph_r13=core.lc().$implicit,ctx_r15=core.lc();core.tc(\"checked\",ctx_r15.isParagraphSelected(paragraph_r13))}}function AmendmentCreateWizardComponent_section_14_mat_radio_button_2_Template(rf,ctx){if(1&rf&&core.Ub(0,\"mat-radio-button\",23),2&rf){const paragraph_r13=core.lc().$implicit,ctx_r16=core.lc();core.tc(\"checked\",ctx_r16.isParagraphSelected(paragraph_r13))}}function AmendmentCreateWizardComponent_section_14_Template(rf,ctx){if(1&rf){const _r22=core.ac();core.Zb(0,\"section\",18),core.hc(\"click\",(function(){core.Ic(_r22);const paragraph_r13=ctx.$implicit;return core.lc().onParagraphClicked(paragraph_r13)})),core.Qc(1,AmendmentCreateWizardComponent_section_14_mat_checkbox_1_Template,1,1,\"mat-checkbox\",19),core.Qc(2,AmendmentCreateWizardComponent_section_14_mat_radio_button_2_Template,1,1,\"mat-radio-button\",20),core.Ub(3,\"div\",21),core.mc(4,\"trust\"),core.Yb()}if(2&rf){const paragraph_r13=ctx.$implicit,i_r14=ctx.index,ctx_r4=core.lc();core.Kb(\"active\",ctx_r4.isParagraphSelected(paragraph_r13)),core.Gb(1),core.tc(\"ngIf\",ctx_r4.multipleParagraphsAllowed),core.Gb(1),core.tc(\"ngIf\",!ctx_r4.multipleParagraphsAllowed),core.Gb(1),core.tc(\"innerHTML\",core.oc(4,5,ctx_r4.getParagraphPreview(i_r14),\"html\"),core.Jc)}}function AmendmentCreateWizardComponent_ng_template_16_Template(rf,ctx){1&rf&&(core.Sc(0),core.mc(1,\"translate\")),2&rf&&core.Tc(core.nc(1,1,\"Change paragraph\"))}function AmendmentCreateWizardComponent_section_21_span_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\",26),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const paragraph_r23=core.lc().$implicit;core.Gb(1),core.Vc(\" \",core.nc(2,2,\"Line\"),\" \",paragraph_r23.lineFrom,\":\")}}function AmendmentCreateWizardComponent_section_21_span_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\",26),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const paragraph_r23=core.lc().$implicit;core.Gb(1),core.Wc(\" \",core.nc(2,3,\"Line\"),\" \",paragraph_r23.lineFrom,\" - \",paragraph_r23.lineTo-1,\":\")}}function AmendmentCreateWizardComponent_section_21_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"section\"),core.Zb(1,\"h4\"),core.Qc(2,AmendmentCreateWizardComponent_section_21_span_2_Template,3,4,\"span\",24),core.Qc(3,AmendmentCreateWizardComponent_section_21_span_3_Template,3,5,\"span\",24),core.Yb(),core.Ub(4,\"editor\",25),core.Yb()),2&rf){const paragraph_r23=ctx.$implicit,ctx_r6=core.lc();core.Gb(2),core.tc(\"ngIf\",paragraph_r23.lineFrom>=paragraph_r23.lineTo-1),core.Gb(1),core.tc(\"ngIf\",paragraph_r23.lineFrom<paragraph_r23.lineTo-1),core.Gb(1),core.tc(\"formControlName\",\"text_\"+paragraph_r23.paragraphNo)(\"init\",ctx_r6.tinyMceSettings)}}function AmendmentCreateWizardComponent_span_27_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\"*\"),core.Yb())}function AmendmentCreateWizardComponent_div_29_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",27),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"This field is required.\"),\" \"))}let amendment_create_wizard_component_AmendmentCreateWizardComponent=(()=>{class AmendmentCreateWizardComponent extends base_view.a{constructor(titleService,translate,configService,formBuilder,repo,route,router,promptService,matSnackBar){super(titleService,translate,matSnackBar),this.translate=translate,this.configService=configService,this.formBuilder=formBuilder,this.repo=repo,this.route=route,this.router=router,this.promptService=promptService,this.createForm()}ngOnInit(){this.configService.get(\"motions_line_length\").subscribe(lineLength=>{this.lineLength=lineLength,this.getMotionByUrl()}),this.configService.get(\"motions_reason_required\").subscribe(required=>{this.reasonRequired=required}),this.configService.get(\"motions_amendments_multiple_paragraphs\").subscribe(allowed=>{this.multipleParagraphsAllowed=allowed})}getMotionByUrl(){this.route.params.subscribe(params=>{this.repo.getViewModelObservable(params.id).subscribe(newViewMotion=>{newViewMotion&&(this.paragraphs=this.repo.getParagraphsToChoose(newViewMotion,this.lineLength),newViewMotion.hasParent?(this.isAmendmentOfAmendment=!0,this.motion=newViewMotion.parent,this.diffedParagraphs=this.repo.getDiffedParagraphToChoose(newViewMotion,this.lineLength)):(this.isAmendmentOfAmendment=!1,this.motion=newViewMotion))})})}getParagraphPreview(index){return this.isAmendmentOfAmendment?this.diffedParagraphs[index].html:this.paragraphs[index].html}cancelCreation(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){if(this.contentForm.dirty||this.contentForm.value.selectedParagraphs.length>0){const title=this.translate.instant(\"Are you sure you want to discard this amendment?\");(yield this.promptService.open(title))&&this.router.navigate([\"..\"],{relativeTo:this.route})}else this.router.navigate([\"..\"],{relativeTo:this.route})}))}createForm(){this.contentForm=this.formBuilder.group({selectedParagraphs:[[],fesm2015_forms.G.required],reason:[\"\",fesm2015_forms.G.required]})}isParagraphSelected(paragraph){return!!this.contentForm.value.selectedParagraphs.find(para=>para.paragraphNo===paragraph.paragraphNo)}checkboxClicked(event){event.preventDefault()}setParagraph(paragraph){this.contentForm.value.selectedParagraphs.forEach(para=>{this.contentForm.removeControl(\"text_\"+para.paragraphNo)}),this.contentForm.addControl(\"text_\"+paragraph.paragraphNo,new fesm2015_forms.g(paragraph.html,fesm2015_forms.G.required)),this.contentForm.patchValue({selectedParagraphs:[paragraph]})}toggleParagraph(paragraph){let newParagraphs;const oldSelected=this.contentForm.value.selectedParagraphs;this.isParagraphSelected(paragraph)?(newParagraphs=oldSelected.filter(para=>para.paragraphNo!==paragraph.paragraphNo),this.contentForm.patchValue({selectedParagraphs:newParagraphs}),this.contentForm.removeControl(\"text_\"+paragraph.paragraphNo)):(newParagraphs=Object.assign([],oldSelected),newParagraphs.push(paragraph),newParagraphs.sort((para1,para2)=>para1.paragraphNo<para2.paragraphNo?-1:para1.paragraphNo>para2.paragraphNo?1:0),this.contentForm.addControl(\"text_\"+paragraph.paragraphNo,new fesm2015_forms.g(paragraph.html,fesm2015_forms.G.required)),this.contentForm.patchValue({selectedParagraphs:newParagraphs}))}onParagraphClicked(paragraph){this.multipleParagraphsAllowed?this.toggleParagraph(paragraph):this.setParagraph(paragraph)}saveAmendment(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){let text=\"\";const amendedParagraphs=this.paragraphs.map((paragraph,index)=>this.contentForm.value.selectedParagraphs.find(para=>para.paragraphNo===index)?(text=this.contentForm.value[\"text_\"+index],this.contentForm.value[\"text_\"+index]):null),newMotionValues=Object.assign(Object.assign({},this.contentForm.value),{title:this.translate.instant(\"Amendment to\")+\" \"+this.motion.getIdentifierOrTitle(),text:text,parent_id:this.motion.id,category_id:this.motion.category_id,tags_id:this.motion.tags_id,motion_block_id:this.motion.motion_block_id,amendment_paragraphs:amendedParagraphs}),motion=new create_motion.a;motion.deserialize(newMotionValues);const response=yield this.repo.create(motion);this.router.navigate([\"./motions/\"+response.id])}))}}return AmendmentCreateWizardComponent.ɵfac=function(t){return new(t||AmendmentCreateWizardComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(config_service.a),core.Tb(fesm2015_forms.f),core.Tb(motion_repository_service.a),core.Tb(fesm2015_router.a),core.Tb(fesm2015_router.f),core.Tb(prompt_service.a),core.Tb(snack_bar.a))},AmendmentCreateWizardComponent.ɵcmp=core.Nb({type:AmendmentCreateWizardComponent,selectors:[[\"os-amendment-create-wizard\"]],features:[core.Db],decls:30,vars:22,consts:[[\"saveText\",\"Create\",3,\"nav\",\"editMode\",\"isSaveButtonEnabled\",\"saveEvent\",\"cancelEditEvent\"],[1,\"title-slot\"],[1,\"extra-controls-slot\"],[4,\"ngIf\"],[3,\"formGroup\",\"ngSubmit\"],[\"linear\",\"\"],[\"matStepper\",\"\"],[3,\"completed\"],[\"matStepLabel\",\"\"],[1,\"amendment-create-wizard-wrapper\"],[\"class\",\"paragraph-row\",3,\"active\",\"click\",4,\"ngFor\",\"ngForOf\"],[4,\"ngFor\",\"ngForOf\"],[3,\"ngClass\"],[\"formControlName\",\"reason\",\"required\",\"\",3,\"init\"],[\"class\",\"red-warning-text\",4,\"ngIf\"],[\"mat-button\",\"\",3,\"disabled\",\"click\"],[1,\"upper\"],[\"type\",\"button\",\"mat-button\",\"\",3,\"click\"],[1,\"paragraph-row\",3,\"click\"],[\"class\",\"paragraph-select\",3,\"checked\",\"click\",4,\"ngIf\"],[\"class\",\"paragraph-select\",3,\"checked\",4,\"ngIf\"],[1,\"paragraph-text\",\"motion-text\",3,\"innerHTML\"],[1,\"paragraph-select\",3,\"checked\",\"click\"],[1,\"paragraph-select\",3,\"checked\"],[\"class\",\"line-number\",4,\"ngIf\"],[3,\"formControlName\",\"init\"],[1,\"line-number\"],[1,\"red-warning-text\"]],template:function(rf,ctx){if(1&rf&&(core.Zb(0,\"os-head-bar\",0),core.hc(\"saveEvent\",(function(){return ctx.saveAmendment()}))(\"cancelEditEvent\",(function(){return ctx.cancelCreation()})),core.Zb(1,\"div\",1),core.Zb(2,\"h2\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Zb(5,\"div\",2),core.Qc(6,AmendmentCreateWizardComponent_div_6_Template,5,4,\"div\",3),core.Qc(7,AmendmentCreateWizardComponent_div_7_Template,5,3,\"div\",3),core.Yb(),core.Yb(),core.Zb(8,\"form\",4),core.hc(\"ngSubmit\",(function(){return ctx.saveAmendment()})),core.Zb(9,\"mat-horizontal-stepper\",5,6),core.Zb(11,\"mat-step\",7),core.Qc(12,AmendmentCreateWizardComponent_ng_template_12_Template,2,3,\"ng-template\",8),core.Zb(13,\"div\",9),core.Qc(14,AmendmentCreateWizardComponent_section_14_Template,5,8,\"section\",10),core.Yb(),core.Yb(),core.Zb(15,\"mat-step\"),core.Qc(16,AmendmentCreateWizardComponent_ng_template_16_Template,2,3,\"ng-template\",8),core.Zb(17,\"h3\"),core.Zb(18,\"span\"),core.Sc(19),core.mc(20,\"translate\"),core.Yb(),core.Yb(),core.Qc(21,AmendmentCreateWizardComponent_section_21_Template,5,4,\"section\",11),core.Zb(22,\"h3\",12),core.Zb(23,\"span\"),core.Sc(24),core.mc(25,\"translate\"),core.Yb(),core.Sc(26,\" \"),core.Qc(27,AmendmentCreateWizardComponent_span_27_Template,2,0,\"span\",3),core.Yb(),core.Ub(28,\"editor\",13),core.Qc(29,AmendmentCreateWizardComponent_div_29_Template,3,3,\"div\",14),core.Yb(),core.Yb(),core.Yb()),2&rf){const _r2=core.Ec(10);core.tc(\"nav\",!1)(\"editMode\",!0)(\"isSaveButtonEnabled\",1===_r2.selectedIndex),core.Gb(3),core.Tc(core.nc(4,16,\"New amendment\")),core.Gb(3),core.tc(\"ngIf\",0===_r2.selectedIndex),core.Gb(1),core.tc(\"ngIf\",1===_r2.selectedIndex),core.Gb(1),core.tc(\"formGroup\",ctx.contentForm),core.Gb(3),core.tc(\"completed\",ctx.contentForm.value.selectedParagraphs.length>0),core.Gb(3),core.tc(\"ngForOf\",ctx.paragraphs),core.Gb(5),core.Tc(core.nc(20,18,\"Amendment text\")),core.Gb(2),core.tc(\"ngForOf\",ctx.contentForm.value.selectedParagraphs),core.Gb(1),core.tc(\"ngClass\",ctx.reasonRequired&&ctx.contentForm.get(\"reason\").invalid&&(ctx.contentForm.get(\"reason\").dirty||ctx.contentForm.get(\"reason\").touched)?\"red-warning-text\":\"\"),core.Gb(2),core.Tc(core.nc(25,20,\"Reason\")),core.Gb(3),core.tc(\"ngIf\",ctx.reasonRequired),core.Gb(1),core.tc(\"init\",ctx.tinyMceSettings),core.Gb(1),core.tc(\"ngIf\",ctx.reasonRequired&&ctx.contentForm.get(\"reason\").invalid&&(ctx.contentForm.get(\"reason\").dirty||ctx.contentForm.get(\"reason\").touched))}},directives:[head_bar_component.a,common.t,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,stepper.a,stepper.b,stepper.d,common.s,common.q,tinymce_tinymce_angular.a,fesm2015_forms.s,fesm2015_forms.i,fesm2015_forms.D,fesm2015_button.b,fesm2015_checkbox.a,fesm2015_radio.a],pipes:[ngx_translate_core.j,trust_pipe.a],styles:[\".amendment-create-wizard-wrapper .paragraph-row{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;cursor:pointer;padding:20px 0}.amendment-create-wizard-wrapper .paragraph-row.active{cursor:default}.amendment-create-wizard-wrapper .paragraph-row .paragraph-select{-ms-flex-preferred-size:50px;flex-basis:50px;-ms-flex-positive:0;flex-grow:0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.amendment-create-wizard-wrapper .paragraph-row .paragraph-text{-ms-flex:1;flex:1}.amendment-create-wizard-wrapper .motion-text{padding-left:40px;position:relative}.amendment-create-wizard-wrapper .motion-text blockquote,.amendment-create-wizard-wrapper .motion-text li,.amendment-create-wizard-wrapper .motion-text ol,.amendment-create-wizard-wrapper .motion-text p,.amendment-create-wizard-wrapper .motion-text ul{margin-top:0;margin-bottom:0}.amendment-create-wizard-wrapper .motion-text li{padding-bottom:10px}.amendment-create-wizard-wrapper .motion-text ol,.amendment-create-wizard-wrapper .motion-text ul{margin-left:15px;margin-bottom:0}.amendment-create-wizard-wrapper .motion-text .os-line-number{display:inline-block;font-size:0;line-height:0;width:22px;height:22px;position:absolute;left:0;padding-right:55px}.amendment-create-wizard-wrapper .motion-text .os-line-number:after{content:attr(data-line-number);position:absolute;top:13px;vertical-align:top;color:grey;font-size:12px;font-weight:400}\"],encapsulation:2}),AmendmentCreateWizardComponent})();var notify_service=__webpack_require__(\"iDj2\"),operator_service=__webpack_require__(\"OwvW\"),item_repository_service=__webpack_require__(\"InfO\"),category_repository_service=__webpack_require__(\"iTQr\"),change_recommendation_repository_service=__webpack_require__(\"pSLD\"),motion_block_repository_service=__webpack_require__(\"D5Qf\"),statute_paragraph_repository_service=__webpack_require__(\"Mluu\"),workflow_repository_service=__webpack_require__(\"s3dr\"),tag_repository_service=__webpack_require__(\"lv9T\"),user_repository_service=__webpack_require__(\"ZDbo\"),linenumbering_service=__webpack_require__(\"a9XT\"),personal_note_service=__webpack_require__(\"AP8A\"),viewport_service=__webpack_require__(\"KL36\"),motions_motion=__webpack_require__(\"iu6c\"),dialog_settings=__webpack_require__(\"Izkr\"),view_motion=__webpack_require__(\"jcOe\");class view_create_motion_ViewCreateMotion extends view_motion.a{constructor(motion){super(motion),this.getVerboseName=()=>{throw new Error(\"This should not be used\")}}get motion(){return this._model}get submittersAsUsers(){return this._submitterUsers}set submittersAsUsers(users){this._submitterUsers=users,this._model.submitters_id=users.map(user=>user.id)}}var view_motion_poll=__webpack_require__(\"2ErA\"),motions_constants=__webpack_require__(\"3Y4h\"),amendment_filter_list_service=__webpack_require__(\"VVsa\"),amendment_sort_list_service=__webpack_require__(\"AOla\"),local_permissions_service=__webpack_require__(\"f3I0\"),motion_filter_list_service=__webpack_require__(\"Q5D0\"),motion_pdf_export_service=__webpack_require__(\"y50V\"),motion_poll_dialog_service=__webpack_require__(\"SHqy\"),motion_poll_service=__webpack_require__(\"ykax\"),motion_sort_list_service=__webpack_require__(\"T9hM\"),dialog=__webpack_require__(\"0IaG\"),diff_service=__webpack_require__(\"4X/P\");function MotionChangeRecommendationDialogComponent_mat_radio_button_7_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-radio-button\",12),core.Sc(1),core.Yb()),2&rf){const radio_r4=ctx.$implicit;core.tc(\"value\",radio_r4.value),core.Gb(1),core.Tc(radio_r4.title)}}function MotionChangeRecommendationDialogComponent_h4_8_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"h4\"),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Sc(4),core.Yb()),2&rf){const ctx_r2=core.lc();core.Gb(2),core.Tc(core.nc(3,2,\"Changed version in line\")),core.Gb(2),core.Uc(\" \",ctx_r2.lineRange.from,\": \")}}function MotionChangeRecommendationDialogComponent_h4_9_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"h4\"),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Sc(4),core.Zb(5,\"span\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Sc(8),core.Yb()),2&rf){const ctx_r3=core.lc();core.Gb(2),core.Tc(core.nc(3,4,\"Changed version in line\")),core.Gb(2),core.Uc(\" \",ctx_r3.lineRange.from,\" \"),core.Gb(2),core.Tc(core.nc(7,6,\"to\")),core.Gb(2),core.Uc(\" \",ctx_r3.lineRange.to-1,\": \")}}let motion_change_recommendation_dialog_component_MotionChangeRecommendationDialogComponent=(()=>{class MotionChangeRecommendationDialogComponent extends base_view.a{constructor(data,title,translate,matSnackBar,formBuilder,repo,dialogRef){super(title,translate,matSnackBar),this.data=data,this.translate=translate,this.formBuilder=formBuilder,this.repo=repo,this.dialogRef=dialogRef,this.editReco=!1,this.newReco=!1,this.replacementTypes=[{value:diff_service.b.TYPE_REPLACEMENT,title:this.translate.instant(\"Replacement\")},{value:diff_service.b.TYPE_INSERTION,title:this.translate.instant(\"Insertion\")},{value:diff_service.b.TYPE_DELETION,title:this.translate.instant(\"Deletion\")}],this.editReco=data.editChangeRecommendation,this.newReco=data.newChangeRecommendation,this.changeReco=data.changeRecommendation,this.lineRange=data.lineRange,this.tinyMceSettings.toolbar=\"undo redo | bold italic underline strikethrough\\n            | removeformat | bullist numlist | outdent indent | link charmap code\",this.createForm()}createForm(){this.contentForm=this.formBuilder.group({text:[this.changeReco.text,fesm2015_forms.G.required],diffType:[this.changeReco.type,fesm2015_forms.G.required],public:[!this.changeReco.internal]})}saveChangeRecommendation(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){this.changeReco.updateChangeReco(this.contentForm.controls.diffType.value,this.contentForm.controls.text.value,!this.contentForm.controls.public.value);try{this.newReco?(yield this.repo.createByViewModel(this.changeReco),this.dialogRef.close()):(yield this.repo.update(this.changeReco.changeRecommendation,this.changeReco),this.dialogRef.close())}catch(e){this.raiseError(e)}}))}}return MotionChangeRecommendationDialogComponent.ɵfac=function(t){return new(t||MotionChangeRecommendationDialogComponent)(core.Tb(dialog.a),core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(fesm2015_forms.f),core.Tb(change_recommendation_repository_service.a),core.Tb(dialog.h))},MotionChangeRecommendationDialogComponent.ɵcmp=core.Nb({type:MotionChangeRecommendationDialogComponent,selectors:[[\"os-motion-change-recommendation\"]],features:[core.Db],decls:24,vars:17,consts:[[\"mat-dialog-title\",\"\"],[\"mat-dialog-content\",\"\"],[1,\"motion-content\",3,\"formGroup\",\"ngSubmit\"],[\"formControlName\",\"diffType\"],[\"rGroup\",\"\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[4,\"ngIf\"],[\"formControlName\",\"text\",3,\"init\"],[\"formControlName\",\"public\"],[\"mat-dialog-actions\",\"\"],[\"mat-button\",\"\",3,\"click\"],[\"mat-button\",\"\",\"mat-dialog-close\",\"\"],[3,\"value\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"h1\",0),core.Sc(1),core.mc(2,\"translate\"),core.Yb(),core.Zb(3,\"div\",1),core.Zb(4,\"form\",2),core.hc(\"ngSubmit\",(function(){return ctx.saveChangeRecommendation()})),core.Zb(5,\"mat-radio-group\",3,4),core.Qc(7,MotionChangeRecommendationDialogComponent_mat_radio_button_7_Template,2,2,\"mat-radio-button\",5),core.Yb(),core.Qc(8,MotionChangeRecommendationDialogComponent_h4_8_Template,5,4,\"h4\",6),core.Qc(9,MotionChangeRecommendationDialogComponent_h4_9_Template,9,8,\"h4\",6),core.Zb(10,\"div\"),core.Ub(11,\"editor\",7),core.Yb(),core.Zb(12,\"mat-checkbox\",8),core.Sc(13),core.mc(14,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(15,\"div\",9),core.Zb(16,\"button\",10),core.hc(\"click\",(function(){return ctx.saveChangeRecommendation()})),core.Zb(17,\"span\"),core.Sc(18),core.mc(19,\"translate\"),core.Yb(),core.Yb(),core.Zb(20,\"button\",11),core.Zb(21,\"span\"),core.Sc(22),core.mc(23,\"translate\"),core.Yb(),core.Yb(),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,9,\"New change recommendation\")),core.Gb(3),core.tc(\"formGroup\",ctx.contentForm),core.Gb(3),core.tc(\"ngForOf\",ctx.replacementTypes),core.Gb(1),core.tc(\"ngIf\",ctx.lineRange.to==ctx.lineRange.from+1),core.Gb(1),core.tc(\"ngIf\",ctx.lineRange.to!=ctx.lineRange.from+1),core.Gb(2),core.tc(\"init\",ctx.tinyMceSettings),core.Gb(2),core.Tc(core.nc(14,11,\"Public\")),core.Gb(5),core.Tc(core.nc(19,13,\"Save\")),core.Gb(4),core.Tc(core.nc(23,15,\"Cancel\")))},directives:[dialog.i,dialog.f,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,fesm2015_radio.b,fesm2015_forms.s,fesm2015_forms.i,common.s,common.t,tinymce_tinymce_angular.a,fesm2015_checkbox.a,dialog.c,fesm2015_button.b,dialog.d,fesm2015_radio.a],pipes:[ngx_translate_core.j],styles:[\"\"]}),MotionChangeRecommendationDialogComponent})();var form_field=__webpack_require__(\"kmnG\"),input=__webpack_require__(\"qFsG\");let motion_title_change_recommendation_dialog_component_MotionTitleChangeRecommendationDialogComponent=(()=>{class MotionTitleChangeRecommendationDialogComponent extends base_view.a{constructor(data,title,translate,matSnackBar,formBuilder,repo,dialogRef){super(title,translate,matSnackBar),this.data=data,this.translate=translate,this.formBuilder=formBuilder,this.repo=repo,this.dialogRef=dialogRef,this.editReco=!1,this.newReco=!1,this.editReco=data.editChangeRecommendation,this.newReco=data.newChangeRecommendation,this.changeReco=data.changeRecommendation,this.createForm()}createForm(){this.contentForm=this.formBuilder.group({title:[this.changeReco.text,fesm2015_forms.G.required],public:[!this.changeReco.internal]})}saveChangeRecommendation(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){this.changeReco.updateChangeReco(diff_service.b.TYPE_REPLACEMENT,this.contentForm.controls.title.value,!this.contentForm.controls.public.value);try{this.newReco?(yield this.repo.createByViewModel(this.changeReco),this.dialogRef.close()):(yield this.repo.update(this.changeReco.changeRecommendation,this.changeReco),this.dialogRef.close())}catch(e){this.raiseError(e)}}))}}return MotionTitleChangeRecommendationDialogComponent.ɵfac=function(t){return new(t||MotionTitleChangeRecommendationDialogComponent)(core.Tb(dialog.a),core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(fesm2015_forms.f),core.Tb(change_recommendation_repository_service.a),core.Tb(dialog.h))},MotionTitleChangeRecommendationDialogComponent.ɵcmp=core.Nb({type:MotionTitleChangeRecommendationDialogComponent,selectors:[[\"os-title-motion-change-recommendation-dialog\"]],features:[core.Db],decls:20,vars:16,consts:[[\"mat-dialog-title\",\"\"],[1,\"motion-content\",3,\"formGroup\",\"ngSubmit\"],[\"matInput\",\"\",\"formControlName\",\"title\",3,\"placeholder\"],[\"formControlName\",\"public\"],[\"mat-button\",\"\",3,\"click\"],[\"mat-button\",\"\",\"mat-dialog-close\",\"\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"h1\",0),core.Sc(1),core.mc(2,\"translate\"),core.Yb(),core.Zb(3,\"mat-dialog-content\"),core.Zb(4,\"form\",1),core.hc(\"ngSubmit\",(function(){return ctx.saveChangeRecommendation()})),core.Zb(5,\"mat-form-field\"),core.Ub(6,\"input\",2),core.mc(7,\"translate\"),core.Yb(),core.Zb(8,\"mat-checkbox\",3),core.Sc(9),core.mc(10,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(11,\"mat-dialog-actions\"),core.Zb(12,\"button\",4),core.hc(\"click\",(function(){return ctx.saveChangeRecommendation()})),core.Zb(13,\"span\"),core.Sc(14),core.mc(15,\"translate\"),core.Yb(),core.Yb(),core.Zb(16,\"button\",5),core.Zb(17,\"span\"),core.Sc(18),core.mc(19,\"translate\"),core.Yb(),core.Yb(),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,6,\"New change recommendation\")),core.Gb(3),core.tc(\"formGroup\",ctx.contentForm),core.Gb(2),core.uc(\"placeholder\",core.nc(7,8,\"Changed title\")),core.Gb(3),core.Tc(core.nc(10,10,\"Public\")),core.Gb(5),core.Tc(core.nc(15,12,\"Save\")),core.Gb(4),core.Tc(core.nc(19,14,\"Cancel\")))},directives:[dialog.i,dialog.f,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,form_field.c,input.b,fesm2015_forms.c,fesm2015_forms.s,fesm2015_forms.i,fesm2015_checkbox.a,dialog.c,fesm2015_button.b,dialog.d],pipes:[ngx_translate_core.j],styles:[\".motion-content .mat-form-field{width:100%}.mat-dialog-content{overflow:hidden}\"],encapsulation:2}),MotionTitleChangeRecommendationDialogComponent})();var menu=__webpack_require__(\"STbY\"),icon=__webpack_require__(\"NFeN\"),icon_container_component=__webpack_require__(\"vYAO\"),speaker_button_component=__webpack_require__(\"40uZ\"),perms_directive=__webpack_require__(\"3Xi6\"),divider=__webpack_require__(\"f0Cb\"),projector_button_component=__webpack_require__(\"Tp2j\"),tooltip=__webpack_require__(\"Qu3c\"),card=__webpack_require__(\"Wp6s\"),motion_comment_section_repository_service=__webpack_require__(\"+B0n\"),meta_text_block_component=__webpack_require__(\"5N+Y\");function MotionCommentsComponent_div_0_os_meta_text_block_1_ng_container_5_div_1_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"div\",13),core.mc(1,\"trust\")),2&rf){const section_r1=core.lc(3).$implicit,ctx_r10=core.lc();core.tc(\"innerHTML\",core.oc(1,1,ctx_r10.comments[section_r1.id].comment,\"html\"),core.Jc)}}function MotionCommentsComponent_div_0_os_meta_text_block_1_ng_container_5_div_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",14),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"No comment\"),\" \"))}function MotionCommentsComponent_div_0_os_meta_text_block_1_ng_container_5_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Qc(1,MotionCommentsComponent_div_0_os_meta_text_block_1_ng_container_5_div_1_Template,2,4,\"div\",11),core.Qc(2,MotionCommentsComponent_div_0_os_meta_text_block_1_ng_container_5_div_2_Template,3,3,\"div\",12),core.Wb()),2&rf){const section_r1=core.lc(2).$implicit,ctx_r3=core.lc();core.Gb(1),core.tc(\"ngIf\",ctx_r3.comments[section_r1.id]),core.Gb(1),core.tc(\"ngIf\",!ctx_r3.comments[section_r1.id]||!ctx_r3.comments[section_r1.id].comment)}}function MotionCommentsComponent_div_0_os_meta_text_block_1_form_6_Template(rf,ctx){if(1&rf){const _r15=core.ac();core.Zb(0,\"form\",15),core.Zb(1,\"editor\",16),core.hc(\"onInit\",(function($event){return core.Ic(_r15),core.lc(3).onInitTinyMce($event)}))(\"onRemove\",(function($event){return core.Ic(_r15),core.lc(3).onLeaveTinyMce($event)})),core.Yb(),core.Yb()}if(2&rf){const section_r1=core.lc(2).$implicit,ctx_r4=core.lc();core.tc(\"formGroup\",ctx_r4.commentForms[section_r1.id]),core.Gb(1),core.tc(\"id\",section_r1.id)(\"init\",ctx_r4.tinyMceSettings)}}function MotionCommentsComponent_div_0_os_meta_text_block_1_div_7_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Ub(4,\"br\"),core.Zb(5,\"span\",17),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(2),core.Tc(core.nc(3,2,\"Touch the book icon to enter text\")),core.Gb(4),core.Tc(core.nc(7,4,\"Do not forget to save your changes!\")))}function MotionCommentsComponent_div_0_os_meta_text_block_1_button_9_Template(rf,ctx){if(1&rf){const _r20=core.ac();core.Zb(0,\"button\",18),core.hc(\"click\",(function(){core.Ic(_r20);const section_r1=core.lc(2).$implicit;return core.lc().editComment(section_r1)})),core.mc(1,\"translate\"),core.Zb(2,\"mat-icon\"),core.Sc(3,\"edit\"),core.Yb(),core.Yb()}2&rf&&core.uc(\"matTooltip\",core.nc(1,1,\"Edit\"))}function MotionCommentsComponent_div_0_os_meta_text_block_1_button_10_Template(rf,ctx){if(1&rf){const _r23=core.ac();core.Zb(0,\"button\",18),core.hc(\"click\",(function(){core.Ic(_r23);const section_r1=core.lc(2).$implicit;return core.lc().pdfExportSection(section_r1)})),core.mc(1,\"translate\"),core.Zb(2,\"mat-icon\"),core.Sc(3,\"picture_as_pdf\"),core.Yb(),core.Yb()}2&rf&&core.uc(\"matTooltip\",core.nc(1,1,\"Export comment\"))}function MotionCommentsComponent_div_0_os_meta_text_block_1_button_11_Template(rf,ctx){if(1&rf){const _r26=core.ac();core.Zb(0,\"button\",19),core.hc(\"click\",(function(){core.Ic(_r26);const section_r1=core.lc(2).$implicit;return core.lc().saveComment(section_r1)})),core.mc(1,\"translate\"),core.Zb(2,\"mat-icon\"),core.Sc(3,\"save\"),core.Yb(),core.Yb()}2&rf&&core.uc(\"matTooltip\",core.nc(1,1,\"Save\"))}function MotionCommentsComponent_div_0_os_meta_text_block_1_button_12_Template(rf,ctx){if(1&rf){const _r29=core.ac();core.Zb(0,\"button\",18),core.hc(\"click\",(function(){core.Ic(_r29);const section_r1=core.lc(2).$implicit;return core.lc().cancelEditing(section_r1)})),core.mc(1,\"translate\"),core.Zb(2,\"mat-icon\"),core.Sc(3,\"close\"),core.Yb(),core.Yb()}2&rf&&core.uc(\"matTooltip\",core.nc(1,1,\"Cancel edit\"))}function MotionCommentsComponent_div_0_os_meta_text_block_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"os-meta-text-block\",3),core.Xb(1,4),core.Zb(2,\"span\"),core.Sc(3),core.Yb(),core.Wb(),core.Xb(4,5),core.Qc(5,MotionCommentsComponent_div_0_os_meta_text_block_1_ng_container_5_Template,3,2,\"ng-container\",6),core.Qc(6,MotionCommentsComponent_div_0_os_meta_text_block_1_form_6_Template,2,3,\"form\",7),core.Qc(7,MotionCommentsComponent_div_0_os_meta_text_block_1_div_7_Template,8,6,\"div\",6),core.Wb(),core.Xb(8,8),core.Qc(9,MotionCommentsComponent_div_0_os_meta_text_block_1_button_9_Template,4,3,\"button\",9),core.Qc(10,MotionCommentsComponent_div_0_os_meta_text_block_1_button_10_Template,4,3,\"button\",9),core.Qc(11,MotionCommentsComponent_div_0_os_meta_text_block_1_button_11_Template,4,3,\"button\",10),core.Qc(12,MotionCommentsComponent_div_0_os_meta_text_block_1_button_12_Template,4,3,\"button\",9),core.Wb(),core.Yb()),2&rf){const section_r1=core.lc().$implicit,ctx_r2=core.lc();core.tc(\"showActionRow\",ctx_r2.canEditSection(section_r1)||ctx_r2.comments[section_r1.id].comment)(\"disableExpandControl\",ctx_r2.isCommentEdited(section_r1)),core.Gb(3),core.Tc(section_r1.getTitle()),core.Gb(2),core.tc(\"ngIf\",!ctx_r2.isCommentEdited(section_r1)),core.Gb(1),core.tc(\"ngIf\",ctx_r2.isCommentEdited(section_r1)),core.Gb(1),core.tc(\"ngIf\",ctx_r2.saveHint),core.Gb(2),core.tc(\"ngIf\",!ctx_r2.isCommentEdited(section_r1)&&ctx_r2.canEditSection(section_r1)),core.Gb(1),core.tc(\"ngIf\",!ctx_r2.commentForms[section_r1.id]&&(null==ctx_r2.comments[section_r1.id]?null:ctx_r2.comments[section_r1.id].comment)),core.Gb(1),core.tc(\"ngIf\",ctx_r2.isCommentEdited(section_r1)),core.Gb(1),core.tc(\"ngIf\",ctx_r2.isCommentEdited(section_r1))}}function MotionCommentsComponent_div_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",1),core.Qc(1,MotionCommentsComponent_div_0_os_meta_text_block_1_Template,13,10,\"os-meta-text-block\",2),core.Yb()),2&rf){const section_r1=ctx.$implicit,ctx_r0=core.lc();core.Gb(1),core.tc(\"ngIf\",ctx_r0.sectionVisible(section_r1))}}let motion_comments_component_MotionCommentsComponent=(()=>{class MotionCommentsComponent extends base_view.a{constructor(commentRepo,formBuilder,operator,pdfService,titleService,translate,matSnackBar){super(titleService,translate,matSnackBar),this.commentRepo=commentRepo,this.formBuilder=formBuilder,this.operator=operator,this.pdfService=pdfService,this.sections=[],this.commentForms={},this.comments={},this.error=!1}set motion(motion){this._motion=motion,this.updateComments()}get motion(){return this._motion}ngOnInit(){this.subscriptions.push(this.commentRepo.getViewModelListObservable().subscribe(sections=>{sections&&sections.length&&(this.sections=sections,this.filterSections())}))}filterSections(){this.sections&&this.sections.length&&(this.sections=this.sections.filter(section=>this.operator.isInGroupIds(...section.read_groups_id)),this.updateComments())}canEditSection(section){return this.operator.isInGroupIds(...section.write_groups_id)}updateComments(){this.comments={},this.motion&&this.sections&&this.sections.forEach(section=>{this.comments[section.id]=this.motion.getCommentForSection(section)})}editComment(section){const comment=this.comments[section.id],form=this.formBuilder.group({comment:[comment?comment.comment:\"\"]});this.commentForms[section.id]=form}saveComment(section){const commentText=this.commentForms[section.id].get(\"comment\").value;this.commentRepo.saveComment(this.motion,section,commentText).then(()=>{this.cancelEditing(section)},error=>{this.error=!0,this.raiseError(`${error} :\"${section.name}\"`)})}cancelEditing(section){delete this.commentForms[section.id]}sectionVisible(section){return!!(this.canEditSection(section)||this.comments[section.id]&&this.comments[section.id].comment)}isCommentEdited(section){return Object.keys(this.commentForms).includes(\"\"+section.id)}pdfExportSection(section){this.pdfService.exportComment(section,this.motion)}}return MotionCommentsComponent.ɵfac=function(t){return new(t||MotionCommentsComponent)(core.Tb(motion_comment_section_repository_service.a),core.Tb(fesm2015_forms.f),core.Tb(operator_service.a),core.Tb(motion_pdf_export_service.a),core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a))},MotionCommentsComponent.ɵcmp=core.Nb({type:MotionCommentsComponent,selectors:[[\"os-motion-comments\"]],inputs:{motion:\"motion\"},features:[core.Db],decls:1,vars:1,consts:[[\"class\",\"text-warning\",4,\"ngFor\",\"ngForOf\"],[1,\"text-warning\"],[\"icon\",\"comment\",3,\"showActionRow\",\"disableExpandControl\",4,\"ngIf\"],[\"icon\",\"comment\",3,\"showActionRow\",\"disableExpandControl\"],[1,\"meta-text-block-title\"],[1,\"meta-text-block-content\"],[4,\"ngIf\"],[3,\"formGroup\",4,\"ngIf\"],[1,\"meta-text-block-action-row\"],[\"mat-icon-button\",\"\",3,\"matTooltip\",\"click\",4,\"ngIf\"],[\"mat-icon-button\",\"\",\"color\",\"warn\",3,\"matTooltip\",\"click\",4,\"ngIf\"],[3,\"innerHTML\",4,\"ngIf\"],[\"class\",\"no-content\",4,\"ngIf\"],[3,\"innerHTML\"],[1,\"no-content\"],[3,\"formGroup\"],[\"formControlName\",\"comment\",3,\"id\",\"init\",\"onInit\",\"onRemove\"],[1,\"red-warning-text\"],[\"mat-icon-button\",\"\",3,\"matTooltip\",\"click\"],[\"mat-icon-button\",\"\",\"color\",\"warn\",3,\"matTooltip\",\"click\"]],template:function(rf,ctx){1&rf&&core.Qc(0,MotionCommentsComponent_div_0_Template,2,1,\"div\",0),2&rf&&core.tc(\"ngForOf\",ctx.sections)},directives:[common.s,common.t,meta_text_block_component.a,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,tinymce_tinymce_angular.a,fesm2015_forms.s,fesm2015_forms.i,fesm2015_button.b,tooltip.c,icon.a],pipes:[trust_pipe.a,ngx_translate_core.j],styles:[\"mat-form-field[_ngcontent-%COMP%]{width:100%}\"]}),MotionCommentsComponent})();function PersonalNoteComponent_button_6_Template(rf,ctx){if(1&rf){const _r8=core.ac();core.Zb(0,\"button\",8),core.hc(\"click\",(function(){return core.Ic(_r8),core.lc().editPersonalNote()})),core.mc(1,\"translate\"),core.Zb(2,\"mat-icon\"),core.Sc(3,\"edit\"),core.Yb(),core.Yb()}2&rf&&core.uc(\"matTooltip\",core.nc(1,1,\"Edit\"))}function PersonalNoteComponent_button_7_Template(rf,ctx){if(1&rf){const _r10=core.ac();core.Zb(0,\"button\",8),core.hc(\"click\",(function(){return core.Ic(_r10),core.lc().printPersonalNote()})),core.mc(1,\"translate\"),core.Zb(2,\"mat-icon\"),core.Sc(3,\"picture_as_pdf\"),core.Yb(),core.Yb()}2&rf&&core.uc(\"matTooltip\",core.nc(1,1,\"Export personal note only\"))}function PersonalNoteComponent_button_8_Template(rf,ctx){if(1&rf){const _r12=core.ac();core.Zb(0,\"button\",9),core.hc(\"click\",(function(){return core.Ic(_r12),core.lc().savePersonalNote()})),core.mc(1,\"translate\"),core.Zb(2,\"mat-icon\"),core.Sc(3,\"save\"),core.Yb(),core.Yb()}2&rf&&core.uc(\"matTooltip\",core.nc(1,1,\"Save\"))}function PersonalNoteComponent_button_9_Template(rf,ctx){if(1&rf){const _r14=core.ac();core.Zb(0,\"button\",8),core.hc(\"click\",(function(){return core.Ic(_r14),core.lc().isEditMode=!1})),core.mc(1,\"translate\"),core.Zb(2,\"mat-icon\"),core.Sc(3,\"close\"),core.Yb(),core.Yb()}2&rf&&core.uc(\"matTooltip\",core.nc(1,1,\"Cancel edit\"))}function PersonalNoteComponent_ng_container_11_div_1_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"div\",12),core.mc(1,\"trust\")),2&rf){const ctx_r15=core.lc(2);core.tc(\"innerHTML\",core.oc(1,1,ctx_r15.personalNoteText,\"html\"),core.Jc)}}function PersonalNoteComponent_ng_container_11_div_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",13),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"No personal note\"),\" \"))}function PersonalNoteComponent_ng_container_11_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Qc(1,PersonalNoteComponent_ng_container_11_div_1_Template,2,4,\"div\",10),core.Qc(2,PersonalNoteComponent_ng_container_11_div_2_Template,3,3,\"div\",11),core.Wb()),2&rf){const ctx_r4=core.lc();core.Gb(1),core.tc(\"ngIf\",ctx_r4.motion&&ctx_r4.motion.personalNote),core.Gb(1),core.tc(\"ngIf\",!ctx_r4.motion||!ctx_r4.motion.hasNotes)}}function PersonalNoteComponent_form_12_Template(rf,ctx){if(1&rf){const _r18=core.ac();core.Zb(0,\"form\",14),core.Zb(1,\"editor\",15),core.hc(\"onInit\",(function($event){return core.Ic(_r18),core.lc().onInitTinyMce($event)}))(\"onRemove\",(function($event){return core.Ic(_r18),core.lc().onLeaveTinyMce($event)})),core.Yb(),core.Yb()}if(2&rf){const ctx_r5=core.lc();core.tc(\"formGroup\",ctx_r5.personalNoteForm),core.Gb(1),core.tc(\"init\",ctx_r5.tinyMceSettings)}}function PersonalNoteComponent_div_13_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Ub(4,\"br\"),core.Zb(5,\"span\",16),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(2),core.Tc(core.nc(3,2,\"Touch the book icon to enter text\")),core.Gb(4),core.Tc(core.nc(7,4,\"Do not forget to save your changes!\")))}let personal_note_component_PersonalNoteComponent=(()=>{class PersonalNoteComponent extends base_view.a{constructor(title,translate,matSnackBar,personalNoteService,formBuilder,pdfService){super(title,translate,matSnackBar),this.personalNoteService=personalNoteService,this.pdfService=pdfService,this.isEditMode=!1,this.personalNoteForm=formBuilder.group({note:[\"\"]})}get personalNoteText(){return this.motion.personalNoteText}editPersonalNote(){this.personalNoteForm.reset(),this.personalNoteForm.patchValue({note:this.motion.personalNote?this.motion.personalNote.note:\"\"}),this.isEditMode=!0}savePersonalNote(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){let content;this.motion.personalNote?(content=Object.assign({},this.motion.personalNote),content.note=this.personalNoteForm.get(\"note\").value):content={note:this.personalNoteForm.get(\"note\").value,star:!1};try{yield this.personalNoteService.savePersonalNote(this.motion.motion,content),this.isEditMode=!1}catch(e){this.raiseError(e)}}))}printPersonalNote(){this.pdfService.exportPersonalNote(this.motion.personalNote,this.motion)}}return PersonalNoteComponent.ɵfac=function(t){return new(t||PersonalNoteComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(personal_note_service.a),core.Tb(fesm2015_forms.f),core.Tb(motion_pdf_export_service.a))},PersonalNoteComponent.ɵcmp=core.Nb({type:PersonalNoteComponent,selectors:[[\"os-personal-note\"]],inputs:{motion:\"motion\"},features:[core.Db],decls:14,vars:11,consts:[[\"showActionRow\",\"true\",\"icon\",\"speaker_notes\",3,\"disableExpandControl\"],[1,\"meta-text-block-title\"],[1,\"meta-text-block-action-row\"],[\"mat-icon-button\",\"\",3,\"matTooltip\",\"click\",4,\"ngIf\"],[\"mat-icon-button\",\"\",\"color\",\"warn\",3,\"matTooltip\",\"click\",4,\"ngIf\"],[1,\"meta-text-block-content\"],[4,\"ngIf\"],[3,\"formGroup\",4,\"ngIf\"],[\"mat-icon-button\",\"\",3,\"matTooltip\",\"click\"],[\"mat-icon-button\",\"\",\"color\",\"warn\",3,\"matTooltip\",\"click\"],[3,\"innerHTML\",4,\"ngIf\"],[\"class\",\"no-content\",4,\"ngIf\"],[3,\"innerHTML\"],[1,\"no-content\"],[3,\"formGroup\"],[\"formControlName\",\"note\",3,\"init\",\"onInit\",\"onRemove\"],[1,\"red-warning-text\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"os-meta-text-block\",0),core.Xb(1,1),core.Zb(2,\"span\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Wb(),core.Xb(5,2),core.Qc(6,PersonalNoteComponent_button_6_Template,4,3,\"button\",3),core.Qc(7,PersonalNoteComponent_button_7_Template,4,3,\"button\",3),core.Qc(8,PersonalNoteComponent_button_8_Template,4,3,\"button\",4),core.Qc(9,PersonalNoteComponent_button_9_Template,4,3,\"button\",3),core.Wb(),core.Xb(10,5),core.Qc(11,PersonalNoteComponent_ng_container_11_Template,3,2,\"ng-container\",6),core.Qc(12,PersonalNoteComponent_form_12_Template,2,2,\"form\",7),core.Qc(13,PersonalNoteComponent_div_13_Template,8,6,\"div\",6),core.Wb(),core.Yb()),2&rf&&(core.tc(\"disableExpandControl\",!0),core.Gb(3),core.Tc(core.nc(4,9,\"Personal note\")),core.Gb(3),core.tc(\"ngIf\",!ctx.isEditMode),core.Gb(1),core.tc(\"ngIf\",!ctx.isEditMode&&ctx.motion&&ctx.motion.personalNote&&ctx.motion.personalNote.note),core.Gb(1),core.tc(\"ngIf\",ctx.isEditMode),core.Gb(1),core.tc(\"ngIf\",ctx.isEditMode),core.Gb(2),core.tc(\"ngIf\",!ctx.isEditMode),core.Gb(1),core.tc(\"ngIf\",ctx.isEditMode),core.Gb(1),core.tc(\"ngIf\",ctx.saveHint))},directives:[meta_text_block_component.a,common.t,fesm2015_button.b,tooltip.c,icon.a,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,tinymce_tinymce_angular.a,fesm2015_forms.s,fesm2015_forms.i],pipes:[ngx_translate_core.j,trust_pipe.a],styles:[\"mat-form-field[_ngcontent-%COMP%]{width:100%}\"]}),PersonalNoteComponent})();var BehaviorSubject=__webpack_require__(\"2Vo4\"),view_model_store_service=__webpack_require__(\"oJo9\"),view_user=__webpack_require__(\"8adq\"),chips=__webpack_require__(\"A5z7\"),sorting_list_component=__webpack_require__(\"IBZR\"),search_value_selector_component=__webpack_require__(\"oqD5\");function ManageSubmittersComponent_button_4_Template(rf,ctx){if(1&rf){const _r4=core.ac();core.Zb(0,\"button\",3),core.hc(\"click\",(function(){return core.Ic(_r4),core.lc().onEdit()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"edit\"),core.Yb(),core.Yb()}}function ManageSubmittersComponent_div_5_mat_chip_list_1_mat_basic_chip_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-basic-chip\",7),core.Sc(1),core.Yb()),2&rf){const user_r6=core.lc().$implicit;core.Gb(1),core.Tc(user_r6.getTitle())}}function ManageSubmittersComponent_div_5_mat_chip_list_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-chip-list\",5),core.Qc(1,ManageSubmittersComponent_div_5_mat_chip_list_1_mat_basic_chip_1_Template,2,1,\"mat-basic-chip\",6),core.Yb()),2&rf){const user_r6=ctx.$implicit;core.Gb(1),core.tc(\"ngIf\",user_r6)}}function ManageSubmittersComponent_div_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,ManageSubmittersComponent_div_5_mat_chip_list_1_Template,2,1,\"mat-chip-list\",4),core.Yb()),2&rf){const ctx_r1=core.lc();core.Gb(1),core.tc(\"ngForOf\",ctx_r1.motion.submittersAsUsers)}}function ManageSubmittersComponent_div_6_ng_template_2_Template(rf,ctx){if(1&rf){const _r13=core.ac();core.Zb(0,\"button\",11),core.hc(\"click\",(function(){core.Ic(_r13);const user_r11=ctx.$implicit;return core.lc(2).onRemove(user_r11)})),core.mc(1,\"translate\"),core.Zb(2,\"mat-icon\"),core.Sc(3,\"close\"),core.Yb(),core.Yb()}2&rf&&core.uc(\"matTooltip\",core.nc(1,1,\"Remove\"))}function ManageSubmittersComponent_div_6_form_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"form\",12),core.Zb(1,\"mat-form-field\"),core.Ub(2,\"os-search-value-selector\",13),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf){const ctx_r10=core.lc(2);core.tc(\"formGroup\",ctx_r10.addSubmitterForm),core.Gb(2),core.uc(\"placeholder\",core.nc(3,3,\"Select or search new submitter ...\")),core.tc(\"inputListValues\",ctx_r10.users)}}function ManageSubmittersComponent_div_6_Template(rf,ctx){if(1&rf){const _r15=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"os-sorting-list\",8),core.hc(\"sortEvent\",(function($event){return core.Ic(_r15),core.lc().onSortingChange($event)})),core.Qc(2,ManageSubmittersComponent_div_6_ng_template_2_Template,4,3,\"ng-template\"),core.Yb(),core.Qc(3,ManageSubmittersComponent_div_6_form_3_Template,4,5,\"form\",9),core.Zb(4,\"p\"),core.Zb(5,\"button\",10),core.hc(\"click\",(function(){return core.Ic(_r15),core.lc().onSave()})),core.Zb(6,\"span\"),core.Sc(7),core.mc(8,\"translate\"),core.Yb(),core.Yb(),core.Zb(9,\"button\",10),core.hc(\"click\",(function(){return core.Ic(_r15),core.lc().onCancel()})),core.Zb(10,\"span\"),core.Sc(11),core.mc(12,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r2=core.lc();core.Gb(1),core.tc(\"input\",ctx_r2.editSubmitterObservable)(\"live\",!0)(\"count\",!1),core.Gb(2),core.tc(\"ngIf\",ctx_r2.users&&ctx_r2.users.value.length>0),core.Gb(4),core.Tc(core.nc(8,6,\"Save\")),core.Gb(4),core.Tc(core.nc(12,8,\"Cancel\"))}}let manage_submitters_component_ManageSubmittersComponent=(()=>{class ManageSubmittersComponent extends base_view.a{constructor(title,translate,matSnackBar,viewModelStore,motionRepository,userRepository,perms){super(title,translate,matSnackBar),this.viewModelStore=viewModelStore,this.motionRepository=motionRepository,this.userRepository=userRepository,this.perms=perms,this.editSubmitterSubject=new BehaviorSubject.a([]),this.isEditMode=!1,this.addSubmitterForm=new fesm2015_forms.j({userId:new fesm2015_forms.g([])}),this.editSubmitterObservable=this.editSubmitterSubject.asObservable(),this.addSubmitterForm.valueChanges.subscribe(formResult=>{formResult&&formResult.userId&&this.addNewSubmitter(formResult.userId)})}onEdit(){this.isEditMode=!0,this.editSubmitterSubject.next(this.motion.submittersAsUsers),this.addSubmitterForm.reset(),this.users=this.userRepository.getViewModelListBehaviorSubject()}onSave(){this.motionRepository.setSubmitters(this.motion,this.editSubmitterSubject.getValue()).then(()=>this.isEditMode=!1,this.raiseError)}onCancel(){this.isEditMode=!1}addNewSubmitter(userId){const submitters=this.editSubmitterSubject.getValue();submitters.map(u=>u.id).includes(userId)||(submitters.push(this.viewModelStore.get(view_user.a,userId)),this.editSubmitterSubject.next(submitters)),this.addSubmitterForm.reset()}onSortingChange(users){this.editSubmitterSubject.next(users)}onRemove(user){const submitters=this.editSubmitterSubject.getValue();this.editSubmitterSubject.next(submitters.filter(u=>u.id!==user.id))}}return ManageSubmittersComponent.ɵfac=function(t){return new(t||ManageSubmittersComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(view_model_store_service.a),core.Tb(motion_repository_service.a),core.Tb(user_repository_service.a),core.Tb(local_permissions_service.a))},ManageSubmittersComponent.ɵcmp=core.Nb({type:ManageSubmittersComponent,selectors:[[\"os-manage-submitters\"]],inputs:{motion:\"motion\"},features:[core.Db],decls:7,vars:6,consts:[[1,\"title-font\"],[\"class\",\"small-button\",\"type\",\"button\",\"mat-icon-button\",\"\",\"disableRipple\",\"\",3,\"click\",4,\"ngIf\"],[4,\"ngIf\"],[\"type\",\"button\",\"mat-icon-button\",\"\",\"disableRipple\",\"\",1,\"small-button\",3,\"click\"],[\"class\",\"user\",4,\"ngFor\",\"ngForOf\"],[1,\"user\"],[\"disableRipple\",\"\",4,\"ngIf\"],[\"disableRipple\",\"\"],[3,\"input\",\"live\",\"count\",\"sortEvent\"],[3,\"formGroup\",4,\"ngIf\"],[\"type\",\"button\",\"mat-button\",\"\",3,\"click\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"matTooltip\",\"click\"],[3,\"formGroup\"],[\"formControlName\",\"userId\",1,\"search-users\",3,\"placeholder\",\"inputListValues\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"h4\"),core.Zb(1,\"span\",0),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Qc(4,ManageSubmittersComponent_button_4_Template,3,0,\"button\",1),core.Yb(),core.Qc(5,ManageSubmittersComponent_div_5_Template,2,1,\"div\",2),core.Qc(6,ManageSubmittersComponent_div_6_Template,13,10,\"div\",2)),2&rf&&(core.Gb(2),core.Tc(core.nc(3,4,\"Submitters\")),core.Gb(2),core.tc(\"ngIf\",!ctx.isEditMode&&ctx.perms.isAllowed(\"change_metadata\")),core.Gb(1),core.tc(\"ngIf\",!ctx.isEditMode||!ctx.perms.isAllowed(\"change_metadata\")),core.Gb(1),core.tc(\"ngIf\",ctx.isEditMode&&ctx.perms.isAllowed(\"change_metadata\")))},directives:[common.t,fesm2015_button.b,icon.a,common.s,chips.d,chips.a,sorting_list_component.a,tooltip.c,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,form_field.c,search_value_selector_component.a,fesm2015_forms.s,fesm2015_forms.i],pipes:[ngx_translate_core.j],styles:[\".search-users[_ngcontent-%COMP%]{display:grid}.search-users[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}h4[_ngcontent-%COMP%]{margin:0}.small-button[_ngcontent-%COMP%]{width:20px;height:20px;line-height:inherit}.small-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:100%}.user[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{border-radius:16px!important;padding:5px 15px!important;margin:5px 0;border:1px solid #ddd;height:auto}\"]}),ManageSubmittersComponent})();var extension_field_component=__webpack_require__(\"+KR1\"),motion_poll_repository_service=__webpack_require__(\"acQf\"),voting_privacy_warning_component=__webpack_require__(\"owL4\"),base_poll_pdf_service=__webpack_require__(\"EHvM\"),pdf_document_service=__webpack_require__(\"a9GI\");let motion_poll_pdf_service_MotionPollPdfService=(()=>{class MotionPollPdfService extends base_poll_pdf_service.a{constructor(translate,motionRepo,configService,userRepo,pdfService){super(configService,userRepo),this.translate=translate,this.motionRepo=motionRepo,this.pdfService=pdfService,this.configService.get(\"motions_pdf_ballot_papers_number\").subscribe(count=>this.ballotCustomCount=count),this.configService.get(\"motions_pdf_ballot_papers_selection\").subscribe(selection=>this.ballotCountSelection=selection)}printBallots(motionPoll,title,subtitle){const motion=this.motionRepo.getViewModel(motionPoll.motion_id),fileName=`${this.translate.instant(\"Motion\")} - ${motion.identifier} - ${this.translate.instant(\"ballot-paper\")}`;title||(title=`${this.translate.instant(\"Motion\")} - ${motion.identifier}`,motion.polls.length>1&&(title+=` (${this.translate.instant(\"Vote\")} ${motion.polls.length})`)),subtitle||(subtitle=motion.title),subtitle.length>90&&(subtitle=subtitle.substring(0,90)+\"...\"),this.pdfService.downloadWithBallotPaper(this.getPages(4,{sheetend:40,title:title,subtitle:subtitle}),fileName,this.logo)}createBallot(data){return{stack:[this.getHeader(),this.getTitle(data.title),this.getSubtitle(data.subtitle),this.createBallotOption(this.translate.instant(\"Yes\")),this.createBallotOption(this.translate.instant(\"No\")),this.createBallotOption(this.translate.instant(\"Abstain\"))],margin:[0,0,0,data.sheetend]}}}return MotionPollPdfService.ɵfac=function(t){return new(t||MotionPollPdfService)(core.dc(ngx_translate_core.k),core.dc(motion_repository_service.a),core.dc(config_service.a),core.dc(user_repository_service.a),core.dc(pdf_document_service.b))},MotionPollPdfService.ɵprov=core.Pb({token:MotionPollPdfService,factory:MotionPollPdfService.ɵfac,providedIn:\"root\"}),MotionPollPdfService})();var base_poll_component=__webpack_require__(\"c3p6\"),voting_service=__webpack_require__(\"M0z7\"),base_poll_vote_component=__webpack_require__(\"Xqcw\"),poll_progress_component=__webpack_require__(\"pA48\"),progress_spinner=__webpack_require__(\"Xa2L\");function MotionPollVoteComponent_div_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Ub(1,\"os-poll-progress\",3),core.Yb()),2&rf){const ctx_r0=core.lc();core.Gb(1),core.tc(\"poll\",ctx_r0.poll)}}function MotionPollVoteComponent_ng_container_1_div_1_div_1_Template(rf,ctx){if(1&rf){const _r9=core.ac();core.Zb(0,\"div\",8),core.Zb(1,\"button\",9),core.hc(\"click\",(function(){core.Ic(_r9);const option_r7=ctx.$implicit;return core.lc(3).saveVote(option_r7.vote)})),core.Zb(2,\"mat-icon\"),core.Sc(3),core.Yb(),core.Yb(),core.Zb(4,\"span\",10),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const option_r7=ctx.$implicit,ctx_r6=core.lc(3);core.Gb(1),core.tc(\"ngClass\",ctx_r6.currentVote&&ctx_r6.currentVote.vote===option_r7.vote?option_r7.css:\"\")(\"disabled\",ctx_r6.deliveringVote),core.Gb(2),core.Uc(\" \",option_r7.icon,\"\"),core.Gb(2),core.Uc(\" \",core.nc(6,4,option_r7.label),\" \")}}function MotionPollVoteComponent_ng_container_1_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",6),core.Qc(1,MotionPollVoteComponent_ng_container_1_div_1_div_1_Template,7,6,\"div\",7),core.Yb()),2&rf){const ctx_r4=core.lc(2);core.Gb(1),core.tc(\"ngForOf\",ctx_r4.voteOptions)}}function MotionPollVoteComponent_ng_container_1_div_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",11),core.Ub(1,\"mat-spinner\",12),core.Ub(2,\"br\"),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Delivering vote... Please wait!\")))}function MotionPollVoteComponent_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Qc(1,MotionPollVoteComponent_ng_container_1_div_1_Template,2,1,\"div\",4),core.Qc(2,MotionPollVoteComponent_ng_container_1_div_2_Template,6,3,\"div\",5),core.Wb()),2&rf){const ctx_r1=core.lc();core.Gb(1),core.tc(\"ngIf\",ctx_r1.vmanager.canVote(ctx_r1.poll)&&!ctx_r1.deliveringVote),core.Gb(1),core.tc(\"ngIf\",ctx_r1.deliveringVote)}}function MotionPollVoteComponent_ng_template_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",13),core.Zb(1,\"div\"),core.Zb(2,\"mat-icon\",14),core.Sc(3,\" check_circle \"),core.Yb(),core.Ub(4,\"br\"),core.Zb(5,\"span\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Yb(),core.Yb()),2&rf&&(core.Gb(6),core.Tc(core.nc(7,1,\"Voting successful.\")))}let motion_poll_vote_component_MotionPollVoteComponent=(()=>{class MotionPollVoteComponent extends base_poll_vote_component.a{constructor(title,translate,matSnackbar,operator,vmanager,pollRepo,promptService,cd){super(title,translate,matSnackbar,operator),this.vmanager=vmanager,this.pollRepo=pollRepo,this.promptService=promptService,this.cd=cd,this.currentVote={},this.voteOptions=[{vote:\"Y\",css:\"voted-yes\",icon:\"thumb_up\",label:\"Yes\"},{vote:\"N\",css:\"voted-no\",icon:\"thumb_down\",label:\"No\"},{vote:\"A\",css:\"voted-abstain\",icon:\"trip_origin\",label:\"Abstain\"}]}saveVote(vote){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){this.currentVote.vote=vote;const title=this.translate.instant(\"Submit selection now?\"),content=this.translate.instant(\"Your decision cannot be changed afterwards.\");(yield this.promptService.open(title,content))&&(this.deliveringVote=!0,this.cd.markForCheck(),this.pollRepo.vote(vote,this.poll.id).catch(this.raiseError).finally(()=>{this.deliveringVote=!1}))}))}}return MotionPollVoteComponent.ɵfac=function(t){return new(t||MotionPollVoteComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(operator_service.a),core.Tb(voting_service.b),core.Tb(motion_poll_repository_service.a),core.Tb(prompt_service.a),core.Tb(core.h))},MotionPollVoteComponent.ɵcmp=core.Nb({type:MotionPollVoteComponent,selectors:[[\"os-motion-poll-vote\"]],features:[core.Db],decls:4,vars:4,consts:[[4,\"osPerms\",\"osPermsAnd\"],[4,\"ngIf\",\"ngIfElse\"],[\"userHasVotes\",\"\"],[3,\"poll\"],[\"class\",\"vote-button-grid\",4,\"ngIf\"],[\"class\",\"submit-vote-indicator\",4,\"ngIf\"],[1,\"vote-button-grid\"],[\"class\",\"vote-button\",4,\"ngFor\",\"ngForOf\"],[1,\"vote-button\"],[\"mat-raised-button\",\"\",3,\"ngClass\",\"disabled\",\"click\"],[1,\"vote-label\"],[1,\"submit-vote-indicator\"],[1,\"small-spinner\"],[1,\"user-has-voted\"],[1,\"vote-submitted\"]],template:function(rf,ctx){if(1&rf&&(core.Qc(0,MotionPollVoteComponent_div_0_Template,2,1,\"div\",0),core.Qc(1,MotionPollVoteComponent_ng_container_1_Template,3,2,\"ng-container\",1),core.Qc(2,MotionPollVoteComponent_ng_template_2_Template,8,3,\"ng-template\",null,2,core.Rc)),2&rf){const _r2=core.Ec(3);core.tc(\"osPerms\",\"motions.can_manage_polls\")(\"osPermsAnd\",ctx.poll&&ctx.poll.isStarted),core.Gb(1),core.tc(\"ngIf\",ctx.poll&&!ctx.poll.user_has_voted)(\"ngIfElse\",_r2)}},directives:[perms_directive.a,common.t,poll_progress_component.a,common.s,fesm2015_button.b,common.q,icon.a,progress_spinner.c],pipes:[ngx_translate_core.j],styles:[\".yes[_ngcontent-%COMP%]{color:#4caf50}.no[_ngcontent-%COMP%]{color:#cc6c5b}.abstain[_ngcontent-%COMP%]{color:#a6a6a6}.voted-yes[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.voted-no[_ngcontent-%COMP%]{background-color:#cc6c5b;color:#fff}.voted-abstain[_ngcontent-%COMP%]{background-color:#a6a6a6;color:#fff}.start-poll-button[_ngcontent-%COMP%]{color:#4caf50}.stop-poll-button[_ngcontent-%COMP%]{color:#ff5252}.publish-poll-button[_ngcontent-%COMP%]{color:#e6b100}.vote-button-grid[_ngcontent-%COMP%]{display:grid;grid-gap:20px;margin-top:2em;grid-template-columns:repeat(auto-fit,minmax(100px,1fr))}.submit-vote-indicator[_ngcontent-%COMP%]{margin-top:1em;text-align:center}.submit-vote-indicator[_ngcontent-%COMP%]   .mat-spinner[_ngcontent-%COMP%]{margin:auto}.vote-button[_ngcontent-%COMP%]{display:inline-grid;grid-gap:1em;margin:auto}.user-has-voted[_ngcontent-%COMP%], .vote-button[_ngcontent-%COMP%]   .vote-label[_ngcontent-%COMP%]{text-align:center}.user-has-voted[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.user-has-voted[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:1em;margin-left:auto;margin-right:auto}.user-has-voted[_ngcontent-%COMP%]   .vote-submitted[_ngcontent-%COMP%]{color:#4caf50;font-size:200%}\"],changeDetection:0}),MotionPollVoteComponent})();var charts_component=__webpack_require__(\"iCsr\"),parse_poll_number_pipe=__webpack_require__(\"j7f2\"),poll_percent_base_pipe=__webpack_require__(\"QUb3\");function MotionPollComponent_mat_card_0_span_7_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\",21),core.Zb(1,\"button\",22),core.Zb(2,\"mat-icon\",23),core.Sc(3,\"more_horiz\"),core.Yb(),core.Yb(),core.Yb()),2&rf){core.lc(2);const _r7=core.Ec(8);core.Gb(1),core.tc(\"matMenuTriggerFor\",_r7)}}function MotionPollComponent_mat_card_0_span_9_Template(rf,ctx){if(1&rf){const _r18=core.ac();core.Zb(0,\"span\"),core.Zb(1,\"button\",24),core.hc(\"click\",(function(){return core.Ic(_r18),core.lc(2).openVotingWarning()})),core.Zb(2,\"mat-icon\"),core.Sc(3,\" warning \"),core.Yb(),core.Yb(),core.Yb()}}function MotionPollComponent_mat_card_0_span_10_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const ctx_r13=core.lc(2);core.Gb(1),core.Uc(\" \",core.nc(2,1,ctx_r13.poll.typeVerbose),\" · \")}}function MotionPollComponent_mat_card_0_div_14_ng_container_5_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Sc(1),core.mc(2,\"translate\"),core.Wb()),2&rf){const ctx_r19=core.lc(3);core.Gb(1),core.Uc(\" \",core.nc(2,1,ctx_r19.poll.nextStateActionVerbose),\" \")}}function MotionPollComponent_mat_card_0_div_14_ng_container_6_Template(rf,ctx){1&rf&&(core.Xb(0),core.Sc(1),core.mc(2,\"translate\"),core.Wb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"In progress, please wait...\"),\" \"))}function MotionPollComponent_mat_card_0_div_14_Template(rf,ctx){if(1&rf){const _r22=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",25),core.hc(\"click\",(function(){core.Ic(_r22);const ctx_r21=core.lc(2);return ctx_r21.changeState(ctx_r21.poll.nextState)})),core.Zb(2,\"mat-icon\"),core.Sc(3),core.Yb(),core.Zb(4,\"span\",26),core.Qc(5,MotionPollComponent_mat_card_0_div_14_ng_container_5_Template,3,3,\"ng-container\",17),core.Qc(6,MotionPollComponent_mat_card_0_div_14_ng_container_6_Template,3,3,\"ng-container\",17),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r14=core.lc(2);core.Gb(1),core.tc(\"ngClass\",ctx_r14.pollStateActions[ctx_r14.poll.state].css)(\"disabled\",ctx_r14.stateChangePending),core.Gb(2),core.Uc(\" \",ctx_r14.pollStateActions[ctx_r14.poll.state].icon,\"\"),core.Gb(2),core.tc(\"ngIf\",!ctx_r14.stateChangePending),core.Gb(1),core.tc(\"ngIf\",ctx_r14.stateChangePending)}}function MotionPollComponent_mat_card_0_ng_container_15_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Ub(1,\"os-motion-poll-vote\",27),core.Wb()),2&rf){const ctx_r15=core.lc(2);core.Gb(1),core.tc(\"poll\",ctx_r15.poll)}}function MotionPollComponent_mat_card_0_a_17_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"a\",28),core.mc(1,\"translate\"),core.Zb(2,\"mat-icon\",23),core.Sc(3,\" visibility \"),core.Yb(),core.Yb()),2&rf){const ctx_r16=core.lc(2);core.uc(\"matTooltip\",core.nc(1,2,\"More\")),core.tc(\"routerLink\",ctx_r16.pollLink)}}function MotionPollComponent_mat_card_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-card\",9),core.Zb(1,\"div\",10),core.Zb(2,\"div\",11),core.Zb(3,\"span\",12),core.Zb(4,\"a\",13),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Qc(7,MotionPollComponent_mat_card_0_span_7_Template,4,1,\"span\",14),core.Yb(),core.Zb(8,\"div\",15),core.Qc(9,MotionPollComponent_mat_card_0_span_9_Template,4,0,\"span\",16),core.Qc(10,MotionPollComponent_mat_card_0_span_10_Template,3,3,\"span\",17),core.Zb(11,\"span\"),core.Sc(12),core.mc(13,\"translate\"),core.Yb(),core.Yb(),core.Qc(14,MotionPollComponent_mat_card_0_div_14_Template,7,5,\"div\",16),core.Qc(15,MotionPollComponent_mat_card_0_ng_container_15_Template,2,1,\"ng-container\",18),core.Zb(16,\"div\",19),core.Qc(17,MotionPollComponent_mat_card_0_a_17_Template,4,4,\"a\",20),core.Yb(),core.Yb()),2&rf){const ctx_r0=core.lc(),_r1=core.Ec(2);core.Gb(4),core.tc(\"routerLink\",ctx_r0.pollLink),core.Gb(1),core.Uc(\" \",core.nc(6,12,ctx_r0.poll.title),\" \"),core.Gb(2),core.tc(\"osPerms\",\"motions.can_manage_polls\"),core.Gb(2),core.tc(\"osPerms\",\"motions.can_manage_polls\")(\"osPermsAnd\",\"pseudoanonymous\"===ctx_r0.poll.type),core.Gb(1),core.tc(\"ngIf\",ctx_r0.pollService.isElectronicVotingEnabled&&\"analog\"!==ctx_r0.poll.type),core.Gb(2),core.Uc(\" \",core.nc(13,14,ctx_r0.poll.stateVerbose),\" \"),core.Gb(2),core.tc(\"osPerms\",\"motions.can_manage_polls\")(\"osPermsAnd\",!ctx_r0.hideChangeState),core.Gb(1),core.tc(\"ngIf\",ctx_r0.poll&&!ctx_r0.poll.stateHasVotes&&\"analog\"!==ctx_r0.poll.type)(\"ngIfElse\",_r1),core.Gb(2),core.tc(\"ngIf\",ctx_r0.poll.isPublished)}}function MotionPollComponent_ng_template_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",29),core.Vb(1,30),core.Yb()),2&rf){const ctx_r2=core.lc(),_r3=core.Ec(4),_r5=core.Ec(6);core.Gb(1),core.tc(\"ngTemplateOutlet\",ctx_r2.poll.hasVotes&&ctx_r2.poll.stateHasVotes?_r3:_r5)}}function MotionPollComponent_ng_template_3_div_0_div_2_span_4_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"pollPercentBase\"),core.Yb()),2&rf){const row_r27=core.lc().$implicit,ctx_r28=core.lc(3);core.Gb(1),core.Uc(\" \",core.oc(2,1,row_r27.value[0].amount,ctx_r28.poll),\" \")}}function MotionPollComponent_ng_template_3_div_0_div_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"os-icon-container\",38),core.Sc(2),core.mc(3,\"parsePollNumber\"),core.Qc(4,MotionPollComponent_ng_template_3_div_0_div_2_span_4_Template,3,4,\"span\",17),core.Yb(),core.Yb()),2&rf){const row_r27=ctx.$implicit;core.Ib(row_r27.votingOption),core.Gb(1),core.tc(\"icon\",row_r27.value[0].icon),core.Gb(1),core.Uc(\" \",core.nc(3,5,row_r27.value[0].amount),\" \"),core.Gb(2),core.tc(\"ngIf\",row_r27.value[0].showPercent)}}function MotionPollComponent_ng_template_3_div_0_os_charts_4_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"os-charts\",39),core.mc(1,\"async\")),2&rf){const ctx_r26=core.lc(3);core.tc(\"data\",core.nc(1,1,ctx_r26.chartDataSubject))}}function MotionPollComponent_ng_template_3_div_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",33),core.Zb(1,\"div\",34),core.Qc(2,MotionPollComponent_ng_template_3_div_0_div_2_Template,5,7,\"div\",35),core.Yb(),core.Zb(3,\"div\",36),core.Qc(4,MotionPollComponent_ng_template_3_div_0_os_charts_4_Template,2,3,\"os-charts\",37),core.Yb(),core.Yb()),2&rf){const ctx_r23=core.lc(2);core.Gb(1),core.tc(\"routerLink\",ctx_r23.pollLink),core.Gb(1),core.tc(\"ngForOf\",ctx_r23.reducedPollTableData)(\"ngForTrackBy\",ctx_r23.trackByIndex),core.Gb(1),core.tc(\"routerLink\",ctx_r23.pollLink),core.Gb(1),core.tc(\"ngIf\",ctx_r23.showChart)}}function MotionPollComponent_ng_template_3_div_1_span_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"Counting of votes is in progress ...\"),\" \"))}function MotionPollComponent_ng_template_3_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",40),core.Qc(1,MotionPollComponent_ng_template_3_div_1_span_1_Template,3,3,\"span\",17),core.Yb()),2&rf){const ctx_r24=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r24.poll.isFinished)}}function MotionPollComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.Qc(0,MotionPollComponent_ng_template_3_div_0_Template,5,5,\"div\",31),core.Qc(1,MotionPollComponent_ng_template_3_div_1_Template,2,1,\"div\",32)),2&rf){const ctx_r4=core.lc();core.tc(\"osPerms\",\"motions.can_manage_polls\")(\"osPermsOr\",ctx_r4.poll.isPublished),core.Gb(1),core.tc(\"osPerms\",\"motions.can_manage_polls\")(\"osPermsComplement\",!0)}}function MotionPollComponent_ng_template_5_div_0_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"Edit to enter votes.\"),\" \"))}function MotionPollComponent_ng_template_5_Template(rf,ctx){if(1&rf&&core.Qc(0,MotionPollComponent_ng_template_5_div_0_Template,3,3,\"div\",16),2&rf){const ctx_r6=core.lc();core.tc(\"osPerms\",\"motions.can_manage_polls\")(\"osPermsAnd\",\"analog\"===ctx_r6.poll.type)}}function MotionPollComponent_button_9_Template(rf,ctx){if(1&rf){const _r33=core.ac();core.Zb(0,\"button\",7),core.hc(\"click\",(function(){return core.Ic(_r33),core.lc().openDialog()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"edit\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Edit\")))}function MotionPollComponent_os_projector_button_10_Template(rf,ctx){if(1&rf&&core.Ub(0,\"os-projector-button\",41),2&rf){const ctx_r9=core.lc();core.tc(\"menuItem\",!0)(\"object\",ctx_r9.poll)}}function MotionPollComponent_div_17_Template(rf,ctx){if(1&rf){const _r35=core.ac();core.Zb(0,\"div\"),core.Ub(1,\"mat-divider\"),core.Zb(2,\"button\",7),core.hc(\"click\",(function(){return core.Ic(_r35),core.lc().refreshPoll()})),core.Zb(3,\"mat-icon\"),core.Sc(4,\"refresh\"),core.Yb(),core.Zb(5,\"span\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Yb(),core.Zb(8,\"button\",7),core.hc(\"click\",(function(){return core.Ic(_r35),core.lc().resetState()})),core.Zb(9,\"mat-icon\",42),core.Sc(10,\"replay\"),core.Yb(),core.Zb(11,\"span\"),core.Sc(12),core.mc(13,\"translate\"),core.Yb(),core.Yb(),core.Zb(14,\"button\",7),core.hc(\"click\",(function(){return core.Ic(_r35),core.lc().deletePoll()})),core.Zb(15,\"mat-icon\",42),core.Sc(16,\"delete\"),core.Yb(),core.Zb(17,\"span\"),core.Sc(18),core.mc(19,\"translate\"),core.Yb(),core.Yb(),core.Yb()}2&rf&&(core.Gb(6),core.Tc(core.nc(7,3,\"Refresh\")),core.Gb(6),core.Tc(core.nc(13,5,\"Reset state\")),core.Gb(6),core.Tc(core.nc(19,7,\"Delete\")))}let motion_poll_component_MotionPollComponent=(()=>{class MotionPollComponent extends base_poll_component.a{constructor(titleService,matSnackBar,promptService,pollDialog,dialog,pollRepo,translate,pollService,pdfService,operator){super(titleService,matSnackBar,translate,dialog,promptService,pollRepo,pollDialog),this.dialog=dialog,this.pollRepo=pollRepo,this.translate=translate,this.pollService=pollService,this.pdfService=pdfService,this.operator=operator}set poll(value){this.initPoll(value);const chartData=this.pollService.generateChartData(value);this.chartDataSubject.next(chartData)}get poll(){return this._poll}get pollLink(){return\"/motions/polls/\"+this.poll.id}get showChart(){return this.pollService.showChart(this.poll)}get reducedPollTableData(){return this.pollService.generateTableData(this.poll).filter(data=>[\"yes\",\"no\",\"abstain\",\"votesinvalid\"].includes(data.votingOption))}get showPoll(){return!(!this.poll||!(this.operator.hasPerms(operator_service.b.motionsCanManagePolls)||this.poll.isPublished||this.poll.isEVoting&&!this.poll.isCreated))}get isEVotingEnabled(){return this.pollService.isElectronicVotingEnabled}openVotingWarning(){this.dialog.open(voting_privacy_warning_component.a,dialog_settings.a)}downloadPdf(){this.pdfService.printBallots(this.poll)}deletePoll(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to delete this vote?\"),content=this.poll.getTitle();(yield this.promptService.open(title,content))&&this.repo.delete(this.poll).catch(this.raiseError)}))}}return MotionPollComponent.ɵfac=function(t){return new(t||MotionPollComponent)(core.Tb(platform_browser.d),core.Tb(snack_bar.a),core.Tb(prompt_service.a),core.Tb(motion_poll_dialog_service.a),core.Tb(dialog.b),core.Tb(motion_poll_repository_service.a),core.Tb(ngx_translate_core.k),core.Tb(motion_poll_service.a),core.Tb(motion_poll_pdf_service_MotionPollPdfService),core.Tb(operator_service.a))},MotionPollComponent.ɵcmp=core.Nb({type:MotionPollComponent,selectors:[[\"os-motion-poll\"]],inputs:{poll:\"poll\"},features:[core.Db],decls:18,vars:7,consts:[[\"class\",\"motion-poll-wrapper\",4,\"ngIf\"],[\"votingResult\",\"\"],[\"viewTemplate\",\"\"],[\"emptyTemplate\",\"\"],[\"pollDetailMenu\",\"matMenu\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"osPerms\"],[3,\"menuItem\",\"object\",4,\"osPerms\"],[\"mat-menu-item\",\"\",3,\"click\"],[4,\"osPerms\"],[1,\"motion-poll-wrapper\"],[1,\"poll-title-wrapper\"],[1,\"poll-title-area\"],[1,\"poll-title\"],[3,\"routerLink\"],[\"class\",\"poll-actions\",4,\"osPerms\"],[1,\"italic\",\"spacer-bottom-20\"],[4,\"osPerms\",\"osPermsAnd\"],[4,\"ngIf\"],[4,\"ngIf\",\"ngIfElse\"],[1,\"poll-detail-button-wrapper\"],[\"mat-icon-button\",\"\",3,\"routerLink\",\"matTooltip\",4,\"ngIf\"],[1,\"poll-actions\"],[\"mat-icon-button\",\"\",3,\"matMenuTriggerFor\"],[1,\"small-icon\"],[\"mat-icon-button\",\"\",\"color\",\"warn\",3,\"click\"],[\"mat-stroked-button\",\"\",3,\"ngClass\",\"disabled\",\"click\"],[1,\"next-state-label\"],[3,\"poll\"],[\"mat-icon-button\",\"\",3,\"routerLink\",\"matTooltip\"],[1,\"poll-link-wrapper\"],[3,\"ngTemplateOutlet\"],[\"class\",\"poll-chart-wrapper\",4,\"osPerms\",\"osPermsOr\"],[\"class\",\"motion-couting-in-progress-hint\",4,\"osPerms\",\"osPermsComplement\"],[1,\"poll-chart-wrapper\"],[1,\"vote-legend\",3,\"routerLink\"],[3,\"class\",4,\"ngFor\",\"ngForOf\",\"ngForTrackBy\"],[1,\"doughnut-chart\",3,\"routerLink\"],[\"type\",\"doughnut\",3,\"data\",4,\"ngIf\"],[\"size\",\"large\",3,\"icon\"],[\"type\",\"doughnut\",3,\"data\"],[1,\"motion-couting-in-progress-hint\"],[3,\"menuItem\",\"object\"],[\"color\",\"warn\"]],template:function(rf,ctx){1&rf&&(core.Qc(0,MotionPollComponent_mat_card_0_Template,18,16,\"mat-card\",0),core.Qc(1,MotionPollComponent_ng_template_1_Template,2,1,\"ng-template\",null,1,core.Rc),core.Qc(3,MotionPollComponent_ng_template_3_Template,2,4,\"ng-template\",null,2,core.Rc),core.Qc(5,MotionPollComponent_ng_template_5_Template,1,2,\"ng-template\",null,3,core.Rc),core.Zb(7,\"mat-menu\",null,4),core.Qc(9,MotionPollComponent_button_9_Template,6,3,\"button\",5),core.Qc(10,MotionPollComponent_os_projector_button_10_Template,1,2,\"os-projector-button\",6),core.Zb(11,\"button\",7),core.hc(\"click\",(function(){return ctx.downloadPdf()})),core.Zb(12,\"mat-icon\"),core.Sc(13,\"picture_as_pdf\"),core.Yb(),core.Zb(14,\"span\"),core.Sc(15),core.mc(16,\"translate\"),core.Yb(),core.Yb(),core.Qc(17,MotionPollComponent_div_17_Template,20,9,\"div\",8),core.Yb()),2&rf&&(core.tc(\"ngIf\",ctx.showPoll),core.Gb(9),core.tc(\"osPerms\",\"motions.can_manage_polls\"),core.Gb(1),core.tc(\"osPerms\",\"core.can_manage_projector\"),core.Gb(5),core.Tc(core.nc(16,5,\"Ballot papers\")),core.Gb(2),core.tc(\"osPerms\",\"motions.can_manage_polls\"))},directives:[common.t,menu.f,perms_directive.a,menu.c,icon.a,card.a,fesm2015_router.i,fesm2015_button.b,menu.e,common.q,motion_poll_vote_component_MotionPollVoteComponent,fesm2015_button.a,tooltip.c,common.A,fesm2015_router.g,common.s,icon_container_component.a,charts_component.a,projector_button_component.a,divider.a],pipes:[ngx_translate_core.j,parse_poll_number_pipe.a,poll_percent_base_pipe.a,common.b],styles:['.yes[_ngcontent-%COMP%]{color:#4caf50}.no[_ngcontent-%COMP%]{color:#cc6c5b}.abstain[_ngcontent-%COMP%]{color:#a6a6a6}.voted-yes[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.voted-no[_ngcontent-%COMP%]{background-color:#cc6c5b;color:#fff}.voted-abstain[_ngcontent-%COMP%]{background-color:#a6a6a6;color:#fff}.start-poll-button[_ngcontent-%COMP%]{color:#4caf50}.stop-poll-button[_ngcontent-%COMP%]{color:#ff5252}.publish-poll-button[_ngcontent-%COMP%]{color:#e6b100}.poll-link-wrapper[_ngcontent-%COMP%]{outline:none}.motion-poll-wrapper[_ngcontent-%COMP%]{margin-bottom:30px}.motion-poll-wrapper[_ngcontent-%COMP%]   .poll-title-wrapper[_ngcontent-%COMP%]{display:grid;grid-gap:10px;grid-template-areas:\"title actions\";grid-template-columns:auto -webkit-min-content;grid-template-columns:auto min-content}.motion-poll-wrapper[_ngcontent-%COMP%]   .poll-title-wrapper[_ngcontent-%COMP%]   .poll-title-area[_ngcontent-%COMP%]{grid-area:title;margin-top:1em}.motion-poll-wrapper[_ngcontent-%COMP%]   .poll-title-wrapper[_ngcontent-%COMP%]   .poll-title-area[_ngcontent-%COMP%]   .poll-title[_ngcontent-%COMP%]{font-size:125%}.motion-poll-wrapper[_ngcontent-%COMP%]   .poll-title-wrapper[_ngcontent-%COMP%]   .poll-actions[_ngcontent-%COMP%]{grid-area:actions}.motion-poll-wrapper[_ngcontent-%COMP%]   .poll-chart-wrapper[_ngcontent-%COMP%]{cursor:pointer;display:grid;grid-gap:20px;margin:2em;grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}.motion-poll-wrapper[_ngcontent-%COMP%]   .poll-chart-wrapper[_ngcontent-%COMP%]   .doughnut-chart[_ngcontent-%COMP%]{display:block;max-width:200px;margin-top:auto;margin-bottom:auto}.motion-poll-wrapper[_ngcontent-%COMP%]   .poll-chart-wrapper[_ngcontent-%COMP%]   .vote-legend[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{margin-top:20px}.poll-detail-button-wrapper[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;margin:auto 0}.poll-detail-button-wrapper[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{margin-left:auto}.next-state-label[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.motion-couting-in-progress-hint[_ngcontent-%COMP%]{margin-top:1em;font-style:italic}']}),MotionPollComponent})();var autofocus_directive=__webpack_require__(\"IZUe\"),fesm2015_select=__webpack_require__(\"d3UM\"),fesm2015_core=__webpack_require__(\"FKr1\");function MotionDetailOriginalChangeRecommendationsComponent_ul_1_li_1_Template(rf,ctx){if(1&rf){const _r4=core.ac();core.Zb(0,\"li\",4),core.hc(\"click\",(function(){core.Ic(_r4);const reco_r2=ctx.$implicit;return core.lc(2).gotoReco(reco_r2)})),core.Yb()}if(2&rf){const reco_r2=ctx.$implicit,ctx_r1=core.lc(2);core.Pc(\"top\",ctx_r1.calcRecoTop(reco_r2))(\"height\",ctx_r1.calcRecoHeight(reco_r2)),core.Kb(\"delete\",ctx_r1.recoIsDeletion(reco_r2))(\"insert\",ctx_r1.recoIsInsertion(reco_r2))(\"replace\",ctx_r1.recoIsReplacement(reco_r2)),core.tc(\"title\",reco_r2.getTitle())}}function MotionDetailOriginalChangeRecommendationsComponent_ul_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"ul\",2),core.Qc(1,MotionDetailOriginalChangeRecommendationsComponent_ul_1_li_1_Template,1,11,\"li\",3),core.Yb()),2&rf){const ctx_r0=core.lc();core.Gb(1),core.tc(\"ngForOf\",ctx_r0.getTextChangeRecommendations())}}let motion_detail_original_change_recommendations_component_MotionDetailOriginalChangeRecommendationsComponent=(()=>{class MotionDetailOriginalChangeRecommendationsComponent{constructor(renderer,el,cd,operator){this.renderer=renderer,this.el=el,this.cd=cd,this.operator=operator,this.selectedFrom=null,this.createChangeRecommendation=new core.p,this.gotoChangeRecommendation=new core.p,this.showChangeRecommendations=!1,this.can_manage=!1,this.minLineNo=null,this.maxLineNo=null,this.operator.getUserObservable().subscribe(this.onPermissionsChanged.bind(this))}update(){this.element&&(this.element.innerHTML=this.html,this.startCreating())}onPermissionsChanged(){this.operator.hasPerms(operator_service.b.motionsCanManage)?(this.can_manage=!0,null===this.selectedFrom&&this.startCreating()):(this.can_manage=!1,this.selectedFrom=null,this.element&&Array.from(this.element.querySelectorAll(\".os-line-number\")).forEach(lineNumber=>{lineNumber.classList.remove(\"selectable\"),lineNumber.classList.remove(\"selected\")}))}getTextChangeRecommendations(){return this.changeRecommendations.filter(reco=>!reco.isTitleChange()).filter(reco=>reco.line_from>=this.minLineNo&&reco.line_from<=this.maxLineNo)}setLineNumberCache(){Array.from(this.element.querySelectorAll(\".os-line-number\")).forEach(lineNumberEl=>{const lineNumber=parseInt(lineNumberEl.getAttribute(\"data-line-number\"),10);(null===this.minLineNo||lineNumber<this.minLineNo)&&(this.minLineNo=lineNumber),(null===this.maxLineNo||lineNumber>this.maxLineNo)&&(this.maxLineNo=lineNumber)})}getAffectedLineNumbers(){const affectedLines=[];return this.changeRecommendations.forEach(change=>{if(!change.isTitleChange())for(let j=change.line_from;j<change.line_to;j++)affectedLines.push(j)}),affectedLines}startCreating(){if(!this.can_manage||!this.element)return;const alreadyAffectedLines=this.getAffectedLineNumbers();Array.from(this.element.querySelectorAll(\".os-line-number\")).forEach(lineNumber=>{lineNumber.classList.remove(\"selected\"),-1===alreadyAffectedLines.indexOf(parseInt(lineNumber.getAttribute(\"data-line-number\"),10))?lineNumber.classList.add(\"selectable\"):lineNumber.classList.remove(\"selectable\")})}clickedLineNumber(lineNumber){null===this.selectedFrom?this.selectedFrom=lineNumber:(this.createChangeRecommendation.emit(lineNumber>this.selectedFrom?{from:this.selectedFrom,to:lineNumber+1}:{from:lineNumber,to:this.selectedFrom+1}),this.selectedFrom=null,this.startCreating())}hoverLineNumber(lineNumberHovered){null!==this.selectedFrom&&Array.from(this.element.querySelectorAll(\".os-line-number\")).forEach(lineNumber=>{const line=parseInt(lineNumber.getAttribute(\"data-line-number\"),10);line>=this.selectedFrom&&line<=lineNumberHovered||line>=lineNumberHovered&&line<=this.selectedFrom?lineNumber.classList.add(\"selected\"):lineNumber.classList.remove(\"selected\")})}calcRecoTop(reco){return this.element.querySelector(\".os-line-number.line-number-\"+reco.line_from.toString(10)).offsetTop.toString()+\"px\"}calcRecoHeight(reco){const from=this.element.querySelector(\".os-line-number.line-number-\"+reco.line_from.toString(10)),to=this.element.querySelector(\".os-line-number.line-number-\"+reco.line_to.toString(10));return to?(to.offsetTop-from.offsetTop).toString()+\"px\":\"20px\"}recoIsInsertion(reco){return reco.type===diff_service.b.TYPE_INSERTION}recoIsDeletion(reco){return reco.type===diff_service.b.TYPE_DELETION}recoIsReplacement(reco){return reco.type===diff_service.b.TYPE_REPLACEMENT}gotoReco(reco){this.gotoChangeRecommendation.emit(reco)}ngOnInit(){this.element=this.el.nativeElement.querySelector(\".text\"),this.renderer.listen(this.el.nativeElement,\"click\",ev=>{const element=ev.target;element.classList.contains(\"os-line-number\")&&element.classList.contains(\"selectable\")&&this.clickedLineNumber(parseInt(element.getAttribute(\"data-line-number\"),10))}),this.renderer.listen(this.el.nativeElement,\"mouseover\",ev=>{const element=ev.target;element.classList.contains(\"os-line-number\")&&element.classList.contains(\"selectable\")&&this.hoverLineNumber(parseInt(element.getAttribute(\"data-line-number\"),10))}),this.update(),window.setTimeout(()=>{this.setLineNumberCache(),this.showChangeRecommendations=!0,this.cd.detectChanges()},1)}ngOnChanges(changes){this.update()}}return MotionDetailOriginalChangeRecommendationsComponent.ɵfac=function(t){return new(t||MotionDetailOriginalChangeRecommendationsComponent)(core.Tb(core.I),core.Tb(core.m),core.Tb(core.h),core.Tb(operator_service.a))},MotionDetailOriginalChangeRecommendationsComponent.ɵcmp=core.Nb({type:MotionDetailOriginalChangeRecommendationsComponent,selectors:[[\"os-motion-detail-original-change-recommendations\"]],inputs:{html:\"html\",changeRecommendations:\"changeRecommendations\"},outputs:{createChangeRecommendation:\"createChangeRecommendation\",gotoChangeRecommendation:\"gotoChangeRecommendation\"},features:[core.Eb],decls:2,vars:1,consts:[[1,\"text\"],[\"class\",\"change-recommendation-list\",4,\"ngIf\"],[1,\"change-recommendation-list\"],[3,\"title\",\"top\",\"height\",\"delete\",\"insert\",\"replace\",\"click\",4,\"ngFor\",\"ngForOf\"],[3,\"title\",\"click\"]],template:function(rf,ctx){1&rf&&(core.Ub(0,\"div\",0),core.Qc(1,MotionDetailOriginalChangeRecommendationsComponent_ul_1_Template,2,1,\"ul\",1)),2&rf&&(core.Gb(1),core.tc(\"ngIf\",ctx.showChangeRecommendations))},directives:[common.t,common.s],styles:[\".change-recommendation-list[_ngcontent-%COMP%]{position:absolute;top:0;left:-10px;width:4px;list-style-type:none;padding:0;margin:0}.change-recommendation-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:absolute;width:4px;left:0;cursor:pointer;padding:0;margin:0}.change-recommendation-list[_ngcontent-%COMP%] > li.insert[_ngcontent-%COMP%]{background-color:#0a0}.change-recommendation-list[_ngcontent-%COMP%] > li.delete[_ngcontent-%COMP%]{background-color:#a00}.change-recommendation-list[_ngcontent-%COMP%] > li.replace[_ngcontent-%COMP%]{background-color:#0333ff}.change-recommendation-list[_ngcontent-%COMP%] > li.other[_ngcontent-%COMP%]{background-color:#777}.change-recommendation-list[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]{display:none}\"]}),MotionDetailOriginalChangeRecommendationsComponent})();var view_unified_change=__webpack_require__(\"GEzB\"),recommendation_type_names=__webpack_require__(\"30jZ\");function MotionDetailDiffComponent_section_0_li_5_span_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\",16),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const change_r9=core.lc().$implicit,ctx_r10=core.lc(2);core.Gb(1),core.Vc(\" \",core.nc(2,2,\"Line\"),\" \",ctx_r10.formatLineRange(change_r9),\" \")}}function MotionDetailDiffComponent_section_0_li_5_span_3_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Title\")))}function MotionDetailDiffComponent_section_0_li_5_span_4_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" (\",core.nc(2,1,\"Change recommendation\"),\")\"))}function MotionDetailDiffComponent_section_0_li_5_span_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const change_r9=core.lc().$implicit;core.Gb(1),core.Vc(\" (\",core.nc(2,2,\"Amendment\"),\" \",change_r9.getIdentifier(),\")\")}}function MotionDetailDiffComponent_section_0_li_5_span_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\",17),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const change_r9=core.lc().$implicit,ctx_r14=core.lc(2);core.Gb(1),core.Uc(\" – \",core.nc(2,1,ctx_r14.getRecommendationTypeName(change_r9)),\" \")}}function MotionDetailDiffComponent_section_0_li_5_ng_container_8_Template(rf,ctx){1&rf&&(core.Xb(0),core.Sc(1,\" – \"),core.Zb(2,\"span\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Wb()),2&rf&&(core.Gb(3),core.Tc(core.nc(4,1,\"Rejected\")))}function MotionDetailDiffComponent_section_0_li_5_ng_container_9_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Sc(1),core.mc(2,\"translate\"),core.Wb()),2&rf){const change_r9=core.lc().$implicit;core.Gb(1),core.Uc(\" – \",core.nc(2,1,change_r9.stateName),\"\")}}function MotionDetailDiffComponent_section_0_li_5_Template(rf,ctx){if(1&rf){const _r22=core.ac();core.Zb(0,\"li\"),core.Zb(1,\"a\",12),core.hc(\"click\",(function($event){core.Ic(_r22);const change_r9=ctx.$implicit;return core.lc(2).scrollToChangeClicked(change_r9,$event)})),core.Qc(2,MotionDetailDiffComponent_section_0_li_5_span_2_Template,3,4,\"span\",13),core.Qc(3,MotionDetailDiffComponent_section_0_li_5_span_3_Template,3,3,\"span\",3),core.Qc(4,MotionDetailDiffComponent_section_0_li_5_span_4_Template,3,3,\"span\",3),core.Qc(5,MotionDetailDiffComponent_section_0_li_5_span_5_Template,3,4,\"span\",3),core.Qc(6,MotionDetailDiffComponent_section_0_li_5_span_6_Template,3,3,\"span\",14),core.Zb(7,\"span\",15),core.Qc(8,MotionDetailDiffComponent_section_0_li_5_ng_container_8_Template,5,3,\"ng-container\",3),core.Qc(9,MotionDetailDiffComponent_section_0_li_5_ng_container_9_Template,3,3,\"ng-container\",3),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const change_r9=ctx.$implicit,ctx_r7=core.lc(2);core.Gb(1),core.Kb(\"amendment\",ctx_r7.isAmendment(change_r9))(\"recommendation\",ctx_r7.isChangeRecommendation(change_r9)),core.Gb(1),core.tc(\"ngIf\",!change_r9.isTitleChange()),core.Gb(1),core.tc(\"ngIf\",change_r9.isTitleChange()),core.Gb(1),core.tc(\"ngIf\",ctx_r7.isChangeRecommendation(change_r9)),core.Gb(1),core.tc(\"ngIf\",ctx_r7.isAmendment(change_r9)),core.Gb(1),core.tc(\"ngIf\",ctx_r7.isChangeRecommendation(change_r9)),core.Gb(2),core.tc(\"ngIf\",change_r9.isRejected()&&!ctx_r7.isAmendment(change_r9)),core.Gb(1),core.tc(\"ngIf\",(change_r9.isAccepted()||ctx_r7.isAmendment(change_r9))&&change_r9.stateName)}}function MotionDetailDiffComponent_section_0_div_6_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",18),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"No change recommendations yet\")))}function MotionDetailDiffComponent_section_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"section\",10),core.Zb(1,\"strong\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Zb(4,\"ul\"),core.Qc(5,MotionDetailDiffComponent_section_0_li_5_Template,10,11,\"li\",4),core.Yb(),core.Qc(6,MotionDetailDiffComponent_section_0_div_6_Template,3,3,\"div\",11),core.Yb()),2&rf){const ctx_r0=core.lc();core.Gb(2),core.Uc(\" \",core.nc(3,3,\"Summary of changes\"),\": \"),core.Gb(3),core.tc(\"ngForOf\",ctx_r0.changes),core.Gb(1),core.tc(\"ngIf\",0===ctx_r0.changes.length)}}const _c0=function(a0){return{change:a0}};function MotionDetailDiffComponent_div_5_div_2_button_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"button\",26),core.Zb(1,\"mat-icon\"),core.Sc(2,\"more_horiz\"),core.Yb(),core.Yb()),2&rf){const changedTitle_r23=core.lc(2).ngIf;core.lc();const _r5=core.Ec(13);core.tc(\"matMenuTriggerFor\",_r5)(\"matMenuTriggerData\",core.zc(2,_c0,changedTitle_r23))}}function MotionDetailDiffComponent_div_5_div_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",24),core.Qc(1,MotionDetailDiffComponent_div_5_div_2_button_1_Template,3,4,\"button\",25),core.Yb()),2&rf){const changedTitle_r23=core.lc().ngIf,ctx_r24=core.lc();core.Gb(1),core.tc(\"ngIf\",ctx_r24.isRecommendation(changedTitle_r23))}}function MotionDetailDiffComponent_div_5_div_3_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",27),core.Zb(1,\"i\",28),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(2),core.Tc(core.nc(3,1,\"Rejected\")))}function MotionDetailDiffComponent_div_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"div\"),core.Qc(2,MotionDetailDiffComponent_div_5_div_2_Template,2,1,\"div\",19),core.Qc(3,MotionDetailDiffComponent_div_5_div_3_Template,4,3,\"div\",20),core.Zb(4,\"div\",21),core.Zb(5,\"div\",22),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Ub(8,\"div\",23),core.mc(9,\"trust\"),core.Yb(),core.Yb(),core.Yb()),2&rf){const changedTitle_r23=ctx.ngIf,ctx_r1=core.lc();core.Gb(1),core.Jb(\"diff-box diff-box-\",changedTitle_r23.getChangeId(),\" clearfix\"),core.Gb(1),core.tc(\"osPerms\",\"motions.can_manage\"),core.Gb(1),core.tc(\"ngIf\",changedTitle_r23.isRejected()),core.Gb(1),core.Kb(\"line-numbers-none\",ctx_r1.isLineNumberingNone())(\"line-numbers-inline\",ctx_r1.isLineNumberingInline())(\"line-numbers-outside\",ctx_r1.isLineNumberingOutside()),core.Hb(\"data-change-id\",changedTitle_r23.getChangeId()),core.Gb(2),core.Uc(\"\",core.nc(7,14,\"Changed title\"),\":\"),core.Gb(2),core.tc(\"innerHTML\",core.oc(9,16,ctx_r1.getFormattedTitleDiff(),\"html\"),core.Jc)}}function MotionDetailDiffComponent_div_6_div_4_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",31),core.Zb(1,\"mat-icon\",32),core.mc(2,\"translate\"),core.Sc(3,\"warning\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(1),core.uc(\"matTooltip\",core.nc(2,1,\"This change collides with another one.\")))}function MotionDetailDiffComponent_div_6_div_5_button_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"button\",26),core.Zb(1,\"mat-icon\"),core.Sc(2,\"more_horiz\"),core.Yb(),core.Yb()),2&rf){const change_r29=core.lc(2).$implicit;core.lc();const _r5=core.Ec(13);core.tc(\"matMenuTriggerFor\",_r5)(\"matMenuTriggerData\",core.zc(2,_c0,change_r29))}}function MotionDetailDiffComponent_div_6_div_5_button_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"button\",26),core.Zb(1,\"mat-icon\"),core.Sc(2,\"more_horiz\"),core.Yb(),core.Yb()),2&rf){const change_r29=core.lc(2).$implicit;core.lc();const _r3=core.Ec(10);core.tc(\"matMenuTriggerFor\",_r3)(\"matMenuTriggerData\",core.zc(2,_c0,change_r29))}}function MotionDetailDiffComponent_div_6_div_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",24),core.Qc(1,MotionDetailDiffComponent_div_6_div_5_button_1_Template,3,4,\"button\",25),core.Qc(2,MotionDetailDiffComponent_div_6_div_5_button_2_Template,3,4,\"button\",25),core.Yb()),2&rf){const change_r29=core.lc().$implicit,ctx_r32=core.lc();core.Gb(1),core.tc(\"ngIf\",ctx_r32.isRecommendation(change_r29)),core.Gb(1),core.tc(\"ngIf\",ctx_r32.isAmendment(change_r29))}}function MotionDetailDiffComponent_div_6_div_6_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",27),core.Zb(1,\"i\",28),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(2),core.Tc(core.nc(3,1,\"Rejected\")))}function MotionDetailDiffComponent_div_6_div_7_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",27),core.Zb(1,\"i\",28),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf){const change_r29=core.lc().$implicit;core.Gb(2),core.Vc(\"\",change_r29.amendment.identifier,\" - \",core.nc(3,2,change_r29.amendment.state.name),\"\")}}const _c1=function(){return[]};function MotionDetailDiffComponent_div_6_Template(rf,ctx){if(1&rf){const _r42=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"div\",5),core.Zb(2,\"os-motion-detail-original-change-recommendations\",6),core.hc(\"createChangeRecommendation\",(function($event){return core.Ic(_r42),core.lc().onCreateChangeRecommendation($event)})),core.Yb(),core.Yb(),core.Zb(3,\"div\"),core.Qc(4,MotionDetailDiffComponent_div_6_div_4_Template,4,3,\"div\",29),core.Qc(5,MotionDetailDiffComponent_div_6_div_5_Template,3,2,\"div\",19),core.Qc(6,MotionDetailDiffComponent_div_6_div_6_Template,4,3,\"div\",20),core.Qc(7,MotionDetailDiffComponent_div_6_div_7_Template,4,4,\"div\",20),core.Ub(8,\"div\",30),core.mc(9,\"trust\"),core.Yb(),core.Yb()}if(2&rf){const change_r29=ctx.$implicit,i_r30=ctx.index,ctx_r2=core.lc();core.Gb(1),core.Kb(\"line-numbers-none\",ctx_r2.isLineNumberingNone())(\"line-numbers-inline\",ctx_r2.isLineNumberingInline())(\"line-numbers-outside\",ctx_r2.isLineNumberingOutside()),core.Gb(1),core.tc(\"html\",ctx_r2.getTextBetweenChanges(ctx_r2.getAllTextChangingObjects()[i_r30-1],change_r29))(\"changeRecommendations\",core.yc(28,_c1)),core.Gb(1),core.Jb(\"diff-box diff-box-\",change_r29.getChangeId(),\" clearfix\"),core.Kb(\"collides\",ctx_r2.hasCollissions(change_r29,ctx_r2.getAllTextChangingObjects())),core.Gb(1),core.tc(\"ngIf\",ctx_r2.hasCollissions(change_r29,ctx_r2.getAllTextChangingObjects())),core.Gb(1),core.tc(\"osPerms\",\"motions.can_manage\"),core.Gb(1),core.tc(\"ngIf\",ctx_r2.isChangeRecommendation(change_r29)&&change_r29.isRejected()),core.Gb(1),core.tc(\"ngIf\",ctx_r2.isAmendment(change_r29)&&ctx_r2.showAllAmendments),core.Gb(1),core.Kb(\"line-numbers-none\",ctx_r2.isLineNumberingNone())(\"line-numbers-inline\",ctx_r2.isLineNumberingInline())(\"line-numbers-outside\",ctx_r2.isLineNumberingOutside()),core.tc(\"innerHTML\",core.oc(9,25,ctx_r2.getDiff(change_r29),\"html\"),core.Jc),core.Hb(\"data-change-id\",change_r29.getChangeId())}}function MotionDetailDiffComponent_ng_template_11_mat_divider_6_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-divider\")}function MotionDetailDiffComponent_ng_template_11_button_7_span_3_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\" ...\"),core.Yb())}function MotionDetailDiffComponent_ng_template_11_button_7_Template(rf,ctx){if(1&rf){const _r52=core.ac();core.Zb(0,\"button\",35),core.hc(\"click\",(function(){core.Ic(_r52);const state_r48=ctx.$implicit,change_r43=core.lc().change;return core.lc().setAmendmentState(change_r43,state_r48.id)})),core.Sc(1),core.mc(2,\"translate\"),core.Qc(3,MotionDetailDiffComponent_ng_template_11_button_7_span_3_Template,2,0,\"span\",3),core.Yb()}if(2&rf){const state_r48=ctx.$implicit;core.Gb(1),core.Uc(\" \",core.nc(2,2,state_r48.name),\" \"),core.Gb(2),core.tc(\"ngIf\",state_r48.show_state_extension_field)}}function MotionDetailDiffComponent_ng_template_11_mat_divider_8_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-divider\")}function MotionDetailDiffComponent_ng_template_11_button_9_span_5_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\" ...\"),core.Yb())}function MotionDetailDiffComponent_ng_template_11_button_9_Template(rf,ctx){if(1&rf){const _r57=core.ac();core.Zb(0,\"button\",35),core.hc(\"click\",(function(){core.Ic(_r57);const state_r53=ctx.$implicit,change_r43=core.lc().change;return core.lc().setAmendmentState(change_r43,state_r53.id)})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"arrow_back\"),core.Yb(),core.Sc(3),core.mc(4,\"translate\"),core.Qc(5,MotionDetailDiffComponent_ng_template_11_button_9_span_5_Template,2,0,\"span\",3),core.Yb()}if(2&rf){const state_r53=ctx.$implicit;core.Gb(3),core.Uc(\" \",core.nc(4,2,state_r53.name),\" \"),core.Gb(2),core.tc(\"ngIf\",state_r53.show_state_extension_field)}}const _c2=function(){return{back:\"true\"}};function MotionDetailDiffComponent_ng_template_11_Template(rf,ctx){if(1&rf){const _r59=core.ac();core.Zb(0,\"button\",33),core.Zb(1,\"mat-icon\"),core.Sc(2,\"visibility_on\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb(),core.Qc(6,MotionDetailDiffComponent_ng_template_11_mat_divider_6_Template,1,0,\"mat-divider\",3),core.Qc(7,MotionDetailDiffComponent_ng_template_11_button_7_Template,4,4,\"button\",34),core.Qc(8,MotionDetailDiffComponent_ng_template_11_mat_divider_8_Template,1,0,\"mat-divider\",3),core.Qc(9,MotionDetailDiffComponent_ng_template_11_button_9_Template,6,4,\"button\",34),core.Zb(10,\"button\",35),core.hc(\"click\",(function(){core.Ic(_r59);const change_r43=ctx.change;return core.lc().setAmendmentState(change_r43,null)})),core.Zb(11,\"mat-icon\"),core.Sc(12,\"replay\"),core.Yb(),core.Sc(13),core.mc(14,\"translate\"),core.Yb()}if(2&rf){const change_r43=ctx.change;core.tc(\"routerLink\",change_r43.amendment.getDetailStateURL())(\"state\",core.yc(12,_c2)),core.Gb(4),core.Tc(core.nc(5,8,\"Show amendment\")),core.Gb(2),core.tc(\"ngIf\",change_r43.amendment.state.next_states.length>0),core.Gb(1),core.tc(\"ngForOf\",change_r43.amendment.state.next_states),core.Gb(1),core.tc(\"ngIf\",change_r43.amendment.state.next_states.length>0),core.Gb(1),core.tc(\"ngForOf\",change_r43.amendment.state.previous_states),core.Gb(4),core.Uc(\" \",core.nc(14,10,\"Reset state\"),\" \")}}function MotionDetailDiffComponent_ng_template_14_button_28_Template(rf,ctx){if(1&rf){const _r65=core.ac();core.Zb(0,\"button\",36),core.hc(\"click\",(function($event){core.Ic(_r65);const change_r60=core.lc().change;return core.lc().editChangeRecommendation(change_r60,$event)})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"edit\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Edit\")))}function MotionDetailDiffComponent_ng_template_14_button_29_Template(rf,ctx){if(1&rf){const _r68=core.ac();core.Zb(0,\"button\",36),core.hc(\"click\",(function($event){core.Ic(_r68);const change_r60=core.lc().change;return core.lc().editTitleChangeRecommendation(change_r60,$event)})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"edit\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Edit\")))}function MotionDetailDiffComponent_ng_template_14_Template(rf,ctx){if(1&rf){const _r70=core.ac();core.Zb(0,\"button\",36),core.hc(\"click\",(function(){core.Ic(_r70);const change_r60=ctx.change;return core.lc().setAcceptanceValue(change_r60,\"accepted\")})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"thumb_up\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Zb(6,\"mat-icon\",37),core.Sc(7),core.Yb(),core.Yb(),core.Zb(8,\"button\",36),core.hc(\"click\",(function(){core.Ic(_r70);const change_r60=ctx.change;return core.lc().setAcceptanceValue(change_r60,\"rejected\")})),core.Zb(9,\"mat-icon\"),core.Sc(10,\"thumb_down\"),core.Yb(),core.Zb(11,\"span\"),core.Sc(12),core.mc(13,\"translate\"),core.Yb(),core.Zb(14,\"mat-icon\",37),core.Sc(15),core.Yb(),core.Yb(),core.Zb(16,\"button\",36),core.hc(\"click\",(function(){core.Ic(_r70);const change_r60=ctx.change;return core.lc().setInternal(change_r60,!change_r60.internal)})),core.Zb(17,\"mat-icon\"),core.Sc(18),core.Yb(),core.Zb(19,\"span\"),core.Sc(20),core.mc(21,\"translate\"),core.Yb(),core.Yb(),core.Zb(22,\"button\",36),core.hc(\"click\",(function($event){core.Ic(_r70);const change_r60=ctx.change;return core.lc().deleteChangeRecommendation(change_r60,$event)})),core.Zb(23,\"mat-icon\"),core.Sc(24,\"delete\"),core.Yb(),core.Zb(25,\"span\"),core.Sc(26),core.mc(27,\"translate\"),core.Yb(),core.Yb(),core.Qc(28,MotionDetailDiffComponent_ng_template_14_button_28_Template,6,3,\"button\",38),core.Qc(29,MotionDetailDiffComponent_ng_template_14_button_29_Template,6,3,\"button\",38)}if(2&rf){const change_r60=ctx.change;core.Gb(4),core.Tc(core.nc(5,9,\"Accept\")),core.Gb(3),core.Tc(change_r60.isAccepted()?\"done\":\"\"),core.Gb(5),core.Tc(core.nc(13,11,\"Reject\")),core.Gb(3),core.Tc(change_r60.isRejected()?\"done\":\"\"),core.Gb(3),core.Tc(change_r60.internal?\"check_box_outline_blank\":\"check_box\"),core.Gb(2),core.Tc(core.nc(21,13,\"Public\")),core.Gb(6),core.Tc(core.nc(27,15,\"Delete\")),core.Gb(2),core.tc(\"ngIf\",!change_r60.isTitleChange()),core.Gb(1),core.tc(\"ngIf\",change_r60.isTitleChange())}}let motion_detail_diff_component_MotionDetailDiffComponent=(()=>{class MotionDetailDiffComponent extends base_view.a{constructor(title,translate,matSnackBar,diff,lineNumbering,recoRepo,motionRepo,dialogService,configService,el,promptService){super(title,translate,matSnackBar),this.translate=translate,this.diff=diff,this.lineNumbering=lineNumbering,this.recoRepo=recoRepo,this.motionRepo=motionRepo,this.dialogService=dialogService,this.configService=configService,this.el=el,this.promptService=promptService,this.getRecommendationTypeName=recommendation_type_names.a,this.createChangeRecommendation=new core.p,this.configService.get(\"motions_line_length\").subscribe(lineLength=>this.lineLength=lineLength),this.configService.get(\"motions_preamble\").subscribe(preamble=>this.preamble=preamble)}getTextBetweenChanges(change1,change2){const lineRange={from:change1?change1.getLineTo():1,to:change2?change2.getLineFrom():null};if(lineRange.from>=lineRange.to)return\"\";let baseText;return baseText=this.motion.isParagraphBasedAmendment()?this.motionRepo.getAllAmendmentParagraphsWithOriginalLineNumbers(this.motion,this.lineLength,!0).join(\"\\n\"):this.lineNumbering.insertLineNumbers(this.motion.text,this.lineLength),this.diff.extractMotionLineRange(baseText,lineRange,!0,this.lineLength,this.highlightedLine)}hasCollissions(change,changes){return changes.filter(otherChange=>otherChange.getChangeId()!==change.getChangeId()&&(otherChange.getLineFrom()>=change.getLineFrom()&&otherChange.getLineFrom()<change.getLineTo()||otherChange.getLineTo()>change.getLineFrom()&&otherChange.getLineTo()<=change.getLineTo()||otherChange.getLineFrom()<change.getLineFrom()&&otherChange.getLineTo()>change.getLineTo())).length>0}getDiff(change){let motionHtml;motionHtml=this.motion.isParagraphBasedAmendment()?this.motionRepo.getViewModel(this.motion.parent_id).text:this.motion.text;const baseHtml=this.lineNumbering.insertLineNumbers(motionHtml,this.lineLength);return this.diff.getChangeDiff(baseHtml,change,this.lineLength,this.highlightedLine)}getTextRemainderAfterLastChange(){if(!this.lineLength)return\"\";let baseText;return baseText=this.motion.isParagraphBasedAmendment()?this.motionRepo.getAllAmendmentParagraphsWithOriginalLineNumbers(this.motion,this.lineLength,!0).join(\"\\n\"):this.lineNumbering.insertLineNumbers(this.motion.text,this.lineLength),this.diff.getTextRemainderAfterLastChange(baseText,this.changes,this.lineLength,this.highlightedLine)}formatLineRange(change){return change.getLineFrom()<change.getLineTo()-1?change.getLineFrom().toString(10)+\" - \"+(change.getLineTo()-1).toString(10):change.getLineFrom().toString(10)}isRecommendation(change){return change.getChangeType()===view_unified_change.a.TYPE_CHANGE_RECOMMENDATION}isLineNumberingNone(){return this.lineNumberingMode===motions_constants.d.None}isLineNumberingInline(){return this.lineNumberingMode===motions_constants.d.Inside}isLineNumberingOutside(){return this.lineNumberingMode===motions_constants.d.Outside}isAmendment(change){return change.getChangeType()===view_unified_change.a.TYPE_AMENDMENT}isChangeRecommendation(change){return change.getChangeType()===view_unified_change.a.TYPE_CHANGE_RECOMMENDATION}getAllTextChangingObjects(){return this.changes.filter(obj=>!obj.isTitleChange())}getTitleChangingObject(){return this.changes.find(obj=>obj.isTitleChange())}getFormattedTitleDiff(){const change=this.getTitleChangingObject();return this.recoRepo.getTitleChangesAsDiff(this.motion.title,change)}setAcceptanceValue(change,value){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){try{\"accepted\"===value&&(yield this.recoRepo.setAccepted(change)),\"rejected\"===value&&(yield this.recoRepo.setRejected(change))}catch(e){this.raiseError(e)}}))}setInternal(change,internal){this.recoRepo.setInternal(change,internal).catch(this.raiseError)}deleteChangeRecommendation(reco,$event){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){$event.stopPropagation(),$event.preventDefault();const title=this.translate.instant(\"Are you sure you want to delete this change recommendation?\");(yield this.promptService.open(title))&&this.recoRepo.delete(reco).catch(this.raiseError)}))}editChangeRecommendation(reco,$event){$event.stopPropagation(),$event.preventDefault();const data={editChangeRecommendation:!0,newChangeRecommendation:!1,lineRange:{from:reco.getLineFrom(),to:reco.getLineTo()},changeRecommendation:reco};this.dialogService.open(motion_change_recommendation_dialog_component_MotionChangeRecommendationDialogComponent,Object.assign(Object.assign({},dialog_settings.c),{data:data}))}editTitleChangeRecommendation(reco,$event){$event.stopPropagation(),$event.preventDefault();const data={editChangeRecommendation:!0,newChangeRecommendation:!1,changeRecommendation:reco};this.dialogService.open(motion_title_change_recommendation_dialog_component_MotionTitleChangeRecommendationDialogComponent,Object.assign(Object.assign({},dialog_settings.c),{data:data}))}setAmendmentState(change,state){this.motionRepo.setState(change.amendment,state).catch(this.raiseError)}scrollToChangeElement(change){this.el.nativeElement.querySelector('[data-change-id=\"'+change.getChangeId()+'\"]').scrollIntoView({behavior:\"smooth\"})}scrollToChangeClicked(change,$event){$event.preventDefault(),$event.stopPropagation(),this.scrollToChangeElement(change)}onCreateChangeRecommendation(event){this.createChangeRecommendation.emit(event)}ngAfterViewInit(){this.scrollToChange&&window.setTimeout(()=>{this.scrollToChangeElement(this.scrollToChange)},50)}}return MotionDetailDiffComponent.ɵfac=function(t){return new(t||MotionDetailDiffComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(diff_service.a),core.Tb(linenumbering_service.a),core.Tb(change_recommendation_repository_service.a),core.Tb(motion_repository_service.a),core.Tb(dialog.b),core.Tb(config_service.a),core.Tb(core.m),core.Tb(prompt_service.a))},MotionDetailDiffComponent.ɵcmp=core.Nb({type:MotionDetailDiffComponent,selectors:[[\"os-motion-detail-diff\"]],inputs:{motion:\"motion\",changes:\"changes\",scrollToChange:\"scrollToChange\",highlightedLine:\"highlightedLine\",lineNumberingMode:\"lineNumberingMode\",showAllAmendments:\"showAllAmendments\"},outputs:{createChangeRecommendation:\"createChangeRecommendation\"},features:[core.Db],decls:15,vars:15,consts:[[\"class\",\"change-recommendation-overview\",4,\"ngIf\"],[1,\"text-prefix-label\"],[1,\"motion-text-with-diffs\"],[4,\"ngIf\"],[4,\"ngFor\",\"ngForOf\"],[1,\"motion-text\"],[3,\"html\",\"changeRecommendations\",\"createChangeRecommendation\"],[\"amendmentMenu\",\"matMenu\"],[\"matMenuContent\",\"\"],[\"changeRecommendationMenu\",\"matMenu\"],[1,\"change-recommendation-overview\"],[\"class\",\"no-changes\",4,\"ngIf\"],[\"href\",\"\",3,\"click\"],[\"class\",\"line-number\",4,\"ngIf\"],[\"class\",\"operation\",4,\"ngIf\"],[1,\"status\"],[1,\"line-number\"],[1,\"operation\"],[1,\"no-changes\"],[\"class\",\"action-row\",4,\"osPerms\"],[\"class\",\"status-row\",4,\"ngIf\"],[1,\"motion-text\",\"motion-text-diff\"],[1,\"bold\"],[3,\"innerHTML\"],[1,\"action-row\"],[\"mat-icon-button\",\"\",\"type\",\"button\",3,\"matMenuTriggerFor\",\"matMenuTriggerData\",4,\"ngIf\"],[\"mat-icon-button\",\"\",\"type\",\"button\",3,\"matMenuTriggerFor\",\"matMenuTriggerData\"],[1,\"status-row\"],[1,\"grey\"],[\"class\",\"collission-hint\",4,\"ngIf\"],[1,\"motion-text\",\"motion-text-diff\",3,\"innerHTML\"],[1,\"collission-hint\"],[3,\"matTooltip\"],[\"type\",\"button\",\"mat-menu-item\",\"\",3,\"routerLink\",\"state\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"ngFor\",\"ngForOf\"],[\"mat-menu-item\",\"\",3,\"click\"],[\"type\",\"button\",\"mat-menu-item\",\"\",3,\"click\"],[1,\"active-indicator\"],[\"type\",\"button\",\"mat-menu-item\",\"\",3,\"click\",4,\"ngIf\"]],template:function(rf,ctx){1&rf&&(core.Qc(0,MotionDetailDiffComponent_section_0_Template,7,5,\"section\",0),core.Zb(1,\"span\",1),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Zb(4,\"div\",2),core.Qc(5,MotionDetailDiffComponent_div_5_Template,10,19,\"div\",3),core.Qc(6,MotionDetailDiffComponent_div_6_Template,10,29,\"div\",4),core.Zb(7,\"div\",5),core.Zb(8,\"os-motion-detail-original-change-recommendations\",6),core.hc(\"createChangeRecommendation\",(function($event){return ctx.onCreateChangeRecommendation($event)})),core.Yb(),core.Yb(),core.Yb(),core.Zb(9,\"mat-menu\",null,7),core.Qc(11,MotionDetailDiffComponent_ng_template_11_Template,15,13,\"ng-template\",8),core.Yb(),core.Zb(12,\"mat-menu\",null,9),core.Qc(14,MotionDetailDiffComponent_ng_template_14_Template,30,17,\"ng-template\",8),core.Yb()),2&rf&&(core.tc(\"ngIf\",ctx.changes.length>0),core.Gb(2),core.Tc(core.nc(3,12,ctx.preamble)),core.Gb(3),core.tc(\"ngIf\",ctx.getTitleChangingObject()),core.Gb(1),core.tc(\"ngForOf\",ctx.getAllTextChangingObjects()),core.Gb(1),core.Kb(\"line-numbers-none\",ctx.isLineNumberingNone())(\"line-numbers-inline\",ctx.isLineNumberingInline())(\"line-numbers-outside\",ctx.isLineNumberingOutside()),core.Gb(1),core.tc(\"html\",ctx.getTextRemainderAfterLastChange())(\"changeRecommendations\",core.yc(14,_c1)))},directives:[common.t,common.s,motion_detail_original_change_recommendations_component_MotionDetailOriginalChangeRecommendationsComponent,menu.f,menu.b,perms_directive.a,fesm2015_button.b,menu.e,icon.a,tooltip.c,menu.c,fesm2015_router.g,divider.a],pipes:[ngx_translate_core.j,trust_pipe.a],styles:['.diff-box[_ngcontent-%COMP%]{position:relative;border-radius:3px;margin-bottom:0;padding-top:0;padding-right:40px}.diff-box[_ngcontent-%COMP%]:hover   .action-row[_ngcontent-%COMP%]{opacity:1}.diff-box[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]{position:absolute;right:0;font-size:.8em;opacity:.5;overflow:hidden}.diff-box[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{margin-left:5px;color:red}.diff-box[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{margin-left:5px}.diff-box[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]   .btn-amend-info[_ngcontent-%COMP%]{margin-left:5px;min-width:68px}.diff-box[_ngcontent-%COMP%]   .status-row[_ngcontent-%COMP%]{font-style:italic;color:grey}.diff-box[_ngcontent-%COMP%]   .status-row[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:after{content:\":\"}.change-recommendation-overview[_ngcontent-%COMP%]{border-radius:3px;margin-bottom:15px;padding:5px 10px}.change-recommendation-overview[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .change-recommendation-overview[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .change-recommendation-overview[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link{text-decoration:none}.change-recommendation-overview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:10px}.change-recommendation-overview[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:table}.change-recommendation-overview[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:table-row;cursor:pointer}.change-recommendation-overview[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{text-decoration:underline}.change-recommendation-overview[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:table-cell;padding:1px}.change-recommendation-overview[_ngcontent-%COMP%]   .no-changes[_ngcontent-%COMP%], .change-recommendation-overview[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{color:grey;font-style:italic}.active-indicator[_ngcontent-%COMP%]{font-size:18px;margin-left:10px;margin-right:0;margin-top:3px}']}),MotionDetailDiffComponent})();var list=__webpack_require__(\"MutI\"),attachment_control_component=__webpack_require__(\"JAMN\"),agenda_content_object_form_component=__webpack_require__(\"6Ehv\");function MotionDetailComponent_h2_2_span_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.Yb()),2&rf){const ctx_r25=core.lc(2);core.Gb(1),core.Tc(ctx_r25.motion.identifier)}}function MotionDetailComponent_h2_2_span_7_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.Yb()),2&rf){const ctx_r26=core.lc(2);core.Gb(1),core.Tc(ctx_r26.contentForm.get(\"identifier\").value)}}function MotionDetailComponent_h2_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"h2\"),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Zb(4,\"span\"),core.Sc(5,\" \"),core.Yb(),core.Qc(6,MotionDetailComponent_h2_2_span_6_Template,2,1,\"span\",2),core.Qc(7,MotionDetailComponent_h2_2_span_7_Template,2,1,\"span\",2),core.Yb()),2&rf){const ctx_r0=core.lc();core.Gb(2),core.Tc(core.nc(3,3,\"Motion\")),core.Gb(4),core.tc(\"ngIf\",!ctx_r0.editMotion),core.Gb(1),core.tc(\"ngIf\",ctx_r0.editMotion)}}function MotionDetailComponent_h2_3_Template(rf,ctx){1&rf&&(core.Zb(0,\"h2\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"New motion\")))}function MotionDetailComponent_h2_4_Template(rf,ctx){1&rf&&(core.Zb(0,\"h2\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"New amendment\")))}function MotionDetailComponent_div_5_div_1_Template(rf,ctx){if(1&rf){const _r30=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",20),core.hc(\"click\",(function(){core.Ic(_r30);const ctx_r29=core.lc(2);return ctx_r29.navigateToMotion(ctx_r29.previousMotion)})),core.Zb(2,\"os-icon-container\",21),core.Sc(3),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r27=core.lc(2);core.Gb(3),core.Uc(\" \",ctx_r27.previousMotion.identifier,\" \")}}function MotionDetailComponent_div_5_div_2_Template(rf,ctx){if(1&rf){const _r32=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",20),core.hc(\"click\",(function(){core.Ic(_r32);const ctx_r31=core.lc(2);return ctx_r31.navigateToMotion(ctx_r31.nextMotion)})),core.Zb(2,\"os-icon-container\",22),core.Sc(3),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r28=core.lc(2);core.Gb(2),core.tc(\"swap\",!0),core.Gb(1),core.Uc(\" \",ctx_r28.nextMotion.identifier,\" \")}}function MotionDetailComponent_div_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",19),core.Qc(1,MotionDetailComponent_div_5_div_1_Template,4,1,\"div\",2),core.Qc(2,MotionDetailComponent_div_5_div_2_Template,4,2,\"div\",2),core.Yb()),2&rf){const ctx_r3=core.lc();core.Gb(1),core.tc(\"ngIf\",ctx_r3.previousMotion),core.Gb(1),core.tc(\"ngIf\",ctx_r3.nextMotion)}}function MotionDetailComponent_div_12_div_1_button_1_Template(rf,ctx){if(1&rf){const _r45=core.ac();core.Zb(0,\"button\",24),core.hc(\"click\",(function(){core.Ic(_r45);const ctx_r44=core.lc(3);return ctx_r44.navigateToMotion(ctx_r44.previousMotion)})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"chevron_left\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const ctx_r41=core.lc(3);core.Gb(4),core.Vc(\"\",core.nc(5,2,\"Motion\"),\" \",ctx_r41.previousMotion.identifier,\"\")}}function MotionDetailComponent_div_12_div_1_button_2_Template(rf,ctx){if(1&rf){const _r47=core.ac();core.Zb(0,\"button\",24),core.hc(\"click\",(function(){core.Ic(_r47);const ctx_r46=core.lc(3);return ctx_r46.navigateToMotion(ctx_r46.nextMotion)})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"chevron_right\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const ctx_r42=core.lc(3);core.Gb(4),core.Vc(\"\",core.nc(5,2,\"Motion\"),\" \",ctx_r42.nextMotion.identifier,\"\")}}function MotionDetailComponent_div_12_div_1_mat_divider_3_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-divider\")}function MotionDetailComponent_div_12_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MotionDetailComponent_div_12_div_1_button_1_Template,6,4,\"button\",28),core.Qc(2,MotionDetailComponent_div_12_div_1_button_2_Template,6,4,\"button\",28),core.Qc(3,MotionDetailComponent_div_12_div_1_mat_divider_3_Template,1,0,\"mat-divider\",2),core.Yb()),2&rf){const ctx_r33=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r33.previousMotion),core.Gb(1),core.tc(\"ngIf\",ctx_r33.nextMotion),core.Gb(1),core.tc(\"ngIf\",ctx_r33.previousMotion||ctx_r33.nextMotion)}}function MotionDetailComponent_div_12_mat_divider_9_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-divider\")}function MotionDetailComponent_div_12_os_projector_button_10_Template(rf,ctx){if(1&rf&&core.Ub(0,\"os-projector-button\",23),2&rf){const ctx_r35=core.lc(2);core.tc(\"object\",ctx_r35.motion)(\"menuItem\",!0)}}function MotionDetailComponent_div_12_div_11_button_1_Template(rf,ctx){if(1&rf){const _r51=core.ac();core.Zb(0,\"button\",24),core.hc(\"click\",(function(){return core.Ic(_r51),core.lc(3).addToAgenda()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"add\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Add to agenda\")))}function MotionDetailComponent_div_12_div_11_button_2_Template(rf,ctx){if(1&rf){const _r53=core.ac();core.Zb(0,\"button\",24),core.hc(\"click\",(function(){return core.Ic(_r53),core.lc(3).removeFromAgenda()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"remove\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Remove from agenda\")))}function MotionDetailComponent_div_12_div_11_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MotionDetailComponent_div_12_div_11_button_1_Template,6,3,\"button\",28),core.Qc(2,MotionDetailComponent_div_12_div_11_button_2_Template,6,3,\"button\",28),core.Yb()),2&rf){const ctx_r36=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r36.motion&&!ctx_r36.motion.item),core.Gb(1),core.tc(\"ngIf\",ctx_r36.motion&&ctx_r36.motion.item)}}const motion_detail_component_c0=function(){return[\"/history\"]},motion_detail_component_c1=function(a0){return{element:a0}};function MotionDetailComponent_div_12_button_12_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"button\",30),core.Zb(1,\"mat-icon\"),core.Sc(2,\"history\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()),2&rf){const ctx_r37=core.lc(2);core.tc(\"routerLink\",core.yc(5,motion_detail_component_c0))(\"queryParams\",core.zc(6,motion_detail_component_c1,ctx_r37.motion.elementId)),core.Gb(4),core.Uc(\" \",core.nc(5,3,\"History\"),\" \")}}function MotionDetailComponent_div_12_mat_divider_13_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-divider\")}function MotionDetailComponent_div_12_button_14_Template(rf,ctx){if(1&rf){const _r55=core.ac();core.Zb(0,\"button\",24),core.hc(\"click\",(function(){return core.Ic(_r55),core.lc(2).setEditMode(!0)})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"edit\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Edit\")))}function MotionDetailComponent_div_12_button_15_Template(rf,ctx){if(1&rf){const _r57=core.ac();core.Zb(0,\"button\",31),core.hc(\"click\",(function(){return core.Ic(_r57),core.lc(2).deleteMotionButton()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"delete\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Delete\")))}const motion_detail_component_c2=function(){return[\"core.can_manage_projector\",\"agenda.can_manage\",\"core.can_see_history\"]};function MotionDetailComponent_div_12_Template(rf,ctx){if(1&rf){const _r59=core.ac();core.Zb(0,\"div\"),core.Qc(1,MotionDetailComponent_div_12_div_1_Template,4,3,\"div\",2),core.Ub(2,\"os-speaker-button\",23),core.Zb(3,\"button\",24),core.hc(\"click\",(function(){return core.Ic(_r59),core.lc().onDownloadPdf()})),core.Zb(4,\"mat-icon\"),core.Sc(5,\"picture_as_pdf\"),core.Yb(),core.Zb(6,\"span\"),core.Sc(7),core.mc(8,\"translate\"),core.Yb(),core.Yb(),core.Qc(9,MotionDetailComponent_div_12_mat_divider_9_Template,1,0,\"mat-divider\",25),core.Qc(10,MotionDetailComponent_div_12_os_projector_button_10_Template,1,2,\"os-projector-button\",26),core.Qc(11,MotionDetailComponent_div_12_div_11_Template,3,2,\"div\",25),core.Qc(12,MotionDetailComponent_div_12_button_12_Template,6,8,\"button\",27),core.Qc(13,MotionDetailComponent_div_12_mat_divider_13_Template,1,0,\"mat-divider\",2),core.Qc(14,MotionDetailComponent_div_12_button_14_Template,6,3,\"button\",28),core.Qc(15,MotionDetailComponent_div_12_button_15_Template,6,3,\"button\",29),core.Yb()}if(2&rf){const ctx_r5=core.lc();core.Gb(1),core.tc(\"ngIf\",ctx_r5.vp.isMobile),core.Gb(1),core.tc(\"object\",ctx_r5.motion)(\"menuItem\",!0),core.Gb(5),core.Tc(core.nc(8,11,\"PDF\")),core.Gb(2),core.tc(\"osPerms\",core.yc(13,motion_detail_component_c2)),core.Gb(1),core.tc(\"osPerms\",\"core.can_manage_projector\"),core.Gb(1),core.tc(\"osPerms\",\"agenda.can_manage\"),core.Gb(1),core.tc(\"osPerms\",\"core.can_see_history\"),core.Gb(1),core.tc(\"ngIf\",ctx_r5.perms.isAllowed(\"update\",ctx_r5.motion)||ctx_r5.perms.isAllowed(\"manage\")),core.Gb(1),core.tc(\"ngIf\",ctx_r5.perms.isAllowed(\"update\",ctx_r5.motion)),core.Gb(1),core.tc(\"ngIf\",ctx_r5.perms.isAllowed(\"manage\"))}}function MotionDetailComponent_div_14_span_3_span_1_Template(rf,ctx){if(1&rf){const _r67=core.ac();core.Zb(0,\"span\",39),core.hc(\"click\",(function(){core.Ic(_r67);const ctx_r66=core.lc(3);return ctx_r66.gotoChangeRecommendation(ctx_r66.getTitleChangingObject())})),core.Yb()}}function MotionDetailComponent_div_14_span_3_span_2_Template(rf,ctx){if(1&rf){const _r69=core.ac();core.Zb(0,\"span\",40),core.hc(\"click\",(function(){return core.Ic(_r69),core.lc(3).createTitleChangeRecommendation()})),core.Yb()}}function MotionDetailComponent_div_14_span_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Qc(1,MotionDetailComponent_div_14_span_3_span_1_Template,1,0,\"span\",37),core.Qc(2,MotionDetailComponent_div_14_span_3_span_2_Template,1,0,\"span\",38),core.Yb()),2&rf){const ctx_r60=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r60.getTitleChangingObject()),core.Gb(1),core.tc(\"osPerms\",\"motions.can_manage\")(\"osPermsAnd\",!ctx_r60.getTitleChangingObject())}}function MotionDetailComponent_div_14_span_10_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Sc(4),core.Yb()),2&rf){const ctx_r61=core.lc(2);core.Gb(2),core.Tc(core.nc(3,2,\"Sequential number\")),core.Gb(2),core.Uc(\" \",ctx_r61.motion.id,\" \")}}function MotionDetailComponent_div_14_span_11_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\"· \"),core.Yb())}const _c3=function(){return{back:\"true\"}};function MotionDetailComponent_div_14_span_12_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Zb(1,\"span\"),core.Zb(2,\"span\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Sc(5,\" \"),core.Zb(6,\"a\",41),core.Sc(7),core.Yb(),core.Yb(),core.Yb()),2&rf){const ctx_r63=core.lc(2);core.Gb(3),core.Tc(core.nc(4,4,\"Amendment to\")),core.Gb(3),core.tc(\"routerLink\",ctx_r63.motion.parent.getDetailStateURL())(\"state\",core.yc(6,_c3)),core.Gb(1),core.Uc(\" \",ctx_r63.motion.parent.identifier||ctx_r63.motion.parent.title,\" \")}}function MotionDetailComponent_div_14_Template(rf,ctx){if(1&rf){const _r71=core.ac();core.Zb(0,\"div\",32),core.Zb(1,\"div\",33),core.Zb(2,\"h1\",34),core.Qc(3,MotionDetailComponent_div_14_span_3_Template,3,3,\"span\",2),core.Sc(4),core.Yb(),core.Zb(5,\"button\",35),core.hc(\"click\",(function(){return core.Ic(_r71),core.lc().toggleFavorite()})),core.mc(6,\"translate\"),core.Zb(7,\"mat-icon\"),core.Sc(8),core.Yb(),core.Yb(),core.Yb(),core.Zb(9,\"span\",36),core.Qc(10,MotionDetailComponent_div_14_span_10_Template,5,4,\"span\",2),core.Qc(11,MotionDetailComponent_div_14_span_11_Template,2,0,\"span\",2),core.Qc(12,MotionDetailComponent_div_14_span_12_Template,8,7,\"span\",2),core.Yb(),core.Yb()}if(2&rf){const ctx_r6=core.lc();core.Gb(3),core.tc(\"ngIf\",ctx_r6.titleCanBeChanged()),core.Gb(1),core.Uc(\" \",ctx_r6.getTitleWithChanges(),\" \"),core.Gb(1),core.uc(\"matTooltip\",core.nc(6,7,\"Mark as personal favorite\")),core.Gb(3),core.Tc(ctx_r6.motion.star?\"star\":\"star_border\"),core.Gb(2),core.tc(\"ngIf\",ctx_r6.showSequential),core.Gb(1),core.tc(\"ngIf\",ctx_r6.showSequential&&ctx_r6.motion.parent_id),core.Gb(1),core.tc(\"ngIf\",ctx_r6.motion.parent_id)}}function MotionDetailComponent_ng_container_15_Template(rf,ctx){1&rf&&core.Vb(0)}function MotionDetailComponent_ng_template_16_div_0_ng_container_2_Template(rf,ctx){1&rf&&core.Vb(0)}function MotionDetailComponent_ng_template_16_div_0_ng_container_4_Template(rf,ctx){1&rf&&core.Vb(0)}function MotionDetailComponent_ng_template_16_div_0_os_motion_comments_5_Template(rf,ctx){if(1&rf&&core.Ub(0,\"os-motion-comments\",47),2&rf){const ctx_r75=core.lc(3);core.tc(\"motion\",ctx_r75.motion)}}function MotionDetailComponent_ng_template_16_div_0_os_personal_note_6_Template(rf,ctx){if(1&rf&&core.Ub(0,\"os-personal-note\",47),2&rf){const ctx_r76=core.lc(3);core.tc(\"motion\",ctx_r76.motion)}}function MotionDetailComponent_ng_template_16_div_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",43),core.Zb(1,\"div\"),core.Qc(2,MotionDetailComponent_ng_template_16_div_0_ng_container_2_Template,1,0,\"ng-container\",44),core.Yb(),core.Zb(3,\"mat-card\",45),core.Qc(4,MotionDetailComponent_ng_template_16_div_0_ng_container_4_Template,1,0,\"ng-container\",44),core.Yb(),core.Qc(5,MotionDetailComponent_ng_template_16_div_0_os_motion_comments_5_Template,1,1,\"os-motion-comments\",46),core.Qc(6,MotionDetailComponent_ng_template_16_div_0_os_personal_note_6_Template,1,1,\"os-personal-note\",46),core.Yb()),2&rf){const ctx_r72=core.lc(2),_r12=core.Ec(21),_r14=core.Ec(23);core.Gb(2),core.tc(\"ngTemplateOutlet\",_r12),core.Gb(1),core.tc(\"ngClass\",ctx_r72.editMotion?\"os-form-card-mobile\":\"os-card\"),core.Gb(1),core.tc(\"ngTemplateOutlet\",_r14),core.Gb(1),core.tc(\"ngIf\",!ctx_r72.editMotion),core.Gb(1),core.tc(\"ngIf\",!ctx_r72.editMotion&&!ctx_r72.operator.isAnonymous)}}function MotionDetailComponent_ng_template_16_Template(rf,ctx){if(1&rf&&core.Qc(0,MotionDetailComponent_ng_template_16_div_0_Template,7,5,\"div\",42),2&rf){const ctx_r9=core.lc();core.tc(\"ngIf\",ctx_r9.motion)}}function MotionDetailComponent_ng_template_18_div_0_ng_container_3_Template(rf,ctx){1&rf&&core.Vb(0)}function MotionDetailComponent_ng_template_18_div_0_os_motion_comments_4_Template(rf,ctx){if(1&rf&&core.Ub(0,\"os-motion-comments\",47),2&rf){const ctx_r79=core.lc(3);core.tc(\"motion\",ctx_r79.motion)}}function MotionDetailComponent_ng_template_18_div_0_os_personal_note_5_Template(rf,ctx){if(1&rf&&core.Ub(0,\"os-personal-note\",47),2&rf){const ctx_r80=core.lc(3);core.tc(\"motion\",ctx_r80.motion)}}function MotionDetailComponent_ng_template_18_div_0_ng_container_8_Template(rf,ctx){1&rf&&core.Vb(0)}function MotionDetailComponent_ng_template_18_div_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",49),core.Zb(1,\"div\",50),core.Zb(2,\"div\"),core.Qc(3,MotionDetailComponent_ng_template_18_div_0_ng_container_3_Template,1,0,\"ng-container\",44),core.Yb(),core.Qc(4,MotionDetailComponent_ng_template_18_div_0_os_motion_comments_4_Template,1,1,\"os-motion-comments\",46),core.Qc(5,MotionDetailComponent_ng_template_18_div_0_os_personal_note_5_Template,1,1,\"os-personal-note\",46),core.Yb(),core.Zb(6,\"div\",51),core.Zb(7,\"mat-card\",45),core.Qc(8,MotionDetailComponent_ng_template_18_div_0_ng_container_8_Template,1,0,\"ng-container\",44),core.Yb(),core.Yb(),core.Yb()),2&rf){const ctx_r77=core.lc(2),_r12=core.Ec(21),_r14=core.Ec(23);core.Gb(3),core.tc(\"ngTemplateOutlet\",_r12),core.Gb(1),core.tc(\"ngIf\",!ctx_r77.editMotion),core.Gb(1),core.tc(\"ngIf\",!ctx_r77.editMotion&&!ctx_r77.operator.isAnonymous),core.Gb(2),core.tc(\"ngClass\",ctx_r77.editMotion?\"os-form-card\":\"os-card\"),core.Gb(1),core.tc(\"ngTemplateOutlet\",_r14)}}function MotionDetailComponent_ng_template_18_Template(rf,ctx){if(1&rf&&core.Qc(0,MotionDetailComponent_ng_template_18_div_0_Template,9,5,\"div\",48),2&rf){const ctx_r11=core.lc();core.tc(\"ngIf\",ctx_r11.motion)}}function MotionDetailComponent_ng_template_20_div_1_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Ub(1,\"os-manage-submitters\",47),core.Yb()),2&rf){const ctx_r93=core.lc(3);core.Gb(1),core.tc(\"motion\",ctx_r93.motion)}}function MotionDetailComponent_ng_template_20_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MotionDetailComponent_ng_template_20_div_1_div_1_Template,2,1,\"div\",2),core.Yb()),2&rf){const ctx_r82=core.lc(2);core.Gb(1),core.tc(\"ngIf\",!ctx_r82.editMotion)}}function MotionDetailComponent_ng_template_20_div_2_h4_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"h4\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Supporters\")))}function MotionDetailComponent_ng_template_20_div_2_button_2_Template(rf,ctx){if(1&rf){const _r100=core.ac();core.Zb(0,\"button\",56),core.hc(\"click\",(function(){return core.Ic(_r100),core.lc(3).support()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"thumb_up\"),core.Yb(),core.Sc(3),core.mc(4,\"translate\"),core.Yb()}2&rf&&(core.Gb(3),core.Uc(\" \",core.nc(4,1,\"Support\"),\" \"))}function MotionDetailComponent_ng_template_20_div_2_button_3_Template(rf,ctx){if(1&rf){const _r102=core.ac();core.Zb(0,\"button\",56),core.hc(\"click\",(function(){return core.Ic(_r102),core.lc(3).unsupport()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"thumb_down\"),core.Yb(),core.Sc(3),core.mc(4,\"translate\"),core.Yb()}2&rf&&(core.Gb(3),core.Uc(\" \",core.nc(4,1,\"Unsupport\"),\" \"))}function MotionDetailComponent_ng_template_20_div_2_button_4_Template(rf,ctx){if(1&rf){const _r104=core.ac();core.Zb(0,\"button\",57),core.hc(\"click\",(function(){return core.Ic(_r104),core.lc(3).openSupportersDialog()})),core.Sc(1),core.mc(2,\"translate\"),core.Yb()}if(2&rf){const ctx_r97=core.lc(3);core.Gb(1),core.Vc(\" \",ctx_r97.motion.supporters.length,\" \",core.nc(2,2,\"supporters\"),\" \")}}function MotionDetailComponent_ng_template_20_div_2_p_5_span_1_span_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\", \"),core.Yb())}function MotionDetailComponent_ng_template_20_div_2_p_5_span_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.Qc(2,MotionDetailComponent_ng_template_20_div_2_p_5_span_1_span_2_Template,2,0,\"span\",2),core.Yb()),2&rf){const supporter_r106=ctx.$implicit,last_r107=ctx.last;core.Gb(1),core.Uc(\" \",supporter_r106.full_name,\"\"),core.Gb(1),core.tc(\"ngIf\",!last_r107)}}function MotionDetailComponent_ng_template_20_div_2_p_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"p\",58),core.Qc(1,MotionDetailComponent_ng_template_20_div_2_p_5_span_1_Template,3,2,\"span\",59),core.Yb()),2&rf){const ctx_r98=core.lc(3);core.Gb(1),core.tc(\"ngForOf\",ctx_r98.motion.supporters)}}function MotionDetailComponent_ng_template_20_div_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MotionDetailComponent_ng_template_20_div_2_h4_1_Template,3,3,\"h4\",2),core.Qc(2,MotionDetailComponent_ng_template_20_div_2_button_2_Template,5,3,\"button\",53),core.Qc(3,MotionDetailComponent_ng_template_20_div_2_button_3_Template,5,3,\"button\",53),core.Qc(4,MotionDetailComponent_ng_template_20_div_2_button_4_Template,3,4,\"button\",54),core.Qc(5,MotionDetailComponent_ng_template_20_div_2_p_5_Template,2,1,\"p\",55),core.Yb()),2&rf){const ctx_r83=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r83.perms.isAllowed(\"support\",ctx_r83.motion)||ctx_r83.motion.hasSupporters()),core.Gb(1),core.tc(\"ngIf\",ctx_r83.perms.isAllowed(\"support\",ctx_r83.motion)),core.Gb(1),core.tc(\"ngIf\",ctx_r83.perms.isAllowed(\"unsupport\",ctx_r83.motion)),core.Gb(1),core.tc(\"ngIf\",ctx_r83.motion.hasSupporters()),core.Gb(1),core.tc(\"ngIf\",ctx_r83.showSupporters)}}function MotionDetailComponent_ng_template_20_div_3_span_4_button_1_span_3_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\" ...\"),core.Yb())}function MotionDetailComponent_ng_template_20_div_3_span_4_button_1_Template(rf,ctx){if(1&rf){const _r116=core.ac();core.Zb(0,\"button\",24),core.hc(\"click\",(function(){core.Ic(_r116);const state_r113=ctx.$implicit;return core.lc(4).setState(state_r113.id)})),core.Sc(1),core.mc(2,\"translate\"),core.Qc(3,MotionDetailComponent_ng_template_20_div_3_span_4_button_1_span_3_Template,2,0,\"span\",2),core.Yb()}if(2&rf){const state_r113=ctx.$implicit;core.Gb(1),core.Uc(\" \",core.nc(2,2,state_r113.name),\" \"),core.Gb(2),core.tc(\"ngIf\",state_r113.show_state_extension_field)}}function MotionDetailComponent_ng_template_20_div_3_span_4_mat_divider_3_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-divider\")}function MotionDetailComponent_ng_template_20_div_3_span_4_button_4_span_5_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\" ...\"),core.Yb())}function MotionDetailComponent_ng_template_20_div_3_span_4_button_4_Template(rf,ctx){if(1&rf){const _r120=core.ac();core.Zb(0,\"button\",24),core.hc(\"click\",(function(){core.Ic(_r120);const state_r117=ctx.$implicit;return core.lc(4).setState(state_r117.id)})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"arrow_back\"),core.Yb(),core.Sc(3),core.mc(4,\"translate\"),core.Qc(5,MotionDetailComponent_ng_template_20_div_3_span_4_button_4_span_5_Template,2,0,\"span\",2),core.Yb()}if(2&rf){const state_r117=ctx.$implicit;core.Gb(3),core.Uc(\" \",core.nc(4,2,state_r117.name),\" \"),core.Gb(2),core.tc(\"ngIf\",state_r117.show_state_extension_field)}}function MotionDetailComponent_ng_template_20_div_3_span_4_Template(rf,ctx){if(1&rf){const _r122=core.ac();core.Zb(0,\"span\",62),core.Qc(1,MotionDetailComponent_ng_template_20_div_3_span_4_button_1_Template,4,4,\"button\",63),core.Zb(2,\"div\"),core.Qc(3,MotionDetailComponent_ng_template_20_div_3_span_4_mat_divider_3_Template,1,0,\"mat-divider\",2),core.Qc(4,MotionDetailComponent_ng_template_20_div_3_span_4_button_4_Template,6,4,\"button\",63),core.Zb(5,\"button\",24),core.hc(\"click\",(function(){return core.Ic(_r122),core.lc(3).setState(null)})),core.Zb(6,\"mat-icon\"),core.Sc(7,\"replay\"),core.Yb(),core.Sc(8),core.mc(9,\"translate\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r109=core.lc(3);core.Gb(1),core.tc(\"ngForOf\",ctx_r109.motion.state.next_states),core.Gb(2),core.tc(\"ngIf\",ctx_r109.motion.state.next_states.length>0),core.Gb(1),core.tc(\"ngForOf\",ctx_r109.motion.state.previous_states),core.Gb(4),core.Uc(\" \",core.nc(9,4,\"Reset state\"),\" \")}}function MotionDetailComponent_ng_template_20_div_3_Template(rf,ctx){if(1&rf){const _r124=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"os-extension-field\",60),core.hc(\"success\",(function($event){return core.Ic(_r124),core.lc(2).setStateExtension($event)})),core.mc(2,\"translate\"),core.mc(3,\"translate\"),core.Qc(4,MotionDetailComponent_ng_template_20_div_3_span_4_Template,10,6,\"span\",61),core.Yb(),core.Yb()}if(2&rf){const ctx_r84=core.lc(2);core.Gb(1),core.uc(\"title\",core.nc(2,8,\"State\")),core.uc(\"extensionLabel\",core.nc(3,10,\"Extension\")),core.tc(\"canBeEdited\",ctx_r84.perms.isAllowed(\"change_state\",ctx_r84.motion))(\"hasExtension\",ctx_r84.motion.state&&ctx_r84.motion.state.show_state_extension_field)(\"chipValue\",ctx_r84.stateLabel)(\"inputValue\",ctx_r84.newStateExtension)(\"classes\",ctx_r84.motion.stateCssColor),core.Gb(3),core.tc(\"ngIf\",ctx_r84.motion.state)}}function MotionDetailComponent_ng_template_20_div_4_button_5_span_3_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\" ...\"),core.Yb())}function MotionDetailComponent_ng_template_20_div_4_button_5_Template(rf,ctx){if(1&rf){const _r130=core.ac();core.Zb(0,\"button\",24),core.hc(\"click\",(function(){core.Ic(_r130);const recommendation_r127=ctx.$implicit;return core.lc(3).setRecommendation(recommendation_r127.id)})),core.Sc(1),core.mc(2,\"translate\"),core.Qc(3,MotionDetailComponent_ng_template_20_div_4_button_5_span_3_Template,2,0,\"span\",2),core.Yb()}if(2&rf){const recommendation_r127=ctx.$implicit;core.Gb(1),core.Uc(\" \",core.nc(2,2,recommendation_r127.recommendation_label),\" \"),core.Gb(2),core.tc(\"ngIf\",recommendation_r127.show_recommendation_extension_field)}}function MotionDetailComponent_ng_template_20_div_4_button_12_Template(rf,ctx){if(1&rf){const _r132=core.ac();core.Zb(0,\"button\",66),core.hc(\"click\",(function(){return core.Ic(_r132),core.lc(3).onFollowRecButton()})),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(2),core.Tc(core.nc(3,1,\"Follow recommendation\")))}function MotionDetailComponent_ng_template_20_div_4_Template(rf,ctx){if(1&rf){const _r134=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"os-extension-field\",64),core.hc(\"success\",(function($event){return core.Ic(_r134),core.lc(2).setRecommendationExtension($event)})),core.mc(2,\"translate\"),core.mc(3,\"translate\"),core.Zb(4,\"span\",62),core.Qc(5,MotionDetailComponent_ng_template_20_div_4_button_5_Template,4,4,\"button\",63),core.Ub(6,\"mat-divider\"),core.Zb(7,\"button\",24),core.hc(\"click\",(function(){return core.Ic(_r134),core.lc(2).setRecommendation(null)})),core.Zb(8,\"mat-icon\"),core.Sc(9,\"replay\"),core.Yb(),core.Sc(10),core.mc(11,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Qc(12,MotionDetailComponent_ng_template_20_div_4_button_12_Template,4,3,\"button\",65),core.Yb()}if(2&rf){const ctx_r85=core.lc(2);core.Gb(1),core.uc(\"title\",ctx_r85.recommender),core.uc(\"extensionLabel\",core.nc(2,11,\"Extension\")),core.uc(\"searchListLabel\",core.nc(3,13,\"Motions\")),core.tc(\"inputValue\",ctx_r85.recommendationStateExtension)(\"canBeEdited\",ctx_r85.perms.isAllowed(\"change_metadata\",ctx_r85.motion))(\"chipValue\",ctx_r85.recommendationLabel)(\"hasExtension\",ctx_r85.motion.recommendation&&ctx_r85.motion.recommendation.show_recommendation_extension_field)(\"searchList\",ctx_r85.motionObserver),core.Gb(4),core.tc(\"ngForOf\",ctx_r85.motion.possibleRecommendations),core.Gb(5),core.Uc(\" \",core.nc(11,15,\"Reset recommendation\"),\" \"),core.Gb(2),core.tc(\"ngIf\",ctx_r85.canFollowRecommendation())}}function MotionDetailComponent_ng_template_20_div_5_span_4_span_3_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\" · \"),core.Yb())}function MotionDetailComponent_ng_template_20_div_5_span_4_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Zb(1,\"a\",67),core.Sc(2),core.Yb(),core.Qc(3,MotionDetailComponent_ng_template_20_div_5_span_4_span_3_Template,2,0,\"span\",2),core.Yb()),2&rf){const motion_r137=ctx.$implicit,last_r138=ctx.last;core.Gb(1),core.tc(\"routerLink\",motion_r137.getDetailStateURL()),core.Gb(1),core.Tc(motion_r137.identifierOrTitle),core.Gb(1),core.tc(\"ngIf\",!last_r138)}}function MotionDetailComponent_ng_template_20_div_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"h4\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Qc(4,MotionDetailComponent_ng_template_20_div_5_span_4_Template,4,3,\"span\",59),core.Yb()),2&rf){const ctx_r86=core.lc(2);core.Gb(2),core.Tc(core.nc(3,2,\"Referring motions\")),core.Gb(2),core.tc(\"ngForOf\",ctx_r86.recommendationReferencingMotions)}}function MotionDetailComponent_ng_template_20_div_6_h4_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"h4\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Category\")))}function MotionDetailComponent_ng_template_20_div_6_button_4_mat_icon_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-icon\"),core.Sc(1,\"check\"),core.Yb())}function MotionDetailComponent_ng_template_20_div_6_button_4_Template(rf,ctx){if(1&rf){const _r148=core.ac();core.Zb(0,\"button\",24),core.hc(\"click\",(function(){core.Ic(_r148);const category_r145=ctx.$implicit;return core.lc(3).setCategory(category_r145.id)})),core.Qc(1,MotionDetailComponent_ng_template_20_div_6_button_4_mat_icon_1_Template,2,0,\"mat-icon\",2),core.Sc(2),core.Yb()}if(2&rf){const category_r145=ctx.$implicit,ctx_r142=core.lc(3);core.Gb(1),core.tc(\"ngIf\",ctx_r142.motion.category_id===category_r145.id),core.Gb(1),core.Uc(\" \",category_r145.prefixedNameWithParents,\" \")}}function MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_5_div_1_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.Yb()),2&rf){const ctx_r151=core.lc(5);core.Gb(1),core.Uc(\" \",ctx_r151.motion.category.parent,\" \")}}function MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_5_div_1_span_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\"\",core.nc(2,1,\"Subcategory\"),\":\"))}function MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_5_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_5_div_1_div_1_Template,2,1,\"div\",2),core.Qc(2,MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_5_div_1_span_2_Template,3,3,\"span\",2),core.Sc(3),core.Yb()),2&rf){const ctx_r149=core.lc(4);core.Gb(1),core.tc(\"ngIf\",ctx_r149.motion.category.parent),core.Gb(1),core.tc(\"ngIf\",ctx_r149.motion.category.parent),core.Gb(1),core.Uc(\" \",ctx_r149.motion.category,\" \")}}function MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_5_span_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\"-\"),core.Yb())}function MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-basic-chip\",71),core.Qc(1,MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_5_div_1_Template,4,3,\"div\",2),core.Qc(2,MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_5_span_2_Template,2,0,\"span\",2),core.Yb()),2&rf){core.lc();const _r141=core.Ec(3),ctx_r143=core.lc(2);core.tc(\"matMenuTriggerFor\",_r141),core.Gb(1),core.tc(\"ngIf\",ctx_r143.motion.category),core.Gb(1),core.tc(\"ngIf\",!ctx_r143.motion.category)}}function MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_6_div_1_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.Yb()),2&rf){const ctx_r154=core.lc(5);core.Gb(1),core.Uc(\" \",ctx_r154.motion.category.parent,\" \")}}function MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_6_div_1_span_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\"\",core.nc(2,1,\"Subcategory\"),\":\"))}function MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_6_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_6_div_1_div_1_Template,2,1,\"div\",2),core.Qc(2,MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_6_div_1_span_2_Template,3,3,\"span\",2),core.Sc(3),core.Yb()),2&rf){const ctx_r153=core.lc(4);core.Gb(1),core.tc(\"ngIf\",ctx_r153.motion.category.parent),core.Gb(1),core.tc(\"ngIf\",ctx_r153.motion.category.parent),core.Gb(1),core.Uc(\" \",ctx_r153.motion.category,\" \")}}function MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-basic-chip\",72),core.Qc(1,MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_6_div_1_Template,4,3,\"div\",2),core.Yb()),2&rf){const ctx_r144=core.lc(3);core.Gb(1),core.tc(\"ngIf\",ctx_r144.motion.category)}}function MotionDetailComponent_ng_template_20_div_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MotionDetailComponent_ng_template_20_div_6_h4_1_Template,3,3,\"h4\",2),core.Zb(2,\"mat-menu\",null,68),core.Qc(4,MotionDetailComponent_ng_template_20_div_6_button_4_Template,3,2,\"button\",63),core.Yb(),core.Qc(5,MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_5_Template,3,3,\"mat-basic-chip\",69),core.Qc(6,MotionDetailComponent_ng_template_20_div_6_mat_basic_chip_6_Template,2,1,\"mat-basic-chip\",70),core.Yb()),2&rf){const ctx_r87=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r87.perms.isAllowed(\"change_metadata\",ctx_r87.motion)||ctx_r87.motion.category),core.Gb(3),core.tc(\"ngForOf\",ctx_r87.categoryObserver.value),core.Gb(1),core.tc(\"ngIf\",ctx_r87.perms.isAllowed(\"change_metadata\",ctx_r87.motion)),core.Gb(1),core.tc(\"ngIf\",!ctx_r87.perms.isAllowed(\"change_metadata\",ctx_r87.motion)&&ctx_r87.motion.category)}}function MotionDetailComponent_ng_template_20_div_7_h4_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"h4\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Tags\")))}function MotionDetailComponent_ng_template_20_div_7_div_2_button_3_mat_icon_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-icon\"),core.Sc(1,\"check\"),core.Yb())}function MotionDetailComponent_ng_template_20_div_7_div_2_button_3_Template(rf,ctx){if(1&rf){const _r166=core.ac();core.Zb(0,\"button\",24),core.hc(\"click\",(function($event){core.Ic(_r166);const tag_r163=ctx.$implicit;return core.lc(4).setTag($event,tag_r163.id)})),core.Qc(1,MotionDetailComponent_ng_template_20_div_7_div_2_button_3_mat_icon_1_Template,2,0,\"mat-icon\",2),core.Sc(2),core.Yb()}if(2&rf){const tag_r163=ctx.$implicit,ctx_r160=core.lc(4);core.Gb(1),core.tc(\"ngIf\",ctx_r160.motion.tags.includes(tag_r163)),core.Gb(1),core.Uc(\" \",tag_r163,\" \")}}function MotionDetailComponent_ng_template_20_div_7_div_2_mat_basic_chip_5_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-basic-chip\",78),core.Sc(1),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",\"–\",\" \"))}function MotionDetailComponent_ng_template_20_div_7_div_2_mat_basic_chip_7_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-basic-chip\",78),core.Sc(1),core.Yb()),2&rf){const tag_r167=ctx.$implicit;core.Gb(1),core.Uc(\" \",tag_r167,\" \")}}function MotionDetailComponent_ng_template_20_div_7_div_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"mat-menu\",null,73),core.Qc(3,MotionDetailComponent_ng_template_20_div_7_div_2_button_3_Template,3,2,\"button\",63),core.Yb(),core.Zb(4,\"div\",74),core.Qc(5,MotionDetailComponent_ng_template_20_div_7_div_2_mat_basic_chip_5_Template,2,1,\"mat-basic-chip\",75),core.Zb(6,\"mat-chip-list\",76),core.Qc(7,MotionDetailComponent_ng_template_20_div_7_div_2_mat_basic_chip_7_Template,2,1,\"mat-basic-chip\",77),core.Yb(),core.Yb(),core.Yb()),2&rf){const _r159=core.Ec(2),ctx_r157=core.lc(3);core.Gb(3),core.tc(\"ngForOf\",ctx_r157.tagObserver.value),core.Gb(1),core.tc(\"matMenuTriggerFor\",_r159),core.Gb(1),core.tc(\"ngIf\",!ctx_r157.motion.hasTags()),core.Gb(2),core.tc(\"ngForOf\",ctx_r157.motion.tags)}}function MotionDetailComponent_ng_template_20_div_7_div_3_mat_basic_chip_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-basic-chip\",72),core.Sc(1),core.Yb()),2&rf){const tag_r169=ctx.$implicit;core.Gb(1),core.Uc(\" \",tag_r169,\" \")}}function MotionDetailComponent_ng_template_20_div_7_div_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"mat-chip-list\",76),core.Qc(2,MotionDetailComponent_ng_template_20_div_7_div_3_mat_basic_chip_2_Template,2,1,\"mat-basic-chip\",79),core.Yb(),core.Yb()),2&rf){const ctx_r158=core.lc(3);core.Gb(2),core.tc(\"ngForOf\",ctx_r158.motion.tags)}}function MotionDetailComponent_ng_template_20_div_7_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MotionDetailComponent_ng_template_20_div_7_h4_1_Template,3,3,\"h4\",2),core.Qc(2,MotionDetailComponent_ng_template_20_div_7_div_2_Template,8,4,\"div\",2),core.Qc(3,MotionDetailComponent_ng_template_20_div_7_div_3_Template,3,1,\"div\",2),core.Yb()),2&rf){const ctx_r88=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r88.perms.isAllowed(\"change_metadata\",ctx_r88.motion)||ctx_r88.motion.hasTags()),core.Gb(1),core.tc(\"ngIf\",ctx_r88.perms.isAllowed(\"change_metadata\",ctx_r88.motion)),core.Gb(1),core.tc(\"ngIf\",!ctx_r88.perms.isAllowed(\"change_metadata\",ctx_r88.motion))}}function MotionDetailComponent_ng_template_20_div_8_h4_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"h4\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"Motion block\"),\" \"))}function MotionDetailComponent_ng_template_20_div_8_button_4_mat_icon_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-icon\"),core.Sc(1,\"check\"),core.Yb())}function MotionDetailComponent_ng_template_20_div_8_button_4_Template(rf,ctx){if(1&rf){const _r178=core.ac();core.Zb(0,\"button\",24),core.hc(\"click\",(function(){core.Ic(_r178);const block_r175=ctx.$implicit;return core.lc(3).setBlock(block_r175.id)})),core.Qc(1,MotionDetailComponent_ng_template_20_div_8_button_4_mat_icon_1_Template,2,0,\"mat-icon\",2),core.Sc(2),core.Yb()}if(2&rf){const block_r175=ctx.$implicit,ctx_r172=core.lc(3);core.Gb(1),core.tc(\"ngIf\",ctx_r172.motion.motion_block_id===block_r175.id),core.Gb(1),core.Uc(\" \",block_r175,\" \")}}function MotionDetailComponent_ng_template_20_div_8_mat_basic_chip_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-basic-chip\",82),core.Sc(1),core.Yb()),2&rf){core.lc();const _r171=core.Ec(3),ctx_r173=core.lc(2);core.tc(\"matMenuTriggerFor\",_r171),core.Gb(1),core.Uc(\" \",ctx_r173.motion.motion_block||\"–\",\" \")}}function MotionDetailComponent_ng_template_20_div_8_mat_basic_chip_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-basic-chip\",72),core.Sc(1),core.Yb()),2&rf){const ctx_r174=core.lc(3);core.Gb(1),core.Uc(\" \",ctx_r174.motion.motion_block,\" \")}}function MotionDetailComponent_ng_template_20_div_8_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MotionDetailComponent_ng_template_20_div_8_h4_1_Template,3,3,\"h4\",2),core.Zb(2,\"mat-menu\",null,80),core.Qc(4,MotionDetailComponent_ng_template_20_div_8_button_4_Template,3,2,\"button\",63),core.Yb(),core.Qc(5,MotionDetailComponent_ng_template_20_div_8_mat_basic_chip_5_Template,2,2,\"mat-basic-chip\",81),core.Qc(6,MotionDetailComponent_ng_template_20_div_8_mat_basic_chip_6_Template,2,1,\"mat-basic-chip\",70),core.Yb()),2&rf){const ctx_r89=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r89.perms.isAllowed(\"change_metadata\",ctx_r89.motion)||ctx_r89.motion.motion_block),core.Gb(3),core.tc(\"ngForOf\",ctx_r89.blockObserver.value),core.Gb(1),core.tc(\"ngIf\",ctx_r89.perms.isAllowed(\"change_metadata\",ctx_r89.motion)),core.Gb(1),core.tc(\"ngIf\",!ctx_r89.perms.isAllowed(\"change_metadata\",ctx_r89.motion)&&ctx_r89.motion.motion_block)}}function MotionDetailComponent_ng_template_20_div_9_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"h4\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Sc(4),core.Yb()),2&rf){const ctx_r90=core.lc(2);core.Gb(2),core.Tc(core.nc(3,2,\"Origin\")),core.Gb(2),core.Uc(\" \",ctx_r90.motion.origin,\" \")}}function MotionDetailComponent_ng_template_20_div_10_span_6_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Amendment\")))}function MotionDetailComponent_ng_template_20_div_10_span_7_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Amendments\")))}function MotionDetailComponent_ng_template_20_div_10_mat_checkbox_9_Template(rf,ctx){if(1&rf){const _r183=core.ac();core.Zb(0,\"mat-checkbox\",84),core.hc(\"ngModelChange\",(function($event){return core.Ic(_r183),core.lc(3).showAllAmendments=$event})),core.Sc(1),core.mc(2,\"translate\"),core.Yb()}if(2&rf){const ctx_r181=core.lc(3);core.tc(\"ngModel\",ctx_r181.showAllAmendments),core.Gb(1),core.Uc(\" \",core.nc(2,2,\"Show all changes\"),\" \")}}const _c4=function(a1){return[\"/motions/amendments\",a1]};function MotionDetailComponent_ng_template_20_div_10_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"h4\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Zb(4,\"a\",41),core.Sc(5),core.Qc(6,MotionDetailComponent_ng_template_20_div_10_span_6_Template,3,3,\"span\",2),core.Qc(7,MotionDetailComponent_ng_template_20_div_10_span_7_Template,3,3,\"span\",2),core.Yb(),core.Ub(8,\"br\"),core.Qc(9,MotionDetailComponent_ng_template_20_div_10_mat_checkbox_9_Template,3,4,\"mat-checkbox\",83),core.Yb()),2&rf){const ctx_r91=core.lc(2);core.Gb(2),core.Tc(core.nc(3,7,\"Amendments\")),core.Gb(2),core.tc(\"routerLink\",core.zc(9,_c4,ctx_r91.motion.id))(\"state\",core.yc(11,_c3)),core.Gb(1),core.Uc(\" \",ctx_r91.amendments.length,\" \"),core.Gb(1),core.tc(\"ngIf\",1===ctx_r91.amendments.length),core.Gb(1),core.tc(\"ngIf\",ctx_r91.amendments.length>1),core.Gb(2),core.tc(\"ngIf\",ctx_r91.isRecoMode(ctx_r91.ChangeRecoMode.Diff))}}function MotionDetailComponent_ng_template_20_div_11_os_motion_poll_1_Template(rf,ctx){1&rf&&core.Ub(0,\"os-motion-poll\",88),2&rf&&core.tc(\"poll\",ctx.$implicit)}function MotionDetailComponent_ng_template_20_div_11_button_2_Template(rf,ctx){if(1&rf){const _r188=core.ac();core.Zb(0,\"button\",89),core.hc(\"click\",(function(){return core.Ic(_r188),core.lc(3).openDialog()})),core.Zb(1,\"mat-icon\",90),core.Sc(2,\"add\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"New vote\")))}function MotionDetailComponent_ng_template_20_div_11_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",85),core.Qc(1,MotionDetailComponent_ng_template_20_div_11_os_motion_poll_1_Template,1,1,\"os-motion-poll\",86),core.Qc(2,MotionDetailComponent_ng_template_20_div_11_button_2_Template,6,3,\"button\",87),core.Yb()),2&rf){const ctx_r92=core.lc(2);core.Gb(1),core.tc(\"ngForOf\",ctx_r92.motion.polls)(\"ngForTrackBy\",ctx_r92.trackByIndex),core.Gb(1),core.tc(\"ngIf\",ctx_r92.perms.isAllowed(\"createpoll\",ctx_r92.motion))}}function MotionDetailComponent_ng_template_20_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MotionDetailComponent_ng_template_20_div_1_Template,2,1,\"div\",2),core.Qc(2,MotionDetailComponent_ng_template_20_div_2_Template,6,5,\"div\",2),core.Qc(3,MotionDetailComponent_ng_template_20_div_3_Template,5,12,\"div\",2),core.Qc(4,MotionDetailComponent_ng_template_20_div_4_Template,13,17,\"div\",2),core.Qc(5,MotionDetailComponent_ng_template_20_div_5_Template,5,4,\"div\",2),core.Qc(6,MotionDetailComponent_ng_template_20_div_6_Template,7,4,\"div\",2),core.Qc(7,MotionDetailComponent_ng_template_20_div_7_Template,4,3,\"div\",2),core.Qc(8,MotionDetailComponent_ng_template_20_div_8_Template,7,4,\"div\",2),core.Qc(9,MotionDetailComponent_ng_template_20_div_9_Template,5,4,\"div\",2),core.Qc(10,MotionDetailComponent_ng_template_20_div_10_Template,10,12,\"div\",2),core.Qc(11,MotionDetailComponent_ng_template_20_div_11_Template,3,3,\"div\",52),core.Yb()),2&rf){const ctx_r13=core.lc();core.Gb(1),core.tc(\"ngIf\",ctx_r13.motion.submitters||ctx_r13.newMotion),core.Gb(1),core.tc(\"ngIf\",ctx_r13.minSupporters&&!ctx_r13.editMotion),core.Gb(1),core.tc(\"ngIf\",!ctx_r13.editMotion),core.Gb(1),core.tc(\"ngIf\",(ctx_r13.perms.isAllowed(\"change_metadata\")||ctx_r13.motion.recommendation)&&ctx_r13.recommender&&ctx_r13.motion.possibleRecommendations.length&&!ctx_r13.editMotion),core.Gb(1),core.tc(\"ngIf\",!ctx_r13.editMotion&&ctx_r13.recommendationReferencingMotions.length>0&&ctx_r13.showReferringMotions),core.Gb(1),core.tc(\"ngIf\",!ctx_r13.editMotion&&ctx_r13.categoryObserver.value.length),core.Gb(1),core.tc(\"ngIf\",!ctx_r13.editMotion&&ctx_r13.tagObserver.value.length>0),core.Gb(1),core.tc(\"ngIf\",!ctx_r13.editMotion&&ctx_r13.blockObserver.value.length>0),core.Gb(1),core.tc(\"ngIf\",!ctx_r13.editMotion&&ctx_r13.motion.origin),core.Gb(1),core.tc(\"ngIf\",!ctx_r13.editMotion&&ctx_r13.amendments&&ctx_r13.amendments.length>0),core.Gb(1),core.tc(\"ngIf\",!ctx_r13.editMotion)}}function MotionDetailComponent_ng_template_22_div_1_mat_form_field_2_mat_error_3_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-error\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Invalid line number\")))}function MotionDetailComponent_ng_template_22_div_1_mat_form_field_2_button_4_Template(rf,ctx){if(1&rf){const _r215=core.ac();core.Zb(0,\"button\",110),core.hc(\"click\",(function(){core.Ic(_r215);const ctx_r214=core.lc(4);return ctx_r214.gotoHighlightedLine(ctx_r214.highlightedLineTyping),ctx_r214.highlightedLineTyping=\"\"})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"redo\"),core.Yb(),core.Yb()}}const _c5=function(){return{standalone:!0}};function MotionDetailComponent_ng_template_22_div_1_mat_form_field_2_Template(rf,ctx){if(1&rf){const _r217=core.ac();core.Zb(0,\"mat-form-field\",107),core.Zb(1,\"input\",108),core.hc(\"ngModelChange\",(function($event){return core.Ic(_r217),core.lc(3).highlightedLineTyping=$event})),core.mc(2,\"translate\"),core.Yb(),core.Qc(3,MotionDetailComponent_ng_template_22_div_1_mat_form_field_2_mat_error_3_Template,3,3,\"mat-error\",2),core.Qc(4,MotionDetailComponent_ng_template_22_div_1_mat_form_field_2_button_4_Template,3,0,\"button\",109),core.Yb()}if(2&rf){const ctx_r207=core.lc(3);core.Gb(1),core.uc(\"placeholder\",core.nc(2,6,\"Go to line\")),core.tc(\"ngModel\",ctx_r207.highlightedLineTyping)(\"ngModelOptions\",core.yc(8,_c5))(\"errorStateMatcher\",ctx_r207.highlightedLineMatcher),core.Gb(2),core.tc(\"ngIf\",ctx_r207.highlightedLineTyping>10),core.Gb(1),core.tc(\"ngIf\",ctx_r207.highlightedLineTyping)}}function MotionDetailComponent_ng_template_22_div_1_button_3_Template(rf,ctx){if(1&rf){const _r219=core.ac();core.Zb(0,\"button\",111),core.hc(\"click\",(function(){return core.Ic(_r219),core.lc(3).highlightedLineOpened=!1})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"cancel\"),core.Yb(),core.Yb()}}function MotionDetailComponent_ng_template_22_div_1_span_11_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\"  (\"),core.Zb(2,\"span\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Sc(5,\") \"),core.Yb()),2&rf&&(core.Gb(3),core.Tc(core.nc(4,1,\"none\")))}function MotionDetailComponent_ng_template_22_div_1_button_12_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"button\",105),core.Zb(1,\"mat-icon\"),core.Sc(2,\"rate_review\"),core.Yb(),core.Sc(3,\"  \"),core.Zb(4,\"span\"),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb()),2&rf){const ctx_r210=core.lc(3),_r20=core.Ec(30);core.tc(\"matMenuTriggerFor\",_r20),core.Gb(5),core.Tc(core.nc(6,2,ctx_r210.verboseChangeRecoMode[ctx_r210.crMode]))}}function MotionDetailComponent_ng_template_22_div_1_div_13_button_1_Template(rf,ctx){if(1&rf){const _r226=core.ac();core.Zb(0,\"button\",116),core.hc(\"click\",(function(){return core.Ic(_r226),core.lc(4).createModifiedFinalVersion()})),core.mc(1,\"translate\"),core.Zb(2,\"mat-icon\"),core.Sc(3,\"file_copy\"),core.Yb(),core.Yb()}2&rf&&core.uc(\"matTooltip\",core.nc(1,1,\"Create final print template\"))}function MotionDetailComponent_ng_template_22_div_1_div_13_button_2_Template(rf,ctx){if(1&rf){const _r228=core.ac();core.Zb(0,\"button\",117),core.hc(\"click\",(function(){return core.Ic(_r228),core.lc(4).editModifiedFinal()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"edit\"),core.Yb(),core.Yb()}}function MotionDetailComponent_ng_template_22_div_1_div_13_button_3_Template(rf,ctx){if(1&rf){const _r230=core.ac();core.Zb(0,\"button\",118),core.hc(\"click\",(function(){return core.Ic(_r230),core.lc(4).onSubmitFinalVersion()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"save\"),core.Yb(),core.Yb()}if(2&rf){const ctx_r222=core.lc(4);core.tc(\"disabled\",!ctx_r222.finalVersionEdited)}}function MotionDetailComponent_ng_template_22_div_1_div_13_button_4_Template(rf,ctx){if(1&rf){const _r232=core.ac();core.Zb(0,\"button\",117),core.hc(\"click\",(function(){return core.Ic(_r232),core.lc(4).cancelFinalVersionEdit()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"close\"),core.Yb(),core.Yb()}}function MotionDetailComponent_ng_template_22_div_1_div_13_button_5_Template(rf,ctx){if(1&rf){const _r234=core.ac();core.Zb(0,\"button\",119),core.hc(\"click\",(function(){return core.Ic(_r234),core.lc(4).deleteModifiedFinalVersion()})),core.mc(1,\"translate\"),core.Zb(2,\"mat-icon\"),core.Sc(3,\"delete\"),core.Yb(),core.Yb()}2&rf&&core.uc(\"matTooltip\",core.nc(1,1,\"Delete final print template\"))}function MotionDetailComponent_ng_template_22_div_1_div_13_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MotionDetailComponent_ng_template_22_div_1_div_13_button_1_Template,4,3,\"button\",112),core.Qc(2,MotionDetailComponent_ng_template_22_div_1_div_13_button_2_Template,3,0,\"button\",113),core.Qc(3,MotionDetailComponent_ng_template_22_div_1_div_13_button_3_Template,3,1,\"button\",114),core.Qc(4,MotionDetailComponent_ng_template_22_div_1_div_13_button_4_Template,3,0,\"button\",113),core.Qc(5,MotionDetailComponent_ng_template_22_div_1_div_13_button_5_Template,4,3,\"button\",115),core.Yb()),2&rf){const ctx_r211=core.lc(3);core.Gb(1),core.tc(\"ngIf\",ctx_r211.motion.state.isFinalState&&!ctx_r211.motion.modified_final_version),core.Gb(1),core.tc(\"ngIf\",ctx_r211.isRecoMode(ctx_r211.ChangeRecoMode.ModifiedFinal)&&!ctx_r211.isFinalEdit),core.Gb(1),core.tc(\"ngIf\",ctx_r211.isRecoMode(ctx_r211.ChangeRecoMode.ModifiedFinal)&&ctx_r211.isFinalEdit),core.Gb(1),core.tc(\"ngIf\",ctx_r211.isRecoMode(ctx_r211.ChangeRecoMode.ModifiedFinal)&&ctx_r211.isFinalEdit),core.Gb(1),core.tc(\"ngIf\",ctx_r211.isRecoMode(ctx_r211.ChangeRecoMode.ModifiedFinal)&&!ctx_r211.isFinalEdit)}}function MotionDetailComponent_ng_template_22_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",101),core.Zb(1,\"div\",102),core.Qc(2,MotionDetailComponent_ng_template_22_div_1_mat_form_field_2_Template,5,9,\"mat-form-field\",103),core.Qc(3,MotionDetailComponent_ng_template_22_div_1_button_3_Template,3,0,\"button\",104),core.Zb(4,\"button\",105),core.Zb(5,\"mat-icon\"),core.Sc(6,\"format_list_numbered\"),core.Yb(),core.Sc(7,\"  \"),core.Zb(8,\"span\"),core.Sc(9),core.mc(10,\"translate\"),core.Yb(),core.Qc(11,MotionDetailComponent_ng_template_22_div_1_span_11_Template,6,3,\"span\",2),core.Yb(),core.Qc(12,MotionDetailComponent_ng_template_22_div_1_button_12_Template,7,4,\"button\",106),core.Yb(),core.Qc(13,MotionDetailComponent_ng_template_22_div_1_div_13_Template,6,5,\"div\",25),core.Yb()),2&rf){const ctx_r189=core.lc(2),_r18=core.Ec(27);core.Gb(2),core.tc(\"ngIf\",ctx_r189.highlightedLineOpened),core.Gb(1),core.tc(\"ngIf\",ctx_r189.highlightedLineOpened),core.Gb(1),core.tc(\"matMenuTriggerFor\",_r18),core.Gb(5),core.Tc(core.nc(10,7,\"Line numbering\")),core.Gb(2),core.tc(\"ngIf\",ctx_r189.lnMode===ctx_r189.LineNumberingMode.None),core.Gb(1),core.tc(\"ngIf\",ctx_r189.motion&&(ctx_r189.allChangingObjects&&ctx_r189.allChangingObjects.length||ctx_r189.motion.modified_final_version)),core.Gb(1),core.tc(\"osPerms\",\"motions.can_manage\")}}function MotionDetailComponent_ng_template_22_div_2_mat_form_field_4_mat_option_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-option\",124),core.Sc(1),core.Yb()),2&rf){const paragraph_r237=ctx.$implicit;core.tc(\"value\",paragraph_r237.id),core.Gb(1),core.Uc(\" \",paragraph_r237.title,\" \")}}function MotionDetailComponent_ng_template_22_div_2_mat_form_field_4_Template(rf,ctx){if(1&rf){const _r239=core.ac();core.Zb(0,\"mat-form-field\"),core.Zb(1,\"mat-select\",122),core.hc(\"valueChange\",(function($event){return core.Ic(_r239),core.lc(3).onStatuteParagraphChange($event)})),core.mc(2,\"translate\"),core.Qc(3,MotionDetailComponent_ng_template_22_div_2_mat_form_field_4_mat_option_3_Template,2,2,\"mat-option\",123),core.Yb(),core.Yb()}if(2&rf){const ctx_r235=core.lc(3);core.Gb(1),core.tc(\"placeholder\",core.nc(2,2,\"Statute paragraph\")),core.Gb(2),core.tc(\"ngForOf\",ctx_r235.statuteParagraphs)}}function MotionDetailComponent_ng_template_22_div_2_Template(rf,ctx){if(1&rf){const _r241=core.ac();core.Zb(0,\"div\",120),core.Zb(1,\"mat-checkbox\",121),core.hc(\"change\",(function($event){return core.Ic(_r241),core.lc(2).onStatuteAmendmentChange($event)})),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Qc(4,MotionDetailComponent_ng_template_22_div_2_mat_form_field_4_Template,4,4,\"mat-form-field\",2),core.Yb()}if(2&rf){const ctx_r190=core.lc(2);core.Gb(2),core.Uc(\" \",core.nc(3,2,\"Statute amendment\"),\" \"),core.Gb(2),core.tc(\"ngIf\",ctx_r190.contentForm.value.statute_amendment)}}function MotionDetailComponent_ng_template_22_div_3_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Zb(1,\"mat-form-field\"),core.Ub(2,\"os-search-value-selector\",126),core.mc(3,\"translate\"),core.Yb(),core.Wb()),2&rf){const ctx_r242=core.lc(3);core.Gb(2),core.uc(\"placeholder\",core.nc(3,3,\"Submitters\")),core.tc(\"multiple\",!0)(\"inputListValues\",ctx_r242.submitterObserver)}}function MotionDetailComponent_ng_template_22_div_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",125),core.Qc(1,MotionDetailComponent_ng_template_22_div_3_ng_container_1_Template,4,5,\"ng-container\",2),core.Yb()),2&rf){const ctx_r191=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r191.perms.isAllowed(\"change_metadata\",ctx_r191.motion))}}function MotionDetailComponent_ng_template_22_div_5_mat_form_field_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-form-field\"),core.Ub(1,\"input\",128),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.uc(\"placeholder\",core.nc(2,1,\"Identifier\")))}function MotionDetailComponent_ng_template_22_div_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",127),core.Qc(1,MotionDetailComponent_ng_template_22_div_5_mat_form_field_1_Template,3,3,\"mat-form-field\",2),core.Yb()),2&rf){const ctx_r192=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r192.editMotion)}}function MotionDetailComponent_ng_template_22_div_6_mat_form_field_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-form-field\"),core.Ub(1,\"input\",130),core.mc(2,\"translate\"),core.Zb(3,\"mat-error\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(1),core.uc(\"placeholder\",core.nc(2,2,\"Title\")),core.Gb(3),core.Tc(core.nc(5,4,\"The title is required\")))}function MotionDetailComponent_ng_template_22_div_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",129),core.Qc(1,MotionDetailComponent_ng_template_22_div_6_mat_form_field_1_Template,6,6,\"mat-form-field\",2),core.Yb()),2&rf){const ctx_r193=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r193.editMotion)}}function MotionDetailComponent_ng_template_22_span_7_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\",131),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const ctx_r194=core.lc(2);core.Gb(1),core.Tc(core.nc(2,1,ctx_r194.preamble))}}function MotionDetailComponent_ng_template_22_ng_container_8_div_1_os_motion_detail_original_change_recommendations_1_Template(rf,ctx){if(1&rf){const _r251=core.ac();core.Zb(0,\"os-motion-detail-original-change-recommendations\",137),core.hc(\"createChangeRecommendation\",(function($event){return core.Ic(_r251),core.lc(4).createChangeRecommendation($event)}))(\"gotoChangeRecommendation\",(function($event){return core.Ic(_r251),core.lc(4).gotoChangeRecommendation($event)})),core.Yb()}if(2&rf){const ctx_r248=core.lc(4);core.tc(\"html\",ctx_r248.getFormattedTextPlain())(\"changeRecommendations\",ctx_r248.changeRecommendations)}}function MotionDetailComponent_ng_template_22_ng_container_8_div_1_div_2_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"div\",138),core.mc(1,\"trust\")),2&rf){const ctx_r249=core.lc(4);core.tc(\"innerHTML\",core.oc(1,1,ctx_r249.getFormattedTextPlain(),\"html\"),core.Jc)}}function MotionDetailComponent_ng_template_22_ng_container_8_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",134),core.Qc(1,MotionDetailComponent_ng_template_22_ng_container_8_div_1_os_motion_detail_original_change_recommendations_1_Template,1,2,\"os-motion-detail-original-change-recommendations\",135),core.Qc(2,MotionDetailComponent_ng_template_22_ng_container_8_div_1_div_2_Template,2,4,\"div\",136),core.Yb()),2&rf){const ctx_r245=core.lc(3);core.Kb(\"line-numbers-none\",ctx_r245.isLineNumberingNone())(\"line-numbers-inline\",ctx_r245.isLineNumberingInline())(\"line-numbers-outside\",ctx_r245.isLineNumberingOutside()),core.Gb(1),core.tc(\"ngIf\",ctx_r245.isLineNumberingOutside()&&ctx_r245.isRecoMode(ctx_r245.ChangeRecoMode.Original)),core.Gb(1),core.tc(\"ngIf\",!ctx_r245.isLineNumberingOutside()||!ctx_r245.isRecoMode(ctx_r245.ChangeRecoMode.Original))}}function MotionDetailComponent_ng_template_22_ng_container_8_os_motion_detail_diff_2_Template(rf,ctx){if(1&rf){const _r254=core.ac();core.Zb(0,\"os-motion-detail-diff\",139),core.hc(\"createChangeRecommendation\",(function($event){return core.Ic(_r254),core.lc(3).createChangeRecommendation($event)})),core.Yb()}if(2&rf){const ctx_r246=core.lc(3);core.tc(\"motion\",ctx_r246.motion)(\"changes\",ctx_r246.getChangesForDiffMode())(\"scrollToChange\",ctx_r246.scrollToChange)(\"highlightedLine\",ctx_r246.highlightedLine)(\"showAllAmendments\",ctx_r246.showAllAmendments)(\"lineNumberingMode\",ctx_r246.lnMode)}}function MotionDetailComponent_ng_template_22_ng_container_8_div_3_div_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",142),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"This field is required.\"),\" \"))}function MotionDetailComponent_ng_template_22_ng_container_8_div_3_Template(rf,ctx){if(1&rf){const _r257=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"editor\",140),core.hc(\"onChange\",(function(){return core.Ic(_r257),core.lc(3).detectChanges()})),core.Yb(),core.Qc(2,MotionDetailComponent_ng_template_22_ng_container_8_div_3_div_2_Template,3,3,\"div\",141),core.Yb()}if(2&rf){const ctx_r247=core.lc(3);core.Gb(1),core.tc(\"hidden\",!ctx_r247.isFinalEdit)(\"init\",ctx_r247.tinyMceSettings),core.Gb(1),core.tc(\"ngIf\",ctx_r247.contentForm.get(\"modified_final_version\").invalid&&(ctx_r247.contentForm.get(\"modified_final_version\").dirty||ctx_r247.contentForm.get(\"modified_final_version\").touched))}}function MotionDetailComponent_ng_template_22_ng_container_8_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Qc(1,MotionDetailComponent_ng_template_22_ng_container_8_div_1_Template,3,8,\"div\",132),core.Qc(2,MotionDetailComponent_ng_template_22_ng_container_8_os_motion_detail_diff_2_Template,1,6,\"os-motion-detail-diff\",133),core.Qc(3,MotionDetailComponent_ng_template_22_ng_container_8_div_3_Template,3,3,\"div\",2),core.Wb()),2&rf){const ctx_r195=core.lc(2);core.Gb(1),core.tc(\"ngIf\",!ctx_r195.isRecoMode(ctx_r195.ChangeRecoMode.Diff)&&!ctx_r195.isFinalEdit),core.Gb(1),core.tc(\"ngIf\",ctx_r195.isRecoMode(ctx_r195.ChangeRecoMode.Diff)),core.Gb(1),core.tc(\"ngIf\",ctx_r195.isFinalEdit)}}function MotionDetailComponent_ng_template_22_div_9_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"div\",143),core.mc(1,\"trust\")),2&rf){const ctx_r196=core.lc(2);core.tc(\"innerHTML\",core.oc(1,1,ctx_r196.getFormattedStatuteAmendment(),\"html\"),core.Jc)}}function MotionDetailComponent_ng_template_22_ng_container_10_div_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",142),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"This field is required.\"),\" \"))}function MotionDetailComponent_ng_template_22_ng_container_10_Template(rf,ctx){if(1&rf){const _r260=core.ac();core.Xb(0),core.Zb(1,\"editor\",144),core.hc(\"ngModelChange\",(function(){return core.Ic(_r260),core.lc(2).detectChanges()})),core.Yb(),core.Qc(2,MotionDetailComponent_ng_template_22_ng_container_10_div_2_Template,3,3,\"div\",141),core.Wb()}if(2&rf){const ctx_r197=core.lc(2);core.Gb(1),core.tc(\"init\",ctx_r197.tinyMceSettings),core.Gb(1),core.tc(\"ngIf\",ctx_r197.contentForm.get(\"text\").invalid&&(ctx_r197.contentForm.get(\"text\").dirty||ctx_r197.contentForm.get(\"text\").touched))}}function MotionDetailComponent_ng_template_22_ng_container_11_section_1_span_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\",147),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const paragraph_r262=core.lc().$implicit;core.Gb(1),core.Vc(\" \",core.nc(2,2,\"Line\"),\" \",paragraph_r262.lineFrom,\" \")}}function MotionDetailComponent_ng_template_22_ng_container_11_section_1_span_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\",147),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const paragraph_r262=core.lc().$implicit;core.Gb(1),core.Wc(\" \",core.nc(2,3,\"Line\"),\" \",paragraph_r262.lineFrom,\" - \",paragraph_r262.lineTo-1,\" \")}}function MotionDetailComponent_ng_template_22_ng_container_11_section_1_div_5_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",142),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"This field is required.\"),\" \"))}function MotionDetailComponent_ng_template_22_ng_container_11_section_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"section\"),core.Zb(1,\"h3\"),core.Qc(2,MotionDetailComponent_ng_template_22_ng_container_11_section_1_span_2_Template,3,4,\"span\",145),core.Qc(3,MotionDetailComponent_ng_template_22_ng_container_11_section_1_span_3_Template,3,5,\"span\",145),core.Yb(),core.Ub(4,\"editor\",146),core.Qc(5,MotionDetailComponent_ng_template_22_ng_container_11_section_1_div_5_Template,3,3,\"div\",141),core.Yb()),2&rf){const paragraph_r262=ctx.$implicit,ctx_r261=core.lc(3);core.Gb(2),core.tc(\"ngIf\",paragraph_r262.lineFrom>=paragraph_r262.lineTo-1),core.Gb(1),core.tc(\"ngIf\",paragraph_r262.lineFrom<paragraph_r262.lineTo-1),core.Gb(1),core.tc(\"formControlName\",\"text_\"+paragraph_r262.paragraphNo)(\"init\",ctx_r261.tinyMceSettings),core.Gb(1),core.tc(\"ngIf\",ctx_r261.contentForm.get(\"text_\"+paragraph_r262.paragraphNo).invalid&&(ctx_r261.contentForm.get(\"text_\"+paragraph_r262.paragraphNo).dirty||ctx_r261.contentForm.get(\"text_\"+paragraph_r262.paragraphNo).touched))}}function MotionDetailComponent_ng_template_22_ng_container_11_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Qc(1,MotionDetailComponent_ng_template_22_ng_container_11_section_1_Template,6,5,\"section\",59),core.Wb()),2&rf){const ctx_r198=core.lc(2);core.Gb(1),core.tc(\"ngForOf\",ctx_r198.contentForm.value.selected_paragraphs)}}function MotionDetailComponent_ng_template_22_ng_container_12_ng_container_1_Template(rf,ctx){1&rf&&core.Vb(0)}function MotionDetailComponent_ng_template_22_ng_container_12_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Qc(1,MotionDetailComponent_ng_template_22_ng_container_12_ng_container_1_Template,1,0,\"ng-container\",44),core.Wb()),2&rf){core.lc(2);const _r16=core.Ec(25);core.Gb(1),core.tc(\"ngTemplateOutlet\",_r16)}}function MotionDetailComponent_ng_template_22_div_13_span_6_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\"*\"),core.Yb())}function MotionDetailComponent_ng_template_22_div_13_div_7_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"div\",150),core.mc(1,\"trust\")),2&rf){const ctx_r270=core.lc(3);core.tc(\"innerHtml\",core.oc(1,1,ctx_r270.motion.reason,\"html\"),core.Jc)}}function MotionDetailComponent_ng_template_22_div_13_editor_8_Template(rf,ctx){if(1&rf&&core.Ub(0,\"editor\",151),2&rf){const ctx_r271=core.lc(3);core.tc(\"init\",ctx_r271.tinyMceSettings)(\"required\",ctx_r271.reasonRequired)}}function MotionDetailComponent_ng_template_22_div_13_div_9_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",142),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"This field is required.\"),\" \"))}function MotionDetailComponent_ng_template_22_div_13_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"h3\",45),core.Zb(2,\"span\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Sc(5,\" \"),core.Qc(6,MotionDetailComponent_ng_template_22_div_13_span_6_Template,2,0,\"span\",2),core.Yb(),core.Qc(7,MotionDetailComponent_ng_template_22_div_13_div_7_Template,2,4,\"div\",148),core.Qc(8,MotionDetailComponent_ng_template_22_div_13_editor_8_Template,1,2,\"editor\",149),core.Qc(9,MotionDetailComponent_ng_template_22_div_13_div_9_Template,3,3,\"div\",141),core.Yb()),2&rf){const ctx_r200=core.lc(2);core.Gb(1),core.tc(\"ngClass\",ctx_r200.reasonRequired&&ctx_r200.contentForm.get(\"reason\").invalid&&(ctx_r200.contentForm.get(\"reason\").dirty||ctx_r200.contentForm.get(\"reason\").touched)?\"red-warning-text\":\"\"),core.Gb(2),core.Tc(core.nc(4,6,\"Reason\")),core.Gb(3),core.tc(\"ngIf\",ctx_r200.reasonRequired&&ctx_r200.editMotion),core.Gb(1),core.tc(\"ngIf\",!ctx_r200.editMotion),core.Gb(1),core.tc(\"ngIf\",ctx_r200.editMotion),core.Gb(1),core.tc(\"ngIf\",ctx_r200.reasonRequired&&ctx_r200.contentForm.get(\"reason\").invalid&&(ctx_r200.contentForm.get(\"reason\").dirty||ctx_r200.contentForm.get(\"reason\").touched))}}function MotionDetailComponent_ng_template_22_div_14_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",125),core.Zb(1,\"mat-form-field\"),core.Ub(2,\"os-search-value-selector\",152),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf){const ctx_r201=core.lc(2);core.Gb(2),core.uc(\"placeholder\",core.nc(3,3,\"Category\")),core.tc(\"includeNone\",!0)(\"inputListValues\",ctx_r201.categoryObserver)}}function MotionDetailComponent_ng_template_22_div_16_div_1_mat_list_item_7_Template(rf,ctx){if(1&rf){const _r278=core.ac();core.Zb(0,\"mat-list-item\"),core.Zb(1,\"a\",155),core.hc(\"click\",(function(){core.Ic(_r278);const file_r276=ctx.$implicit;return core.lc(4).onClickAttachment(file_r276)})),core.Sc(2),core.Yb(),core.Yb()}if(2&rf){const file_r276=ctx.$implicit;core.Gb(2),core.Tc(file_r276.title)}}function MotionDetailComponent_ng_template_22_div_16_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"h3\"),core.Sc(2),core.mc(3,\"translate\"),core.Zb(4,\"mat-icon\"),core.Sc(5,\"attach_file\"),core.Yb(),core.Yb(),core.Zb(6,\"mat-list\",154),core.Qc(7,MotionDetailComponent_ng_template_22_div_16_div_1_mat_list_item_7_Template,3,1,\"mat-list-item\",59),core.Yb(),core.Yb()),2&rf){const ctx_r273=core.lc(3);core.Gb(2),core.Tc(core.nc(3,2,\"Attachments\")),core.Gb(5),core.tc(\"ngForOf\",ctx_r273.motion.attachments)}}function MotionDetailComponent_ng_template_22_div_16_div_2_Template(rf,ctx){if(1&rf){const _r280=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"os-attachment-control\",156),core.hc(\"errorHandler\",(function($event){return core.Ic(_r280),core.lc(3).showUploadError($event)})),core.Yb(),core.Yb()}}function MotionDetailComponent_ng_template_22_div_16_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",125),core.Qc(1,MotionDetailComponent_ng_template_22_div_16_div_1_Template,8,4,\"div\",2),core.Qc(2,MotionDetailComponent_ng_template_22_div_16_div_2_Template,2,0,\"div\",153),core.Yb()),2&rf){const ctx_r202=core.lc(2);core.Gb(1),core.tc(\"ngIf\",!ctx_r202.editMotion),core.Gb(1),core.tc(\"osPerms\",\"motions.can_manage\")(\"osPermsAnd\",ctx_r202.editMotion)}}function MotionDetailComponent_ng_template_22_div_17_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Ub(1,\"os-agenda-content-object-form\",157),core.Yb()),2&rf){const ctx_r203=core.lc(2);core.Gb(1),core.tc(\"form\",ctx_r203.contentForm)}}function MotionDetailComponent_ng_template_22_div_18_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"mat-form-field\"),core.Ub(2,\"os-search-value-selector\",158),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf){const ctx_r281=core.lc(3);core.Gb(2),core.uc(\"placeholder\",core.nc(3,3,\"Supporters\")),core.tc(\"multiple\",!0)(\"inputListValues\",ctx_r281.supporterObserver)}}function MotionDetailComponent_ng_template_22_div_18_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",125),core.Qc(1,MotionDetailComponent_ng_template_22_div_18_div_1_Template,4,5,\"div\",2),core.Yb()),2&rf){const ctx_r204=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r204.perms.isAllowed(\"change_metadata\",ctx_r204.motion))}}function MotionDetailComponent_ng_template_22_div_19_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"mat-form-field\"),core.Ub(2,\"os-search-value-selector\",159),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf){const ctx_r282=core.lc(3);core.Gb(2),core.uc(\"placeholder\",core.nc(3,2,\"Workflow\")),core.tc(\"inputListValues\",ctx_r282.workflowObserver)}}function MotionDetailComponent_ng_template_22_div_19_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",125),core.Qc(1,MotionDetailComponent_ng_template_22_div_19_div_1_Template,4,4,\"div\",2),core.Yb()),2&rf){const ctx_r205=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r205.perms.isAllowed(\"change_metadata\",ctx_r205.motion))}}function MotionDetailComponent_ng_template_22_div_20_div_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"mat-form-field\"),core.Ub(2,\"input\",160),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(2),core.uc(\"placeholder\",core.nc(3,1,\"Origin\")))}function MotionDetailComponent_ng_template_22_div_20_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",125),core.Qc(1,MotionDetailComponent_ng_template_22_div_20_div_1_Template,4,3,\"div\",2),core.Yb()),2&rf){const ctx_r206=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r206.perms.isAllowed(\"change_metadata\",ctx_r206.motion))}}function MotionDetailComponent_ng_template_22_Template(rf,ctx){if(1&rf){const _r285=core.ac();core.Zb(0,\"form\",91),core.hc(\"keydown\",(function($event){return core.Ic(_r285),core.lc().onKeyDown($event)})),core.Qc(1,MotionDetailComponent_ng_template_22_div_1_Template,14,9,\"div\",92),core.Qc(2,MotionDetailComponent_ng_template_22_div_2_Template,5,4,\"div\",93),core.Qc(3,MotionDetailComponent_ng_template_22_div_3_Template,2,1,\"div\",94),core.Zb(4,\"div\",95),core.Qc(5,MotionDetailComponent_ng_template_22_div_5_Template,2,1,\"div\",96),core.Qc(6,MotionDetailComponent_ng_template_22_div_6_Template,2,1,\"div\",97),core.Yb(),core.Qc(7,MotionDetailComponent_ng_template_22_span_7_Template,3,3,\"span\",98),core.Qc(8,MotionDetailComponent_ng_template_22_ng_container_8_Template,4,3,\"ng-container\",2),core.Qc(9,MotionDetailComponent_ng_template_22_div_9_Template,2,4,\"div\",99),core.Qc(10,MotionDetailComponent_ng_template_22_ng_container_10_Template,3,2,\"ng-container\",2),core.Qc(11,MotionDetailComponent_ng_template_22_ng_container_11_Template,2,1,\"ng-container\",2),core.Qc(12,MotionDetailComponent_ng_template_22_ng_container_12_Template,2,1,\"ng-container\",2),core.Qc(13,MotionDetailComponent_ng_template_22_div_13_Template,10,8,\"div\",2),core.Qc(14,MotionDetailComponent_ng_template_22_div_14_Template,4,5,\"div\",94),core.Zb(15,\"div\",100),core.Qc(16,MotionDetailComponent_ng_template_22_div_16_Template,3,3,\"div\",94),core.Qc(17,MotionDetailComponent_ng_template_22_div_17_Template,2,1,\"div\",2),core.Qc(18,MotionDetailComponent_ng_template_22_div_18_Template,2,1,\"div\",94),core.Qc(19,MotionDetailComponent_ng_template_22_div_19_Template,2,1,\"div\",94),core.Qc(20,MotionDetailComponent_ng_template_22_div_20_Template,2,1,\"div\",94),core.Yb(),core.Yb()}if(2&rf){const ctx_r15=core.lc();core.tc(\"formGroup\",ctx_r15.contentForm),core.Gb(1),core.tc(\"ngIf\",!ctx_r15.editMotion&&!ctx_r15.motion.isStatuteAmendment()),core.Gb(1),core.tc(\"ngIf\",ctx_r15.newMotion&&ctx_r15.statuteParagraphs.length>0&&ctx_r15.statutesEnabled),core.Gb(1),core.tc(\"ngIf\",ctx_r15.newMotion),core.Gb(2),core.tc(\"ngIf\",ctx_r15.editMotion&&!ctx_r15.newMotion&&ctx_r15.perms.isAllowed(\"change_metadata\",ctx_r15.motion)),core.Gb(1),core.tc(\"ngIf\",ctx_r15.editMotion),core.Gb(1),core.tc(\"ngIf\",!ctx_r15.isRecoMode(ctx_r15.ChangeRecoMode.Diff)),core.Gb(1),core.tc(\"ngIf\",!ctx_r15.editMotion&&!ctx_r15.motion.isStatuteAmendment()&&!ctx_r15.motion.isParagraphBasedAmendment()),core.Gb(1),core.tc(\"ngIf\",!ctx_r15.editMotion&&ctx_r15.motion.isStatuteAmendment()),core.Gb(1),core.tc(\"ngIf\",ctx_r15.motion&&ctx_r15.editMotion&&!ctx_r15.motion.isParagraphBasedAmendment()),core.Gb(1),core.tc(\"ngIf\",ctx_r15.motion&&ctx_r15.editMotion&&ctx_r15.motion.isParagraphBasedAmendment()),core.Gb(1),core.tc(\"ngIf\",!ctx_r15.editMotion&&ctx_r15.motion.isParagraphBasedAmendment()),core.Gb(1),core.tc(\"ngIf\",ctx_r15.motion.reason||ctx_r15.editMotion),core.Gb(1),core.tc(\"ngIf\",ctx_r15.newMotion&&ctx_r15.categoryObserver.value.length>0),core.Gb(2),core.tc(\"ngIf\",ctx_r15.motion.hasAttachments()||ctx_r15.editMotion),core.Gb(1),core.tc(\"ngIf\",ctx_r15.newMotion),core.Gb(1),core.tc(\"ngIf\",ctx_r15.editMotion&&ctx_r15.minSupporters),core.Gb(1),core.tc(\"ngIf\",ctx_r15.editMotion&&ctx_r15.workflowObserver.value.length>1),core.Gb(1),core.tc(\"ngIf\",ctx_r15.editMotion)}}function MotionDetailComponent_ng_template_24_div_1_div_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",163),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(2),core.Tc(core.nc(3,1,\"No changes at the text.\")))}function MotionDetailComponent_ng_template_24_div_1_ng_container_2_div_1_h3_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"h3\",168),core.Sc(1),core.Yb()),2&rf){const paragraph_r293=core.lc().$implicit,ctx_r294=core.lc(4);core.Gb(1),core.Uc(\" \",ctx_r294.getAmendmentParagraphLinesTitle(paragraph_r293),\" \")}}function MotionDetailComponent_ng_template_24_div_1_ng_container_2_div_1_os_motion_detail_original_change_recommendations_2_Template(rf,ctx){if(1&rf){const _r299=core.ac();core.Zb(0,\"os-motion-detail-original-change-recommendations\",137),core.hc(\"createChangeRecommendation\",(function($event){return core.Ic(_r299),core.lc(5).createChangeRecommendation($event)}))(\"gotoChangeRecommendation\",(function($event){return core.Ic(_r299),core.lc(5).gotoChangeRecommendation($event)})),core.Yb()}if(2&rf){const paragraph_r293=core.lc().$implicit,ctx_r295=core.lc(4);core.tc(\"html\",ctx_r295.getAmendmentDiffTextWithContext(paragraph_r293))(\"changeRecommendations\",ctx_r295.changeRecommendations)}}function MotionDetailComponent_ng_template_24_div_1_ng_container_2_div_1_div_3_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"div\",169),core.mc(1,\"trust\")),2&rf){const paragraph_r293=core.lc().$implicit,ctx_r296=core.lc(4);core.tc(\"outerHTML\",core.oc(1,1,ctx_r296.getAmendmentDiffTextWithContext(paragraph_r293),\"html\"),core.Jc)}}function MotionDetailComponent_ng_template_24_div_1_ng_container_2_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",165),core.Qc(1,MotionDetailComponent_ng_template_24_div_1_ng_container_2_div_1_h3_1_Template,2,1,\"h3\",166),core.Qc(2,MotionDetailComponent_ng_template_24_div_1_ng_container_2_div_1_os_motion_detail_original_change_recommendations_2_Template,1,2,\"os-motion-detail-original-change-recommendations\",135),core.Qc(3,MotionDetailComponent_ng_template_24_div_1_ng_container_2_div_1_div_3_Template,2,4,\"div\",167),core.Yb()),2&rf){const ctx_r292=core.lc(4);core.Kb(\"line-numbers-none\",ctx_r292.isLineNumberingNone())(\"line-numbers-inline\",ctx_r292.isLineNumberingInline())(\"line-numbers-outside\",ctx_r292.isLineNumberingOutside())(\"amendment-context\",ctx_r292.showAmendmentContext),core.Gb(1),core.tc(\"ngIf\",!ctx_r292.showAmendmentContext),core.Gb(1),core.tc(\"ngIf\",ctx_r292.isLineNumberingOutside()&&(ctx_r292.isRecoMode(ctx_r292.ChangeRecoMode.Original)||ctx_r292.isRecoMode(ctx_r292.ChangeRecoMode.Changed))),core.Gb(1),core.tc(\"ngIf\",!ctx_r292.isLineNumberingOutside()||!(ctx_r292.isRecoMode(ctx_r292.ChangeRecoMode.Original)||ctx_r292.isRecoMode(ctx_r292.ChangeRecoMode.Changed)))}}function MotionDetailComponent_ng_template_24_div_1_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Qc(1,MotionDetailComponent_ng_template_24_div_1_ng_container_2_div_1_Template,4,11,\"div\",164),core.Wb()),2&rf){const ctx_r290=core.lc(3);core.Gb(1),core.tc(\"ngForOf\",ctx_r290.getAmendmentParagraphs())}}function MotionDetailComponent_ng_template_24_div_1_os_motion_detail_diff_3_Template(rf,ctx){if(1&rf){const _r304=core.ac();core.Zb(0,\"os-motion-detail-diff\",139),core.hc(\"createChangeRecommendation\",(function($event){return core.Ic(_r304),core.lc(3).createChangeRecommendation($event)})),core.Yb()}if(2&rf){const ctx_r291=core.lc(3);core.tc(\"motion\",ctx_r291.motion)(\"changes\",ctx_r291.getChangesForDiffMode())(\"scrollToChange\",ctx_r291.scrollToChange)(\"highlightedLine\",ctx_r291.highlightedLine)(\"showAllAmendments\",ctx_r291.showAllAmendments)(\"lineNumberingMode\",ctx_r291.lnMode)}}function MotionDetailComponent_ng_template_24_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MotionDetailComponent_ng_template_24_div_1_div_1_Template,4,3,\"div\",162),core.Qc(2,MotionDetailComponent_ng_template_24_div_1_ng_container_2_Template,2,1,\"ng-container\",2),core.Qc(3,MotionDetailComponent_ng_template_24_div_1_os_motion_detail_diff_3_Template,1,6,\"os-motion-detail-diff\",133),core.Yb()),2&rf){const ctx_r286=core.lc(2);core.Gb(1),core.tc(\"ngIf\",0===ctx_r286.motion.diffLines.length),core.Gb(1),core.tc(\"ngIf\",!ctx_r286.isRecoMode(ctx_r286.ChangeRecoMode.Diff)&&!ctx_r286.isFinalEdit),core.Gb(1),core.tc(\"ngIf\",ctx_r286.isRecoMode(ctx_r286.ChangeRecoMode.Diff))}}function MotionDetailComponent_ng_template_24_div_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"span\",142),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(2),core.Tc(core.nc(3,1,\"There is an error with this amendment. Please edit it manually.\")))}function MotionDetailComponent_ng_template_24_div_3_mat_checkbox_1_Template(rf,ctx){if(1&rf){const _r307=core.ac();core.Zb(0,\"mat-checkbox\",171),core.hc(\"change\",(function(){core.Ic(_r307);const ctx_r306=core.lc(3);return ctx_r306.showAmendmentContext=!ctx_r306.showAmendmentContext})),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(2),core.Tc(core.nc(3,1,\"Show entire motion text\")))}function MotionDetailComponent_ng_template_24_div_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MotionDetailComponent_ng_template_24_div_3_mat_checkbox_1_Template,4,3,\"mat-checkbox\",170),core.Yb()),2&rf){const ctx_r288=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r288.motion&&ctx_r288.motion.isParagraphBasedAmendment())}}function MotionDetailComponent_ng_template_24_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"section\",161),core.Qc(1,MotionDetailComponent_ng_template_24_div_1_Template,4,3,\"div\",2),core.Qc(2,MotionDetailComponent_ng_template_24_div_2_Template,4,3,\"div\",2),core.Yb(),core.Qc(3,MotionDetailComponent_ng_template_24_div_3_Template,2,1,\"div\",2)),2&rf){const ctx_r17=core.lc();core.Gb(1),core.tc(\"ngIf\",ctx_r17.motion.diffLines),core.Gb(1),core.tc(\"ngIf\",!ctx_r17.motion.diffLines),core.Gb(1),core.tc(\"ngIf\",ctx_r17.isRecoMode(ctx_r17.ChangeRecoMode.Original)||ctx_r17.isRecoMode(ctx_r17.ChangeRecoMode.Changed))}}function MotionDetailComponent_div_28_button_11_Template(rf,ctx){if(1&rf){const _r310=core.ac();core.Zb(0,\"button\",24),core.hc(\"click\",(function(){return core.Ic(_r310),core.lc(2).highlightedLineOpened=!0})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"redo\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Go to line\")))}const _c6=function(a0){return{selected:a0}};function MotionDetailComponent_div_28_Template(rf,ctx){if(1&rf){const _r312=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",17),core.hc(\"click\",(function(){core.Ic(_r312);const ctx_r311=core.lc();return ctx_r311.setLineNumberingMode(ctx_r311.LineNumberingMode.None)})),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Zb(4,\"button\",17),core.hc(\"click\",(function(){core.Ic(_r312);const ctx_r313=core.lc();return ctx_r313.setLineNumberingMode(ctx_r313.LineNumberingMode.Inside)})),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Zb(7,\"button\",17),core.hc(\"click\",(function(){core.Ic(_r312);const ctx_r314=core.lc();return ctx_r314.setLineNumberingMode(ctx_r314.LineNumberingMode.Outside)})),core.Sc(8),core.mc(9,\"translate\"),core.Yb(),core.Ub(10,\"mat-divider\"),core.Qc(11,MotionDetailComponent_div_28_button_11_Template,6,3,\"button\",28),core.Yb()}if(2&rf){const ctx_r19=core.lc();core.Gb(1),core.tc(\"ngClass\",core.zc(13,_c6,ctx_r19.lnMode===ctx_r19.LineNumberingMode.None)),core.Gb(1),core.Uc(\" \",core.nc(3,7,\"none\"),\" \"),core.Gb(2),core.tc(\"ngClass\",core.zc(15,_c6,ctx_r19.lnMode===ctx_r19.LineNumberingMode.Inside)),core.Gb(1),core.Uc(\" \",core.nc(6,9,\"inline\"),\" \"),core.Gb(2),core.tc(\"ngClass\",core.zc(17,_c6,ctx_r19.lnMode===ctx_r19.LineNumberingMode.Outside)),core.Gb(1),core.Uc(\" \",core.nc(9,11,\"outside\"),\" \"),core.Gb(3),core.tc(\"ngIf\",!ctx_r19.highlightedLineOpened)}}function MotionDetailComponent_button_34_Template(rf,ctx){if(1&rf){const _r316=core.ac();core.Zb(0,\"button\",17),core.hc(\"click\",(function(){core.Ic(_r316);const ctx_r315=core.lc();return ctx_r315.setChangeRecoMode(ctx_r315.ChangeRecoMode.Changed)})),core.Sc(1),core.mc(2,\"translate\"),core.Yb()}if(2&rf){const ctx_r21=core.lc();core.tc(\"ngClass\",core.zc(4,_c6,ctx_r21.crMode===ctx_r21.ChangeRecoMode.Changed)),core.Gb(1),core.Uc(\" \",core.nc(2,2,\"Changed version\"),\" \")}}function MotionDetailComponent_button_35_Template(rf,ctx){if(1&rf){const _r318=core.ac();core.Zb(0,\"button\",17),core.hc(\"click\",(function(){core.Ic(_r318);const ctx_r317=core.lc();return ctx_r317.setChangeRecoMode(ctx_r317.ChangeRecoMode.Diff)})),core.Sc(1),core.mc(2,\"translate\"),core.Yb()}if(2&rf){const ctx_r22=core.lc();core.tc(\"ngClass\",core.zc(4,_c6,ctx_r22.crMode===ctx_r22.ChangeRecoMode.Diff)),core.Gb(1),core.Uc(\" \",core.nc(2,2,\"Diff version\"),\" \")}}function MotionDetailComponent_button_36_Template(rf,ctx){if(1&rf){const _r320=core.ac();core.Zb(0,\"button\",17),core.hc(\"click\",(function(){core.Ic(_r320);const ctx_r319=core.lc();return ctx_r319.setChangeRecoMode(ctx_r319.ChangeRecoMode.Final)})),core.Sc(1),core.mc(2,\"translate\"),core.Yb()}if(2&rf){const ctx_r23=core.lc();core.tc(\"ngClass\",core.zc(4,_c6,ctx_r23.crMode===ctx_r23.ChangeRecoMode.Final)),core.Gb(1),core.Uc(\" \",core.nc(2,2,\"Final version\"),\" \")}}function MotionDetailComponent_button_37_Template(rf,ctx){if(1&rf){const _r322=core.ac();core.Zb(0,\"button\",17),core.hc(\"click\",(function(){core.Ic(_r322);const ctx_r321=core.lc();return ctx_r321.setChangeRecoMode(ctx_r321.ChangeRecoMode.ModifiedFinal)})),core.Sc(1),core.mc(2,\"translate\"),core.Yb()}if(2&rf){const ctx_r24=core.lc();core.tc(\"ngClass\",core.zc(4,_c6,ctx_r24.crMode===ctx_r24.ChangeRecoMode.ModifiedFinal)),core.Gb(1),core.Uc(\" \",core.nc(2,2,\"Final print template\"),\" \")}}const routes=[{path:\"\",component:(()=>{class MotionDetailComponent extends base_view.a{constructor(title,translate,matSnackBar,vp,operator,perms,router,route,formBuilder,dialogService,el,repo,changeRecoRepo,statuteRepo,configService,promptService,pdfExport,personalNoteService,linenumberingService,categoryRepo,userRepo,notifyService,tagRepo,workflowRepo,blockRepo,itemRepo,motionSortService,amendmentSortService,motionFilterService,amendmentFilterService,cd,pollDialog,motionPollService){super(title,translate,matSnackBar),this.translate=translate,this.vp=vp,this.operator=operator,this.perms=perms,this.router=router,this.route=route,this.formBuilder=formBuilder,this.dialogService=dialogService,this.el=el,this.repo=repo,this.changeRecoRepo=changeRecoRepo,this.statuteRepo=statuteRepo,this.configService=configService,this.promptService=promptService,this.pdfExport=pdfExport,this.personalNoteService=personalNoteService,this.linenumberingService=linenumberingService,this.categoryRepo=categoryRepo,this.userRepo=userRepo,this.notifyService=notifyService,this.tagRepo=tagRepo,this.workflowRepo=workflowRepo,this.blockRepo=blockRepo,this.itemRepo=itemRepo,this.motionSortService=motionSortService,this.amendmentSortService=amendmentSortService,this.motionFilterService=motionFilterService,this.amendmentFilterService=amendmentFilterService,this.cd=cd,this.pollDialog=pollDialog,this.motionPollService=motionPollService,this.editMotion=!1,this.amendmentEdit=!1,this.newMotion=!1,this.motionLogExpanded=!1,this.finalEditMode=!1,this.amendmentChangeRecos={},this.amendmentChangeRecoSubscriptions={},this.allChangingObjects=[],this.statuteParagraphs=[],this.showSupporters=!1,this.scrollToChange=null,this.showAmendmentContext=!1,this.showAllAmendments=!1,this.ChangeRecoMode=motions_constants.b,this.verboseChangeRecoMode=motions_constants.k,this.LineNumberingMode=motions_constants.d,this.newStateExtension=\"\",this.recommendationStateExtension=\"\",this.NOTIFICATION_EDIT_MOTION=\"notifyEditMotion\",this.otherWorkOnMotion=[],this.recommendationReferencingMotions=[]}set motion(value){this._motion=value,this.setupRecommender()}get motion(){return this._motion}get recommendationLabel(){return this.repo.getExtendedRecommendationLabel(this.motion)}get stateLabel(){return this.repo.getExtendedStateLabel(this.motion)}get isFinalEdit(){return this.finalEditMode}get finalVersionEdited(){return this.crMode===motions_constants.b.ModifiedFinal&&this.contentForm.get(\"modified_final_version\").value!==this.motion.modified_final_version}ngOnInit(){this.tagObserver=this.tagRepo.getViewModelListBehaviorSubject(),this.workflowObserver=this.workflowRepo.getViewModelListBehaviorSubject(),this.blockObserver=this.blockRepo.getViewModelListBehaviorSubject(),this.motionObserver=this.repo.getViewModelListBehaviorSubject(),this.submitterObserver=this.userRepo.getViewModelListBehaviorSubject(),this.supporterObserver=this.userRepo.getViewModelListBehaviorSubject(),this.categoryObserver=this.categoryRepo.getViewModelListBehaviorSubject(),this.createForm(),this.observeRoute(),this.getMotionByUrl(),this.configService.get(\"motions_statutes_enabled\").subscribe(enabled=>this.statutesEnabled=enabled),this.configService.get(\"motions_reason_required\").subscribe(required=>this.reasonRequired=required),this.configService.get(\"motions_hide_referring_motions\").subscribe(show=>this.showReferringMotions=!show),this.configService.get(\"motions_min_supporters\").subscribe(supporters=>this.minSupporters=supporters),this.configService.get(\"motions_preamble\").subscribe(preamble=>this.preamble=preamble),this.configService.get(\"motions_amendments_enabled\").subscribe(enabled=>this.amendmentsEnabled=enabled),this.configService.get(\"motions_line_length\").subscribe(lineLength=>{this.lineLength=lineLength,this.recalcUnifiedChanges()}),this.configService.get(\"motions_default_line_numbering\").subscribe(mode=>this.lnMode=mode),this.configService.get(\"motions_recommendation_text_mode\").subscribe(mode=>{mode&&(this.crMode=this.determineCrMode(mode))}),this.configService.get(\"motions_show_sequential_numbers\").subscribe(shown=>this.showSequential=shown),this.statuteRepo.getViewModelListObservable().subscribe(newViewStatuteParagraphs=>{this.statuteParagraphs=newViewStatuteParagraphs}),this.configService.instant(\"motions_amendments_main_table\")?(this.motionFilterService.initFilters(this.motionObserver),this.motionSortService.initSorting(this.motionFilterService.outputObservable),this.sortedMotionsObservable=this.motionSortService.outputObservable):this.motion&&this.motion.parent_id?(this.amendmentFilterService.initFilters(this.repo.amendmentsTo(this.motion.parent_id)),this.amendmentSortService.initSorting(this.amendmentFilterService.outputObservable),this.sortedMotionsObservable=this.amendmentSortService.outputObservable):this.sortedMotions=[],this.sortedMotionsObservable&&this.subscriptions.push(this.sortedMotionsObservable.subscribe(motions=>{motions&&(this.sortedMotions=motions,this.setSurroundingMotions())})),this.vp.isMobileSubject.subscribe(()=>{this.cd.markForCheck()})}ngOnDestroy(){this.unsubscribeEditNotifications(motions_constants.e.TYPE_CLOSING_EDITING_MOTION),this.navigationSubscription&&this.navigationSubscription.unsubscribe(),super.ngOnDestroy(),this.cd.detach()}observeRoute(){this.navigationSubscription=this.router.events.subscribe(navEvent=>{navEvent instanceof fesm2015_router.c&&(this.cleanSubjects(),this.getMotionByUrl())})}resetAmendmentChangeRecoListener(){this.amendments.forEach(amendment=>{void 0===this.amendmentChangeRecoSubscriptions[amendment.id]&&(this.amendmentChangeRecoSubscriptions[amendment.id]=this.changeRecoRepo.getChangeRecosOfMotionObservable(amendment.id).subscribe(changeRecos=>{this.amendmentChangeRecos[amendment.id]=changeRecos,this.recalcUnifiedChanges()}))})}recalcUnifiedChanges(){this.lineLength&&(this.allChangingObjects=[],this.changeRecommendations&&this.changeRecommendations.forEach(change=>{this.allChangingObjects.push(change)}),this.amendments&&this.amendments.filter(amendment=>amendment.isParagraphBasedAmendment()).forEach(amendment=>{const toApplyChanges=(this.amendmentChangeRecos[amendment.id]||[]).filter(change=>change.showInFinalView());this.repo.getAmendmentAmendedParagraphs(amendment,this.lineLength,toApplyChanges).forEach(change=>{this.allChangingObjects.push(change)})}),this.allChangingObjects.sort((a,b)=>a.getLineFrom()<b.getLineFrom()?-1:a.getLineFrom()>b.getLineFrom()?1:0),this.crMode&&(this.crMode=this.determineCrMode(this.crMode)),this.cd.markForCheck())}getMotionByUrl(){const params=this.route.snapshot.params;if(params&&params.id){const motionId=+params.id;this.subscriptions.push(this.repo.getViewModelObservable(motionId).subscribe(motion=>{if(motion){motion.isParagraphBasedAmendment()&&(this.contentForm.get(\"text\").clearValidators(),this.contentForm.get(\"text\").updateValueAndValidity());const title=motion.getTitle();super.setTitle(title),this.motion=motion,this.newStateExtension=this.motion.stateExtension,this.recommendationStateExtension=this.motion.recommendationExtension,this.editMotion||this.patchForm(this.motion),this.cd.markForCheck()}}),this.repo.amendmentsTo(motionId).subscribe(amendments=>{this.amendments=amendments,this.resetAmendmentChangeRecoListener(),this.recalcUnifiedChanges()}),this.repo.getRecommendationReferencingMotions(motionId).subscribe(motions=>this.recommendationReferencingMotions=motions),this.changeRecoRepo.getChangeRecosOfMotionObservable(motionId).subscribe(recos=>{this.changeRecommendations=recos,this.recalcUnifiedChanges()}))}else{super.setTitle(\"New motion\"),this.newMotion=!0,this.editMotion=!0;const defaultMotion={};if(this.route.snapshot.queryParams.parent){this.amendmentEdit=!0;const parentMotion=this.repo.getViewModel(this.route.snapshot.queryParams.parent),defaultTitle=`${this.translate.instant(\"Amendment to\")} ${parentMotion.identifierOrTitle}`;defaultMotion.title=defaultTitle,defaultMotion.parent_id=parentMotion.id,defaultMotion.category_id=parentMotion.category_id,defaultMotion.tags_id=parentMotion.tags_id,defaultMotion.motion_block_id=parentMotion.motion_block_id,this.contentForm.patchValue({title:defaultTitle,category_id:parentMotion.category_id,motion_block_id:parentMotion.motion_block_id,parent_id:parentMotion.id,tags_id:parentMotion.tags_id}),\"fulltext\"===this.configService.instant(\"motions_amendments_text_mode\")&&(defaultMotion.text=parentMotion.text,this.contentForm.patchValue({text:defaultMotion.text}))}this.motion=new view_create_motion_ViewCreateMotion(new create_motion.a(defaultMotion))}}patchForm(formMotion){const contentPatch={};if(Object.keys(this.contentForm.controls).forEach(ctrl=>{contentPatch[ctrl]=formMotion[ctrl]}),formMotion.isParagraphBasedAmendment()){contentPatch.selected_paragraphs=[];const parentMotion=this.repo.getViewModel(formMotion.parent_id);parentMotion&&this.lineLength&&this.repo.getParagraphsToChoose(parentMotion,this.lineLength).forEach((paragraph,paragraphNo)=>{null!==formMotion.amendment_paragraphs[paragraphNo]&&(this.contentForm.addControl(\"text_\"+paragraphNo,new fesm2015_forms.g(\"\")),contentPatch.selected_paragraphs.push(paragraph),contentPatch.text=formMotion.amendment_paragraphs[paragraphNo],contentPatch[\"text_\"+paragraphNo]=formMotion.amendment_paragraphs[paragraphNo])})}contentPatch.statute_amendment=formMotion.isStatuteAmendment(),this.contentForm.patchValue(contentPatch)}createForm(){const reason=[\"\"];this.reasonRequired&&reason.push(fesm2015_forms.G.required),this.contentForm=this.formBuilder.group({identifier:[\"\"],title:[\"\",fesm2015_forms.G.required],text:[\"\",fesm2015_forms.G.required],reason:reason,category_id:[\"\"],attachments_id:[[]],agenda_create:[\"\"],agenda_parent_id:[],agenda_type:[\"\"],submitters_id:[],supporters_id:[[]],workflow_id:[],tags_id:[],origin:[\"\"],selected_paragraphs:[],statute_amendment:[\"\"],statute_paragraph_id:[\"\"],motion_block_id:[],parent_id:[],modified_final_version:[\"\"]}),this.updateWorkflowIdForCreateForm();const component=this;this.highlightedLineMatcher=new class{isErrorState(control){const value=control&&control.value?control.value+\"\":\"\",maxLineNumber=component.repo.getLastLineNumber(component.motion,component.lineLength);return null!==value.match(/[^\\d]/)||parseInt(value,10)>=maxLineNumber}}}onKeyDown(event){\"Enter\"===event.key&&event.shiftKey&&this.saveMotion()}onKeyNavigation(event){\"ArrowLeft\"===event.key&&event.altKey&&event.shiftKey&&this.navigateToMotion(this.previousMotion),\"ArrowRight\"===event.key&&event.altKey&&event.shiftKey&&this.navigateToMotion(this.nextMotion)}prepareMotionForSave(motionValues,ctor){const motion=new ctor;return this.motion.isParagraphBasedAmendment()&&(motion.amendment_paragraphs=this.motion.amendment_paragraphs.map((paragraph,paragraphNo)=>null===paragraph?null:motionValues[\"text_\"+paragraphNo]),motionValues.text=\"\"),motion.deserialize(motionValues),motion}createMotion(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const newMotionValues=Object.assign({},this.contentForm.value);newMotionValues.agenda_parent_id||delete newMotionValues.agenda_parent_id;const motion=this.prepareMotionForSave(newMotionValues,create_motion.a);try{const response=yield this.repo.create(motion);this.router.navigate([\"./motions/\"+response.id])}catch(e){this.raiseError(this.translate.instant(e))}}))}updateMotionFromForm(){const newMotionValues=Object.assign({},this.contentForm.value);this.updateMotion(newMotionValues,this.motion).then(()=>{this.editMotion=!1,this.amendmentEdit=!1},this.raiseError)}updateMotion(newMotionValues,motion){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const updateMotion=this.prepareMotionForSave(newMotionValues,motions_motion.a);yield this.repo.update(updateMotion,motion)}))}saveMotion(){this.newMotion?this.createMotion():(this.updateMotionFromForm(),this.unsubscribeEditNotifications(motions_constants.e.TYPE_SAVING_EDITING_MOTION))}getFormattedTextPlain(){const changes=Object.assign([],this.getAllTextChangingObjects());return this.repo.formatMotion(this.motion.id,this.crMode,changes,this.lineLength,this.highlightedLine)}getAmendmentDiffTextWithContext(paragraph){return'<div class=\"paragraphcontext\">'+paragraph.textPre+\"</div><div>\"+paragraph.text+'</div><div class=\"paragraphcontext\">'+paragraph.textPost+\"</div>\"}getAmendmentParagraphs(){return this.repo.getAmendmentParagraphLines(this.motion,this.lineLength,this.crMode,this.changeRecommendations,this.showAmendmentContext)}getAmendmentParagraphLinesTitle(paragraph){return this.repo.getAmendmentParagraphLinesTitle(paragraph)}getFormattedStatuteAmendment(){return this.repo.formatStatuteAmendment(this.statuteParagraphs,this.motion,this.lineLength)}getChangesForDiffMode(){return this.allChangingObjects.filter(change=>!!this.showAllAmendments||change.showInDiffView())}getChangesForFinalMode(){return this.allChangingObjects.filter(change=>change.showInFinalView())}getAllTextChangingObjects(){return this.allChangingObjects.filter(obj=>!obj.isTitleChange())}getTitleChangingObject(){return this.allChangingObjects.find(obj=>obj.isTitleChange())}getTitleWithChanges(){return this.changeRecoRepo.getTitleWithChanges(this.motion.title,this.getTitleChangingObject(),this.crMode)}deleteMotionButton(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to delete this motion?\"),content=this.motion.getTitle();(yield this.promptService.open(title,content))&&(yield this.repo.delete(this.motion),this.router.navigate([\"../motions/\"]))}))}setLineNumberingMode(mode){this.lnMode=mode}isLineNumberingNone(){return this.lnMode===motions_constants.d.None}isLineNumberingInline(){return this.lnMode===motions_constants.d.Inside}isLineNumberingOutside(){return this.lnMode===motions_constants.d.Outside}setChangeRecoMode(mode){this.crMode=mode}isRecoMode(mode){return this.crMode===mode}gotoHighlightedLine(line){const maxLineNumber=this.repo.getLastLineNumber(this.motion,this.lineLength);line>=maxLineNumber||(this.highlightedLine=line,window.setTimeout(()=>{const element=this.el.nativeElement,bounding=element.querySelector(\".os-line-number.line-number-\"+line.toString(10)).getBoundingClientRect();if(bounding.top>=0&&bounding.bottom<=(window.innerHeight||document.documentElement.clientHeight))return;let target;target=element.querySelector(line>4?\".os-line-number.line-number-\"+(line-4).toString(10):\".title-line\"),target.scrollIntoView({behavior:\"smooth\"})},1))}createChangeRecommendation(lineRange){const data={editChangeRecommendation:!1,newChangeRecommendation:!0,lineRange:lineRange,changeRecommendation:null};if(this.motion.isParagraphBasedAmendment()){const lineNumberedParagraphs=this.repo.getAllAmendmentParagraphsWithOriginalLineNumbers(this.motion,this.lineLength,!1);data.changeRecommendation=this.changeRecoRepo.createAmendmentChangeRecommendationTemplate(this.motion,lineNumberedParagraphs,lineRange,this.lineLength)}else data.changeRecommendation=this.changeRecoRepo.createMotionChangeRecommendationTemplate(this.motion,lineRange,this.lineLength);this.dialogService.open(motion_change_recommendation_dialog_component_MotionChangeRecommendationDialogComponent,Object.assign(Object.assign({},dialog_settings.c),{data:data}))}createTitleChangeRecommendation(){const data={editChangeRecommendation:!1,newChangeRecommendation:!0,changeRecommendation:this.changeRecoRepo.createTitleChangeRecommendationTemplate(this.motion,this.lineLength)};this.dialogService.open(motion_title_change_recommendation_dialog_component_MotionTitleChangeRecommendationDialogComponent,Object.assign(Object.assign({},dialog_settings.a),{data:data}))}titleCanBeChanged(){return!this.editMotion&&!this.motion.isStatuteAmendment()&&!this.motion.isParagraphBasedAmendment()&&(this.isRecoMode(motions_constants.b.Original)||this.isRecoMode(motions_constants.b.Diff))}gotoChangeRecommendation(changeRecommendation){this.scrollToChange=changeRecommendation,this.setChangeRecoMode(motions_constants.b.Diff)}createAmendment(){\"paragraph\"===this.configService.instant(\"motions_amendments_text_mode\")?this.router.navigate([\"./create-amendment\"],{relativeTo:this.route}):this.router.navigate([\"./motions/new-amendment\"],{relativeTo:this.route.snapshot.params.relativeTo,queryParams:{parent:this.motion.id||null}})}createModifiedFinalVersion(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const changes=Object.assign([],this.getChangesForFinalMode());let finalVersion=this.repo.formatMotion(this.motion.id,motions_constants.b.Final,changes,this.lineLength,this.highlightedLine);finalVersion=this.linenumberingService.stripLineNumbers(finalVersion);try{yield this.updateMotion({modified_final_version:finalVersion},this.motion)}catch(e){this.raiseError(e)}}))}deleteModifiedFinalVersion(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to delete the print template?\");(yield this.promptService.open(title))&&(this.finalEditMode=!1,this.updateMotion({modified_final_version:\"\"},this.motion).then(()=>this.setChangeRecoMode(motions_constants.b.Final),this.raiseError))}))}setEditMode(mode){this.editMotion=mode,mode&&(this.patchForm(this.motion),this.editNotificationSubscription=this.listenToEditNotification(),this.sendEditNotification(motions_constants.e.TYPE_BEGIN_EDITING_MOTION)),!mode&&this.newMotion&&this.router.navigate([\"./motions/\"]),mode||this.newMotion||this.unsubscribeEditNotifications(motions_constants.e.TYPE_CLOSING_EDITING_MOTION)}updateWorkflowIdForCreateForm(paragraph){const isStatuteAmendment=!!this.contentForm.get(\"statute_amendment\").value&&!!paragraph,workflowId=this.configService.instant(isStatuteAmendment?\"motions_statute_amendments_workflow\":\"motions_workflow\");this.contentForm.patchValue({workflow_id:+workflowId})}onStatuteAmendmentChange($event){this.contentForm.patchValue({statute_paragraph_id:null}),this.updateWorkflowIdForCreateForm()}onStatuteParagraphChange(newValue){const selectedParagraph=this.statuteParagraphs.find(par=>par.id===newValue);this.contentForm.patchValue({title:this.translate.instant(\"Statute amendment for\")+\" \"+selectedParagraph.title,text:selectedParagraph.text}),this.updateWorkflowIdForCreateForm(newValue)}navigateToMotion(motion){motion&&(this.router.navigate([\"../\"+motion.id],{relativeTo:this.route.parent}),this.motion=motion,this.setSurroundingMotions())}setSurroundingMotions(){const indexOfCurrent=this.sortedMotions.findIndex(motion=>motion===this.motion);this.previousMotion=indexOfCurrent>0?this.sortedMotions[indexOfCurrent-1]:null,this.nextMotion=indexOfCurrent>-1&&indexOfCurrent<this.sortedMotions.length-1?this.sortedMotions[indexOfCurrent+1]:null,this.cd.markForCheck()}support(){this.repo.support(this.motion).catch(this.raiseError)}unsupport(){this.repo.unsupport(this.motion).catch(this.raiseError)}openSupportersDialog(){this.showSupporters=!this.showSupporters}setState(id){this.repo.setState(this.motion,id).catch(this.raiseError)}setStateExtension(nextExtension){this.repo.setStateExtension(this.motion,nextExtension)}setRecommendation(id){this.repo.setRecommendation(this.motion,id)}setRecommendationExtension(nextExtension){this.repo.setRecommendationExtension(this.motion,nextExtension)}setCategory(id){id===this.motion.category_id&&(id=null),this.repo.setCatetory(this.motion,id).catch(this.raiseError)}setTag(event,id){event.stopPropagation(),this.repo.setTag(this.motion,id).catch(this.raiseError)}setBlock(id){id===this.motion.motion_block_id&&(id=null),this.repo.setBlock(this.motion,id).catch(this.raiseError)}setupRecommender(){if(this.motion){const configKey=this.motion.isStatuteAmendment()?\"motions_statute_recommendations_by\":\"motions_recommendations_by\";this.recommenderSubscription&&this.recommenderSubscription.unsubscribe(),this.recommenderSubscription=this.configService.get(configKey).subscribe(recommender=>{this.recommender=recommender})}}onDownloadPdf(){this.pdfExport.exportSingleMotion(this.motion,{lnMode:this.lnMode===this.LineNumberingMode.Inside?this.LineNumberingMode.Outside:this.lnMode,crMode:this.crMode,comments:this.motion.commentSectionIds.concat([motions_constants.f])})}onClickAttachment(attachment){window.open(attachment.url)}canFollowRecommendation(){return!!(this.perms.isAllowed(\"createpoll\",this.motion)&&this.motion.recommendation&&this.motion.recommendation.recommendation_label)}onFollowRecButton(){this.repo.followRecommendation(this.motion)}sendEditNotification(type,user){const content={motionId:this.motion.id,senderId:this.operator.viewUser.id,senderName:this.operator.viewUser.short_name,type:type};user?this.notifyService.sendToUsers(this.NOTIFICATION_EDIT_MOTION,content,user):this.notifyService.sendToAllUsers(this.NOTIFICATION_EDIT_MOTION,content)}determineCrMode(mode){var _a,_b,_c,_d,_e;if(mode===motions_constants.b.Final){if(null===(_a=this.motion)||void 0===_a?void 0:_a.modified_final_version)return motions_constants.b.ModifiedFinal;if(!(null===(_b=this.allChangingObjects)||void 0===_b?void 0:_b.length))return motions_constants.b.Original}else{if(mode===motions_constants.b.Changed&&!(null===(_c=this.allChangingObjects)||void 0===_c?void 0:_c.length))return motions_constants.b.Original;if(mode===motions_constants.b.Diff&&!(null===(_d=this.changeRecommendations)||void 0===_d?void 0:_d.length)&&(null===(_e=this.motion)||void 0===_e?void 0:_e.isParagraphBasedAmendment()))return motions_constants.b.Original}return mode}listenToEditNotification(){return this.notifyService.getMessageObservable(this.NOTIFICATION_EDIT_MOTION).subscribe(message=>{const content=message.content;if(this.operator.viewUser.id!==content.senderId&&content.motionId===this.motion.id){let warning=\"\";switch(content.type){case motions_constants.e.TYPE_BEGIN_EDITING_MOTION:case motions_constants.e.TYPE_ALSO_EDITING_MOTION:this.otherWorkOnMotion.includes(content.senderName)||this.otherWorkOnMotion.push(content.senderName),warning=`${this.translate.instant(\"Following users are currently editing this motion:\")} ${this.otherWorkOnMotion}`,content.type===motions_constants.e.TYPE_BEGIN_EDITING_MOTION&&this.sendEditNotification(motions_constants.e.TYPE_ALSO_EDITING_MOTION,message.senderUserId);break;case motions_constants.e.TYPE_CLOSING_EDITING_MOTION:this.recognizeOtherWorkerOnMotion(content.senderName);break;case motions_constants.e.TYPE_SAVING_EDITING_MOTION:warning=`${content.senderName} ${this.translate.instant(\"has saved his work on this motion.\")}`,setTimeout(()=>this.recognizeOtherWorkerOnMotion(content.senderName),2e3)}\"\"!==warning&&this.raiseWarning(warning)}})}recognizeOtherWorkerOnMotion(senderName){this.otherWorkOnMotion=this.otherWorkOnMotion.filter(value=>value!==senderName),0===this.otherWorkOnMotion.length&&this.closeSnackBar()}unsubscribeEditNotifications(unsubscriptionReason){this.editNotificationSubscription&&!this.editNotificationSubscription.closed&&(this.sendEditNotification(unsubscriptionReason),this.closeSnackBar(),this.editNotificationSubscription.unsubscribe())}onSubmitFinalVersion(){const val=this.contentForm.get(\"modified_final_version\").value;this.updateMotion({modified_final_version:val},this.motion).then(()=>{this.finalEditMode=!1,this.contentForm.get(\"modified_final_version\").markAsPristine()},this.raiseError)}cancelFinalVersionEdit(){this.finalEditMode=!1,this.contentForm.patchValue({modified_final_version:this.motion.modified_final_version})}toggleFavorite(){this.motion.personalNote?this.motion.personalNote.star=!this.motion.personalNote.star:this.motion.personalNote={note:\"\",star:!0},this.personalNoteService.savePersonalNote(this.motion,this.motion.personalNote).catch(this.raiseError)}showUploadError(error){this.raiseError(error)}stopClosing(event){this.editMotion&&(event.returnValue=null)}swipe(e,when){const coord=[e.changedTouches[0].pageX,e.changedTouches[0].pageY],time=(new Date).getTime();if(\"start\"===when)this.swipeCoord=coord,this.swipeTime=time;else if(\"end\"===when){const direction=[coord[0]-this.swipeCoord[0],coord[1]-this.swipeCoord[1]];time-this.swipeTime<1e3&&Math.abs(direction[0])>30&&Math.abs(direction[0])>Math.abs(3*direction[1])&&(direction[0]>0&&this.navigateToMotion(this.previousMotion),direction[0]<0&&this.navigateToMotion(this.nextMotion))}}editModifiedFinal(){this.finalEditMode=!0}addToAgenda(){this.itemRepo.addItemToAgenda(this.motion).catch(this.raiseError)}removeFromAgenda(){this.itemRepo.removeFromAgenda(this.motion.item).catch(this.raiseError)}detectChanges(){this.cd.markForCheck()}openDialog(){const dialogData=Object.assign({collectionString:view_motion_poll.a.COLLECTIONSTRING,motion_id:this.motion.id,motion:this.motion},this.motionPollService.getDefaultPollData(this.motion.id));this.pollDialog.openDialog(dialogData)}}return MotionDetailComponent.ɵfac=function(t){return new(t||MotionDetailComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(viewport_service.a),core.Tb(operator_service.a),core.Tb(local_permissions_service.a),core.Tb(fesm2015_router.f),core.Tb(fesm2015_router.a),core.Tb(fesm2015_forms.f),core.Tb(dialog.b),core.Tb(core.m),core.Tb(motion_repository_service.a),core.Tb(change_recommendation_repository_service.a),core.Tb(statute_paragraph_repository_service.a),core.Tb(config_service.a),core.Tb(prompt_service.a),core.Tb(motion_pdf_export_service.a),core.Tb(personal_note_service.a),core.Tb(linenumbering_service.a),core.Tb(category_repository_service.a),core.Tb(user_repository_service.a),core.Tb(notify_service.a),core.Tb(tag_repository_service.a),core.Tb(workflow_repository_service.a),core.Tb(motion_block_repository_service.a),core.Tb(item_repository_service.a),core.Tb(motion_sort_list_service.a),core.Tb(amendment_sort_list_service.a),core.Tb(motion_filter_list_service.a),core.Tb(amendment_filter_list_service.a),core.Tb(core.h),core.Tb(motion_poll_dialog_service.a),core.Tb(motion_poll_service.a))},MotionDetailComponent.ɵcmp=core.Nb({type:MotionDetailComponent,selectors:[[\"os-motion-detail\"]],hostBindings:function(rf,ctx){1&rf&&core.hc(\"keydown\",(function($event){return ctx.onKeyNavigation($event)}),!1,core.Gc)(\"beforeunload\",(function($event){return ctx.stopClosing($event)}),!1,core.Hc)},features:[core.Db],decls:38,vars:25,consts:[[\"mainActionTooltip\",\"New amendment\",\"prevUrl\",\"../..\",3,\"hasMainButton\",\"nav\",\"editMode\",\"isSaveButtonEnabled\",\"mainEvent\",\"cancelEditEvent\",\"saveEvent\"],[1,\"title-slot\"],[4,\"ngIf\"],[\"class\",\"extra-controls-slot prev-next-motion-controls\",4,\"ngIf\"],[1,\"menu-slot\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"matMenuTriggerFor\"],[\"motionExtraMenu\",\"matMenu\"],[1,\"content-container\",\"spacer-bottom-60\",3,\"touchstart\",\"touchend\"],[\"class\",\"title\",4,\"ngIf\"],[4,\"ngIf\",\"ngIfThen\",\"ngIfElse\"],[\"mobileView\",\"\"],[\"desktopView\",\"\"],[\"metaInfoTemplate\",\"\"],[\"contentTemplate\",\"\"],[\"paragraphBasedAmendment\",\"\"],[\"lineNumberingMenu\",\"matMenu\"],[\"changeRecoMenu\",\"matMenu\"],[\"mat-menu-item\",\"\",3,\"ngClass\",\"click\"],[\"mat-menu-item\",\"\",3,\"ngClass\",\"click\",4,\"ngIf\"],[1,\"extra-controls-slot\",\"prev-next-motion-controls\"],[\"mat-button\",\"\",3,\"click\"],[\"icon\",\"chevron_left\"],[\"icon\",\"chevron_right\",3,\"swap\"],[3,\"object\",\"menuItem\"],[\"mat-menu-item\",\"\",3,\"click\"],[4,\"osPerms\"],[3,\"object\",\"menuItem\",4,\"osPerms\"],[\"mat-menu-item\",\"\",3,\"routerLink\",\"queryParams\",4,\"osPerms\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"ngIf\"],[\"mat-menu-item\",\"\",\"class\",\"red-warning-text\",3,\"click\",4,\"ngIf\"],[\"mat-menu-item\",\"\",3,\"routerLink\",\"queryParams\"],[\"mat-menu-item\",\"\",1,\"red-warning-text\",3,\"click\"],[1,\"title\"],[1,\"title-line\"],[1,\"motion-title\"],[\"mat-icon-button\",\"\",1,\"primary-accent-by-theme\",3,\"matTooltip\",\"click\"],[1,\"main-nav-color\",\"title-font\"],[\"class\",\"title-change-indicator\",3,\"click\",4,\"ngIf\"],[\"class\",\"change-title\",3,\"click\",4,\"osPerms\",\"osPermsAnd\"],[1,\"title-change-indicator\",3,\"click\"],[1,\"change-title\",3,\"click\"],[3,\"routerLink\",\"state\"],[\"class\",\"mobile-view\",4,\"ngIf\"],[1,\"mobile-view\"],[4,\"ngTemplateOutlet\"],[3,\"ngClass\"],[3,\"motion\",4,\"ngIf\"],[3,\"motion\"],[\"class\",\"desktop-view\",4,\"ngIf\"],[1,\"desktop-view\"],[1,\"desktop-left\"],[1,\"desktop-right\"],[\"class\",\"spacer-top-20 spacer-bottom-20\",4,\"ngIf\"],[\"type\",\"button\",\"mat-stroked-button\",\"\",\"color\",\"accent\",3,\"click\",4,\"ngIf\"],[\"type\",\"button\",\"mat-button\",\"\",3,\"click\",4,\"ngIf\"],[\"class\",\"supporters\",4,\"ngIf\"],[\"type\",\"button\",\"mat-stroked-button\",\"\",\"color\",\"accent\",3,\"click\"],[\"type\",\"button\",\"mat-button\",\"\",3,\"click\"],[1,\"supporters\"],[4,\"ngFor\",\"ngForOf\"],[3,\"title\",\"canBeEdited\",\"hasExtension\",\"chipValue\",\"inputValue\",\"classes\",\"extensionLabel\",\"success\"],[\"class\",\"trigger-menu\",4,\"ngIf\"],[1,\"trigger-menu\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"ngFor\",\"ngForOf\"],[\"listValuePrefix\",\"motion:\",3,\"title\",\"inputValue\",\"canBeEdited\",\"chipValue\",\"hasExtension\",\"extensionLabel\",\"searchList\",\"searchListLabel\",\"success\"],[\"mat-stroked-button\",\"\",\"class\",\"spacer-top-10\",3,\"click\",4,\"ngIf\"],[\"mat-stroked-button\",\"\",1,\"spacer-top-10\",3,\"click\"],[1,\"nowrap\",3,\"routerLink\"],[\"categoryMenu\",\"matMenu\"],[\"class\",\"grey multi-line-chip\",\"disableRipple\",\"\",3,\"matMenuTriggerFor\",4,\"ngIf\"],[\"class\",\"grey\",\"disableRipple\",\"\",4,\"ngIf\"],[\"disableRipple\",\"\",1,\"grey\",\"multi-line-chip\",3,\"matMenuTriggerFor\"],[\"disableRipple\",\"\",1,\"grey\"],[\"tagMenu\",\"matMenu\"],[3,\"matMenuTriggerFor\"],[\"class\",\"grey\",\"disabled\",\"\",\"disableRipple\",\"\",4,\"ngIf\"],[1,\"mat-chip-list-stacked\"],[\"class\",\"grey\",\"disabled\",\"\",\"disableRipple\",\"\",4,\"ngFor\",\"ngForOf\"],[\"disabled\",\"\",\"disableRipple\",\"\",1,\"grey\"],[\"class\",\"grey\",\"disableRipple\",\"\",4,\"ngFor\",\"ngForOf\"],[\"blockMenu\",\"matMenu\"],[\"class\",\"grey\",\"disableRipple\",\"\",3,\"matMenuTriggerFor\",4,\"ngIf\"],[\"disableRipple\",\"\",1,\"grey\",3,\"matMenuTriggerFor\"],[3,\"ngModel\",\"ngModelChange\",4,\"ngIf\"],[3,\"ngModel\",\"ngModelChange\"],[1,\"spacer-top-20\",\"spacer-bottom-20\"],[3,\"poll\",4,\"ngFor\",\"ngForOf\",\"ngForTrackBy\"],[\"class\",\"create-poll-button\",\"create-poll-button\",\"\",\"mat-stroked-button\",\"\",3,\"click\",4,\"ngIf\"],[3,\"poll\"],[\"create-poll-button\",\"\",\"mat-stroked-button\",\"\",1,\"create-poll-button\",3,\"click\"],[1,\"main-nav-color\"],[1,\"motion-content\",3,\"formGroup\",\"keydown\"],[\"class\",\"motion-text-toolbar-wrapper\",4,\"ngIf\"],[\"class\",\"statute-amendment-selector\",4,\"ngIf\"],[\"class\",\"content-field\",4,\"ngIf\"],[1,\"form-id-title\"],[\"class\",\"content-field form-identifier\",4,\"ngIf\"],[\"class\",\"content-field form-title\",4,\"ngIf\"],[\"class\",\"text-prefix-label\",4,\"ngIf\"],[\"class\",\"motion-text line-numbers-none\",3,\"innerHTML\",4,\"ngIf\"],[1,\"extra-data\"],[1,\"motion-text-toolbar-wrapper\"],[1,\"motion-text-controls\"],[\"class\",\"motion-goto-line\",4,\"ngIf\"],[\"mat-icon-button\",\"\",3,\"click\",4,\"ngIf\"],[\"type\",\"button\",\"mat-button\",\"\",3,\"matMenuTriggerFor\"],[\"type\",\"button\",\"mat-button\",\"\",3,\"matMenuTriggerFor\",4,\"ngIf\"],[1,\"motion-goto-line\"],[\"type\",\"number\",\"min\",\"1\",\"matInput\",\"\",\"osAutofocus\",\"\",3,\"placeholder\",\"ngModel\",\"ngModelOptions\",\"errorStateMatcher\",\"ngModelChange\"],[\"type\",\"submit\",\"mat-button\",\"\",\"matSuffix\",\"\",\"mat-icon-button\",\"\",\"aria-label\",\"Go to line\",3,\"click\",4,\"ngIf\"],[\"type\",\"submit\",\"mat-button\",\"\",\"matSuffix\",\"\",\"mat-icon-button\",\"\",\"aria-label\",\"Go to line\",3,\"click\"],[\"mat-icon-button\",\"\",3,\"click\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"matTooltip\",\"click\",4,\"ngIf\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"click\",4,\"ngIf\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"disabled\",\"click\",4,\"ngIf\"],[\"type\",\"button\",\"class\",\"red-warning-text\",\"mat-icon-button\",\"\",3,\"matTooltip\",\"click\",4,\"ngIf\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"matTooltip\",\"click\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"click\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"disabled\",\"click\"],[\"type\",\"button\",\"mat-icon-button\",\"\",1,\"red-warning-text\",3,\"matTooltip\",\"click\"],[1,\"statute-amendment-selector\"],[\"formControlName\",\"statute_amendment\",3,\"change\"],[\"formControlName\",\"statute_paragraph_id\",3,\"placeholder\",\"valueChange\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[3,\"value\"],[1,\"content-field\"],[\"formControlName\",\"submitters_id\",3,\"multiple\",\"placeholder\",\"inputListValues\"],[1,\"content-field\",\"form-identifier\"],[\"matInput\",\"\",\"autofocus\",\"\",\"formControlName\",\"identifier\",3,\"placeholder\"],[1,\"content-field\",\"form-title\"],[\"matInput\",\"\",\"formControlName\",\"title\",\"required\",\"\",3,\"placeholder\"],[1,\"text-prefix-label\"],[\"class\",\"motion-text\",3,\"line-numbers-none\",\"line-numbers-inline\",\"line-numbers-outside\",4,\"ngIf\"],[3,\"motion\",\"changes\",\"scrollToChange\",\"highlightedLine\",\"showAllAmendments\",\"lineNumberingMode\",\"createChangeRecommendation\",4,\"ngIf\"],[1,\"motion-text\"],[3,\"html\",\"changeRecommendations\",\"createChangeRecommendation\",\"gotoChangeRecommendation\",4,\"ngIf\"],[3,\"innerHTML\",4,\"ngIf\"],[3,\"html\",\"changeRecommendations\",\"createChangeRecommendation\",\"gotoChangeRecommendation\"],[3,\"innerHTML\"],[3,\"motion\",\"changes\",\"scrollToChange\",\"highlightedLine\",\"showAllAmendments\",\"lineNumberingMode\",\"createChangeRecommendation\"],[\"formControlName\",\"modified_final_version\",\"required\",\"\",3,\"hidden\",\"init\",\"onChange\"],[\"class\",\"red-warning-text\",4,\"ngIf\"],[1,\"red-warning-text\"],[1,\"motion-text\",\"line-numbers-none\",3,\"innerHTML\"],[\"formControlName\",\"text\",\"required\",\"\",3,\"init\",\"ngModelChange\"],[\"class\",\"line-number\",4,\"ngIf\"],[3,\"formControlName\",\"init\"],[1,\"line-number\"],[\"class\",\"motion-text\",3,\"innerHtml\",4,\"ngIf\"],[\"formControlName\",\"reason\",3,\"init\",\"required\",4,\"ngIf\"],[1,\"motion-text\",3,\"innerHtml\"],[\"formControlName\",\"reason\",3,\"init\",\"required\"],[\"formControlName\",\"category_id\",3,\"includeNone\",\"placeholder\",\"inputListValues\"],[4,\"osPerms\",\"osPermsAnd\"],[\"dense\",\"\"],[3,\"routerLink\",\"click\"],[\"formControlName\",\"attachments_id\",3,\"errorHandler\"],[3,\"form\"],[\"formControlName\",\"supporters_id\",3,\"multiple\",\"placeholder\",\"inputListValues\"],[\"formControlName\",\"workflow_id\",3,\"placeholder\",\"inputListValues\"],[\"matInput\",\"\",\"formControlName\",\"origin\",3,\"placeholder\"],[1,\"text-holder\"],[\"class\",\"alert alert-info\",4,\"ngIf\"],[1,\"alert\",\"alert-info\"],[\"class\",\"motion-text motion-text-diff amendment-view\",3,\"line-numbers-none\",\"line-numbers-inline\",\"line-numbers-outside\",\"amendment-context\",4,\"ngFor\",\"ngForOf\"],[1,\"motion-text\",\"motion-text-diff\",\"amendment-view\"],[\"class\",\"amendment-line-header\",4,\"ngIf\"],[3,\"outerHTML\",4,\"ngIf\"],[1,\"amendment-line-header\"],[3,\"outerHTML\"],[\"class\",\"show-entire-text-check\",3,\"change\",4,\"ngIf\"],[1,\"show-entire-text-check\",3,\"change\"]],template:function(rf,ctx){if(1&rf&&(core.Zb(0,\"os-head-bar\",0),core.hc(\"mainEvent\",(function(){return ctx.createAmendment()}))(\"cancelEditEvent\",(function(){return ctx.setEditMode(!1)}))(\"saveEvent\",(function(){return ctx.saveMotion()})),core.Zb(1,\"div\",1),core.Qc(2,MotionDetailComponent_h2_2_Template,8,5,\"h2\",2),core.Qc(3,MotionDetailComponent_h2_3_Template,3,3,\"h2\",2),core.Qc(4,MotionDetailComponent_h2_4_Template,3,3,\"h2\",2),core.Yb(),core.Qc(5,MotionDetailComponent_div_5_Template,3,2,\"div\",3),core.Zb(6,\"div\",4),core.Zb(7,\"button\",5),core.Zb(8,\"mat-icon\"),core.Sc(9,\"more_vert\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(10,\"mat-menu\",null,6),core.Qc(12,MotionDetailComponent_div_12_Template,16,14,\"div\",2),core.Yb(),core.Yb(),core.Zb(13,\"div\",7),core.hc(\"touchstart\",(function($event){return ctx.swipe($event,\"start\")}))(\"touchend\",(function($event){return ctx.swipe($event,\"end\")})),core.Qc(14,MotionDetailComponent_div_14_Template,13,9,\"div\",8),core.Qc(15,MotionDetailComponent_ng_container_15_Template,1,0,\"ng-container\",9),core.Yb(),core.Qc(16,MotionDetailComponent_ng_template_16_Template,1,1,\"ng-template\",null,10,core.Rc),core.Qc(18,MotionDetailComponent_ng_template_18_Template,1,1,\"ng-template\",null,11,core.Rc),core.Qc(20,MotionDetailComponent_ng_template_20_Template,12,11,\"ng-template\",null,12,core.Rc),core.Qc(22,MotionDetailComponent_ng_template_22_Template,21,19,\"ng-template\",null,13,core.Rc),core.Qc(24,MotionDetailComponent_ng_template_24_Template,4,3,\"ng-template\",null,14,core.Rc),core.Zb(26,\"mat-menu\",null,15),core.Qc(28,MotionDetailComponent_div_28_Template,12,19,\"div\",2),core.Yb(),core.Zb(29,\"mat-menu\",null,16),core.Zb(31,\"button\",17),core.hc(\"click\",(function(){return ctx.setChangeRecoMode(ctx.ChangeRecoMode.Original)})),core.Sc(32),core.mc(33,\"translate\"),core.Yb(),core.Qc(34,MotionDetailComponent_button_34_Template,3,6,\"button\",18),core.Qc(35,MotionDetailComponent_button_35_Template,3,6,\"button\",18),core.Qc(36,MotionDetailComponent_button_36_Template,3,6,\"button\",18),core.Qc(37,MotionDetailComponent_button_37_Template,3,6,\"button\",18),core.Yb()),2&rf){const _r4=core.Ec(11),_r8=core.Ec(17),_r10=core.Ec(19);core.tc(\"hasMainButton\",ctx.perms.isAllowed(\"can_create_amendments\",ctx.motion))(\"nav\",!1)(\"editMode\",ctx.editMotion)(\"isSaveButtonEnabled\",ctx.contentForm.valid),core.Gb(2),core.tc(\"ngIf\",ctx.motion&&!ctx.newMotion),core.Gb(1),core.tc(\"ngIf\",ctx.newMotion&&!ctx.amendmentEdit),core.Gb(1),core.tc(\"ngIf\",ctx.amendmentEdit),core.Gb(1),core.tc(\"ngIf\",!ctx.editMotion&&!ctx.vp.isMobile),core.Gb(2),core.tc(\"matMenuTriggerFor\",_r4),core.Gb(5),core.tc(\"ngIf\",ctx.motion),core.Gb(2),core.tc(\"ngIf\",ctx.motion&&!ctx.editMotion),core.Gb(1),core.tc(\"ngIf\",ctx.vp.isMobile)(\"ngIfThen\",_r8)(\"ngIfElse\",_r10),core.Gb(13),core.tc(\"ngIf\",ctx.motion),core.Gb(3),core.tc(\"ngClass\",core.zc(23,_c6,ctx.crMode===ctx.ChangeRecoMode.Original)),core.Gb(1),core.Uc(\" \",core.nc(33,21,\"Original version\"),\" \"),core.Gb(2),core.tc(\"ngIf\",ctx.allChangingObjects&&ctx.allChangingObjects.length),core.Gb(1),core.tc(\"ngIf\",ctx.allChangingObjects&&ctx.allChangingObjects.length),core.Gb(1),core.tc(\"ngIf\",ctx.motion&&!ctx.motion.isParagraphBasedAmendment()&&ctx.allChangingObjects&&ctx.allChangingObjects.length),core.Gb(1),core.tc(\"ngIf\",ctx.motion&&ctx.motion.modified_final_version&&!ctx.motion.isParagraphBasedAmendment())}},directives:[head_bar_component.a,common.t,fesm2015_button.b,menu.e,icon.a,menu.f,menu.c,common.q,icon_container_component.a,speaker_button_component.a,perms_directive.a,divider.a,projector_button_component.a,fesm2015_router.g,tooltip.c,fesm2015_router.i,common.A,card.a,motion_comments_component_MotionCommentsComponent,personal_note_component_PersonalNoteComponent,manage_submitters_component_ManageSubmittersComponent,common.s,extension_field_component.a,chips.a,chips.d,fesm2015_checkbox.a,fesm2015_forms.s,fesm2015_forms.v,motion_poll_component_MotionPollComponent,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,form_field.c,fesm2015_forms.y,input.b,fesm2015_forms.c,autofocus_directive.a,form_field.b,form_field.j,fesm2015_forms.i,fesm2015_select.a,fesm2015_core.n,search_value_selector_component.a,fesm2015_forms.D,motion_detail_original_change_recommendations_component_MotionDetailOriginalChangeRecommendationsComponent,motion_detail_diff_component_MotionDetailDiffComponent,tinymce_tinymce_angular.a,list.a,list.d,attachment_control_component.a,agenda_content_object_form_component.a],pipes:[ngx_translate_core.j,trust_pipe.a],styles:['.motion-text .insert,.motion-text ins{color:green;text-decoration:underline}.motion-text .delete,.motion-text del{color:red;text-decoration:line-through}.motion-text li{padding-bottom:10px}.motion-text ol,.motion-text ul{margin-left:15px;margin-bottom:0}.motion-text .highlight{background-color:#ff0}.motion-text.line-numbers-outside{padding-left:40px;position:relative}.motion-text.line-numbers-outside .os-line-number{display:inline-block;font-size:0;line-height:0;width:22px;height:22px;position:absolute;left:0;padding-right:55px}.motion-text.line-numbers-outside .os-line-number:after{content:attr(data-line-number);position:absolute;top:13px;vertical-align:top;color:grey;font-size:12px;font-weight:400}.motion-text.line-numbers-outside .os-line-number.selectable:hover:before,.motion-text.line-numbers-outside .os-line-number.selected:before{position:absolute;top:4px;left:20px;display:inline-block;cursor:pointer;content:\"\";width:16px;height:16px;background:url(\\'data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\" fill=\"%23337ab7\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>\\');background-size:16px 16px}.motion-text.line-numbers-inline .os-line-break{display:none}.motion-text.line-numbers-inline .os-line-number{display:inline-block}.motion-text.line-numbers-inline .os-line-number:after{display:inline-block;content:attr(data-line-number);vertical-align:top;font-size:10px;font-weight:400;color:grey;margin-top:-3px;margin-left:0;margin-right:0}.motion-text.line-numbers-none .os-line-break,.motion-text.line-numbers-none .os-line-number{display:none}.motion-text .os-split-before{margin-top:0;padding-top:0}.motion-text .os-split-after{margin-bottom:0;padding-bottom:0}.motion-text li.os-split-before{list-style:none}.amendment-view .os-split-after{margin-bottom:0}.amendment-view .os-split-before{margin-top:0}.amendment-view .paragraphcontext{opacity:.5}.amendment-view.amendment-context .paragraphcontext{opacity:1}span{margin:0}.create-poll-button{margin-bottom:1em}.prev-next-motion-controls div{display:inherit}.motion-content{display:flow-root}.motion-text-toolbar-wrapper{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;margin-bottom:16px}.motion-text-toolbar-wrapper button{font-weight:400}.motion-text-toolbar-wrapper>button{margin-top:7px}.motion-text-toolbar-wrapper .motion-text-controls .motion-goto-line{width:150px}.motion-text-toolbar-wrapper .motion-text-controls input[type=number]::-webkit-inner-spin-button,.motion-text-toolbar-wrapper .motion-text-controls input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.motion-text-toolbar-wrapper .motion-text-controls input[type=number]{-moz-appearance:textfield}.meta-info-panel{padding-top:25px}.meta-info-panel a:hover{cursor:pointer}.mat-accordion{display:block;margin-top:0}.mat-expansion-panel{padding-top:0}.mat-expansion-panel .expansion-panel-custom-body{padding-left:55px}.statute-amendment-selector mat-form-field{margin-left:20px;width:calc(100% - 20px)}.amendment-line-header{font-style:italic}.motion-content h4{margin:10px 10px 15px 0;display:block;font-weight:500;font-size:110%}.motion-content h5{margin:15px 10px 10px 0;display:block;font-weight:500;font-size:100%}.motion-content .motion-text{clear:both;margin-left:0}.motion-content .text-prefix-label{display:block;margin:0 10px 20px 0}.motion-content .extra-data{margin-top:1em}.motion-content .content-field{display:inline-block;width:100%}.motion-content .form-id-title{display:-ms-flexbox;display:flex}.motion-content .form-id-title .form-identifier{-ms-flex:0 0 95px;flex:0 0 95px;max-width:95px;margin-right:1em}.motion-content .form-id-title .form-title{-ms-flex:1 1 auto;flex:1 1 auto}.desktop-view .desktop-left{width:30%;float:left;padding-right:25px}.desktop-view .desktop-right .os-form-card{margin-bottom:20px}.desktop-view .desktop-right .os-card{display:grid;max-width:900px;min-width:400px;margin-left:0!important;margin-top:0!important}.mobile-view .os-card{padding:27px;max-width:calc(100% - 54px)}.title-line{display:-ms-flexbox;display:flex}.title-line .motion-title{position:relative;z-index:1;margin-left:-20px;padding-left:20px}.title-line .motion-title .change-title{position:relative;width:0;height:0}.title-line .motion-title .change-title:before{position:absolute;top:18px;left:-17px;display:none;cursor:pointer;content:\"\";width:16px;height:16px;background:url(\\'data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\" fill=\"%23337ab7\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>\\');background-size:16px 16px}.title-line .motion-title:hover .change-title:before{display:block}.title-line .motion-title .title-change-indicator{background-color:#0333ff;position:absolute;width:4px;height:32px;left:10px;top:5px;cursor:pointer}.mat-chip-list-stacked .mat-chip{margin:4px}.supporters{font-size:12px;margin-top:4px}.show-entire-text-check{font-size:70%;float:right}'],encapsulation:2,changeDetection:0}),MotionDetailComponent})(),pathMatch:\"full\",runGuardsAndResolvers:\"paramsChange\"},{path:\"create-amendment\",component:amendment_create_wizard_component_AmendmentCreateWizardComponent}];let motion_detail_routing_module_MotionDetailRoutingModule=(()=>{class MotionDetailRoutingModule{}return MotionDetailRoutingModule.ɵmod=core.Rb({type:MotionDetailRoutingModule}),MotionDetailRoutingModule.ɵinj=core.Qb({factory:function(t){return new(t||MotionDetailRoutingModule)},imports:[[fesm2015_router.j.forChild(routes)],fesm2015_router.j]}),MotionDetailRoutingModule})();var motion_poll_module=__webpack_require__(\"tSYa\");let motion_detail_module_MotionDetailModule=(()=>{class MotionDetailModule{}return MotionDetailModule.ɵmod=core.Rb({type:MotionDetailModule}),MotionDetailModule.ɵinj=core.Qb({factory:function(t){return new(t||MotionDetailModule)},imports:[[common.c,motion_detail_routing_module_MotionDetailRoutingModule,shared_module.a,motion_poll_module.MotionPollModule]]}),MotionDetailModule})()},T9hM:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return MotionSortListService}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mrSG\"),_biesbjerg_ngx_translate_extract_marker__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"4u49\"),app_core_core_services_openslides_status_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"D/ll\"),app_core_core_services_storage_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"AqIO\"),app_core_promises_deferred__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"g96W\"),app_core_ui_services_base_sort_list_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(\"A6Ob\"),app_core_ui_services_config_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(\"+KbT\"),_angular_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(\"fXoL\"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(\"sYmb\");let MotionSortListService=(()=>{class MotionSortListService extends app_core_ui_services_base_sort_list_service__WEBPACK_IMPORTED_MODULE_5__.a{constructor(translate,store,OSStatus,config){super(translate,store,OSStatus),this.storageKey=\"MotionList\",this.defaultSortingLoaded=new app_core_promises_deferred__WEBPACK_IMPORTED_MODULE_4__.a,this.motionSortOptions=[{property:\"weight\",label:\"Call list\"},{property:\"identifier\"},{property:\"title\"},{property:\"submitters\"},{property:\"category\",sortFn:this.categorySortFn},{property:\"motion_block_id\",label:\"Motion block\"},{property:\"state\"},{property:\"creationDate\",label:Object(_biesbjerg_ngx_translate_extract_marker__WEBPACK_IMPORTED_MODULE_1__.a)(\"Creation date\")},{property:\"lastChangeDate\",label:Object(_biesbjerg_ngx_translate_extract_marker__WEBPACK_IMPORTED_MODULE_1__.a)(\"Last modified\")}],config.get(\"motions_motions_sorting\").subscribe(defSortProp=>{defSortProp&&(this.defaultMotionSorting=defSortProp,this.defaultSortingLoaded.resolve())})}getSortOptions(){return this.motionSortOptions}getDefaultDefinition(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){return yield this.defaultSortingLoaded,{sortProperty:this.defaultMotionSorting,sortAscending:!0}}))}categorySortFn(itemA,itemB,ascending){return itemA.category_id===itemB.category_id?itemA.category_weight<itemB.category_weight===ascending?-1:1:itemA.category.weight<itemB.category.weight===ascending?-1:1}}return MotionSortListService.ɵfac=function(t){return new(t||MotionSortListService)(_angular_core__WEBPACK_IMPORTED_MODULE_7__.dc(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_8__.k),_angular_core__WEBPACK_IMPORTED_MODULE_7__.dc(app_core_core_services_storage_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_7__.dc(app_core_core_services_openslides_status_service__WEBPACK_IMPORTED_MODULE_2__.a),_angular_core__WEBPACK_IMPORTED_MODULE_7__.dc(app_core_ui_services_config_service__WEBPACK_IMPORTED_MODULE_6__.a))},MotionSortListService.ɵprov=_angular_core__WEBPACK_IMPORTED_MODULE_7__.Pb({token:MotionSortListService,factory:MotionSortListService.ɵfac,providedIn:\"root\"}),MotionSortListService})()}}]);","extractedComments":[]}