{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{\"6fpL\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"OsCommonModule\",(function(){return os_common_module_OsCommonModule}));var common=__webpack_require__(\"ofXK\"),router=__webpack_require__(\"tyNb\"),operator_service=__webpack_require__(\"OwvW\"),core=__webpack_require__(\"fXoL\"),head_bar_component=__webpack_require__(\"mksl\"),card=__webpack_require__(\"Wp6s\"),ngx_translate_core=__webpack_require__(\"sYmb\");let error_component_ErrorComponent=(()=>{class ErrorComponent{constructor(route){this.route=route}ngOnInit(){this.route.queryParams.subscribe(params=>{params&&params.error&&console.error(`${params.error}! Required: \"${params.msg}\"`)})}}return ErrorComponent.ɵfac=function(t){return new(t||ErrorComponent)(core.Tb(router.a))},ErrorComponent.ɵcmp=core.Nb({type:ErrorComponent,selectors:[[\"os-error\"]],decls:9,vars:6,consts:[[1,\"title-slot\"],[1,\"os-card\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"os-head-bar\"),core.Zb(1,\"div\",0),core.Zb(2,\"h2\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(5,\"mat-card\",1),core.Zb(6,\"h1\"),core.Sc(7),core.mc(8,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(3),core.Tc(core.nc(4,2,\"Error\")),core.Gb(4),core.Tc(core.nc(8,4,\"You do not have the required permission to see that page!\")))},directives:[head_bar_component.a,card.a],pipes:[ngx_translate_core.j],styles:[\"\"]}),ErrorComponent})();var data_store_service=__webpack_require__(\"xTJg\"),openslides_service=__webpack_require__(\"qWJO\"),config_repository_service=__webpack_require__(\"BOLD\"),update_service=__webpack_require__(\"YZ1K\"),base_view=__webpack_require__(\"mV3u\"),platform_browser=__webpack_require__(\"jhN1\"),snack_bar=__webpack_require__(\"dNgK\"),legal_notice_content_component=__webpack_require__(\"try9\"),fesm2015_button=__webpack_require__(\"bTqV\"),perms_directive=__webpack_require__(\"3Xi6\"),auditTime=__webpack_require__(\"3UWI\"),BehaviorSubject=__webpack_require__(\"2Vo4\"),user_repository_service=__webpack_require__(\"ZDbo\"),count_users_service=__webpack_require__(\"i7i4\");let count_user_statistics_service_CountUsersStatisticsService=(()=>{class CountUsersStatisticsService{constructor(countUserService,userRepo){this.countUserService=countUserService,this.userRepo=userRepo,this.runningCounts={}}countUsers(){let token,userDataObservable;return[token,userDataObservable]=this.countUserService.countUsers(),this.runningCounts[token]=new BehaviorSubject.a({activeUserHandles:0,activeUsers:{},groups:{}}),userDataObservable.subscribe(data=>{const userId=data.userId?data.userId:0,stats=this.runningCounts[token].getValue(),user=this.userRepo.getViewModel(userId);stats.activeUserHandles++,stats.activeUsers[userId]||(stats.activeUsers[userId]=0),stats.activeUsers[userId]++,(user?user.groups:[]).forEach(group=>{stats.groups[group.id]||(stats.groups[group.id]={name:group.name,users:{},userHandleCount:0}),stats.groups[group.id].userHandleCount++,stats.groups[group.id].users[userId]=stats.activeUsers[userId]}),this.runningCounts[token].next(stats)}),[token,this.runningCounts[token].asObservable()]}stopCounting(token){this.runningCounts[token]&&(this.runningCounts[token].complete(),delete this.runningCounts[token])}}return CountUsersStatisticsService.ɵfac=function(t){return new(t||CountUsersStatisticsService)(core.dc(count_users_service.a),core.dc(user_repository_service.a))},CountUsersStatisticsService.ɵprov=core.Pb({token:CountUsersStatisticsService,factory:CountUsersStatisticsService.ɵfac,providedIn:\"root\"}),CountUsersStatisticsService})();function CountUsersComponent_button_0_Template(rf,ctx){if(1&rf){const _r4=core.ac();core.Zb(0,\"button\",2),core.hc(\"click\",(function(){return core.Ic(_r4),core.lc().countUsers()})),core.Sc(1),core.mc(2,\"translate\"),core.Yb()}2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"Count active users\"),\"\\n\"))}function CountUsersComponent_button_1_Template(rf,ctx){if(1&rf){const _r6=core.ac();core.Zb(0,\"button\",2),core.hc(\"click\",(function(){return core.Ic(_r6),core.lc().stopCounting()})),core.Sc(1),core.mc(2,\"translate\"),core.Yb()}2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"Stop counting\"),\"\\n\"))}function CountUsersComponent_div_2_li_8_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"li\"),core.Zb(1,\"strong\"),core.Sc(2),core.Yb(),core.Sc(3),core.mc(4,\"translate\"),core.mc(5,\"translate\"),core.Yb()),2&rf){const groupId_r8=ctx.$implicit,ctx_r7=core.lc(2);core.Gb(2),core.Uc(\"\",ctx_r7.stats.groups[groupId_r8].name,\":\"),core.Gb(1),core.Xc(\" \",ctx_r7.userInGroupIds(groupId_r8).length,\" \",core.nc(4,5,\"active users\"),\" (\",ctx_r7.stats.groups[groupId_r8].userHandleCount,\" \",core.nc(5,7,\"connections\"),\") \")}}function CountUsersComponent_div_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"p\"),core.Sc(2),core.mc(3,\"translate\"),core.mc(4,\"translate\"),core.Yb(),core.Sc(5),core.mc(6,\"translate\"),core.Zb(7,\"ul\"),core.Qc(8,CountUsersComponent_div_2_li_8_Template,6,9,\"li\",3),core.Yb(),core.Yb()),2&rf){const ctx_r2=core.lc();core.Gb(2),core.Xc(\" \",ctx_r2.userIds().length,\" \",core.nc(3,6,\"active users\"),\" (\",ctx_r2.stats.activeUserHandles,\" \",core.nc(4,8,\"connections\"),\") \"),core.Gb(3),core.Uc(\" \",core.nc(6,10,\"Groups\"),\": \"),core.Gb(3),core.tc(\"ngForOf\",ctx_r2.groupIds())}}let count_users_component_CountUsersComponent=(()=>{class CountUsersComponent{constructor(countUsersStatisticService){this.countUsersStatisticService=countUsersStatisticService,this.token=null,this.stats=null}countUsers(){if(this.token)return;let statsObservable;[this.token,statsObservable]=this.countUsersStatisticService.countUsers(),statsObservable.pipe(Object(auditTime.a)(100)).subscribe(stats=>{this.stats=stats})}stopCounting(){this.token&&(this.countUsersStatisticService.stopCounting(this.token),this.token=null,this.stats=null)}userIds(){return Object.keys(this.stats.activeUsers).map(id=>+id)}groupIds(){return Object.keys(this.stats.groups).map(id=>+id)}userInGroupIds(groupId){return Object.keys(this.stats.groups[groupId].users).map(id=>+id)}ngOnDestroy(){this.stopCounting()}}return CountUsersComponent.ɵfac=function(t){return new(t||CountUsersComponent)(core.Tb(count_user_statistics_service_CountUsersStatisticsService))},CountUsersComponent.ɵcmp=core.Nb({type:CountUsersComponent,selectors:[[\"os-count-users\"]],decls:3,vars:3,consts:[[\"type\",\"button\",\"mat-stroked-button\",\"\",3,\"click\",4,\"ngIf\"],[4,\"ngIf\"],[\"type\",\"button\",\"mat-stroked-button\",\"\",3,\"click\"],[4,\"ngFor\",\"ngForOf\"]],template:function(rf,ctx){1&rf&&(core.Qc(0,CountUsersComponent_button_0_Template,3,3,\"button\",0),core.Qc(1,CountUsersComponent_button_1_Template,3,3,\"button\",0),core.Qc(2,CountUsersComponent_div_2_Template,9,12,\"div\",1)),2&rf&&(core.tc(\"ngIf\",!ctx.token),core.Gb(1),core.tc(\"ngIf\",ctx.token),core.Gb(1),core.tc(\"ngIf\",ctx.stats))},directives:[common.t,fesm2015_button.b,common.s],pipes:[ngx_translate_core.j],encapsulation:2}),CountUsersComponent})();var list_of_speakers_repository_service=__webpack_require__(\"3Y/2\"),duration_service=__webpack_require__(\"2aHC\"),list_view_table_component=__webpack_require__(\"0Obk\"),pebula_ngrid=__webpack_require__(\"dRZP\");function UserStatisticsComponent_button_0_Template(rf,ctx){if(1&rf){const _r4=core.ac();core.Zb(0,\"button\",2),core.hc(\"click\",(function(){return core.Ic(_r4),core.lc().changeViewOfStatistics()})),core.Sc(1),core.mc(2,\"translate\"),core.Yb()}2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"Count completed requests to speak\"),\"\\n\"))}function UserStatisticsComponent_button_1_Template(rf,ctx){if(1&rf){const _r6=core.ac();core.Zb(0,\"button\",2),core.hc(\"click\",(function(){return core.Ic(_r6),core.lc().changeViewOfStatistics()})),core.Sc(1),core.mc(2,\"translate\"),core.Yb()}2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"Stop counting\"),\"\\n\"))}function UserStatisticsComponent_ng_container_2_div_21_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const col_r11=ctx.col;core.Gb(1),core.Uc(\" \",core.nc(2,1,col_r11.label),\" \")}}function UserStatisticsComponent_ng_container_2_div_22_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const object_r12=ctx.row;core.Gb(1),core.Uc(\" \",core.nc(2,1,object_r12.structureLevel),\" \")}}function UserStatisticsComponent_ng_container_2_div_23_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.Yb()),2&rf){const object_r13=ctx.row,ctx_r9=core.lc(2);core.Gb(1),core.Uc(\" \",ctx_r9.parseDuration(object_r13.speakingTime),\" \")}}function UserStatisticsComponent_ng_container_2_div_24_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.Yb()),2&rf){const object_r14=ctx.row;core.Gb(1),core.Uc(\" \",object_r14.finishedSpeakers.length,\" \")}}function UserStatisticsComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Zb(1,\"table\",3),core.Zb(2,\"tr\"),core.Zb(3,\"td\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Zb(6,\"td\"),core.Sc(7),core.Yb(),core.Yb(),core.Zb(8,\"tr\"),core.Zb(9,\"td\"),core.Sc(10),core.mc(11,\"translate\"),core.Yb(),core.Zb(12,\"td\"),core.Sc(13),core.Yb(),core.Yb(),core.Zb(14,\"tr\"),core.Zb(15,\"td\"),core.Sc(16),core.mc(17,\"translate\"),core.Yb(),core.Zb(18,\"td\"),core.Sc(19),core.Yb(),core.Yb(),core.Yb(),core.Zb(20,\"os-list-view-table\",4),core.Qc(21,UserStatisticsComponent_ng_container_2_div_21_Template,3,3,\"div\",5),core.Qc(22,UserStatisticsComponent_ng_container_2_div_22_Template,3,3,\"div\",6),core.Qc(23,UserStatisticsComponent_ng_container_2_div_23_Template,2,1,\"div\",6),core.Qc(24,UserStatisticsComponent_ng_container_2_div_24_Template,2,1,\"div\",6),core.Yb(),core.Wb()),2&rf){const ctx_r2=core.lc();core.Gb(4),core.Tc(core.nc(5,17,\"Number of all requests to speak\")),core.Gb(3),core.Tc(ctx_r2.numberOfWordRequests),core.Gb(3),core.Tc(core.nc(11,19,\"Unique speakers\")),core.Gb(3),core.Tc(ctx_r2.numberOfUniqueSpeakers),core.Gb(3),core.Tc(core.nc(17,21,\"Duration of all requests to speak\")),core.Gb(3),core.Tc(ctx_r2.totalDuration),core.Gb(1),core.tc(\"listObservable\",ctx_r2.statisticsByStructureLevelObservable)(\"columns\",ctx_r2.columnDefinition)(\"filterProps\",ctx_r2.filterProps)(\"vScrollFixed\",45)(\"allowProjector\",!1)(\"fullScreen\",!1)(\"showListOfSpeakers\",!1),core.Gb(1),core.tc(\"pblNgridHeaderCellDef\",\"*\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"structureLevel\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"durationOfWordRequests\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"numberOfWordRequests\")}}let user_statistics_component_UserStatisticsComponent=(()=>{class UserStatisticsComponent extends base_view.a{constructor(title,translate,matSnackBar,losRepo,durationService){super(title,translate,matSnackBar),this.translate=translate,this.losRepo=losRepo,this.durationService=durationService,this.columnDefinition=[{prop:\"structureLevel\",width:\"auto\",label:\"Structure level\"},{prop:\"durationOfWordRequests\",width:\"auto\",label:this.translate.instant(\"Duration of requests to speak\")},{prop:\"numberOfWordRequests\",width:\"auto\",label:this.translate.instant(\"Number of requests to speak\")}],this.filterProps=[\"structureLevel\"],this.speakingTimeAsNumber=0,this.uniqueSpeakers=[],this._numberOfWordRequests=0,this.statisticIsOpen=!1,this.relationSpeakingTimeStructureLevelSubject=new BehaviorSubject.a([])}get totalDuration(){return this.parseDuration(this.speakingTimeAsNumber,!0)}get numberOfUniqueSpeakers(){return this.uniqueSpeakers.length}get numberOfWordRequests(){return this._numberOfWordRequests}get statisticsByStructureLevelObservable(){return this.relationSpeakingTimeStructureLevelSubject.asObservable()}get openedStatistics(){return this.statisticIsOpen}changeViewOfStatistics(){this.statisticIsOpen=!this.statisticIsOpen,this.statisticIsOpen?this.startSubscription():this.cleanSubjects()}pushNextState(){const list=this.losRepo.getSpeakingTimeStructureLevelRelation();list.sort((a,b)=>b.finishedSpeakers.length-a.finishedSpeakers.length);for(const entry of list)this.speakingTimeAsNumber+=entry.speakingTime,this._numberOfWordRequests+=entry.finishedSpeakers.length;this.relationSpeakingTimeStructureLevelSubject.next(list),this.uniqueSpeakers=this.losRepo.getAllFirstContributions()}parseDuration(time,withHours=!1){return withHours?this.durationService.durationToStringWithHours(time):this.durationService.durationToString(time,\"m\")}startSubscription(){this.subscriptions.push(this.losRepo.getViewModelListObservable().subscribe(()=>{this.reset(),this.pushNextState()}))}reset(){this._numberOfWordRequests=0,this.speakingTimeAsNumber=0}}return UserStatisticsComponent.ɵfac=function(t){return new(t||UserStatisticsComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(list_of_speakers_repository_service.a),core.Tb(duration_service.a))},UserStatisticsComponent.ɵcmp=core.Nb({type:UserStatisticsComponent,selectors:[[\"os-user-statistics\"]],features:[core.Db],decls:3,vars:3,consts:[[\"mat-stroked-button\",\"\",3,\"click\",4,\"ngIf\"],[4,\"ngIf\"],[\"mat-stroked-button\",\"\",3,\"click\"],[1,\"user-statistics-table\"],[1,\"user-statistics-table--virtual-scroll\",3,\"listObservable\",\"columns\",\"filterProps\",\"vScrollFixed\",\"allowProjector\",\"fullScreen\",\"showListOfSpeakers\"],[4,\"pblNgridHeaderCellDef\"],[4,\"pblNgridCellDef\"]],template:function(rf,ctx){1&rf&&(core.Qc(0,UserStatisticsComponent_button_0_Template,3,3,\"button\",0),core.Qc(1,UserStatisticsComponent_button_1_Template,3,3,\"button\",0),core.Qc(2,UserStatisticsComponent_ng_container_2_Template,25,23,\"ng-container\",1)),2&rf&&(core.tc(\"ngIf\",!ctx.openedStatistics),core.Gb(1),core.tc(\"ngIf\",ctx.openedStatistics),core.Gb(1),core.tc(\"ngIf\",ctx.openedStatistics))},directives:[common.t,fesm2015_button.b,list_view_table_component.a,pebula_ngrid.h,pebula_ngrid.c],pipes:[ngx_translate_core.j],styles:[\".user-statistics-table{width:100%;margin:16px auto}.user-statistics-table,.user-statistics-table td,.user-statistics-table th{border-collapse:collapse;border-bottom-width:1px;border-bottom-style:solid}.user-statistics-table td,.user-statistics-table th{padding:8px 8px 8px 24px;text-align:left}.user-statistics-table--virtual-scroll{display:block;height:500px}.user-statistics-table--virtual-scroll .list-view-frame{height:100%}\"],encapsulation:2,changeDetection:0}),UserStatisticsComponent})();function LegalNoticeComponent_mat_card_23_Template(rf,ctx){if(1&rf){const _r3=core.ac();core.Zb(0,\"mat-card\",3),core.Zb(1,\"div\"),core.Zb(2,\"button\",4),core.hc(\"click\",(function(){return core.Ic(_r3),core.lc().printDS()})),core.Zb(3,\"span\"),core.Sc(4,\"Print DS\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(5,\"div\"),core.Zb(6,\"button\",4),core.hc(\"click\",(function(){return core.Ic(_r3),core.lc().getThisComponent()})),core.Zb(7,\"span\"),core.Sc(8,\"Get this component\"),core.Yb(),core.Yb(),core.Yb(),core.Yb()}}function LegalNoticeComponent_mat_card_24_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-card\",7),core.Zb(1,\"h2\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Zb(4,\"div\"),core.Zb(5,\"h3\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Ub(8,\"os-count-users\"),core.Yb(),core.Zb(9,\"div\"),core.Zb(10,\"h3\"),core.Sc(11),core.mc(12,\"translate\"),core.Yb(),core.Ub(13,\"os-user-statistics\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(2),core.Tc(core.nc(3,3,\"Statistics\")),core.Gb(4),core.Tc(core.nc(7,5,\"Active users\")),core.Gb(5),core.Tc(core.nc(12,7,\"Requests to speak\")))}let legal_notice_component_LegalNoticeComponent=(()=>{class LegalNoticeComponent extends base_view.a{constructor(title,translate,matSnackbar,openSlidesService,update,configRepo,operator,DS){super(title,translate,matSnackbar),this.translate=translate,this.openSlidesService=openSlidesService,this.update=update,this.configRepo=configRepo,this.operator=operator,this.DS=DS,this.isEditing=!1,this.legalNotice=\"\",this.showDevTools=!1}ngOnInit(){super.setTitle(this.translate.instant(\"Legal notice\"))}resetCache(){this.openSlidesService.reset()}checkForUpdate(){this.update.checkForUpdate()}saveChanges(){this.configRepo.bulkUpdate([{key:\"general_event_legal_notice\",value:this.legalNotice}]).then(()=>this.isEditing=!this.isEditing,this.raiseError)}canManage(){return this.operator.hasPerms(operator_service.b.coreCanManageConfig)}printDS(){this.DS.print()}getThisComponent(){console.log(this)}}return LegalNoticeComponent.ɵfac=function(t){return new(t||LegalNoticeComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(openslides_service.a),core.Tb(update_service.a),core.Tb(config_repository_service.a),core.Tb(operator_service.a),core.Tb(data_store_service.a))},LegalNoticeComponent.ɵcmp=core.Nb({type:LegalNoticeComponent,selectors:[[\"os-legal-notice\"]],features:[core.Db],decls:25,vars:24,consts:[[3,\"nav\",\"goBack\",\"editMode\",\"hasMainButton\",\"mainButtonIcon\",\"mainActionTooltip\",\"cancelEditEvent\",\"mainEvent\",\"saveEvent\"],[1,\"title-slot\"],[3,\"canBeEdited\",\"isEditing\",\"update\"],[1,\"os-card\"],[\"type\",\"button\",\"mat-button\",\"\",3,\"click\"],[\"class\",\"os-card\",4,\"ngIf\"],[\"class\",\"os-card spacer-bottom-60\",4,\"osPerms\"],[1,\"os-card\",\"spacer-bottom-60\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"os-head-bar\",0),core.hc(\"cancelEditEvent\",(function(){return ctx.isEditing=!ctx.isEditing}))(\"mainEvent\",(function(){return ctx.isEditing=!ctx.isEditing}))(\"saveEvent\",(function(){return ctx.saveChanges()})),core.mc(1,\"translate\"),core.Zb(2,\"div\",1),core.Zb(3,\"h2\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(6,\"os-legal-notice-content\",2),core.hc(\"update\",(function($event){return ctx.legalNotice=$event})),core.Yb(),core.Zb(7,\"mat-card\",3),core.Zb(8,\"div\"),core.Zb(9,\"button\",4),core.hc(\"click\",(function(){return ctx.resetCache()})),core.Zb(10,\"span\"),core.Sc(11),core.mc(12,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(13,\"div\"),core.Zb(14,\"button\",4),core.hc(\"click\",(function(){return ctx.checkForUpdate()})),core.Zb(15,\"span\"),core.Sc(16),core.mc(17,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(18,\"div\"),core.Zb(19,\"button\",4),core.hc(\"click\",(function(){return ctx.showDevTools=!ctx.showDevTools})),core.Zb(20,\"span\"),core.Sc(21),core.mc(22,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Qc(23,LegalNoticeComponent_mat_card_23_Template,9,0,\"mat-card\",5),core.Yb(),core.Qc(24,LegalNoticeComponent_mat_card_24_Template,14,9,\"mat-card\",6)),2&rf&&(core.tc(\"nav\",!1)(\"goBack\",!0)(\"editMode\",ctx.isEditing)(\"hasMainButton\",ctx.canManage())(\"mainButtonIcon\",\"edit\")(\"mainActionTooltip\",core.nc(1,14,\"Edit\")),core.Gb(4),core.Tc(core.nc(5,16,\"Legal notice\")),core.Gb(2),core.tc(\"canBeEdited\",!0)(\"isEditing\",ctx.isEditing),core.Gb(5),core.Tc(core.nc(12,18,\"Reset cache\")),core.Gb(5),core.Tc(core.nc(17,20,\"Check for updates\")),core.Gb(5),core.Tc(core.nc(22,22,\"Show devtools\")),core.Gb(2),core.tc(\"ngIf\",ctx.showDevTools),core.Gb(1),core.tc(\"osPerms\",\"users.can_manage\"))},directives:[head_bar_component.a,legal_notice_content_component.a,card.a,fesm2015_button.b,common.t,perms_directive.a,count_users_component_CountUsersComponent,user_statistics_component_UserStatisticsComponent],pipes:[ngx_translate_core.j],encapsulation:2}),LegalNoticeComponent})();var privacy_policy_content_component=__webpack_require__(\"ij0B\");let privacy_policy_component_PrivacyPolicyComponent=(()=>{class PrivacyPolicyComponent extends base_view.a{constructor(title,translate,matSnackbar,configRepo,operator){super(title,translate,matSnackbar),this.translate=translate,this.configRepo=configRepo,this.operator=operator,this.isEditing=!1,this.privacyProlicy=\"\"}ngOnInit(){super.setTitle(this.translate.instant(\"Privacy policy\"))}saveChanges(){this.configRepo.bulkUpdate([{key:\"general_event_privacy_policy\",value:this.privacyProlicy}]).then(()=>this.isEditing=!this.isEditing,this.raiseError)}canManage(){return this.operator.hasPerms(operator_service.b.coreCanManageConfig)}}return PrivacyPolicyComponent.ɵfac=function(t){return new(t||PrivacyPolicyComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(config_repository_service.a),core.Tb(operator_service.a))},PrivacyPolicyComponent.ɵcmp=core.Nb({type:PrivacyPolicyComponent,selectors:[[\"os-privacy-policy\"]],features:[core.Db],decls:7,vars:13,consts:[[3,\"nav\",\"goBack\",\"editMode\",\"hasMainButton\",\"mainButtonIcon\",\"mainActionTooltip\",\"cancelEditEvent\",\"mainEvent\",\"saveEvent\"],[1,\"title-slot\"],[3,\"canBeEdited\",\"isEditing\",\"update\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"os-head-bar\",0),core.hc(\"cancelEditEvent\",(function(){return ctx.isEditing=!ctx.isEditing}))(\"mainEvent\",(function(){return ctx.isEditing=!ctx.isEditing}))(\"saveEvent\",(function(){return ctx.saveChanges()})),core.mc(1,\"translate\"),core.Zb(2,\"div\",1),core.Zb(3,\"h2\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(6,\"os-privacy-policy-content\",2),core.hc(\"update\",(function($event){return ctx.privacyProlicy=$event})),core.Yb()),2&rf&&(core.tc(\"nav\",!1)(\"goBack\",!0)(\"editMode\",ctx.isEditing)(\"hasMainButton\",ctx.canManage())(\"mainButtonIcon\",\"edit\")(\"mainActionTooltip\",core.nc(1,9,\"Edit\")),core.Gb(4),core.Tc(core.nc(5,11,\"Privacy Policy\")),core.Gb(2),core.tc(\"canBeEdited\",!0)(\"isEditing\",ctx.isEditing))},directives:[head_bar_component.a,privacy_policy_content_component.a],pipes:[ngx_translate_core.j],styles:[\"\"]}),PrivacyPolicyComponent})();var fesm2015_forms=__webpack_require__(\"3Pt+\"),config_service=__webpack_require__(\"+KbT\"),form_field=__webpack_require__(\"kmnG\"),input=__webpack_require__(\"qFsG\"),tinymce_tinymce_angular=__webpack_require__(\"fB2i\"),trust_pipe=__webpack_require__(\"7jBc\");function StartComponent_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Zb(1,\"div\",4),core.Zb(2,\"h1\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Ub(5,\"div\",5),core.mc(6,\"trust\"),core.Yb(),core.Wb()),2&rf){const ctx_r0=core.lc();core.Gb(3),core.Tc(core.nc(4,2,ctx_r0.startContent.general_event_welcome_title)),core.Gb(2),core.tc(\"innerHTML\",core.oc(6,4,ctx_r0.startContent.general_event_welcome_text,\"html\"),core.Jc)}}function StartComponent_ng_container_7_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Zb(1,\"form\",6),core.Zb(2,\"mat-form-field\"),core.Ub(3,\"input\",7),core.mc(4,\"translate\"),core.Zb(5,\"mat-error\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Yb(),core.Ub(8,\"editor\",8),core.Yb(),core.Wb()),2&rf){const ctx_r1=core.lc();core.Gb(1),core.tc(\"formGroup\",ctx_r1.startForm),core.Gb(2),core.uc(\"placeholder\",core.nc(4,4,\"Front page title\")),core.Gb(3),core.Tc(core.nc(7,6,\"The title is required\")),core.Gb(2),core.tc(\"init\",ctx_r1.tinyMceSettings)}}const routes=[{path:\"\",component:(()=>{class StartComponent extends base_view.a{constructor(titleService,translate,matSnackbar,configService,configRepo,fb,operator){super(titleService,translate,matSnackbar),this.configService=configService,this.configRepo=configRepo,this.fb=fb,this.operator=operator,this.isEditing=!1,this.startContent={general_event_welcome_title:\"\",general_event_welcome_text:\"\"},this.startForm=this.fb.group({general_event_welcome_title:[\"\",fesm2015_forms.G.required],general_event_welcome_text:\"\"})}ngOnInit(){super.setTitle(\"Home\"),this.configService.get(\"general_event_welcome_title\").subscribe(welcomeTitle=>this.startContent.general_event_welcome_title=welcomeTitle),this.configService.get(\"general_event_welcome_text\").subscribe(welcomeText=>{this.startContent.general_event_welcome_text=this.translate.instant(welcomeText)})}editStartPage(){Object.keys(this.startForm.controls).forEach(control=>{this.startForm.patchValue({[control]:this.startContent[control]})}),this.isEditing=!0}saveChanges(){this.configRepo.bulkUpdate(Object.keys(this.startForm.controls).map(control=>({key:control,value:this.startForm.value[control]}))).then(()=>this.isEditing=!this.isEditing,this.raiseError)}canManage(){return this.operator.hasPerms(operator_service.b.coreCanManageConfig)}}return StartComponent.ɵfac=function(t){return new(t||StartComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(config_service.a),core.Tb(config_repository_service.a),core.Tb(fesm2015_forms.f),core.Tb(operator_service.a))},StartComponent.ɵcmp=core.Nb({type:StartComponent,selectors:[[\"os-start\"]],features:[core.Db],decls:8,vars:10,consts:[[3,\"hasMainButton\",\"editMode\",\"mainButtonIcon\",\"isSaveButtonEnabled\",\"mainEvent\",\"saveEvent\",\"cancelEditEvent\"],[1,\"title-slot\"],[1,\"spacer-bottom-60\",3,\"ngClass\"],[4,\"ngIf\"],[1,\"app-content\"],[3,\"innerHTML\"],[3,\"formGroup\"],[\"matInput\",\"\",\"formControlName\",\"general_event_welcome_title\",\"required\",\"\",3,\"placeholder\"],[\"formControlName\",\"general_event_welcome_text\",3,\"init\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"os-head-bar\",0),core.hc(\"mainEvent\",(function(){return ctx.editStartPage()}))(\"saveEvent\",(function(){return ctx.saveChanges()}))(\"cancelEditEvent\",(function(){return ctx.isEditing=!ctx.isEditing})),core.Zb(1,\"div\",1),core.Zb(2,\"h2\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(5,\"mat-card\",2),core.Qc(6,StartComponent_ng_container_6_Template,7,7,\"ng-container\",3),core.Qc(7,StartComponent_ng_container_7_Template,9,8,\"ng-container\",3),core.Yb()),2&rf&&(core.tc(\"hasMainButton\",ctx.canManage())(\"editMode\",ctx.isEditing)(\"mainButtonIcon\",\"edit\")(\"isSaveButtonEnabled\",ctx.startForm.valid),core.Gb(3),core.Tc(core.nc(4,8,\"Home\")),core.Gb(2),core.tc(\"ngClass\",ctx.isEditing?\"os-form-card\":\"os-card\"),core.Gb(1),core.tc(\"ngIf\",!ctx.isEditing),core.Gb(1),core.tc(\"ngIf\",ctx.isEditing))},directives:[head_bar_component.a,card.a,common.q,common.t,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,form_field.c,input.b,fesm2015_forms.c,fesm2015_forms.s,fesm2015_forms.i,fesm2015_forms.D,form_field.b,tinymce_tinymce_angular.a],pipes:[ngx_translate_core.j,trust_pipe.a],styles:[\".app-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}\"]}),StartComponent})(),pathMatch:\"full\",data:{basePerm:operator_service.b.coreCanSeeFrontpage}},{path:\"legalnotice\",component:legal_notice_component_LegalNoticeComponent},{path:\"privacypolicy\",component:privacy_policy_component_PrivacyPolicyComponent},{path:\"error\",component:error_component_ErrorComponent}];let common_routing_module_CommonRoutingModule=(()=>{class CommonRoutingModule{}return CommonRoutingModule.ɵmod=core.Rb({type:CommonRoutingModule}),CommonRoutingModule.ɵinj=core.Qb({factory:function(t){return new(t||CommonRoutingModule)},imports:[[router.j.forChild(routes)],router.j]}),CommonRoutingModule})();var shared_module=__webpack_require__(\"PCNd\");let os_common_module_OsCommonModule=(()=>{class OsCommonModule{}return OsCommonModule.ɵmod=core.Rb({type:OsCommonModule}),OsCommonModule.ɵinj=core.Qb({factory:function(t){return new(t||OsCommonModule)},imports:[[common.c,common_routing_module_CommonRoutingModule,shared_module.a]]}),OsCommonModule})()}}]);","extractedComments":[]}