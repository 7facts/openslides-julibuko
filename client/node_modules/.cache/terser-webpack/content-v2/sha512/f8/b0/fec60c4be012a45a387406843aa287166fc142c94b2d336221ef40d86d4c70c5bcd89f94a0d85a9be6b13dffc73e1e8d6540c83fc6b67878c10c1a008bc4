{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{\"Bp/c\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"FullscreenProjectorModule\",(function(){return fullscreen_projector_module_FullscreenProjectorModule}));var common=__webpack_require__(\"ofXK\"),shared_module=__webpack_require__(\"PCNd\"),router=__webpack_require__(\"tyNb\"),Subject=__webpack_require__(\"XNiG\"),auth_service=__webpack_require__(\"otHz\"),operator_service=__webpack_require__(\"OwvW\"),projector_repository_service=__webpack_require__(\"3moa\"),core=__webpack_require__(\"fXoL\"),resized_directive=__webpack_require__(\"ELcd\"),projector_component=__webpack_require__(\"PAIG\");const _c0=[\"container\"];function FullscreenProjectorComponent_os_projector_3_Template(rf,ctx){if(1&rf&&core.Ub(0,\"os-projector\",4),2&rf){const ctx_r1=core.lc();core.tc(\"projector\",ctx_r1.projector)}}let fullscreen_projector_component_FullscreenProjectorComponent=(()=>{class FullscreenProjectorComponent{constructor(auth,route,operator,repo){this.route=route,this.operator=operator,this.repo=repo,this.isLoading=!0,this.canSeeProjector=!1,this.oldProjectorSize={width:0,height:0},this.resizeSubject=new Subject.a,this.projectorStyle={width:\"100px\"},this.resizeSubject.subscribe(()=>{this.updateProjectorDimensions()})}ngOnInit(){this.route.params.subscribe(params=>{this.loadProjector(parseInt(params.id,10)||1),this.isLoading=!1}),this.operator.getUserObservable().subscribe(()=>{this.canSeeProjector=this.operator.hasPerms(operator_service.b.coreCanSeeProjector)})}loadProjector(projectorId){this.projectorId=projectorId,this.repo.getViewModelObservable(this.projectorId).subscribe(projector=>{this.projector=projector,!projector||projector.width===this.oldProjectorSize.width&&projector.height===this.oldProjectorSize.height||(this.oldProjectorSize.width=projector.height,this.oldProjectorSize.height=projector.height,this.updateProjectorDimensions())})}updateProjectorDimensions(){if(!this.containerElement||!this.projector)return;const projectorAspectRatio=this.projector.width/this.projector.height;if(projectorAspectRatio>=this.containerElement.nativeElement.offsetWidth/this.containerElement.nativeElement.offsetHeight)this.projectorStyle.width=this.containerElement.nativeElement.offsetWidth+\"px\";else{const width=Math.floor(this.containerElement.nativeElement.offsetHeight*projectorAspectRatio);this.projectorStyle.width=width+\"px\"}}}return FullscreenProjectorComponent.ɵfac=function(t){return new(t||FullscreenProjectorComponent)(core.Tb(auth_service.a),core.Tb(router.a),core.Tb(operator_service.a),core.Tb(projector_repository_service.a))},FullscreenProjectorComponent.ɵcmp=core.Nb({type:FullscreenProjectorComponent,selectors:[[\"os-fullscreen-projector\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.Oc(_c0,!0),2&rf&&core.Dc(_t=core.ic())&&(ctx.containerElement=_t.first)},decls:4,vars:3,consts:[[\"id\",\"container\",3,\"osResized\"],[\"container\",\"\"],[\"id\",\"projector\",3,\"ngStyle\"],[3,\"projector\",4,\"ngIf\"],[3,\"projector\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"div\",0,1),core.Zb(2,\"div\",2),core.Qc(3,FullscreenProjectorComponent_os_projector_3_Template,1,1,\"os-projector\",3),core.Yb(),core.Yb()),2&rf&&(core.tc(\"osResized\",ctx.resizeSubject),core.Gb(2),core.tc(\"ngStyle\",ctx.projectorStyle),core.Gb(1),core.tc(\"ngIf\",ctx.projector))},directives:[resized_directive.a,common.w,common.t,projector_component.a],styles:[\"#container[_ngcontent-%COMP%]{width:100vw;height:100vh;overflow:hidden;background-color:#222;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}#projector[_ngcontent-%COMP%]{width:500px;margin:auto;min-width:1px}\"]}),FullscreenProjectorComponent})();const routes=[{path:\"\",component:fullscreen_projector_component_FullscreenProjectorComponent,pathMatch:\"full\"},{path:\":id\",component:fullscreen_projector_component_FullscreenProjectorComponent}];let fullscreen_projector_routing_module_FullscreenProjectorRoutingModule=(()=>{class FullscreenProjectorRoutingModule{}return FullscreenProjectorRoutingModule.ɵmod=core.Rb({type:FullscreenProjectorRoutingModule}),FullscreenProjectorRoutingModule.ɵinj=core.Qb({factory:function(t){return new(t||FullscreenProjectorRoutingModule)},imports:[[router.j.forChild(routes)],router.j]}),FullscreenProjectorRoutingModule})(),fullscreen_projector_module_FullscreenProjectorModule=(()=>{class FullscreenProjectorModule{}return FullscreenProjectorModule.ɵmod=core.Rb({type:FullscreenProjectorModule}),FullscreenProjectorModule.ɵinj=core.Qb({factory:function(t){return new(t||FullscreenProjectorModule)},imports:[[common.c,fullscreen_projector_routing_module_FullscreenProjectorRoutingModule,shared_module.a]]}),FullscreenProjectorModule})()}}]);","extractedComments":[]}