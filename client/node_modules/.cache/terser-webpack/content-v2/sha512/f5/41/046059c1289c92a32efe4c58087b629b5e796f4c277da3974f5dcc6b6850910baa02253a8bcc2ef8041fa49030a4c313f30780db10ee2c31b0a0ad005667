{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[21,36],{\"6Ehv\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return AgendaContentObjectFormComponent}));var app_core_repositories_agenda_item_repository_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"InfO\"),app_core_ui_services_config_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"+KbT\"),app_shared_models_agenda_item__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"+az0\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"fXoL\"),_directives_perms_directive__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"3Xi6\"),_angular_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(\"ofXK\"),_angular_forms__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(\"3Pt+\"),_angular_material_checkbox__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(\"bSwM\"),_angular_material_form_field__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(\"kmnG\"),_angular_material_select__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(\"d3UM\"),_angular_material_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(\"FKr1\"),_search_value_selector_search_value_selector_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(\"oqD5\"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(\"sYmb\");function AgendaContentObjectFormComponent_ng_container_0_ng_container_1_ng_container_7_mat_option_5_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(0,\"mat-option\",7),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(1,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Sc(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.mc(3,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb()),2&rf){const type_r5=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"value\",type_r5.key),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_3__.nc(3,2,type_r5.name))}}function AgendaContentObjectFormComponent_ng_container_0_ng_container_1_ng_container_7_div_6_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(0,\"div\",2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(1,\"mat-form-field\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Ub(2,\"os-search-value-selector\",8),_angular_core__WEBPACK_IMPORTED_MODULE_3__.mc(3,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb()),2&rf){const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_3__.lc(4);_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"formGroup\",ctx_r4.form),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.uc(\"placeholder\",_angular_core__WEBPACK_IMPORTED_MODULE_3__.nc(3,5,\"Parent agenda item\")),_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"multiple\",!1)(\"includeNone\",!0)(\"inputListValues\",ctx_r4.itemObserver)}}function AgendaContentObjectFormComponent_ng_container_0_ng_container_1_ng_container_7_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Xb(0),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(1,\"div\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(2,\"mat-form-field\",2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(3,\"mat-select\",4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.mc(4,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Qc(5,AgendaContentObjectFormComponent_ng_container_0_ng_container_1_ng_container_7_mat_option_5_Template,4,4,\"mat-option\",5),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Qc(6,AgendaContentObjectFormComponent_ng_container_0_ng_container_1_ng_container_7_div_6_Template,4,7,\"div\",6),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Wb()),2&rf){const ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_3__.lc(3);_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"formGroup\",ctx_r2.form),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.uc(\"placeholder\",_angular_core__WEBPACK_IMPORTED_MODULE_3__.nc(4,4,\"Agenda visibility\")),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"ngForOf\",ctx_r2.ItemVisibilityChoices),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"ngIf\",ctx_r2.itemObserver.value.length>0)}}function AgendaContentObjectFormComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Xb(0),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(1,\"div\",2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(2,\"p\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(3,\"mat-checkbox\",3),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(4,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Sc(5),_angular_core__WEBPACK_IMPORTED_MODULE_3__.mc(6,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Qc(7,AgendaContentObjectFormComponent_ng_container_0_ng_container_1_ng_container_7_Template,7,6,\"ng-container\",1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Wb()),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_3__.lc(2);_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"formGroup\",ctx_r1.form),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_3__.nc(6,3,\"Add to agenda\")),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"ngIf\",!!ctx_r1.checkbox.value)}}function AgendaContentObjectFormComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Xb(0),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Qc(1,AgendaContentObjectFormComponent_ng_container_0_ng_container_1_Template,8,5,\"ng-container\",1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Wb()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_3__.lc();_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"ngIf\",ctx_r0.showForm)}}let AgendaContentObjectFormComponent=(()=>{class AgendaContentObjectFormComponent{constructor(configService,itemRepo){this.configService=configService,this.itemRepo=itemRepo,this.showForm=!1,this.ItemVisibilityChoices=app_shared_models_agenda_item__WEBPACK_IMPORTED_MODULE_2__.b}ngOnInit(){this.checkbox=this.form.controls.agenda_create,this.configService.get(\"agenda_item_creation\").subscribe(value=>{if(\"always\"===value)this.showForm=!0,this.checkbox.disable(),this.form.patchValue({agenda_create:!0});else if(\"never\"===value)this.showForm=!1,this.checkbox.disable(),this.form.patchValue({agenda_create:!1});else{const defaultValue=\"default_yes\"===value;this.showForm=!0,this.checkbox.enable(),this.form.patchValue({agenda_create:defaultValue})}}),this.configService.get(\"agenda_new_items_default_visibility\").subscribe(visibility=>{this.form.get(\"agenda_type\").setValue(+visibility)}),this.itemObserver=this.itemRepo.getViewModelListBehaviorSubject()}}return AgendaContentObjectFormComponent.ɵfac=function(t){return new(t||AgendaContentObjectFormComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Tb(app_core_ui_services_config_service__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Tb(app_core_repositories_agenda_item_repository_service__WEBPACK_IMPORTED_MODULE_0__.a))},AgendaContentObjectFormComponent.ɵcmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.Nb({type:AgendaContentObjectFormComponent,selectors:[[\"os-agenda-content-object-form\"]],inputs:{form:\"form\"},decls:1,vars:1,consts:[[4,\"osPerms\"],[4,\"ngIf\"],[3,\"formGroup\"],[\"formControlName\",\"agenda_create\"],[\"formControlName\",\"agenda_type\",3,\"placeholder\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[3,\"formGroup\",4,\"ngIf\"],[3,\"value\"],[\"formControlName\",\"agenda_parent_id\",3,\"multiple\",\"includeNone\",\"placeholder\",\"inputListValues\"]],template:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_3__.Qc(0,AgendaContentObjectFormComponent_ng_container_0_Template,2,1,\"ng-container\",0),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"osPerms\",\"agenda.can_manage\")},directives:[_directives_perms_directive__WEBPACK_IMPORTED_MODULE_4__.a,_angular_common__WEBPACK_IMPORTED_MODULE_5__.t,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.t,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.k,_angular_material_checkbox__WEBPACK_IMPORTED_MODULE_7__.a,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.s,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.i,_angular_material_form_field__WEBPACK_IMPORTED_MODULE_8__.c,_angular_material_select__WEBPACK_IMPORTED_MODULE_9__.a,_angular_common__WEBPACK_IMPORTED_MODULE_5__.s,_angular_material_core__WEBPACK_IMPORTED_MODULE_10__.n,_search_value_selector_search_value_selector_component__WEBPACK_IMPORTED_MODULE_11__.a],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__.j],styles:[\"\"]}),AgendaContentObjectFormComponent})()},F48D:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return PromptService}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mrSG\"),_shared_components_prompt_dialog_prompt_dialog_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"LBBb\"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"fXoL\"),_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"0IaG\");let PromptService=(()=>{class PromptService{constructor(dialog){this.dialog=dialog}open(title,content=\"\"){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){return this.dialog.open(_shared_components_prompt_dialog_prompt_dialog_component__WEBPACK_IMPORTED_MODULE_1__.a,{width:\"250px\",data:{title:title,content:content}}).afterClosed().toPromise()}))}}return PromptService.ɵfac=function(t){return new(t||PromptService)(_angular_core__WEBPACK_IMPORTED_MODULE_2__.dc(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__.b))},PromptService.ɵprov=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Pb({token:PromptService,factory:PromptService.ɵfac,providedIn:\"root\"}),PromptService})()},FWGL:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"MotionBlockModule\",(function(){return motion_block_module_MotionBlockModule}));var common=__webpack_require__(\"ofXK\"),shared_module=__webpack_require__(\"PCNd\"),fesm2015_router=__webpack_require__(\"tyNb\"),tslib_es6=__webpack_require__(\"mrSG\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),operator_service=__webpack_require__(\"OwvW\"),storage_service=__webpack_require__(\"AqIO\"),item_repository_service=__webpack_require__(\"InfO\"),motion_block_repository_service=__webpack_require__(\"D5Qf\"),motion_repository_service=__webpack_require__(\"dOok\"),config_service=__webpack_require__(\"+KbT\"),prompt_service=__webpack_require__(\"F48D\"),viewport_service=__webpack_require__(\"KL36\"),dialog_settings=__webpack_require__(\"Izkr\"),base_list_view=__webpack_require__(\"wL0i\"),openslides_status_service=__webpack_require__(\"D/ll\"),category_repository_service=__webpack_require__(\"iTQr\"),motion_comment_section_repository_service=__webpack_require__(\"+B0n\"),workflow_repository_service=__webpack_require__(\"s3dr\"),tag_repository_service=__webpack_require__(\"lv9T\"),motion_filter_list_service=__webpack_require__(\"Q5D0\"),core=__webpack_require__(\"fXoL\"),ngx_translate_core=__webpack_require__(\"sYmb\");let block_detail_filter_list_service_BlockDetailFilterListService=(()=>{class BlockDetailFilterListService extends motion_filter_list_service.a{constructor(store,OSStatus,categoryRepo,motionBlockRepo,commentRepo,tagRepo,workflowRepo,translate,operator,config){super(store,OSStatus,categoryRepo,motionBlockRepo,commentRepo,tagRepo,workflowRepo,translate,operator,config)}set blockId(id){this._blockId=id}preFilter(viewMotions){return viewMotions.filter(motion=>motion.motion_block_id===this._blockId)}}return BlockDetailFilterListService.ɵfac=function(t){return new(t||BlockDetailFilterListService)(core.dc(storage_service.a),core.dc(openslides_status_service.a),core.dc(category_repository_service.a),core.dc(motion_block_repository_service.a),core.dc(motion_comment_section_repository_service.a),core.dc(tag_repository_service.a),core.dc(workflow_repository_service.a),core.dc(ngx_translate_core.k),core.dc(operator_service.a),core.dc(config_service.a))},BlockDetailFilterListService.ɵprov=core.Pb({token:BlockDetailFilterListService,factory:BlockDetailFilterListService.ɵfac,providedIn:\"root\"}),BlockDetailFilterListService})();var platform_browser=__webpack_require__(\"jhN1\"),snack_bar=__webpack_require__(\"dNgK\"),fesm2015_dialog=__webpack_require__(\"0IaG\"),head_bar_component=__webpack_require__(\"mksl\"),fesm2015_button=__webpack_require__(\"bTqV\"),menu=__webpack_require__(\"STbY\"),icon=__webpack_require__(\"NFeN\"),list_view_table_component=__webpack_require__(\"0Obk\"),pebula_ngrid=__webpack_require__(\"dRZP\"),speaker_button_component=__webpack_require__(\"40uZ\"),perms_directive=__webpack_require__(\"3Xi6\"),icon_container_component=__webpack_require__(\"vYAO\"),chips=__webpack_require__(\"A5z7\"),tooltip=__webpack_require__(\"Qu3c\"),projector_button_component=__webpack_require__(\"Tp2j\"),divider=__webpack_require__(\"f0Cb\"),form_field=__webpack_require__(\"kmnG\"),input=__webpack_require__(\"qFsG\"),autofocus_directive=__webpack_require__(\"IZUe\"),fesm2015_checkbox=__webpack_require__(\"bSwM\");const _c0=[\"blockEditForm\"],_c1=[\"editDialog\"];function MotionBlockDetailComponent_os_icon_container_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"os-icon-container\",16),core.mc(1,\"translate\"),core.Zb(2,\"os-icon-container\",17),core.mc(3,\"translate\"),core.Zb(4,\"h2\"),core.Sc(5),core.Yb(),core.Yb(),core.Yb()),2&rf){const ctx_r0=core.lc();core.tc(\"noWrap\",!0)(\"showIcon\",ctx_r0.block.isFinished)(\"iconTooltip\",core.nc(1,7,\"Finished\")),core.Gb(2),core.tc(\"noWrap\",!0)(\"showIcon\",ctx_r0.block.internal)(\"iconTooltip\",core.nc(3,9,\"Internal\")),core.Gb(3),core.Tc(ctx_r0.block.title)}}function MotionBlockDetailComponent_div_7_button_1_Template(rf,ctx){if(1&rf){const _r17=core.ac();core.Zb(0,\"button\",20),core.hc(\"click\",(function(){return core.Ic(_r17),core.lc(2).onFollowRecButton()})),core.Zb(1,\"os-icon-container\",21),core.Zb(2,\"span\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r15=core.lc(2);core.tc(\"disabled\",ctx_r15.isFollowingProhibited()),core.Gb(3),core.Tc(core.nc(4,2,\"Follow recommendations for all motions\"))}}const _c2=function(){return[\"motions.can_manage\",\"motions.can_manage_metadata\"]};function MotionBlockDetailComponent_div_7_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",18),core.Qc(1,MotionBlockDetailComponent_div_7_button_1_Template,5,4,\"button\",19),core.Yb()),2&rf&&(core.Gb(1),core.tc(\"osPerms\",core.yc(1,_c2)))}const _c3=function(){return{back:\"true\"}};function MotionBlockDetailComponent_div_9_a_1_Template(rf,ctx){if(1&rf&&core.Ub(0,\"a\",31),2&rf){const motion_r18=core.lc().row;core.tc(\"routerLink\",motion_r18.getDetailStateURL())(\"state\",core.yc(2,_c3))}}function MotionBlockDetailComponent_div_9_span_4_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\",32),core.Zb(1,\"mat-icon\",33),core.Sc(2,\"star\"),core.Yb(),core.Yb())}function MotionBlockDetailComponent_div_9_span_5_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\",34),core.Zb(1,\"mat-icon\"),core.Sc(2,\"attach_file\"),core.Yb(),core.Yb())}function MotionBlockDetailComponent_div_9_span_7_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.Zb(2,\"span\"),core.Sc(3,\"·\"),core.Yb(),core.Yb()),2&rf){const motion_r18=core.lc().row;core.Gb(1),core.Uc(\" \",motion_r18.identifier,\" \")}}function MotionBlockDetailComponent_div_9_span_10_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Sc(4),core.Yb()),2&rf){const motion_r18=core.lc().row;core.Gb(2),core.Tc(core.nc(3,2,\"by\")),core.Gb(2),core.Uc(\" \",motion_r18.submitters,\" \")}}function MotionBlockDetailComponent_div_9_span_11_span_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\" · \"),core.Yb())}function MotionBlockDetailComponent_div_9_span_11_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Qc(1,MotionBlockDetailComponent_div_9_span_11_span_1_Template,2,0,\"span\",11),core.Zb(2,\"span\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Sc(5),core.Yb()),2&rf){const motion_r18=core.lc().row;core.Gb(1),core.tc(\"ngIf\",motion_r18.submitters.length),core.Gb(2),core.Tc(core.nc(4,3,\"Sequential number\")),core.Gb(2),core.Uc(\" \",motion_r18.id,\" \")}}function MotionBlockDetailComponent_div_9_mat_basic_chip_13_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-basic-chip\",35),core.Sc(1),core.Yb()),2&rf){const motion_r18=core.lc().row,ctx_r26=core.lc();core.tc(\"ngClass\",motion_r18.stateCssColor)(\"disabled\",!0),core.Gb(1),core.Uc(\" \",ctx_r26.getStateLabel(motion_r18),\" \")}}function MotionBlockDetailComponent_div_9_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",22),core.Qc(1,MotionBlockDetailComponent_div_9_a_1_Template,1,3,\"a\",23),core.Zb(2,\"div\",24),core.Zb(3,\"div\",25),core.Qc(4,MotionBlockDetailComponent_div_9_span_4_Template,3,0,\"span\",26),core.Qc(5,MotionBlockDetailComponent_div_9_span_5_Template,3,0,\"span\",27),core.Zb(6,\"span\"),core.Qc(7,MotionBlockDetailComponent_div_9_span_7_Template,4,1,\"span\",11),core.Sc(8),core.Yb(),core.Yb(),core.Zb(9,\"div\",28),core.Qc(10,MotionBlockDetailComponent_div_9_span_10_Template,5,4,\"span\",11),core.Qc(11,MotionBlockDetailComponent_div_9_span_11_Template,6,5,\"span\",11),core.Yb(),core.Zb(12,\"div\",29),core.Qc(13,MotionBlockDetailComponent_div_9_mat_basic_chip_13_Template,2,3,\"mat-basic-chip\",30),core.Yb(),core.Yb(),core.Yb()),2&rf){const motion_r18=ctx.row,ctx_r2=core.lc();core.Gb(1),core.tc(\"ngIf\",!ctx_r2.isMultiSelect),core.Gb(3),core.tc(\"ngIf\",motion_r18.star),core.Gb(1),core.tc(\"ngIf\",motion_r18.hasAttachments()),core.Gb(2),core.tc(\"ngIf\",motion_r18.identifier),core.Gb(1),core.Uc(\" \",motion_r18.title,\" \"),core.Gb(2),core.tc(\"ngIf\",motion_r18.submitters.length),core.Gb(1),core.tc(\"ngIf\",ctx_r2.showSequential),core.Gb(2),core.tc(\"ngIf\",motion_r18.state)}}function MotionBlockDetailComponent_div_10_mat_basic_chip_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-basic-chip\",37),core.Sc(1),core.Yb()),2&rf){const motion_r33=core.lc().row,ctx_r34=core.lc();core.Gb(1),core.Uc(\" \",ctx_r34.getRecommendationLabel(motion_r33),\" \")}}function MotionBlockDetailComponent_div_10_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",22),core.Qc(1,MotionBlockDetailComponent_div_10_mat_basic_chip_1_Template,2,1,\"mat-basic-chip\",36),core.Yb()),2&rf){const motion_r33=ctx.row;core.Gb(1),core.tc(\"ngIf\",!!motion_r33.recommendation)}}function MotionBlockDetailComponent_div_11_Template(rf,ctx){if(1&rf){const _r38=core.ac();core.Zb(0,\"div\",22),core.Zb(1,\"button\",38),core.hc(\"click\",(function(){core.Ic(_r38);const motion_r36=ctx.row;return core.lc().onRemoveMotionButton(motion_r36)})),core.mc(2,\"translate\"),core.Zb(3,\"mat-icon\"),core.Sc(4,\"close\"),core.Yb(),core.Yb(),core.Yb()}2&rf&&(core.Gb(1),core.uc(\"matTooltip\",core.nc(2,1,\"Remove from motion block\")))}const _c4=function(a0){return{motion:a0}};function MotionBlockDetailComponent_div_12_Template(rf,ctx){if(1&rf){const _r41=core.ac();core.Zb(0,\"div\",22),core.Zb(1,\"button\",39),core.hc(\"click\",(function($event){return core.Ic(_r41),$event.stopPropagation()})),core.Zb(2,\"mat-icon\"),core.Sc(3,\"more_vert\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const motion_r39=ctx.row,ctx_r5=core.lc(),_r6=core.Ec(14);core.Gb(1),core.tc(\"disabled\",ctx_r5.isMultiSelect)(\"matMenuTriggerFor\",_r6)(\"matMenuTriggerData\",core.zc(3,_c4,motion_r39))}}function MotionBlockDetailComponent_ng_template_15_Template(rf,ctx){if(1&rf){const _r44=core.ac();core.Ub(0,\"os-projector-button\",40),core.Ub(1,\"os-speaker-button\",40),core.Zb(2,\"button\",41),core.hc(\"click\",(function(){core.Ic(_r44);const motion_r42=ctx.motion;return core.lc().onRemoveMotionButton(motion_r42)})),core.Zb(3,\"mat-icon\"),core.Sc(4,\"close\"),core.Yb(),core.Zb(5,\"span\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const motion_r42=ctx.motion;core.tc(\"object\",motion_r42)(\"menuItem\",!0),core.Gb(1),core.tc(\"object\",motion_r42)(\"menuItem\",!0),core.Gb(5),core.Tc(core.nc(7,5,\"Remove from motion block\"))}}function MotionBlockDetailComponent_div_18_button_1_Template(rf,ctx){if(1&rf){const _r47=core.ac();core.Zb(0,\"button\",43),core.hc(\"click\",(function(){return core.Ic(_r47),core.lc(2).onFollowRecButton()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"done_all\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const ctx_r45=core.lc(2);core.tc(\"disabled\",ctx_r45.isFollowingProhibited()),core.Gb(4),core.Tc(core.nc(5,2,\"Follow recommendations for all motions\"))}}function MotionBlockDetailComponent_div_18_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MotionBlockDetailComponent_div_18_button_1_Template,6,4,\"button\",42),core.Yb()),2&rf&&(core.Gb(1),core.tc(\"osPerms\",core.yc(1,_c2)))}function MotionBlockDetailComponent_os_projector_button_20_Template(rf,ctx){if(1&rf&&core.Ub(0,\"os-projector-button\",40),2&rf){const ctx_r10=core.lc();core.tc(\"object\",ctx_r10.block)(\"menuItem\",!0)}}function MotionBlockDetailComponent_div_21_button_1_Template(rf,ctx){if(1&rf){const _r51=core.ac();core.Zb(0,\"button\",45),core.hc(\"click\",(function(){return core.Ic(_r51),core.lc(2).addToAgenda()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"add\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Add to agenda\")))}function MotionBlockDetailComponent_div_21_button_2_Template(rf,ctx){if(1&rf){const _r53=core.ac();core.Zb(0,\"button\",45),core.hc(\"click\",(function(){return core.Ic(_r53),core.lc(2).removeFromAgenda()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"remove\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Remove from agenda\")))}function MotionBlockDetailComponent_div_21_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MotionBlockDetailComponent_div_21_button_1_Template,6,3,\"button\",44),core.Qc(2,MotionBlockDetailComponent_div_21_button_2_Template,6,3,\"button\",44),core.Yb()),2&rf){const ctx_r11=core.lc();core.Gb(1),core.tc(\"ngIf\",ctx_r11.block&&!ctx_r11.block.item),core.Gb(1),core.tc(\"ngIf\",ctx_r11.block&&ctx_r11.block.item)}}function MotionBlockDetailComponent_div_22_Template(rf,ctx){if(1&rf){const _r55=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",45),core.hc(\"click\",(function(){return core.Ic(_r55),core.lc().toggleEditMode()})),core.Zb(2,\"mat-icon\"),core.Sc(3,\"edit\"),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb(),core.Ub(7,\"mat-divider\"),core.Zb(8,\"button\",41),core.hc(\"click\",(function(){return core.Ic(_r55),core.lc().onDeleteBlockButton()})),core.Zb(9,\"mat-icon\"),core.Sc(10,\"delete\"),core.Yb(),core.Zb(11,\"span\"),core.Sc(12),core.mc(13,\"translate\"),core.Yb(),core.Yb(),core.Yb()}2&rf&&(core.Gb(5),core.Tc(core.nc(6,2,\"Edit\")),core.Gb(7),core.Tc(core.nc(13,4,\"Delete\")))}function MotionBlockDetailComponent_ng_template_23_Template(rf,ctx){if(1&rf){const _r58=core.ac();core.Zb(0,\"h1\",46),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb(),core.Zb(4,\"div\",47),core.Zb(5,\"form\",48),core.hc(\"ngSubmit\",(function(){return core.Ic(_r58),core.lc().saveBlock()}))(\"keydown\",(function($event){return core.Ic(_r58),core.lc().onKeyDown($event)})),core.Zb(6,\"mat-form-field\"),core.Ub(7,\"input\",49),core.mc(8,\"translate\"),core.Yb(),core.Zb(9,\"mat-checkbox\",50),core.Sc(10,\"Internal\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(11,\"div\",51),core.Zb(12,\"button\",52),core.hc(\"click\",(function(){return core.Ic(_r58),core.lc().saveBlock()})),core.Zb(13,\"span\"),core.Sc(14),core.mc(15,\"translate\"),core.Yb(),core.Yb(),core.Zb(16,\"button\",53),core.Zb(17,\"span\"),core.Sc(18),core.mc(19,\"translate\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r14=core.lc();core.Gb(2),core.Vc(\"\",core.nc(3,8,\"Edit details for\"),\" \",ctx_r14.block.title,\"\"),core.Gb(3),core.tc(\"formGroup\",ctx_r14.blockEditForm),core.Gb(2),core.uc(\"placeholder\",core.nc(8,10,\"Title\")),core.Gb(5),core.tc(\"disabled\",!ctx_r14.blockEditForm.valid),core.Gb(2),core.Tc(core.nc(15,12,\"Save\")),core.Gb(2),core.tc(\"mat-dialog-close\",null),core.Gb(2),core.Tc(core.nc(19,14,\"Cancel\"))}}const _c5=function(){return[\"remove\"]};let motion_block_detail_component_MotionBlockDetailComponent=(()=>{class MotionBlockDetailComponent extends base_list_view.a{constructor(titleService,translate,matSnackBar,configService,route,router,repo,motionRepo,promptService,fb,dialog,itemRepo,storage,filterService,vp){super(titleService,translate,matSnackBar,storage),this.translate=translate,this.configService=configService,this.route=route,this.router=router,this.repo=repo,this.motionRepo=motionRepo,this.promptService=promptService,this.fb=fb,this.dialog=dialog,this.itemRepo=itemRepo,this.filterService=filterService,this.vp=vp,this.filterProps=[\"submitters\",\"title\",\"identifier\"],this.tableColumnDefinition=[{prop:\"title\",width:\"auto\"},{prop:\"recommendation\",label:this.translate.instant(\"Recommendation\"),width:\"30%\",minWidth:60},{prop:\"remove\",label:\"\",width:\"40px\"}],this.restrictedColumns=[{columnName:\"remove\",permission:operator_service.b.motionsCanManage}],this.blockId=parseInt(this.route.snapshot.params.id,10),this.filterService.blockId=this.blockId}ngOnInit(){this.subscriptions.push(this.repo.getViewModelObservable(this.blockId).subscribe(newBlock=>{newBlock&&(super.setTitle(`${this.translate.instant(\"Motion block\")} - ${newBlock.getTitle()}`),this.block=newBlock)})),this.configService.get(\"motions_show_sequential_numbers\").subscribe(show=>this.showSequential=show),window.comp=this}onFollowRecButton(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to override the state of all motions of this motion block?\"),content=this.block.title;(yield this.promptService.open(title,content))&&this.repo.followRecommendation(this.block)}))}onDeleteBlockButton(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to delete this motion block?\"),content=this.block.title;(yield this.promptService.open(title,content))&&(yield this.repo.delete(this.block),this.router.navigate([\"../\"],{relativeTo:this.route}))}))}onRemoveMotionButton(motion){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to remove this motion from motion block?\"),content=motion.getTitle();(yield this.promptService.open(title,content))&&this.repo.removeMotionFromBlock(motion)}))}onKeyDown(event){\"Escape\"===event.key&&this.dialogRef.close()}isFollowingProhibited(){return!(!this.dataSource||!this.dataSource.source)&&this.dataSource.source.every(motion=>motion.isInFinalState()||!motion.recommendation_id)}saveBlock(){this.repo.update(this.blockEditForm.value,this.block).then(()=>this.dialogRef.close()).catch(this.raiseError)}toggleEditMode(){this.blockEditForm=this.fb.group({title:[this.block.title,fesm2015_forms.G.required],internal:[this.block.internal]}),this.dialogRef=this.dialog.open(this.editDialog,dialog_settings.a),this.dialogRef.keydownEvents().subscribe(event=>{\"Enter\"===event.key&&event.shiftKey&&this.saveBlock()})}getRecommendationLabel(motion){return this.motionRepo.getExtendedRecommendationLabel(motion)}getStateLabel(motion){return this.motionRepo.getExtendedStateLabel(motion)}addToAgenda(){this.itemRepo.addItemToAgenda(this.block).catch(this.raiseError)}removeFromAgenda(){this.itemRepo.removeFromAgenda(this.block.item).catch(this.raiseError)}}return MotionBlockDetailComponent.ɵfac=function(t){return new(t||MotionBlockDetailComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(config_service.a),core.Tb(fesm2015_router.a),core.Tb(fesm2015_router.f),core.Tb(motion_block_repository_service.a),core.Tb(motion_repository_service.a),core.Tb(prompt_service.a),core.Tb(fesm2015_forms.f),core.Tb(fesm2015_dialog.b),core.Tb(item_repository_service.a),core.Tb(storage_service.a),core.Tb(block_detail_filter_list_service_BlockDetailFilterListService),core.Tb(viewport_service.a))},MotionBlockDetailComponent.ɵcmp=core.Nb({type:MotionBlockDetailComponent,selectors:[[\"os-motion-block-detail\"]],viewQuery:function(rf,ctx){var _t;1&rf&&(core.Oc(_c0,!0),core.Oc(_c1,!0)),2&rf&&(core.Dc(_t=core.ic())&&(ctx.blockEditForm=_t.first),core.Dc(_t=core.ic())&&(ctx.editDialog=_t.first))},features:[core.Db],decls:25,vars:22,consts:[[3,\"nav\"],[1,\"title-slot\"],[\"icon\",\"check\",\"size\",\"large\",3,\"noWrap\",\"showIcon\",\"iconTooltip\",4,\"ngIf\"],[1,\"menu-slot\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"matMenuTriggerFor\"],[\"class\",\"extra-controls-slot\",4,\"ngIf\"],[3,\"listObservableProvider\",\"filterService\",\"columns\",\"restricted\",\"filterProps\",\"hiddenInMobile\",\"dataSourceChange\"],[\"class\",\"cell-slot fill\",4,\"pblNgridCellDef\"],[\"singleItemMenu\",\"matMenu\"],[\"matMenuContent\",\"\"],[\"motionBlockMenu\",\"matMenu\"],[4,\"ngIf\"],[3,\"menuItem\",\"object\"],[3,\"object\",\"menuItem\",4,\"ngIf\"],[4,\"osPerms\"],[\"editDialog\",\"\"],[\"icon\",\"check\",\"size\",\"large\",3,\"noWrap\",\"showIcon\",\"iconTooltip\"],[\"icon\",\"lock\",\"size\",\"large\",3,\"noWrap\",\"showIcon\",\"iconTooltip\"],[1,\"extra-controls-slot\"],[\"mat-button\",\"\",3,\"disabled\",\"click\",4,\"osPerms\"],[\"mat-button\",\"\",3,\"disabled\",\"click\"],[\"icon\",\"done_all\"],[1,\"cell-slot\",\"fill\"],[\"class\",\"detail-link\",3,\"routerLink\",\"state\",4,\"ngIf\"],[1,\"column-title\",\"innerTable\"],[1,\"title-line\",\"ellipsis-overflow\"],[\"class\",\"favorite-star\",4,\"ngIf\"],[\"class\",\"icon-prefix\",4,\"ngIf\"],[1,\"submitters-line\",\"ellipsis-overflow\"],[1,\"ellipsis-overflow\",\"white\"],[3,\"ngClass\",\"disabled\",4,\"ngIf\"],[1,\"detail-link\",3,\"routerLink\",\"state\"],[1,\"favorite-star\"],[\"inline\",\"\"],[1,\"icon-prefix\"],[3,\"ngClass\",\"disabled\"],[\"disableRipple\",\"\",\"class\",\"bluegrey\",4,\"ngIf\"],[\"disableRipple\",\"\",1,\"bluegrey\"],[\"type\",\"button\",\"mat-icon-button\",\"\",\"color\",\"warn\",3,\"matTooltip\",\"click\"],[\"mat-icon-button\",\"\",3,\"disabled\",\"matMenuTriggerFor\",\"matMenuTriggerData\",\"click\"],[3,\"object\",\"menuItem\"],[\"mat-menu-item\",\"\",1,\"red-warning-text\",3,\"click\"],[\"mat-menu-item\",\"\",3,\"disabled\",\"click\",4,\"osPerms\"],[\"mat-menu-item\",\"\",3,\"disabled\",\"click\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"ngIf\"],[\"mat-menu-item\",\"\",3,\"click\"],[\"mat-dialog-title\",\"\"],[\"mat-dialog-content\",\"\",1,\"os-form-card-mobile\"],[1,\"edit-form\",3,\"formGroup\",\"ngSubmit\",\"keydown\"],[\"matInput\",\"\",\"osAutofocus\",\"\",\"formControlName\",\"title\",\"required\",\"\",3,\"placeholder\"],[\"formControlName\",\"internal\"],[\"mat-dialog-actions\",\"\"],[\"type\",\"submit\",\"mat-button\",\"\",\"color\",\"accent\",3,\"disabled\",\"click\"],[\"type\",\"button\",\"mat-button\",\"\",3,\"mat-dialog-close\"]],template:function(rf,ctx){if(1&rf&&(core.Zb(0,\"os-head-bar\",0),core.Zb(1,\"div\",1),core.Qc(2,MotionBlockDetailComponent_os_icon_container_2_Template,6,11,\"os-icon-container\",2),core.Yb(),core.Zb(3,\"div\",3),core.Zb(4,\"button\",4),core.Zb(5,\"mat-icon\"),core.Sc(6,\"more_vert\"),core.Yb(),core.Yb(),core.Yb(),core.Qc(7,MotionBlockDetailComponent_div_7_Template,2,2,\"div\",5),core.Yb(),core.Zb(8,\"os-list-view-table\",6),core.hc(\"dataSourceChange\",(function($event){return ctx.onDataSourceChange($event)})),core.Qc(9,MotionBlockDetailComponent_div_9_Template,14,8,\"div\",7),core.Qc(10,MotionBlockDetailComponent_div_10_Template,2,1,\"div\",7),core.Qc(11,MotionBlockDetailComponent_div_11_Template,5,3,\"div\",7),core.Qc(12,MotionBlockDetailComponent_div_12_Template,4,5,\"div\",7),core.Yb(),core.Zb(13,\"mat-menu\",null,8),core.Qc(15,MotionBlockDetailComponent_ng_template_15_Template,8,7,\"ng-template\",9),core.Yb(),core.Zb(16,\"mat-menu\",null,10),core.Qc(18,MotionBlockDetailComponent_div_18_Template,2,2,\"div\",11),core.Ub(19,\"os-speaker-button\",12),core.Qc(20,MotionBlockDetailComponent_os_projector_button_20_Template,1,2,\"os-projector-button\",13),core.Qc(21,MotionBlockDetailComponent_div_21_Template,3,2,\"div\",14),core.Qc(22,MotionBlockDetailComponent_div_22_Template,14,6,\"div\",14),core.Yb(),core.Qc(23,MotionBlockDetailComponent_ng_template_23_Template,20,16,\"ng-template\",null,15,core.Rc)),2&rf){const _r8=core.Ec(17);core.tc(\"nav\",!1),core.Gb(2),core.tc(\"ngIf\",ctx.block),core.Gb(2),core.tc(\"matMenuTriggerFor\",_r8),core.Gb(3),core.tc(\"ngIf\",!ctx.vp.isMobile),core.Gb(1),core.tc(\"listObservableProvider\",ctx.motionRepo)(\"filterService\",ctx.filterService)(\"columns\",ctx.tableColumnDefinition)(\"restricted\",ctx.restrictedColumns)(\"filterProps\",ctx.filterProps)(\"hiddenInMobile\",core.yc(20,_c5)),core.Gb(1),core.tc(\"pblNgridCellDef\",\"title\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"recommendation\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"remove\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"menu\"),core.Gb(6),core.tc(\"ngIf\",ctx.vp.isMobile),core.Gb(1),core.tc(\"menuItem\",!0)(\"object\",ctx.block),core.Gb(1),core.tc(\"ngIf\",ctx.block),core.Gb(1),core.tc(\"osPerms\",\"agenda.can_manage\"),core.Gb(1),core.tc(\"osPerms\",core.yc(21,_c2))}},directives:[head_bar_component.a,common.t,fesm2015_button.b,menu.e,icon.a,list_view_table_component.a,pebula_ngrid.c,menu.f,menu.b,speaker_button_component.a,perms_directive.a,icon_container_component.a,fesm2015_router.i,chips.a,common.q,tooltip.c,projector_button_component.a,menu.c,divider.a,fesm2015_dialog.i,fesm2015_dialog.f,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,form_field.c,input.b,fesm2015_forms.c,autofocus_directive.a,fesm2015_forms.s,fesm2015_forms.i,fesm2015_forms.D,fesm2015_checkbox.a,fesm2015_dialog.c,fesm2015_dialog.d],pipes:[ngx_translate_core.j],styles:[\".title-line[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.title-line[_ngcontent-%COMP%]   .icon-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line[_ngcontent-%COMP%]   .favorite-star[_ngcontent-%COMP%]{padding-right:3px}.mat-table[_ngcontent-%COMP%]{width:100%}.mat-table[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{display:none}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{z-index:2}.mat-table[_ngcontent-%COMP%]   .mat-table-sticky[_ngcontent-%COMP%]{z-index:3!important}.submitters-line[_ngcontent-%COMP%]{font-size:90%}.edit-form[_ngcontent-%COMP%]{overflow:hidden}\"]}),MotionBlockDetailComponent})();var base_sort_list_service=__webpack_require__(\"A6Ob\");let motion_block_sort_service_MotionBlockSortService=(()=>{class MotionBlockSortService extends base_sort_list_service.a{constructor(translate,store,OSStatus){super(translate,store,OSStatus),this.storageKey=\"MotionBlockList\",this.MotionBlockSortOptions=[{property:\"title\"},{property:\"motions\",label:\"Amount of motions\",sortFn:(aBlock,bBlock,ascending)=>ascending?aBlock.motions.length-bBlock.motions.length:bBlock.motions.length-aBlock.motions.length}]}getSortOptions(){return this.MotionBlockSortOptions}getDefaultDefinition(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){return{sortProperty:\"title\",sortAscending:!0}}))}}return MotionBlockSortService.ɵfac=function(t){return new(t||MotionBlockSortService)(core.dc(ngx_translate_core.k),core.dc(storage_service.a),core.dc(openslides_status_service.a))},MotionBlockSortService.ɵprov=core.Pb({token:MotionBlockSortService,factory:MotionBlockSortService.ɵfac,providedIn:\"root\"}),MotionBlockSortService})();var agenda_content_object_form_component=__webpack_require__(\"6Ehv\");const motion_block_list_component_c0=[\"newMotionBlockDialog\"];function MotionBlockListComponent_div_6_a_1_Template(rf,ctx){if(1&rf&&core.Ub(0,\"a\",13),2&rf){const block_r8=core.lc().row;core.tc(\"routerLink\",block_r8.id)}}function MotionBlockListComponent_div_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",7),core.Qc(1,MotionBlockListComponent_div_6_a_1_Template,1,1,\"a\",8),core.Zb(2,\"div\",9),core.Zb(3,\"os-icon-container\",10),core.mc(4,\"translate\"),core.Zb(5,\"os-icon-container\",11),core.mc(6,\"translate\"),core.Zb(7,\"div\",12),core.Sc(8),core.Yb(),core.Yb(),core.Yb(),core.Yb(),core.Yb()),2&rf){const title_r7=ctx.value,block_r8=ctx.row,ctx_r0=core.lc();core.Gb(1),core.tc(\"ngIf\",!ctx_r0.isMultiSelect),core.Gb(2),core.tc(\"noWrap\",!0)(\"icon\",block_r8.isFinished?\"check\":block_r8.internal?\"lock\":null)(\"iconTooltip\",block_r8.isFinished?\"Finished\":block_r8.internal?\"Internal\":core.nc(4,8,\"\")),core.Gb(2),core.tc(\"noWrap\",!0)(\"showIcon\",block_r8.isFinished&&block_r8.internal)(\"iconTooltip\",core.nc(6,10,\"Internal\")),core.Gb(3),core.Uc(\" \",title_r7,\" \")}}function MotionBlockListComponent_div_7_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",7),core.Zb(1,\"span\",14),core.mc(2,\"translate\"),core.Sc(3),core.Yb(),core.Yb()),2&rf){const block_r12=ctx.row;core.Gb(1),core.uc(\"matTooltip\",core.nc(2,2,\"Motions\")),core.Gb(2),core.Tc(block_r12.motions.length)}}const motion_block_list_component_c1=function(a0){return{block:a0}};function MotionBlockListComponent_div_8_Template(rf,ctx){if(1&rf){const _r15=core.ac();core.Zb(0,\"div\",7),core.Zb(1,\"button\",15),core.hc(\"click\",(function($event){return core.Ic(_r15),$event.stopPropagation()})),core.Zb(2,\"mat-icon\"),core.Sc(3,\"more_vert\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const block_r13=ctx.row,ctx_r2=core.lc(),_r3=core.Ec(10);core.Gb(1),core.tc(\"disabled\",ctx_r2.isMultiSelect)(\"matMenuTriggerFor\",_r3)(\"matMenuTriggerData\",core.zc(3,motion_block_list_component_c1,block_r13))}}function MotionBlockListComponent_ng_template_11_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"os-projector-button\",16),core.Ub(1,\"os-speaker-button\",16)),2&rf){const block_r16=ctx.block;core.tc(\"object\",block_r16)(\"menuItem\",!0),core.Gb(1),core.tc(\"object\",block_r16)(\"menuItem\",!0)}}function MotionBlockListComponent_ng_template_12_mat_error_9_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-error\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"A title is required\"),\" \"))}function MotionBlockListComponent_ng_template_12_Template(rf,ctx){if(1&rf){const _r19=core.ac();core.Zb(0,\"h1\",17),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb(),core.Zb(4,\"form\",18),core.hc(\"keydown\",(function($event){return core.Ic(_r19),core.lc().onKeyDown($event)})),core.Zb(5,\"div\",19),core.Zb(6,\"mat-form-field\"),core.Ub(7,\"input\",20),core.mc(8,\"translate\"),core.Qc(9,MotionBlockListComponent_ng_template_12_mat_error_9_Template,3,3,\"mat-error\",21),core.Yb(),core.Zb(10,\"p\"),core.Zb(11,\"mat-checkbox\",22),core.Zb(12,\"span\"),core.Sc(13),core.mc(14,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Ub(15,\"os-agenda-content-object-form\",23),core.Yb(),core.Yb(),core.Zb(16,\"div\",24),core.Zb(17,\"button\",25),core.Zb(18,\"span\"),core.Sc(19),core.mc(20,\"translate\"),core.Yb(),core.Yb(),core.Zb(21,\"button\",26),core.Zb(22,\"span\"),core.Sc(23),core.mc(24,\"translate\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r6=core.lc();core.Gb(2),core.Tc(core.nc(3,11,\"New motion block\")),core.Gb(2),core.tc(\"formGroup\",ctx_r6.createBlockForm),core.Gb(3),core.uc(\"placeholder\",core.nc(8,13,\"Title\")),core.Gb(2),core.tc(\"ngIf\",ctx_r6.createBlockForm.get(\"title\").hasError(\"required\")),core.Gb(4),core.Tc(core.nc(14,15,\"Internal\")),core.Gb(2),core.tc(\"form\",ctx_r6.createBlockForm),core.Gb(2),core.tc(\"disabled\",!ctx_r6.createBlockForm.valid)(\"mat-dialog-close\",!0),core.Gb(2),core.Tc(core.nc(20,17,\"Save\")),core.Gb(2),core.tc(\"mat-dialog-close\",!1),core.Gb(2),core.Tc(core.nc(24,19,\"Cancel\"))}}const routes=[{path:\"\",component:(()=>{class MotionBlockListComponent extends base_list_view.a{constructor(titleService,translate,matSnackBar,storage,repo,formBuilder,itemRepo,operator,dialog,sortService){super(titleService,translate,matSnackBar,storage),this.repo=repo,this.formBuilder=formBuilder,this.itemRepo=itemRepo,this.operator=operator,this.dialog=dialog,this.sortService=sortService,this.filterProps=[\"title\"],this.tableColumnDefinition=[{prop:\"title\",label:this.translate.instant(\"Title\"),width:\"auto\"},{prop:\"amount\",label:this.translate.instant(\"Motions\"),width:\"40px\"}],this.createBlockForm=this.formBuilder.group({title:[\"\",fesm2015_forms.G.required],agenda_create:[\"\"],agenda_parent_id:[],agenda_type:[\"\"],internal:[!1]})}get canEdit(){return this.operator.hasPerms(operator_service.b.motionsCanManage,operator_service.b.motionsCanManageMetadata)}ngOnInit(){super.setTitle(\"Motion blocks\"),this.items=this.itemRepo.getViewModelListBehaviorSubject()}resetForm(){this.createBlockForm.reset(),this.createBlockForm.get(\"agenda_type\").setValue(this.defaultVisibility)}onPlusButton(){this.resetForm(),this.dialogRef=this.dialog.open(this.newMotionBlockDialog,dialog_settings.a),this.dialogRef.afterClosed().subscribe(res=>{res&&this.save()})}save(){if(this.createBlockForm.valid){const block=this.createBlockForm.value;block.agenda_parent_id||delete block.agenda_parent_id,this.repo.create(block).catch(this.raiseError),this.resetForm()}}onKeyDown(event){\"Enter\"===event.key&&event.shiftKey&&(this.save(),this.dialogRef.close()),\"Escape\"===event.key&&(this.resetForm(),this.dialogRef.close())}}return MotionBlockListComponent.ɵfac=function(t){return new(t||MotionBlockListComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(storage_service.a),core.Tb(motion_block_repository_service.a),core.Tb(fesm2015_forms.f),core.Tb(item_repository_service.a),core.Tb(operator_service.a),core.Tb(fesm2015_dialog.b),core.Tb(motion_block_sort_service_MotionBlockSortService))},MotionBlockListComponent.ɵcmp=core.Nb({type:MotionBlockListComponent,selectors:[[\"os-motion-block-list\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.Oc(motion_block_list_component_c0,!0),2&rf&&core.Dc(_t=core.ic())&&(ctx.newMotionBlockDialog=_t.first)},features:[core.Db],decls:14,vars:16,consts:[[\"prevUrl\",\"../..\",3,\"nav\",\"hasMainButton\",\"mainEvent\"],[1,\"title-slot\"],[\"listStorageKey\",\"motionBlock\",3,\"vScrollFixed\",\"listObservableProvider\",\"showFilterBar\",\"columns\",\"sortService\",\"multiSelect\",\"selectedRows\",\"filterProps\",\"selectedRowsChange\",\"dataSourceChange\"],[\"class\",\"cell-slot fill\",4,\"pblNgridCellDef\"],[\"singleItemMenu\",\"matMenu\"],[\"matMenuContent\",\"\"],[\"newMotionBlockDialog\",\"\"],[1,\"cell-slot\",\"fill\"],[\"class\",\"detail-link\",3,\"routerLink\",4,\"ngIf\"],[1,\"innerTable\"],[\"size\",\"large\",3,\"noWrap\",\"icon\",\"iconTooltip\"],[\"icon\",\"lock\",\"size\",\"large\",3,\"noWrap\",\"showIcon\",\"iconTooltip\"],[1,\"ellipsis-overflow\"],[1,\"detail-link\",3,\"routerLink\"],[1,\"os-amount-chip\",3,\"matTooltip\"],[\"mat-icon-button\",\"\",3,\"disabled\",\"matMenuTriggerFor\",\"matMenuTriggerData\",\"click\"],[3,\"object\",\"menuItem\"],[\"mat-dialog-title\",\"\"],[3,\"formGroup\",\"keydown\"],[\"mat-dialog-content\",\"\"],[\"formControlName\",\"title\",\"matInput\",\"\",\"required\",\"\",3,\"placeholder\"],[4,\"ngIf\"],[\"formControlName\",\"internal\"],[3,\"form\"],[\"mat-dialog-actions\",\"\"],[\"mat-button\",\"\",3,\"disabled\",\"mat-dialog-close\"],[\"mat-button\",\"\",3,\"mat-dialog-close\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"os-head-bar\",0),core.hc(\"mainEvent\",(function(){return ctx.onPlusButton()})),core.Zb(1,\"div\",1),core.Zb(2,\"h2\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(5,\"os-list-view-table\",2),core.hc(\"selectedRowsChange\",(function($event){return ctx.selectedRows=$event}))(\"dataSourceChange\",(function($event){return ctx.onDataSourceChange($event)})),core.Qc(6,MotionBlockListComponent_div_6_Template,9,12,\"div\",3),core.Qc(7,MotionBlockListComponent_div_7_Template,4,4,\"div\",3),core.Qc(8,MotionBlockListComponent_div_8_Template,4,5,\"div\",3),core.Yb(),core.Zb(9,\"mat-menu\",null,4),core.Qc(11,MotionBlockListComponent_ng_template_11_Template,2,4,\"ng-template\",5),core.Yb(),core.Qc(12,MotionBlockListComponent_ng_template_12_Template,25,21,\"ng-template\",null,6,core.Rc)),2&rf&&(core.tc(\"nav\",!1)(\"hasMainButton\",ctx.canEdit),core.Gb(3),core.Tc(core.nc(4,14,\"Motion blocks\")),core.Gb(2),core.tc(\"vScrollFixed\",64)(\"listObservableProvider\",ctx.repo)(\"showFilterBar\",!0)(\"columns\",ctx.tableColumnDefinition)(\"sortService\",ctx.sortService)(\"multiSelect\",ctx.isMultiSelect)(\"selectedRows\",ctx.selectedRows)(\"filterProps\",ctx.filterProps),core.Gb(1),core.tc(\"pblNgridCellDef\",\"title\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"amount\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"menu\"))},directives:[head_bar_component.a,list_view_table_component.a,pebula_ngrid.c,menu.f,menu.b,common.t,icon_container_component.a,fesm2015_router.i,tooltip.c,fesm2015_button.b,menu.e,icon.a,projector_button_component.a,speaker_button_component.a,fesm2015_dialog.i,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,fesm2015_dialog.f,form_field.c,fesm2015_forms.c,input.b,fesm2015_forms.s,fesm2015_forms.i,fesm2015_forms.D,fesm2015_checkbox.a,agenda_content_object_form_component.a,fesm2015_dialog.c,fesm2015_dialog.d,form_field.b],pipes:[ngx_translate_core.j],styles:[\".title-line{font-weight:500;font-size:16px}.title-line .icon-prefix .mat-icon{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line .favorite-star{padding-right:3px}.mat-table{width:100%}.mat-table .mat-header-row .mat-column-anchor{display:none}.mat-table .mat-row{position:relative}.mat-table .mat-row .mat-column-anchor{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table .mat-row .mat-column-anchor a{display:block;height:100%;width:100%}.mat-table .mat-cell{position:relative}.mat-table .mat-cell .fill{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table .mat-cell .fill *{margin-top:auto;margin-bottom:auto}.mat-table .mat-cell>*{z-index:2}.mat-table .mat-table-sticky{z-index:3!important}.mat-dialog-container .mat-dialog-title{margin:0}.mat-dialog-container .mat-form-field{width:100%}\"],encapsulation:2}),MotionBlockListComponent})(),pathMatch:\"full\"},{path:\":id\",component:motion_block_detail_component_MotionBlockDetailComponent}];let motion_block_routing_module_MotionBlockRoutingModule=(()=>{class MotionBlockRoutingModule{}return MotionBlockRoutingModule.ɵmod=core.Rb({type:MotionBlockRoutingModule}),MotionBlockRoutingModule.ɵinj=core.Qb({factory:function(t){return new(t||MotionBlockRoutingModule)},imports:[[fesm2015_router.j.forChild(routes)],fesm2015_router.j]}),MotionBlockRoutingModule})(),motion_block_module_MotionBlockModule=(()=>{class MotionBlockModule{}return MotionBlockModule.ɵmod=core.Rb({type:MotionBlockModule}),MotionBlockModule.ɵinj=core.Qb({factory:function(t){return new(t||MotionBlockModule)},imports:[[common.c,motion_block_routing_module_MotionBlockRoutingModule,shared_module.a]]}),MotionBlockModule})()},LBBb:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return PromptDialogComponent}));var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"0IaG\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"fXoL\"),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"ofXK\"),_angular_material_button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"bTqV\"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"sYmb\");function PromptDialogComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"div\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(1,\"h2\",1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ub(3,\"mat-dialog-content\",2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(4,\"mat-dialog-actions\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(5,\"button\",3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(6),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(7,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(8,\"button\",4),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(9),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(10,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_1__.lc();_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(ctx_r0.data.title),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"innerHTML\",ctx_r0.data.content,_angular_core__WEBPACK_IMPORTED_MODULE_1__.Jc),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"mat-dialog-close\",!0),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(7,6,\"Yes\")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"mat-dialog-close\",!1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(10,8,\"Cancel\"))}}let PromptDialogComponent=(()=>{class PromptDialogComponent{constructor(dialogRef,data){this.dialogRef=dialogRef,this.data=data}}return PromptDialogComponent.ɵfac=function(t){return new(t||PromptDialogComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tb(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.h),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tb(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.a))},PromptDialogComponent.ɵcmp=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Nb({type:PromptDialogComponent,selectors:[[\"os-prompt-dialog\"]],decls:1,vars:1,consts:[[4,\"ngIf\"],[\"mat-dialog-title\",\"\"],[3,\"innerHTML\"],[\"mat-button\",\"\",\"color\",\"warn\",3,\"mat-dialog-close\"],[\"mat-button\",\"\",3,\"mat-dialog-close\"]],template:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(0,PromptDialogComponent_div_0_Template,11,10,\"div\",0),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"ngIf\",ctx.data)},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.t,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.i,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.f,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.c,_angular_material_button__WEBPACK_IMPORTED_MODULE_3__.b,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.d],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__.j],encapsulation:2}),PromptDialogComponent})()},Q5D0:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return MotionFilterListService}));var app_core_core_services_openslides_status_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"D/ll\"),app_core_core_services_operator_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"OwvW\"),app_core_core_services_storage_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"AqIO\"),app_core_repositories_motions_category_repository_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"iTQr\"),app_core_repositories_motions_motion_block_repository_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"D5Qf\"),app_core_repositories_motions_motion_comment_section_repository_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(\"+B0n\"),app_core_repositories_motions_workflow_repository_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(\"s3dr\"),app_core_repositories_tags_tag_repository_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(\"lv9T\"),app_core_ui_services_base_filter_list_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(\"+8Rz\"),app_core_ui_services_config_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(\"+KbT\"),app_shared_models_motions_state__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(\"gtli\"),_motions_constants__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(\"3Y4h\"),_angular_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(\"fXoL\"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(\"sYmb\");let MotionFilterListService=(()=>{class MotionFilterListService extends app_core_ui_services_base_filter_list_service__WEBPACK_IMPORTED_MODULE_8__.a{constructor(store,OSStatus,categoryRepo,motionBlockRepo,commentRepo,tagRepo,workflowRepo,translate,operator,config){super(store,OSStatus),this.workflowRepo=workflowRepo,this.translate=translate,this.operator=operator,this.config=config,this.storageKey=\"MotionList\",this.enabledWorkflows={statuteEnabled:!1,statute:null,motion:null},this.stateFilterOptions={property:\"state_id\",label:\"State\",options:[]},this.categoryFilterOptions={property:\"category_id\",label:\"Category\",options:[]},this.motionBlockFilterOptions={property:\"motion_block_id\",label:\"Motion block\",options:[]},this.motionCommentFilterOptions={property:\"commentSectionIds\",label:\"Comment\",options:[]},this.recommendationFilterOptions={property:\"recommendation_id\",label:\"Recommendation\",options:[]},this.tagFilterOptions={property:\"tags_id\",label:\"Tags\",options:[]},this.hasSpeakerOptions={property:\"hasSpeakers\",label:\"Speakers\",options:[{condition:!0,label:this.translate.instant(\"Has speakers\")},{condition:!1,label:this.translate.instant(\"Has no speakers\")}]},this.AmendmentFilterOption={property:\"amendmentType\",label:\"Amendment\",options:[{condition:_motions_constants__WEBPACK_IMPORTED_MODULE_11__.a.Amendment,label:this.translate.instant(\"Is amendment\")},{condition:_motions_constants__WEBPACK_IMPORTED_MODULE_11__.a.Parent,label:this.translate.instant(\"Has amendments\")},{condition:_motions_constants__WEBPACK_IMPORTED_MODULE_11__.a.Lead,label:this.translate.instant(\"Is no amendment and has no amendments\")}]},this.personalNoteFilterOptions=[{property:\"star\",label:this.translate.instant(\"Favorites\"),options:[{condition:!0,label:this.translate.instant(\"Is favorite\")},{condition:!1,label:this.translate.instant(\"Is not favorite\")}]},{property:\"hasNotes\",label:this.translate.instant(\"Personal notes\"),options:[{condition:!0,label:this.translate.instant(\"Has notes\")},{condition:!1,label:this.translate.instant(\"Does not have notes\")}]}],this.getWorkflowConfig(),this.getShowAmendmentConfig(),this.updateFilterForRepo(categoryRepo,this.categoryFilterOptions,this.translate.instant(\"No category set\")),this.updateFilterForRepo(motionBlockRepo,this.motionBlockFilterOptions,this.translate.instant(\"No motion block set\")),this.updateFilterForRepo(commentRepo,this.motionCommentFilterOptions,this.translate.instant(\"No comment\")),this.updateFilterForRepo(tagRepo,this.tagFilterOptions,this.translate.instant(\"No tags\")),this.subscribeWorkflows(),this.operator.getUserObservable().subscribe(()=>{this.setFilterDefinitions()})}preFilter(motions){if(!this.showAmendmentsInMainTable)return motions.filter(motion=>!motion.parent_id)}getShowAmendmentConfig(){this.config.get(\"motions_amendments_main_table\").subscribe(show=>{this.showAmendmentsInMainTable=show})}getWorkflowConfig(){this.config.get(\"motions_statute_amendments_workflow\").subscribe(id=>{this.enabledWorkflows.statute=+id}),this.config.get(\"motions_workflow\").subscribe(id=>{this.enabledWorkflows.motion=+id}),this.config.get(\"motions_statutes_enabled\").subscribe(bool=>{this.enabledWorkflows.statuteEnabled=bool})}getFilterDefinitions(){let filterDefinitions=[this.stateFilterOptions,this.categoryFilterOptions,this.motionBlockFilterOptions,this.recommendationFilterOptions,this.motionCommentFilterOptions,this.tagFilterOptions];return this.operator.hasPerms(app_core_core_services_operator_service__WEBPACK_IMPORTED_MODULE_1__.b.agendaCanSeeListOfSpeakers)&&filterDefinitions.push(this.hasSpeakerOptions),this.showAmendmentsInMainTable&&filterDefinitions.push(this.AmendmentFilterOption),this.operator.isAnonymous||(filterDefinitions=filterDefinitions.concat(this.personalNoteFilterOptions)),filterDefinitions}subscribeWorkflows(){this.workflowRepo.getViewModelListObservable().subscribe(workflows=>{if(workflows&&workflows.length){const workflowFilters=[],recoFilters=[],finalStates=[],nonFinalStates=[];for(const workflow of workflows)if(this.isWorkflowEnabled(workflow.id)){workflowFilters.push({name:workflow.name,filter:[]}),recoFilters.push({name:workflow.name,filter:[]});for(const state of workflow.states){const restrictions=state.restriction.filter(r=>r!==app_shared_models_motions_state__WEBPACK_IMPORTED_MODULE_10__.b.motionsIsSubmitter);restrictions.length&&!this.operator.hasPerms(...restrictions)||(state.isFinalState?finalStates.push(state.id):nonFinalStates.push(state.id),workflowFilters[workflowFilters.length-1].filter.push({condition:state.id,label:state.name}),state.recommendation_label&&recoFilters[workflowFilters.length-1].filter.push({condition:state.id,label:state.recommendation_label}))}}if(workflowFilters&&workflowFilters.length){let workflowOptions=[];workflowOptions.push({label:\"Done\",condition:finalStates}),workflowOptions.push({label:this.translate.instant(\"Undone\"),condition:nonFinalStates}),workflowOptions.push(\"-\");for(const filterDef of workflowFilters)workflowOptions.push(filterDef.name),workflowOptions=workflowOptions.concat(filterDef.filter);this.stateFilterOptions.options=workflowOptions}if(recoFilters&&recoFilters.length){let recoOptions=[];for(const filterDef of recoFilters)recoOptions.push(filterDef.name),recoOptions=recoOptions.concat(filterDef.filter);recoOptions.push(\"-\"),recoOptions.push({label:this.translate.instant(\"No recommendation\"),condition:null}),this.recommendationFilterOptions.options=recoOptions}this.setFilterDefinitions()}})}isWorkflowEnabled(workflowId){return workflowId===this.enabledWorkflows.motion||this.enabledWorkflows.statuteEnabled&&workflowId===this.enabledWorkflows.statute}}return MotionFilterListService.ɵfac=function(t){return new(t||MotionFilterListService)(_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_core_services_storage_service__WEBPACK_IMPORTED_MODULE_2__.a),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_core_services_openslides_status_service__WEBPACK_IMPORTED_MODULE_0__.a),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_repositories_motions_category_repository_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_repositories_motions_motion_block_repository_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_repositories_motions_motion_comment_section_repository_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_repositories_tags_tag_repository_service__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_repositories_motions_workflow_repository_service__WEBPACK_IMPORTED_MODULE_6__.a),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__.k),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_core_services_operator_service__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_12__.dc(app_core_ui_services_config_service__WEBPACK_IMPORTED_MODULE_9__.a))},MotionFilterListService.ɵprov=_angular_core__WEBPACK_IMPORTED_MODULE_12__.Pb({token:MotionFilterListService,factory:MotionFilterListService.ɵfac,providedIn:\"root\"}),MotionFilterListService})()},wL0i:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return BaseListViewComponent}));var _base_view__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mV3u\");class BaseListViewComponent extends _base_view__WEBPACK_IMPORTED_MODULE_0__.a{constructor(titleService,translate,matSnackBar,storage){super(titleService,translate,matSnackBar),this.storage=storage,this.canMultiSelect=!1,this._multiSelectMode=!1,this.singleButtonWidth=\"40px\",this.badgeButtonWidth=\"45px\",this.selectedRows=[]}onDataSourceChange(newDataSource){this.dataSource=newDataSource}toggleMultiSelect(){!this.canMultiSelect||this.isMultiSelect?(this._multiSelectMode=!1,this.deselectAll()):this._multiSelectMode=!0}selectAll(){this.dataSource.selection.select(...this.dataSource.filteredData)}deselectAll(){this.dataSource&&this.dataSource.selection.clear()}get isMultiSelect(){return this._multiSelectMode}}}}]);","extractedComments":[]}