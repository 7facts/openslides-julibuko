{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[32,36],{\"0bnU\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"MediafilesModule\",(function(){return mediafiles_module_MediafilesModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_router=__webpack_require__(\"tyNb\"),operator_service=__webpack_require__(\"OwvW\"),mediafile_repository_service=__webpack_require__(\"SSyl\"),base_view=__webpack_require__(\"mV3u\"),core=__webpack_require__(\"fXoL\"),platform_browser=__webpack_require__(\"jhN1\"),ngx_translate_core=__webpack_require__(\"sYmb\"),snack_bar=__webpack_require__(\"dNgK\"),head_bar_component=__webpack_require__(\"mksl\"),fesm2015_button=__webpack_require__(\"bTqV\"),menu=__webpack_require__(\"STbY\"),icon=__webpack_require__(\"NFeN\"),card=__webpack_require__(\"Wp6s\"),media_upload_content_component=__webpack_require__(\"GTZY\");let media_upload_component_MediaUploadComponent=(()=>{class MediaUploadComponent extends base_view.a{constructor(titleService,translate,matSnackBar,location,route,repo){super(titleService,translate,matSnackBar),this.location=location,this.route=route,this.repo=repo,this.parallel=!0,this.directoryId=null}ngOnInit(){this.repo.getDirectoryIdByPath(this.route.snapshot.url.map(x=>x.path)).then(directoryId=>{this.directoryId=directoryId})}uploadSuccess(){this.location.back()}showError(error){this.raiseError(error)}setUploadStrategy(isParallel){this.parallel=isParallel}}return MediaUploadComponent.ɵfac=function(t){return new(t||MediaUploadComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(common.n),core.Tb(fesm2015_router.a),core.Tb(mediafile_repository_service.a))},MediaUploadComponent.ɵcmp=core.Nb({type:MediaUploadComponent,selectors:[[\"os-media-upload\"]],features:[core.Db],decls:19,vars:12,consts:[[3,\"nav\",\"goBack\"],[1,\"title-slot\"],[1,\"menu-slot\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"matMenuTriggerFor\"],[1,\"os-card\"],[3,\"parallel\",\"directoryId\",\"uploadSuccessEvent\",\"errorEvent\"],[\"uploadMenu\",\"matMenu\"],[\"mat-menu-item\",\"\",3,\"click\"],[\"color\",\"accent\"]],template:function(rf,ctx){if(1&rf&&(core.Zb(0,\"os-head-bar\",0),core.Zb(1,\"div\",1),core.Zb(2,\"h2\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Zb(5,\"div\",2),core.Zb(6,\"button\",3),core.Zb(7,\"mat-icon\"),core.Sc(8,\"more_vert\"),core.Yb(),core.Yb(),core.Yb(),core.Yb(),core.Zb(9,\"mat-card\",4),core.Zb(10,\"os-media-upload-content\",5),core.hc(\"uploadSuccessEvent\",(function(){return ctx.uploadSuccess()}))(\"errorEvent\",(function($event){return ctx.showError($event)})),core.Yb(),core.Yb(),core.Zb(11,\"mat-menu\",null,6),core.Zb(13,\"button\",7),core.hc(\"click\",(function(){return ctx.setUploadStrategy(!ctx.parallel)})),core.Zb(14,\"mat-icon\",8),core.Sc(15),core.Yb(),core.Zb(16,\"span\"),core.Sc(17),core.mc(18,\"translate\"),core.Yb(),core.Yb(),core.Yb()),2&rf){const _r0=core.Ec(12);core.tc(\"nav\",!1)(\"goBack\",!0),core.Gb(3),core.Tc(core.nc(4,8,\"Upload files\")),core.Gb(3),core.tc(\"matMenuTriggerFor\",_r0),core.Gb(4),core.tc(\"parallel\",ctx.parallel)(\"directoryId\",ctx.directoryId),core.Gb(5),core.Tc(ctx.parallel?\"check_box\":\"check_box_outline_blank\"),core.Gb(2),core.Tc(core.nc(18,10,\"Parallel upload\"))}},directives:[head_bar_component.a,fesm2015_button.b,menu.e,icon.a,card.a,media_upload_content_component.a,menu.f,menu.c],pipes:[ngx_translate_core.j],styles:[\"\"]}),MediaUploadComponent})();var tslib_es6=__webpack_require__(\"mrSG\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),pebula_ngrid=__webpack_require__(\"dRZP\"),BehaviorSubject=__webpack_require__(\"2Vo4\"),Observable=__webpack_require__(\"HDdC\"),storage_service=__webpack_require__(\"AqIO\"),group_repository_service=__webpack_require__(\"R+Vs\"),http_service=__webpack_require__(\"Hila\"),config_service=__webpack_require__(\"+KbT\");let media_manage_service_MediaManageService=(()=>{class MediaManageService{constructor(config,httpService){this.config=config,this.httpService=httpService}setAs(file,action){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const restPath=`/rest/core/config/${action}/`,config=this.getMediaConfig(action);return this.httpService.put(restPath,{id:file.id,key:config.key,default:config.default,value:{display_name:config.display_name,key:config.key,default:config.default,path:config.path!==file.url?file.url:\"\"}})}))}isImageConfigObject(object){if(void 0!==object)return void 0!==object.path}getLogoActions(){return this.config.get(\"logos_available\")}getFontActions(){return this.config.get(\"fonts_available\")}getMediaConfig(action){return this.config.instant(action)}}return MediaManageService.ɵfac=function(t){return new(t||MediaManageService)(core.dc(config_service.a),core.dc(http_service.a))},MediaManageService.ɵprov=core.Pb({token:MediaManageService,factory:MediaManageService.ɵfac,providedIn:\"root\"}),MediaManageService})();var prompt_service=__webpack_require__(\"F48D\"),viewport_service=__webpack_require__(\"KL36\"),mediafiles_mediafile=__webpack_require__(\"smbJ\"),dialog_settings=__webpack_require__(\"Izkr\"),base_list_view=__webpack_require__(\"wL0i\"),openslides_status_service=__webpack_require__(\"D/ll\"),base_sort_list_service=__webpack_require__(\"A6Ob\");let mediafiles_sort_list_service_MediafilesSortListService=(()=>{class MediafilesSortListService extends base_sort_list_service.a{constructor(translate,store,OSStatus){super(translate,store,OSStatus),this.storageKey=\"MediafileList\",this.mediafilesSortOptions=[{property:\"title\"},{property:\"mimetype\",label:this.translate.instant(\"Type\")},{property:\"filesize\",label:this.translate.instant(\"Size\")}]}getSortOptions(){return this.mediafilesSortOptions}getDefaultDefinition(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){return{sortProperty:\"title\",sortAscending:!0}}))}}return MediafilesSortListService.ɵfac=function(t){return new(t||MediafilesSortListService)(core.dc(ngx_translate_core.k),core.dc(storage_service.a),core.dc(openslides_status_service.a))},MediafilesSortListService.ɵprov=core.Pb({token:MediafilesSortListService,factory:MediafilesSortListService.ɵfac,providedIn:\"root\"}),MediafilesSortListService})();var fesm2015_dialog=__webpack_require__(\"0IaG\"),perms_directive=__webpack_require__(\"3Xi6\"),pebula_ngrid_material_selection_column=__webpack_require__(\"1yIO\"),pebula_ngrid_target_events=__webpack_require__(\"SOyc\"),icon_container_component=__webpack_require__(\"vYAO\"),tooltip=__webpack_require__(\"Qu3c\"),divider=__webpack_require__(\"f0Cb\"),projector_button_component=__webpack_require__(\"Tp2j\"),form_field=__webpack_require__(\"kmnG\"),input=__webpack_require__(\"qFsG\"),autofocus_directive=__webpack_require__(\"IZUe\"),search_value_selector_component=__webpack_require__(\"oqD5\");const _c0=[\"fileEditForm\"],_c1=[\"fileEditDialog\"];function MediafileListComponent_div_5_button_1_Template(rf,ctx){if(1&rf){const _r25=core.ac();core.Zb(0,\"button\",26),core.hc(\"click\",(function(){core.Ic(_r25);const ctx_r24=core.lc(2),_r19=core.Ec(34);return ctx_r24.createNewFolder(_r19)})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"create_new_folder\"),core.Yb(),core.Yb()}}function MediafileListComponent_div_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",23),core.Qc(1,MediafileListComponent_div_5_button_1_Template,3,0,\"button\",24),core.Zb(2,\"button\",25),core.Zb(3,\"mat-icon\"),core.Sc(4,\"more_vert\"),core.Yb(),core.Yb(),core.Yb()),2&rf){const ctx_r0=core.lc(),_r14=core.Ec(28);core.Gb(1),core.tc(\"ngIf\",!ctx_r0.isMultiSelect),core.Gb(1),core.tc(\"matMenuTriggerFor\",_r14)}}function MediafileListComponent_div_6_Template(rf,ctx){if(1&rf){const _r27=core.ac();core.Zb(0,\"div\",27),core.Zb(1,\"button\",28),core.hc(\"click\",(function(){return core.Ic(_r27),core.lc().toggleMultiSelect()})),core.Zb(2,\"mat-icon\"),core.Sc(3,\"arrow_back\"),core.Yb(),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.Yb(),core.Zb(6,\"span\"),core.Sc(7),core.mc(8,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const ctx_r1=core.lc();core.Gb(5),core.Uc(\"\",ctx_r1.selectedRows.length,\" \"),core.Gb(2),core.Tc(core.nc(8,2,\"selected\"))}}function MediafileListComponent_span_13_button_4_Template(rf,ctx){if(1&rf){const _r35=core.ac();core.Zb(0,\"button\",6),core.hc(\"click\",(function(){core.Ic(_r35);const directory_r28=core.lc().$implicit;return core.lc().changeDirectory(directory_r28.id)})),core.Zb(1,\"span\",34),core.Sc(2),core.Yb(),core.Yb()}if(2&rf){const directory_r28=core.lc().$implicit,ctx_r30=core.lc();core.tc(\"disabled\",ctx_r30.isMultiSelect),core.Gb(2),core.Uc(\" \",directory_r28.filename,\" \")}}const _c2=function(a0){return{mediafile:a0}};function MediafileListComponent_span_13_button_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"button\",35),core.Zb(1,\"os-icon-container\",36),core.Sc(2),core.Yb(),core.Yb()),2&rf){const directory_r28=core.lc().$implicit,ctx_r31=core.lc(),_r12=core.Ec(25);core.tc(\"matMenuTriggerFor\",_r12)(\"matMenuTriggerData\",core.zc(5,_c2,directory_r28))(\"disabled\",ctx_r31.isMultiSelect),core.Gb(1),core.tc(\"noWrap\",!0),core.Gb(1),core.Uc(\" \",directory_r28.filename,\" \")}}function MediafileListComponent_span_13_span_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\",37),core.Sc(1),core.Yb()),2&rf){const directory_r28=core.lc().$implicit;core.Gb(1),core.Uc(\" \",directory_r28.filename,\" \")}}function MediafileListComponent_span_13_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\",29),core.Zb(1,\"span\",30),core.Zb(2,\"mat-icon\"),core.Sc(3,\"chevron_right\"),core.Yb(),core.Yb(),core.Qc(4,MediafileListComponent_span_13_button_4_Template,3,2,\"button\",31),core.Qc(5,MediafileListComponent_span_13_button_5_Template,3,7,\"button\",32),core.Qc(6,MediafileListComponent_span_13_span_6_Template,2,1,\"span\",33),core.Yb()),2&rf){const directory_r28=ctx.$implicit,last_r29=ctx.last,ctx_r2=core.lc();core.Gb(4),core.tc(\"ngIf\",!last_r29),core.Gb(1),core.tc(\"ngIf\",last_r29&&ctx_r2.showFileMenu(directory_r28)),core.Gb(1),core.tc(\"ngIf\",last_r29&&!ctx_r2.showFileMenu(directory_r28))}}function MediafileListComponent_span_14_span_4_span_4_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\", \"),core.Yb())}function MediafileListComponent_span_14_span_4_span_5_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\"...\"),core.Yb())}function MediafileListComponent_span_14_span_4_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Qc(4,MediafileListComponent_span_14_span_4_span_4_Template,2,0,\"span\",19),core.Qc(5,MediafileListComponent_span_14_span_4_span_5_Template,2,0,\"span\",19),core.Yb()),2&rf){const group_r40=ctx.$implicit,last_r41=ctx.last,ctx_r39=core.lc(2);core.Gb(2),core.Tc(core.nc(3,3,group_r40.getTitle())),core.Gb(2),core.tc(\"ngIf\",!last_r41),core.Gb(1),core.tc(\"ngIf\",last_r41&&ctx_r39.directory.inherited_access_groups.length>3)}}function MediafileListComponent_span_14_Template(rf,ctx){if(1&rf){const _r45=core.ac();core.Zb(0,\"span\",38),core.Zb(1,\"button\",39),core.hc(\"click\",(function(){core.Ic(_r45);const ctx_r44=core.lc();return ctx_r44.onEditFile(ctx_r44.directory)})),core.Zb(2,\"os-icon-container\",40),core.mc(3,\"translate\"),core.Qc(4,MediafileListComponent_span_14_span_4_Template,6,5,\"span\",41),core.mc(5,\"slice\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r3=core.lc();core.Gb(2),core.uc(\"matTooltip\",core.nc(3,2,\"Allowed access groups for this directory\")),core.Gb(2),core.tc(\"ngForOf\",core.pc(5,4,ctx_r3.directory.inherited_access_groups,0,3))}}function MediafileListComponent_div_16_a_1_Template(rf,ctx){if(1&rf&&core.Ub(0,\"a\",45),2&rf){const mediafile_r46=core.lc().row;core.tc(\"routerLink\",mediafile_r46.url)}}function MediafileListComponent_div_16_a_2_Template(rf,ctx){if(1&rf){const _r52=core.ac();core.Zb(0,\"a\",46),core.hc(\"click\",(function(){core.Ic(_r52);const mediafile_r46=core.lc().row;return core.lc().changeDirectory(mediafile_r46.id)})),core.Yb()}}function MediafileListComponent_div_16_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",42),core.Qc(1,MediafileListComponent_div_16_a_1_Template,1,1,\"a\",43),core.Qc(2,MediafileListComponent_div_16_a_2_Template,1,0,\"a\",44),core.Zb(3,\"mat-icon\",7),core.Sc(4),core.Yb(),core.Yb()),2&rf){const mediafile_r46=ctx.row,ctx_r4=core.lc();core.Gb(1),core.tc(\"ngIf\",!mediafile_r46.is_directory&&!ctx_r4.isMultiSelect),core.Gb(1),core.tc(\"ngIf\",mediafile_r46.is_directory&&!ctx_r4.isMultiSelect),core.Gb(2),core.Tc(mediafile_r46.getIcon())}}function MediafileListComponent_div_17_a_1_Template(rf,ctx){if(1&rf&&core.Ub(0,\"a\",45),2&rf){const mediafile_r53=core.lc().row;core.tc(\"routerLink\",mediafile_r53.url)}}function MediafileListComponent_div_17_a_2_Template(rf,ctx){if(1&rf){const _r60=core.ac();core.Zb(0,\"a\",46),core.hc(\"click\",(function(){core.Ic(_r60);const mediafile_r53=core.lc().row;return core.lc().changeDirectory(mediafile_r53.id)})),core.Yb()}}function MediafileListComponent_div_17_div_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",50),core.Zb(1,\"span\"),core.Sc(2),core.Yb(),core.Yb()),2&rf){const mediafile_r53=core.lc().row,ctx_r56=core.lc();core.Gb(2),core.Vc(\" \",ctx_r56.getDateFromTimestamp(mediafile_r53.timestamp),\" · \",mediafile_r53.filesize,\" \")}}function MediafileListComponent_div_17_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",42),core.Qc(1,MediafileListComponent_div_17_a_1_Template,1,1,\"a\",43),core.Qc(2,MediafileListComponent_div_17_a_2_Template,1,0,\"a\",44),core.Zb(3,\"div\",47),core.Zb(4,\"div\",48),core.Sc(5),core.Yb(),core.Qc(6,MediafileListComponent_div_17_div_6_Template,3,2,\"div\",49),core.Yb(),core.Yb()),2&rf){const mediafile_r53=ctx.row,ctx_r5=core.lc();core.Gb(1),core.tc(\"ngIf\",!mediafile_r53.is_directory&&!ctx_r5.isMultiSelect),core.Gb(1),core.tc(\"ngIf\",mediafile_r53.is_directory&&!ctx_r5.isMultiSelect),core.Gb(3),core.Uc(\" \",mediafile_r53.filename,\" \"),core.Gb(1),core.tc(\"ngIf\",!mediafile_r53.is_directory)}}function MediafileListComponent_div_18_os_icon_container_1_span_1_span_4_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\", \"),core.Yb())}function MediafileListComponent_div_18_os_icon_container_1_span_1_span_5_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\"...\"),core.Yb())}function MediafileListComponent_div_18_os_icon_container_1_span_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Qc(4,MediafileListComponent_div_18_os_icon_container_1_span_1_span_4_Template,2,0,\"span\",19),core.Qc(5,MediafileListComponent_div_18_os_icon_container_1_span_1_span_5_Template,2,0,\"span\",19),core.Yb()),2&rf){const group_r65=ctx.$implicit,last_r66=ctx.last,mediafile_r62=core.lc(2).row;core.Gb(2),core.Tc(core.nc(3,3,group_r65.getTitle())),core.Gb(2),core.tc(\"ngIf\",!last_r66),core.Gb(1),core.tc(\"ngIf\",last_r66&&mediafile_r62.access_groups.length>3)}}function MediafileListComponent_div_18_os_icon_container_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"os-icon-container\",53),core.Qc(1,MediafileListComponent_div_18_os_icon_container_1_span_1_Template,6,5,\"span\",41),core.mc(2,\"slice\"),core.Yb()),2&rf){const mediafile_r62=core.lc().row;core.Gb(1),core.tc(\"ngForOf\",core.pc(2,1,mediafile_r62.access_groups,0,3))}}function MediafileListComponent_div_18_Template(rf,ctx){if(1&rf){const _r72=core.ac();core.Zb(0,\"div\",51),core.hc(\"click\",(function(){core.Ic(_r72);const mediafile_r62=ctx.row;return core.lc().onEditFile(mediafile_r62)})),core.Qc(1,MediafileListComponent_div_18_os_icon_container_1_Template,3,5,\"os-icon-container\",52),core.Yb()}if(2&rf){const mediafile_r62=ctx.row;core.Gb(1),core.tc(\"ngIf\",mediafile_r62.access_groups.length)}}function MediafileListComponent_div_19_div_1_mat_icon_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-icon\",7),core.Sc(1,\"text_fields\"),core.Yb())}function MediafileListComponent_div_19_div_1_mat_icon_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-icon\",7),core.Sc(1,\"insert_photo\"),core.Yb())}function MediafileListComponent_div_19_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",56),core.Qc(1,MediafileListComponent_div_19_div_1_mat_icon_1_Template,2,0,\"mat-icon\",57),core.Qc(2,MediafileListComponent_div_19_div_1_mat_icon_2_Template,2,0,\"mat-icon\",57),core.Yb()),2&rf){const mediafile_r73=core.lc().row,ctx_r74=core.lc(),_r12=core.Ec(25);core.tc(\"matMenuTriggerFor\",_r12)(\"matMenuTriggerData\",core.zc(5,_c2,mediafile_r73))(\"matTooltip\",ctx_r74.formatIndicatorTooltip(mediafile_r73)),core.Gb(1),core.tc(\"ngIf\",mediafile_r73.isFont()),core.Gb(1),core.tc(\"ngIf\",mediafile_r73.isImage())}}function MediafileListComponent_div_19_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",54),core.Qc(1,MediafileListComponent_div_19_div_1_Template,3,7,\"div\",55),core.Yb()),2&rf){const mediafile_r73=ctx.row,ctx_r7=core.lc();core.Gb(1),core.tc(\"ngIf\",ctx_r7.getFileSettings(mediafile_r73).length>0)}}function MediafileListComponent_div_20_button_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"button\",59),core.Zb(1,\"mat-icon\"),core.Sc(2,\"more_vert\"),core.Yb(),core.Yb()),2&rf){const mediafile_r78=core.lc().row,ctx_r79=core.lc(),_r12=core.Ec(25);core.tc(\"matMenuTriggerFor\",_r12)(\"matMenuTriggerData\",core.zc(3,_c2,mediafile_r78))(\"disabled\",ctx_r79.isMultiSelect)}}function MediafileListComponent_div_20_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",54),core.Qc(1,MediafileListComponent_div_20_button_1_Template,3,5,\"button\",58),core.Yb()),2&rf){const mediafile_r78=ctx.row,ctx_r8=core.lc();core.Gb(1),core.tc(\"ngIf\",ctx_r8.showFileMenu(mediafile_r78))}}function MediafileListComponent_div_21_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",60),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(2),core.Tc(core.nc(3,1,\"No data\")))}function MediafileListComponent_ng_template_22_Template(rf,ctx){if(1&rf){const _r84=core.ac();core.Zb(0,\"button\",61),core.hc(\"click\",(function($event){core.Ic(_r84);const mediafile_r81=ctx.mediafile,action_r82=ctx.action;return core.lc().onManageButton($event,mediafile_r81,action_r82)})),core.Zb(1,\"mat-icon\",62),core.Sc(2),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.Yb(),core.Yb()}if(2&rf){const mediafile_r81=ctx.mediafile,action_r82=ctx.action,ctx_r11=core.lc();core.Gb(2),core.Uc(\" \",ctx_r11.isUsedAs(mediafile_r81,action_r82)?\"check_box\":\"check_box_outline_blank\",\" \"),core.Gb(2),core.Tc(ctx_r11.getNameOfAction(action_r82))}}function MediafileListComponent_ng_template_26_div_0_div_1_div_1_ng_container_1_Template(rf,ctx){1&rf&&core.Vb(0)}const _c3=function(a0,a1){return{mediafile:a0,action:a1}};function MediafileListComponent_ng_template_26_div_0_div_1_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MediafileListComponent_ng_template_26_div_0_div_1_div_1_ng_container_1_Template,1,0,\"ng-container\",65),core.Yb()),2&rf){const action_r93=ctx.$implicit,mediafile_r85=core.lc(3).mediafile;core.lc();const _r10=core.Ec(23);core.Gb(1),core.tc(\"ngTemplateOutlet\",_r10)(\"ngTemplateOutletContext\",core.Ac(2,_c3,mediafile_r85,action_r93))}}function MediafileListComponent_ng_template_26_div_0_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MediafileListComponent_ng_template_26_div_0_div_1_div_1_Template,2,5,\"div\",41),core.Yb()),2&rf){const ctx_r89=core.lc(3);core.Gb(1),core.tc(\"ngForOf\",ctx_r89.logoActions)}}function MediafileListComponent_ng_template_26_div_0_div_2_div_1_ng_container_1_Template(rf,ctx){1&rf&&core.Vb(0)}function MediafileListComponent_ng_template_26_div_0_div_2_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MediafileListComponent_ng_template_26_div_0_div_2_div_1_ng_container_1_Template,1,0,\"ng-container\",65),core.Yb()),2&rf){const action_r97=ctx.$implicit,mediafile_r85=core.lc(3).mediafile;core.lc();const _r10=core.Ec(23);core.Gb(1),core.tc(\"ngTemplateOutlet\",_r10)(\"ngTemplateOutletContext\",core.Ac(2,_c3,mediafile_r85,action_r97))}}function MediafileListComponent_ng_template_26_div_0_div_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MediafileListComponent_ng_template_26_div_0_div_2_div_1_Template,2,5,\"div\",41),core.Yb()),2&rf){const ctx_r90=core.lc(3);core.Gb(1),core.tc(\"ngForOf\",ctx_r90.fontActions)}}function MediafileListComponent_ng_template_26_div_0_mat_divider_3_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-divider\")}function MediafileListComponent_ng_template_26_div_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MediafileListComponent_ng_template_26_div_0_div_1_Template,2,1,\"div\",19),core.Qc(2,MediafileListComponent_ng_template_26_div_0_div_2_Template,2,1,\"div\",19),core.Qc(3,MediafileListComponent_ng_template_26_div_0_mat_divider_3_Template,1,0,\"mat-divider\",19),core.Yb()),2&rf){const mediafile_r85=core.lc().mediafile;core.Gb(1),core.tc(\"ngIf\",mediafile_r85.isImage()),core.Gb(1),core.tc(\"ngIf\",mediafile_r85.isFont()),core.Gb(1),core.tc(\"ngIf\",mediafile_r85.isFont()||mediafile_r85.isImage())}}function MediafileListComponent_ng_template_26_os_projector_button_1_Template(rf,ctx){if(1&rf&&core.Ub(0,\"os-projector-button\",66),2&rf){const mediafile_r85=core.lc().mediafile;core.tc(\"object\",mediafile_r85)(\"menuItem\",!0)}}function MediafileListComponent_ng_template_26_div_2_Template(rf,ctx){if(1&rf){const _r104=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",61),core.hc(\"click\",(function(){core.Ic(_r104);const mediafile_r85=core.lc().mediafile;return core.lc().onEditFile(mediafile_r85)})),core.Zb(2,\"mat-icon\"),core.Sc(3,\"edit\"),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb(),core.Zb(7,\"button\",61),core.hc(\"click\",(function(){core.Ic(_r104);const mediafile_r85=core.lc().mediafile,ctx_r105=core.lc(),_r21=core.Ec(36);return ctx_r105.move(_r21,[mediafile_r85])})),core.Zb(8,\"mat-icon\"),core.Sc(9,\"near_me\"),core.Yb(),core.Zb(10,\"span\"),core.Sc(11),core.mc(12,\"translate\"),core.Yb(),core.Yb(),core.Zb(13,\"button\",67),core.hc(\"click\",(function(){core.Ic(_r104);const mediafile_r85=core.lc().mediafile;return core.lc().onDelete(mediafile_r85)})),core.Zb(14,\"mat-icon\"),core.Sc(15,\"delete\"),core.Yb(),core.Zb(16,\"span\"),core.Sc(17),core.mc(18,\"translate\"),core.Yb(),core.Yb(),core.Yb()}2&rf&&(core.Gb(5),core.Tc(core.nc(6,3,\"Edit\")),core.Gb(6),core.Tc(core.nc(12,5,\"Move\")),core.Gb(6),core.Tc(core.nc(18,7,\"Delete\")))}function MediafileListComponent_ng_template_26_Template(rf,ctx){if(1&rf&&(core.Qc(0,MediafileListComponent_ng_template_26_div_0_Template,4,3,\"div\",63),core.Qc(1,MediafileListComponent_ng_template_26_os_projector_button_1_Template,1,2,\"os-projector-button\",64),core.Qc(2,MediafileListComponent_ng_template_26_div_2_Template,19,9,\"div\",19)),2&rf){const mediafile_r85=ctx.mediafile,ctx_r13=core.lc();core.tc(\"osPerms\",\"core.can_manage_logos_and_fonts\"),core.Gb(1),core.tc(\"ngIf\",mediafile_r85.isProjectable()),core.Gb(1),core.tc(\"ngIf\",ctx_r13.canEdit)}}function MediafileListComponent_div_29_button_1_Template(rf,ctx){if(1&rf){const _r111=core.ac();core.Zb(0,\"button\",61),core.hc(\"click\",(function(){return core.Ic(_r111),core.lc(2).toggleMultiSelect()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"library_add\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Multiselect\")))}function MediafileListComponent_div_29_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\"),core.Qc(1,MediafileListComponent_div_29_button_1_Template,6,3,\"button\",68),core.Yb()),2&rf&&(core.Gb(1),core.tc(\"osPerms\",\"mediafiles.can_manage\"))}function MediafileListComponent_div_30_button_21_Template(rf,ctx){if(1&rf){const _r114=core.ac();core.Zb(0,\"button\",69),core.hc(\"click\",(function(){return core.Ic(_r114),core.lc(2).deleteSelected()})),core.Zb(1,\"mat-icon\",71),core.Sc(2,\"delete\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const ctx_r112=core.lc(2);core.tc(\"disabled\",!ctx_r112.selectedRows.length),core.Gb(4),core.Tc(core.nc(5,2,\"Delete\"))}}function MediafileListComponent_div_30_Template(rf,ctx){if(1&rf){const _r116=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",69),core.hc(\"click\",(function(){core.Ic(_r116);const ctx_r115=core.lc(),_r21=core.Ec(36);return ctx_r115.move(_r21,ctx_r115.selectedRows)})),core.Zb(2,\"mat-icon\"),core.Sc(3,\"near_me\"),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb(),core.Ub(7,\"mat-divider\"),core.Zb(8,\"button\",61),core.hc(\"click\",(function(){return core.Ic(_r116),core.lc().selectAll()})),core.Zb(9,\"mat-icon\"),core.Sc(10,\"done_all\"),core.Yb(),core.Zb(11,\"span\"),core.Sc(12),core.mc(13,\"translate\"),core.Yb(),core.Yb(),core.Zb(14,\"button\",69),core.hc(\"click\",(function(){return core.Ic(_r116),core.lc().deselectAll()})),core.Zb(15,\"mat-icon\"),core.Sc(16,\"clear\"),core.Yb(),core.Zb(17,\"span\"),core.Sc(18),core.mc(19,\"translate\"),core.Yb(),core.Yb(),core.Ub(20,\"mat-divider\"),core.Qc(21,MediafileListComponent_div_30_button_21_Template,6,4,\"button\",70),core.Yb()}if(2&rf){const ctx_r16=core.lc();core.Gb(1),core.tc(\"disabled\",!ctx_r16.selectedRows.length),core.Gb(4),core.Tc(core.nc(6,6,\"Move\")),core.Gb(7),core.Tc(core.nc(13,8,\"Select all\")),core.Gb(2),core.tc(\"disabled\",!ctx_r16.selectedRows.length),core.Gb(4),core.Tc(core.nc(19,10,\"Deselect all\")),core.Gb(3),core.tc(\"osPerms\",\"mediafiles.can_manage\")}}function MediafileListComponent_ng_template_31_mat_error_8_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-error\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Required\")))}function MediafileListComponent_ng_template_31_Template(rf,ctx){if(1&rf){const _r121=core.ac();core.Zb(0,\"h1\",72),core.Sc(1),core.mc(2,\"translate\"),core.Yb(),core.Zb(3,\"div\",73),core.Zb(4,\"form\",74),core.Zb(5,\"mat-form-field\"),core.Ub(6,\"input\",75),core.mc(7,\"translate\"),core.Qc(8,MediafileListComponent_ng_template_31_mat_error_8_Template,3,3,\"mat-error\",19),core.Yb(),core.Zb(9,\"mat-form-field\"),core.Ub(10,\"os-search-value-selector\",76),core.mc(11,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(12,\"div\",77),core.Zb(13,\"button\",78),core.hc(\"click\",(function(){core.Ic(_r121);const ctx_r120=core.lc();return ctx_r120.onSaveEditedFile(ctx_r120.fileEditForm.value)})),core.Zb(14,\"span\"),core.Sc(15),core.mc(16,\"translate\"),core.Yb(),core.Yb(),core.Zb(17,\"button\",79),core.Zb(18,\"span\"),core.Sc(19),core.mc(20,\"translate\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r18=core.lc();core.Gb(1),core.Tc(core.nc(2,11,\"Edit details for\")),core.Gb(3),core.tc(\"formGroup\",ctx_r18.fileEditForm),core.Gb(2),core.uc(\"placeholder\",core.nc(7,13,\"New file name\")),core.Gb(2),core.tc(\"ngIf\",ctx_r18.fileEditForm.invalid),core.Gb(2),core.uc(\"placeholder\",core.nc(11,15,\"Access groups\")),core.tc(\"multiple\",!0)(\"inputListValues\",ctx_r18.groupsBehaviorSubject),core.Gb(3),core.tc(\"disabled\",!ctx_r18.fileEditForm.valid),core.Gb(2),core.Tc(core.nc(16,17,\"Save\")),core.Gb(2),core.tc(\"mat-dialog-close\",null),core.Gb(2),core.Tc(core.nc(20,19,\"Cancel\"))}}function MediafileListComponent_ng_template_33_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"h1\",72),core.Sc(1),core.mc(2,\"translate\"),core.Yb(),core.Zb(3,\"div\",73),core.Zb(4,\"form\",74),core.Zb(5,\"p\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Zb(8,\"mat-form-field\"),core.Ub(9,\"input\",80),core.mc(10,\"translate\"),core.Yb(),core.Zb(11,\"mat-form-field\"),core.Ub(12,\"os-search-value-selector\",76),core.mc(13,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(14,\"div\",77),core.Zb(15,\"button\",81),core.Zb(16,\"span\"),core.Sc(17),core.mc(18,\"translate\"),core.Yb(),core.Yb(),core.Zb(19,\"button\",79),core.Zb(20,\"span\"),core.Sc(21),core.mc(22,\"translate\"),core.Yb(),core.Yb(),core.Yb()),2&rf){const ctx_r20=core.lc();core.Gb(1),core.Tc(core.nc(2,12,\"New directory\")),core.Gb(3),core.tc(\"formGroup\",ctx_r20.newDirectoryForm),core.Gb(2),core.Tc(core.nc(7,14,\"Please enter a name for the new directory:\")),core.Gb(3),core.uc(\"placeholder\",core.nc(10,16,\"Title\")),core.Gb(3),core.uc(\"placeholder\",core.nc(13,18,\"Access groups\")),core.tc(\"multiple\",!0)(\"inputListValues\",ctx_r20.groupsBehaviorSubject),core.Gb(3),core.tc(\"disabled\",!ctx_r20.newDirectoryForm.valid)(\"mat-dialog-close\",!0),core.Gb(2),core.Tc(core.nc(18,20,\"Save\")),core.Gb(2),core.tc(\"mat-dialog-close\",null),core.Gb(2),core.Tc(core.nc(22,22,\"Cancel\"))}}function MediafileListComponent_ng_template_35_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"h1\",72),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb(),core.Zb(4,\"div\",82),core.Zb(5,\"p\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Zb(8,\"mat-form-field\"),core.Ub(9,\"os-search-value-selector\",83),core.mc(10,\"translate\"),core.Yb(),core.Yb(),core.Zb(11,\"div\",77),core.Zb(12,\"button\",84),core.Zb(13,\"span\"),core.Sc(14),core.mc(15,\"translate\"),core.Yb(),core.Yb(),core.Zb(16,\"button\",79),core.Zb(17,\"span\"),core.Sc(18),core.mc(19,\"translate\"),core.Yb(),core.Yb(),core.Yb()),2&rf){const ctx_r22=core.lc();core.Gb(2),core.Tc(core.nc(3,11,\"Move into directory\")),core.Gb(2),core.tc(\"formGroup\",ctx_r22.moveForm),core.Gb(2),core.Tc(core.nc(7,13,\"Please select the directory:\")),core.Gb(3),core.uc(\"placeholder\",core.nc(10,15,\"Parent directory\")),core.tc(\"includeNone\",!0)(\"noneTitle\",\"Base folder\")(\"inputListValues\",ctx_r22.filteredDirectoryBehaviorSubject),core.Gb(3),core.tc(\"mat-dialog-close\",!0),core.Gb(2),core.Tc(core.nc(15,17,\"Move\")),core.Gb(2),core.tc(\"mat-dialog-close\",null),core.Gb(2),core.Tc(core.nc(19,19,\"Cancel\"))}}const routes=[{path:\"\",redirectTo:\"files\",pathMatch:\"full\"},{path:\"files\",children:[{path:\"**\",component:(()=>{class MediafileListComponent extends base_list_view.a{constructor(titleService,translate,matSnackBar,storage,route,router,repo,mediaManage,promptService,vp,sortService,operator,dialog,fb,formBuilder,groupRepo,cd){super(titleService,translate,matSnackBar,storage),this.translate=translate,this.route=route,this.router=router,this.repo=repo,this.mediaManage=mediaManage,this.promptService=promptService,this.vp=vp,this.sortService=sortService,this.operator=operator,this.dialog=dialog,this.fb=fb,this.formBuilder=formBuilder,this.groupRepo=groupRepo,this.cd=cd,this.filteredDirectoryBehaviorSubject=new BehaviorSubject.a([]),this.tableColumnDefinition=[{prop:\"selection\",width:\"40px\"},{prop:\"icon\",label:\"\",width:\"40px\"},{prop:\"title\",width:\"auto\",minWidth:60},{prop:\"info\",width:\"20%\",minWidth:60},{prop:\"indicator\",label:\"\",width:\"40px\"},{prop:\"menu\",label:\"\",width:\"40px\"}],this.columnSet=Object(pebula_ngrid.p)().table(...this.tableColumnDefinition).build(),this.directoryObservable=new Observable.a,this.canMultiSelect=!0,this.newDirectoryForm=this.formBuilder.group({title:[\"\",fesm2015_forms.G.required],access_groups_id:[]}),this.moveForm=this.formBuilder.group({directory_id:[]}),this.directoryBehaviorSubject=this.repo.getDirectoryBehaviorSubject(),this.groupsBehaviorSubject=this.groupRepo.getViewModelListBehaviorSubject()}get canEdit(){return this.operator.hasPerms(operator_service.b.mediafilesCanManage)}get canAccessFileMenu(){return this.operator.hasPerms(operator_service.b.coreCanManageProjector)||this.operator.hasPerms(operator_service.b.agendaCanSeeListOfSpeakers)||this.operator.hasPerms(operator_service.b.coreCanManageLogosAndFonts)||this.canEdit}get hiddenColumns(){const hidden=[];return this.canEdit||hidden.push(\"info\"),this.isMultiSelect||hidden.push(\"selection\"),this.canAccessFileMenu||hidden.push(\"menu\"),hidden}ngOnInit(){super.setTitle(\"Files\"),this.repo.getDirectoryIdByPath(this.route.snapshot.url.map(x=>x.path)).then(directoryId=>{this.changeDirectory(directoryId)}),this.mediaManage.getLogoActions().subscribe(action=>{this.logoActions=action}),this.mediaManage.getFontActions().subscribe(action=>{this.fontActions=action}),this.createDataSource()}ngOnDestroy(){super.ngOnDestroy(),this.clearSubscriptions(),this.cd.detach()}showFileMenu(file){return file.isProjectable()&&this.operator.hasPerms(operator_service.b.coreCanManageProjector)||file.isFont()&&this.operator.hasPerms(operator_service.b.coreCanManageLogosAndFonts)||file.isImage()&&this.operator.hasPerms(operator_service.b.coreCanManageLogosAndFonts)||this.canEdit}getDateFromTimestamp(timestamp){return new Date(timestamp).toLocaleString(this.translate.currentLang)}createDataSource(){this.dataSource=Object(pebula_ngrid.q)().onTrigger(()=>this.directoryObservable).create(),this.dataSource.selection.changed.subscribe(selection=>{this.selectedRows=selection.source.selected})}changeDirectory(directoryId){this.clearSubscriptions(),this.directoryObservable=this.repo.getListObservableDirectory(directoryId),this.folderSubscription=this.directoryObservable.subscribe(mediafiles=>{mediafiles&&(this.dataSource.refresh(),this.cd.markForCheck())}),directoryId?this.directorySubscription=this.repo.getViewModelObservable(directoryId).subscribe(newDirectory=>{this.directory=newDirectory,newDirectory?(this.directoryChain=newDirectory.getDirectoryChain(),this.router.navigate([\"/mediafiles/files/\"+newDirectory.path],{replaceUrl:!0})):(this.directoryChain=[],this.router.navigate([\"/mediafiles/files/\"],{replaceUrl:!0}))}):(this.directory=null,this.directoryChain=[],this.router.navigate([\"/mediafiles/files/\"],{replaceUrl:!0}))}onMainEvent(){this.router.navigate([\"/mediafiles/upload/\"+(this.directory?this.directory.path:\"\")])}onEditFile(file){this.isMultiSelect||(this.fileToEdit=file,this.fileEditForm=this.fb.group({title:[file.filename,fesm2015_forms.G.required],access_groups_id:[file.access_groups_id]}),this.dialogRef=this.dialog.open(this.fileEditDialog,dialog_settings.a),this.dialogRef.keydownEvents().subscribe(event=>{\"Enter\"===event.key&&event.shiftKey&&this.fileEditForm.valid&&this.onSaveEditedFile(this.fileEditForm.value)}))}onSaveEditedFile(value){this.repo.update(value,this.fileToEdit).then(()=>{this.dialogRef.close()},this.raiseError)}onDelete(file){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to delete this file?\"),content=file.getTitle();(yield this.promptService.open(title,content))&&this.repo.delete(file)}))}deleteSelected(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to delete all selected files and folders?\");(yield this.promptService.open(title))&&(yield this.repo.bulkDelete(this.selectedRows),this.deselectAll())}))}getNameOfAction(mediaFileAction){return this.translate.instant(this.mediaManage.getMediaConfig(mediaFileAction).display_name)}formatIndicatorTooltip(file){return this.getFileSettings(file).map(option=>this.getNameOfAction(option)).join(\"\\n\")}isUsedAs(file,mediaFileAction){const config=this.mediaManage.getMediaConfig(mediaFileAction);return!!config&&config.path===file.url}getFileSettings(file){let uses=[];return file&&(file.isFont()?uses=this.fontActions.filter(action=>this.isUsedAs(file,action)):file.isImage()&&(uses=this.logoActions.filter(action=>this.isUsedAs(file,action)))),uses}onManageButton(event,file,action){event.stopPropagation(),this.mediaManage.setAs(file,action).then(()=>{this.cd.markForCheck()})}createNewFolder(templateRef){this.newDirectoryForm.reset(),this.dialog.open(templateRef,dialog_settings.a).afterClosed().subscribe(result=>{if(result){const mediafile=new mediafiles_mediafile.a(Object.assign(Object.assign({},this.newDirectoryForm.value),{parent_id:this.directory?this.directory.id:null,is_directory:!0}));this.repo.create(mediafile).catch(this.raiseError)}})}move(templateRef,mediafiles){this.moveForm.reset(),mediafiles.some(file=>file.is_directory)?this.filteredDirectoryBehaviorSubject.next(this.directoryBehaviorSubject.value.filter(dir=>!mediafiles.some(file=>dir.path.startsWith(file.path)))):this.filteredDirectoryBehaviorSubject.next(this.directoryBehaviorSubject.value),this.dialog.open(templateRef,dialog_settings.a).afterClosed().subscribe(result=>{result&&this.repo.move(mediafiles,this.moveForm.value.directory_id).then(()=>{this.dataSource.selection.clear(),this.cd.markForCheck()},this.raiseError)})}onSelectRow(event){if(this.isMultiSelect){const clickedModel=event.row;this.dataSource.selection.isSelected(clickedModel)?this.dataSource.selection.deselect(clickedModel):this.dataSource.selection.select(clickedModel)}}clearSubscriptions(){this.folderSubscription&&(this.folderSubscription.unsubscribe(),this.folderSubscription=null),this.directorySubscription&&(this.directorySubscription.unsubscribe(),this.directorySubscription=null)}}return MediafileListComponent.ɵfac=function(t){return new(t||MediafileListComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(storage_service.a),core.Tb(fesm2015_router.a),core.Tb(fesm2015_router.f),core.Tb(mediafile_repository_service.a),core.Tb(media_manage_service_MediaManageService),core.Tb(prompt_service.a),core.Tb(viewport_service.a),core.Tb(mediafiles_sort_list_service_MediafilesSortListService),core.Tb(operator_service.a),core.Tb(fesm2015_dialog.b),core.Tb(fesm2015_forms.f),core.Tb(fesm2015_forms.f),core.Tb(group_repository_service.a),core.Tb(core.h))},MediafileListComponent.ɵcmp=core.Nb({type:MediafileListComponent,selectors:[[\"os-mediafile-list\"]],viewQuery:function(rf,ctx){var _t;1&rf&&(core.Oc(_c0,!0),core.Oc(_c1,!0)),2&rf&&(core.Dc(_t=core.ic())&&(ctx.fileEditForm=_t.first),core.Dc(_t=core.ic())&&(ctx.fileEditDialog=_t.first))},features:[core.Db],decls:37,vars:20,consts:[[3,\"hasMainButton\",\"multiSelectMode\",\"mainEvent\"],[1,\"title-slot\"],[\"class\",\"menu-slot\",4,\"osPerms\"],[\"class\",\"central-info-slot\",4,\"ngIf\"],[1,\"custom-table-header\"],[1,\"folder-nav-bar\",\"h-scroller\"],[\"mat-button\",\"\",1,\"folder\",3,\"disabled\",\"click\"],[1,\"file-icon\"],[\"class\",\"folder-section\",4,\"ngFor\",\"ngForOf\"],[\"class\",\"visibility\",4,\"ngIf\"],[\"showHeader\",\"false\",\"vScrollAuto\",\"\",\"matCheckboxSelection\",\"selection\",1,\"file-manager-table\",3,\"dataSource\",\"columns\",\"hideColumns\",\"rowClick\"],[\"class\",\"fill clickable\",4,\"pblNgridCellDef\"],[\"class\",\"fill clickable\",3,\"click\",4,\"pblNgridCellDef\"],[\"class\",\"fill\",4,\"pblNgridCellDef\"],[\"class\",\"pbl-ngrid-no-data\",4,\"pblNgridNoDataRef\"],[\"manageButton\",\"\"],[\"singleMediafileMenu\",\"matMenu\"],[\"matMenuContent\",\"\"],[\"mediafilesMenu\",\"matMenu\"],[4,\"ngIf\"],[\"fileEditDialog\",\"\"],[\"newFolderDialog\",\"\"],[\"moveDialog\",\"\"],[1,\"menu-slot\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"click\",4,\"ngIf\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"matMenuTriggerFor\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"click\"],[1,\"central-info-slot\"],[\"mat-icon-button\",\"\",3,\"click\"],[1,\"folder-section\"],[1,\"arrow\"],[\"class\",\"folder\",\"mat-button\",\"\",3,\"disabled\",\"click\",4,\"ngIf\"],[\"class\",\"folder\",\"mat-button\",\"\",3,\"matMenuTriggerFor\",\"matMenuTriggerData\",\"disabled\",4,\"ngIf\"],[\"class\",\"folder fake-folder folder-text\",4,\"ngIf\"],[1,\"folder-text\"],[\"mat-button\",\"\",1,\"folder\",3,\"matMenuTriggerFor\",\"matMenuTriggerData\",\"disabled\"],[\"icon\",\"arrow_drop_down\",\"swap\",\"true\",\"size\",\"large\",3,\"noWrap\"],[1,\"folder\",\"fake-folder\",\"folder-text\"],[1,\"visibility\"],[\"mat-button\",\"\",1,\"visible-for\",3,\"click\"],[\"icon\",\"group\",3,\"matTooltip\"],[4,\"ngFor\",\"ngForOf\"],[1,\"fill\",\"clickable\"],[\"class\",\"detail-link\",\"target\",\"_blank\",3,\"routerLink\",4,\"ngIf\"],[\"class\",\"detail-link\",3,\"click\",4,\"ngIf\"],[\"target\",\"_blank\",1,\"detail-link\",3,\"routerLink\"],[1,\"detail-link\",3,\"click\"],[1,\"innerTable\"],[1,\"file-title\",\"ellipsis-overflow\"],[\"class\",\"info-text\",4,\"ngIf\"],[1,\"info-text\"],[1,\"fill\",\"clickable\",3,\"click\"],[\"icon\",\"group\",4,\"ngIf\"],[\"icon\",\"group\"],[1,\"fill\"],[3,\"matMenuTriggerFor\",\"matMenuTriggerData\",\"matTooltip\",4,\"ngIf\"],[3,\"matMenuTriggerFor\",\"matMenuTriggerData\",\"matTooltip\"],[\"class\",\"file-icon\",4,\"ngIf\"],[\"mat-icon-button\",\"\",3,\"matMenuTriggerFor\",\"matMenuTriggerData\",\"disabled\",4,\"ngIf\"],[\"mat-icon-button\",\"\",3,\"matMenuTriggerFor\",\"matMenuTriggerData\",\"disabled\"],[1,\"pbl-ngrid-no-data\"],[\"mat-menu-item\",\"\",3,\"click\"],[\"color\",\"accent\"],[4,\"osPerms\"],[3,\"object\",\"menuItem\",4,\"ngIf\"],[4,\"ngTemplateOutlet\",\"ngTemplateOutletContext\"],[3,\"object\",\"menuItem\"],[\"mat-menu-item\",\"\",1,\"red-warning-text\",3,\"click\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"osPerms\"],[\"mat-menu-item\",\"\",3,\"disabled\",\"click\"],[\"mat-menu-item\",\"\",3,\"disabled\",\"click\",4,\"osPerms\"],[\"color\",\"warn\"],[\"mat-dialog-title\",\"\"],[\"mat-dialog-content\",\"\",1,\"os-form-card-mobile\"],[1,\"edit-file-form\",3,\"formGroup\"],[\"type\",\"text\",\"matInput\",\"\",\"osAutofocus\",\"\",\"required\",\"\",\"formControlName\",\"title\",3,\"placeholder\"],[\"formControlName\",\"access_groups_id\",3,\"multiple\",\"placeholder\",\"inputListValues\"],[\"mat-dialog-actions\",\"\"],[\"type\",\"submit\",\"mat-button\",\"\",\"color\",\"accent\",3,\"disabled\",\"click\"],[\"type\",\"button\",\"mat-button\",\"\",3,\"mat-dialog-close\"],[\"matInput\",\"\",\"osAutofocus\",\"\",\"formControlName\",\"title\",\"required\",\"\",3,\"placeholder\"],[\"type\",\"submit\",\"mat-button\",\"\",\"color\",\"accent\",3,\"disabled\",\"mat-dialog-close\"],[\"mat-dialog-content\",\"\",1,\"os-form-card-mobile\",3,\"formGroup\"],[\"formControlName\",\"directory_id\",3,\"includeNone\",\"noneTitle\",\"placeholder\",\"inputListValues\"],[\"type\",\"submit\",\"mat-button\",\"\",\"color\",\"accent\",3,\"mat-dialog-close\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"os-head-bar\",0),core.hc(\"mainEvent\",(function(){return ctx.onMainEvent()})),core.Zb(1,\"div\",1),core.Zb(2,\"h2\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Qc(5,MediafileListComponent_div_5_Template,5,2,\"div\",2),core.Qc(6,MediafileListComponent_div_6_Template,9,4,\"div\",3),core.Yb(),core.Zb(7,\"div\"),core.Zb(8,\"div\",4),core.Zb(9,\"span\",5),core.Zb(10,\"button\",6),core.hc(\"click\",(function(){return ctx.changeDirectory(null)})),core.Zb(11,\"mat-icon\",7),core.Sc(12,\"home\"),core.Yb(),core.Yb(),core.Qc(13,MediafileListComponent_span_13_Template,7,3,\"span\",8),core.Yb(),core.Qc(14,MediafileListComponent_span_14_Template,6,8,\"span\",9),core.Yb(),core.Yb(),core.Zb(15,\"pbl-ngrid\",10),core.hc(\"rowClick\",(function($event){return ctx.onSelectRow($event)})),core.Qc(16,MediafileListComponent_div_16_Template,5,3,\"div\",11),core.Qc(17,MediafileListComponent_div_17_Template,7,4,\"div\",11),core.Qc(18,MediafileListComponent_div_18_Template,2,1,\"div\",12),core.Qc(19,MediafileListComponent_div_19_Template,2,1,\"div\",13),core.Qc(20,MediafileListComponent_div_20_Template,2,1,\"div\",13),core.Qc(21,MediafileListComponent_div_21_Template,4,3,\"div\",14),core.Yb(),core.Qc(22,MediafileListComponent_ng_template_22_Template,5,2,\"ng-template\",null,15,core.Rc),core.Zb(24,\"mat-menu\",null,16),core.Qc(26,MediafileListComponent_ng_template_26_Template,3,3,\"ng-template\",17),core.Yb(),core.Zb(27,\"mat-menu\",null,18),core.Qc(29,MediafileListComponent_div_29_Template,2,1,\"div\",19),core.Qc(30,MediafileListComponent_div_30_Template,22,12,\"div\",19),core.Yb(),core.Qc(31,MediafileListComponent_ng_template_31_Template,21,21,\"ng-template\",null,20,core.Rc),core.Qc(33,MediafileListComponent_ng_template_33_Template,23,24,\"ng-template\",null,21,core.Rc),core.Qc(35,MediafileListComponent_ng_template_35_Template,20,21,\"ng-template\",null,22,core.Rc)),2&rf&&(core.tc(\"hasMainButton\",ctx.canEdit)(\"multiSelectMode\",ctx.isMultiSelect),core.Gb(3),core.Tc(core.nc(4,18,\"Files\")),core.Gb(2),core.tc(\"osPerms\",\"mediafiles.can_manage\"),core.Gb(1),core.tc(\"ngIf\",ctx.isMultiSelect),core.Gb(4),core.tc(\"disabled\",ctx.isMultiSelect),core.Gb(3),core.tc(\"ngForOf\",ctx.directoryChain),core.Gb(1),core.tc(\"ngIf\",ctx.canEdit&&ctx.directory&&ctx.directory.has_inherited_access_groups),core.Gb(1),core.tc(\"dataSource\",ctx.dataSource)(\"columns\",ctx.columnSet)(\"hideColumns\",ctx.hiddenColumns),core.Gb(1),core.tc(\"pblNgridCellDef\",\"icon\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"title\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"info\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"indicator\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"menu\"),core.Gb(9),core.tc(\"ngIf\",!ctx.isMultiSelect),core.Gb(1),core.tc(\"ngIf\",ctx.isMultiSelect))},directives:[head_bar_component.a,perms_directive.a,common.t,fesm2015_button.b,icon.a,common.s,pebula_ngrid.e,pebula_ngrid.A,pebula_ngrid_material_selection_column.b,pebula_ngrid_target_events.b,pebula_ngrid.c,pebula_ngrid.l,menu.f,menu.b,menu.e,icon_container_component.a,tooltip.c,fesm2015_router.i,menu.c,common.A,divider.a,projector_button_component.a,fesm2015_dialog.i,fesm2015_dialog.f,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,form_field.c,input.b,fesm2015_forms.c,autofocus_directive.a,fesm2015_forms.D,fesm2015_forms.s,fesm2015_forms.i,search_value_selector_component.a,fesm2015_dialog.c,fesm2015_dialog.d,form_field.b],pipes:[ngx_translate_core.j,common.E],styles:[\".title-line{font-weight:500;font-size:16px}.title-line .icon-prefix .mat-icon{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line .favorite-star{padding-right:3px}.mat-table{width:100%}.mat-table .mat-header-row .mat-column-anchor{display:none}.mat-table .mat-row{position:relative}.mat-table .mat-row .mat-column-anchor{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table .mat-row .mat-column-anchor a{display:block;height:100%;width:100%}.mat-table .mat-cell{position:relative}.mat-table .mat-cell .fill{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table .mat-cell .fill *{margin-top:auto;margin-bottom:auto}.mat-table .mat-cell>*{z-index:2}.mat-table .mat-table-sticky{z-index:3!important}.folder-nav-bar{width:100%}.folder-nav-bar,.folder-section{display:-ms-flexbox;display:flex}.folder-section{white-space:nowrap}.folder-section .mat-button{padding:0}.arrow{height:64px}.arrow .mat-icon{line-height:64px;height:64px}.folder{height:64px}.folder>.content-node{white-space:nowrap}.fake-folder{padding:0 16px}.folder-text{font-size:16px;font-weight:500;margin:auto 5px;overflow:hidden}.visibility{display:-ms-flexbox;display:flex}.visibility .visible-for{width:-webkit-min-content;width:-moz-min-content;width:min-content}.file-manager-table{display:block;height:calc(100vh - 130px)}.file-manager-table .file-title{font-weight:500;font-size:16px}.file-manager-table .info-text{font-size:90%}.file-manager-table .pbl-ngrid-row,.file-manager-table .pbl-ngrid-row .pbl-ngrid-cell{height:60px!important}.file-manager-table .pbl-ngrid-row:last-of-type{margin-bottom:60px!important}\"],encapsulation:2,changeDetection:0}),MediafileListComponent})()}],pathMatch:\"prefix\"},{path:\"upload\",data:{basePerm:operator_service.b.mediafilesCanManage},children:[{path:\"**\",component:media_upload_component_MediaUploadComponent}],pathMatch:\"prefix\"}];let mediafiles_routing_module_MediafilesRoutingModule=(()=>{class MediafilesRoutingModule{}return MediafilesRoutingModule.ɵmod=core.Rb({type:MediafilesRoutingModule}),MediafilesRoutingModule.ɵinj=core.Qb({factory:function(t){return new(t||MediafilesRoutingModule)},imports:[[fesm2015_router.j.forChild(routes)],fesm2015_router.j]}),MediafilesRoutingModule})();var shared_module=__webpack_require__(\"PCNd\");let mediafiles_module_MediafilesModule=(()=>{class MediafilesModule{}return MediafilesModule.ɵmod=core.Rb({type:MediafilesModule}),MediafilesModule.ɵinj=core.Qb({factory:function(t){return new(t||MediafilesModule)},imports:[[common.c,mediafiles_routing_module_MediafilesRoutingModule,shared_module.a]]}),MediafilesModule})()},F48D:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return PromptService}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mrSG\"),_shared_components_prompt_dialog_prompt_dialog_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"LBBb\"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"fXoL\"),_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"0IaG\");let PromptService=(()=>{class PromptService{constructor(dialog){this.dialog=dialog}open(title,content=\"\"){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){return this.dialog.open(_shared_components_prompt_dialog_prompt_dialog_component__WEBPACK_IMPORTED_MODULE_1__.a,{width:\"250px\",data:{title:title,content:content}}).afterClosed().toPromise()}))}}return PromptService.ɵfac=function(t){return new(t||PromptService)(_angular_core__WEBPACK_IMPORTED_MODULE_2__.dc(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__.b))},PromptService.ɵprov=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Pb({token:PromptService,factory:PromptService.ɵfac,providedIn:\"root\"}),PromptService})()},LBBb:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return PromptDialogComponent}));var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"0IaG\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"fXoL\"),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"ofXK\"),_angular_material_button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"bTqV\"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"sYmb\");function PromptDialogComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"div\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(1,\"h2\",1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ub(3,\"mat-dialog-content\",2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(4,\"mat-dialog-actions\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(5,\"button\",3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(6),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(7,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(8,\"button\",4),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(9),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(10,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_1__.lc();_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(ctx_r0.data.title),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"innerHTML\",ctx_r0.data.content,_angular_core__WEBPACK_IMPORTED_MODULE_1__.Jc),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"mat-dialog-close\",!0),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(7,6,\"Yes\")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"mat-dialog-close\",!1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(10,8,\"Cancel\"))}}let PromptDialogComponent=(()=>{class PromptDialogComponent{constructor(dialogRef,data){this.dialogRef=dialogRef,this.data=data}}return PromptDialogComponent.ɵfac=function(t){return new(t||PromptDialogComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tb(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.h),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tb(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.a))},PromptDialogComponent.ɵcmp=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Nb({type:PromptDialogComponent,selectors:[[\"os-prompt-dialog\"]],decls:1,vars:1,consts:[[4,\"ngIf\"],[\"mat-dialog-title\",\"\"],[3,\"innerHTML\"],[\"mat-button\",\"\",\"color\",\"warn\",3,\"mat-dialog-close\"],[\"mat-button\",\"\",3,\"mat-dialog-close\"]],template:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(0,PromptDialogComponent_div_0_Template,11,10,\"div\",0),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"ngIf\",ctx.data)},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.t,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.i,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.f,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.c,_angular_material_button__WEBPACK_IMPORTED_MODULE_3__.b,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.d],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__.j],encapsulation:2}),PromptDialogComponent})()},wL0i:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return BaseListViewComponent}));var _base_view__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mV3u\");class BaseListViewComponent extends _base_view__WEBPACK_IMPORTED_MODULE_0__.a{constructor(titleService,translate,matSnackBar,storage){super(titleService,translate,matSnackBar),this.storage=storage,this.canMultiSelect=!1,this._multiSelectMode=!1,this.singleButtonWidth=\"40px\",this.badgeButtonWidth=\"45px\",this.selectedRows=[]}onDataSourceChange(newDataSource){this.dataSource=newDataSource}toggleMultiSelect(){!this.canMultiSelect||this.isMultiSelect?(this._multiSelectMode=!1,this.deselectAll()):this._multiSelectMode=!0}selectAll(){this.dataSource.selection.select(...this.dataSource.filteredData)}deselectAll(){this.dataSource&&this.dataSource.selection.clear()}get isMultiSelect(){return this._multiSelectMode}}}}]);","extractedComments":[]}