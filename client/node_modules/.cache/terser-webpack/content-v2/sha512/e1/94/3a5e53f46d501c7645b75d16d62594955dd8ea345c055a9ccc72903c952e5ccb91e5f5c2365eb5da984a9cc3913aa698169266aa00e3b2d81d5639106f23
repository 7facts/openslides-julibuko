{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[33,36],{F48D:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return PromptService}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mrSG\"),_shared_components_prompt_dialog_prompt_dialog_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"LBBb\"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"fXoL\"),_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"0IaG\");let PromptService=(()=>{class PromptService{constructor(dialog){this.dialog=dialog}open(title,content=\"\"){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){return this.dialog.open(_shared_components_prompt_dialog_prompt_dialog_component__WEBPACK_IMPORTED_MODULE_1__.a,{width:\"250px\",data:{title:title,content:content}}).afterClosed().toPromise()}))}}return PromptService.ɵfac=function(t){return new(t||PromptService)(_angular_core__WEBPACK_IMPORTED_MODULE_2__.dc(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__.b))},PromptService.ɵprov=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Pb({token:PromptService,factory:PromptService.ɵfac,providedIn:\"root\"}),PromptService})()},LBBb:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return PromptDialogComponent}));var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"0IaG\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"fXoL\"),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"ofXK\"),_angular_material_button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"bTqV\"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"sYmb\");function PromptDialogComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"div\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(1,\"h2\",1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ub(3,\"mat-dialog-content\",2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(4,\"mat-dialog-actions\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(5,\"button\",3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(6),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(7,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(8,\"button\",4),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(9),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(10,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_1__.lc();_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(ctx_r0.data.title),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"innerHTML\",ctx_r0.data.content,_angular_core__WEBPACK_IMPORTED_MODULE_1__.Jc),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"mat-dialog-close\",!0),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(7,6,\"Yes\")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"mat-dialog-close\",!1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(10,8,\"Cancel\"))}}let PromptDialogComponent=(()=>{class PromptDialogComponent{constructor(dialogRef,data){this.dialogRef=dialogRef,this.data=data}}return PromptDialogComponent.ɵfac=function(t){return new(t||PromptDialogComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tb(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.h),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tb(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.a))},PromptDialogComponent.ɵcmp=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Nb({type:PromptDialogComponent,selectors:[[\"os-prompt-dialog\"]],decls:1,vars:1,consts:[[4,\"ngIf\"],[\"mat-dialog-title\",\"\"],[3,\"innerHTML\"],[\"mat-button\",\"\",\"color\",\"warn\",3,\"mat-dialog-close\"],[\"mat-button\",\"\",3,\"mat-dialog-close\"]],template:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(0,PromptDialogComponent_div_0_Template,11,10,\"div\",0),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"ngIf\",ctx.data)},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.t,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.i,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.f,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.c,_angular_material_button__WEBPACK_IMPORTED_MODULE_3__.b,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.d],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__.j],encapsulation:2}),PromptDialogComponent})()},moyA:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"MotionWorkflowModule\",(function(){return motion_workflow_module_MotionWorkflowModule}));var common=__webpack_require__(\"ofXK\"),shared_module=__webpack_require__(\"PCNd\"),router=__webpack_require__(\"tyNb\"),table=__webpack_require__(\"+0xr\"),map=__webpack_require__(\"lJxs\"),state_repository_service=__webpack_require__(\"ZvXm\"),workflow_repository_service=__webpack_require__(\"s3dr\"),prompt_service=__webpack_require__(\"F48D\"),motions_state=__webpack_require__(\"gtli\"),dialog_settings=__webpack_require__(\"Izkr\"),base_view=__webpack_require__(\"mV3u\"),core=__webpack_require__(\"fXoL\"),platform_browser=__webpack_require__(\"jhN1\"),ngx_translate_core=__webpack_require__(\"sYmb\"),snack_bar=__webpack_require__(\"dNgK\"),fesm2015_dialog=__webpack_require__(\"0IaG\"),head_bar_component=__webpack_require__(\"mksl\"),fesm2015_button=__webpack_require__(\"bTqV\"),icon=__webpack_require__(\"NFeN\"),menu=__webpack_require__(\"STbY\"),fesm2015_checkbox=__webpack_require__(\"bSwM\"),chips=__webpack_require__(\"A5z7\"),form_field=__webpack_require__(\"kmnG\"),input=__webpack_require__(\"qFsG\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),autofocus_directive=__webpack_require__(\"IZUe\");const _c0=[\"workflowDialog\"];function WorkflowDetailComponent_h2_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"h2\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const ctx_r0=core.lc();core.Gb(1),core.Uc(\" \",core.nc(2,1,ctx_r0.workflow.name),\" \")}}function WorkflowDetailComponent_div_7_th_13_Template(rf,ctx){1&rf&&(core.Zb(0,\"th\",20),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Permissions\")))}function WorkflowDetailComponent_div_7_td_14_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"td\",21),core.Zb(1,\"div\",22),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf){const perm_r17=ctx.$implicit;core.Gb(2),core.Uc(\" \",core.nc(3,1,perm_r17.name),\" \")}}function WorkflowDetailComponent_div_7_ng_container_15_th_1_Template(rf,ctx){if(1&rf){const _r23=core.ac();core.Zb(0,\"th\",25),core.hc(\"click\",(function(){core.Ic(_r23);const state_r18=core.lc().$implicit;return core.lc(2).onClickStateName(state_r18)})),core.Zb(1,\"div\",26),core.Zb(2,\"div\",27),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const state_r18=core.lc().$implicit;core.Gb(3),core.Uc(\" \",core.nc(4,1,state_r18.name),\" \")}}function WorkflowDetailComponent_div_7_ng_container_15_td_2_div_1_Template(rf,ctx){if(1&rf){const _r34=core.ac();core.Zb(0,\"div\",27),core.Zb(1,\"mat-checkbox\",29),core.hc(\"change\",(function($event){core.Ic(_r34);const perm_r25=core.lc().$implicit,state_r18=core.lc().$implicit;return core.lc(2).onToggleStatePerm(state_r18,perm_r25.selector,$event)})),core.Yb(),core.Yb()}if(2&rf){const perm_r25=core.lc().$implicit,state_r18=core.lc().$implicit;core.Gb(1),core.tc(\"checked\",state_r18[perm_r25.selector])}}function WorkflowDetailComponent_div_7_ng_container_15_td_2_div_2_Template(rf,ctx){if(1&rf){const _r40=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"div\",27),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Zb(4,\"div\",30),core.hc(\"click\",(function(){core.Ic(_r40);const perm_r25=core.lc().$implicit,state_r18=core.lc().$implicit;return core.lc(2).onClickInputPerm(perm_r25,state_r18)})),core.Yb(),core.Yb()}if(2&rf){const perm_r25=core.lc().$implicit,state_r18=core.lc().$implicit;core.Gb(2),core.Uc(\" \",core.nc(3,1,state_r18[perm_r25.selector])||\"–\",\" \")}}const _c1=function(a0){return{state:a0}};function WorkflowDetailComponent_div_7_ng_container_15_td_2_div_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",27),core.Zb(1,\"mat-basic-chip\",31),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf){const perm_r25=core.lc().$implicit,state_r18=core.lc().$implicit;core.lc(2);const _r4=core.Ec(11);core.Gb(1),core.tc(\"matMenuTriggerFor\",_r4)(\"matMenuTriggerData\",core.zc(7,_c1,state_r18))(\"disableRipple\",!0)(\"ngClass\",state_r18[perm_r25.selector]),core.Gb(1),core.Uc(\" \",core.nc(3,5,state_r18[perm_r25.selector]),\" \")}}function WorkflowDetailComponent_div_7_ng_container_15_td_2_div_4_div_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\"),core.Sc(1,\" - \"),core.Yb())}function WorkflowDetailComponent_div_7_ng_container_15_td_2_div_4_div_3_div_1_span_3_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\", \"),core.Yb())}function WorkflowDetailComponent_div_7_ng_container_15_td_2_div_4_div_3_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.mc(2,\"translate\"),core.Qc(3,WorkflowDetailComponent_div_7_ng_container_15_td_2_div_4_div_3_div_1_span_3_Template,2,0,\"span\",2),core.Yb()),2&rf){const nextstate_r49=ctx.$implicit,last_r50=ctx.last;core.Gb(1),core.Uc(\" \",core.nc(2,2,nextstate_r49.name),\"\"),core.Gb(2),core.tc(\"ngIf\",!last_r50)}}function WorkflowDetailComponent_div_7_ng_container_15_td_2_div_4_div_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,WorkflowDetailComponent_div_7_ng_container_15_td_2_div_4_div_3_div_1_Template,4,4,\"div\",33),core.Yb()),2&rf){const state_r18=core.lc(3).$implicit;core.Gb(1),core.tc(\"ngForOf\",state_r18.next_states)}}function WorkflowDetailComponent_div_7_ng_container_15_td_2_div_4_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"div\",27),core.Qc(2,WorkflowDetailComponent_div_7_ng_container_15_td_2_div_4_div_2_Template,2,0,\"div\",2),core.Qc(3,WorkflowDetailComponent_div_7_ng_container_15_td_2_div_4_div_3_Template,2,1,\"div\",2),core.Yb(),core.Ub(4,\"div\",32),core.Yb()),2&rf){const state_r18=core.lc(2).$implicit;core.lc(2);const _r6=core.Ec(14);core.Gb(2),core.tc(\"ngIf\",!state_r18.next_states.length),core.Gb(1),core.tc(\"ngIf\",state_r18.next_states.length),core.Gb(1),core.tc(\"matMenuTriggerFor\",_r6)(\"matMenuTriggerData\",core.zc(4,_c1,state_r18))}}function WorkflowDetailComponent_div_7_ng_container_15_td_2_div_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"div\",27),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Ub(4,\"div\",32),core.Yb()),2&rf){const state_r18=core.lc(2).$implicit,ctx_r30=core.lc(2),_r10=core.Ec(20);core.Gb(2),core.Uc(\" \",core.nc(3,3,ctx_r30.getMergeAmendmentLabel(state_r18.merge_amendment_into_final)),\" \"),core.Gb(2),core.tc(\"matMenuTriggerFor\",_r10)(\"matMenuTriggerData\",core.zc(5,_c1,state_r18))}}function WorkflowDetailComponent_div_7_ng_container_15_td_2_div_6_div_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\"),core.Sc(1,\" - \"),core.Yb())}function WorkflowDetailComponent_div_7_ng_container_15_td_2_div_6_div_3_div_1_span_3_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\", \"),core.Yb())}function WorkflowDetailComponent_div_7_ng_container_15_td_2_div_6_div_3_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.mc(2,\"translate\"),core.Qc(3,WorkflowDetailComponent_div_7_ng_container_15_td_2_div_6_div_3_div_1_span_3_Template,2,0,\"span\",2),core.Yb()),2&rf){const restriction_r58=ctx.$implicit,last_r59=ctx.last,ctx_r57=core.lc(6);core.Gb(1),core.Uc(\" \",core.nc(2,2,ctx_r57.getRestrictionLabel(restriction_r58)),\" \"),core.Gb(2),core.tc(\"ngIf\",!last_r59)}}function WorkflowDetailComponent_div_7_ng_container_15_td_2_div_6_div_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,WorkflowDetailComponent_div_7_ng_container_15_td_2_div_6_div_3_div_1_Template,4,4,\"div\",33),core.Yb()),2&rf){const state_r18=core.lc(3).$implicit;core.Gb(1),core.tc(\"ngForOf\",state_r18.restriction)}}function WorkflowDetailComponent_div_7_ng_container_15_td_2_div_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"div\",27),core.Qc(2,WorkflowDetailComponent_div_7_ng_container_15_td_2_div_6_div_2_Template,2,0,\"div\",2),core.Qc(3,WorkflowDetailComponent_div_7_ng_container_15_td_2_div_6_div_3_Template,2,1,\"div\",2),core.Yb(),core.Ub(4,\"div\",32),core.Yb()),2&rf){const state_r18=core.lc(2).$implicit;core.lc(2);const _r8=core.Ec(17);core.Gb(2),core.tc(\"ngIf\",!state_r18.restriction.length),core.Gb(1),core.tc(\"ngIf\",state_r18.restriction.length),core.Gb(1),core.tc(\"matMenuTriggerFor\",_r8)(\"matMenuTriggerData\",core.zc(4,_c1,state_r18))}}function WorkflowDetailComponent_div_7_ng_container_15_td_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"td\",21),core.Qc(1,WorkflowDetailComponent_div_7_ng_container_15_td_2_div_1_Template,2,1,\"div\",28),core.Qc(2,WorkflowDetailComponent_div_7_ng_container_15_td_2_div_2_Template,5,3,\"div\",2),core.Qc(3,WorkflowDetailComponent_div_7_ng_container_15_td_2_div_3_Template,4,9,\"div\",28),core.Qc(4,WorkflowDetailComponent_div_7_ng_container_15_td_2_div_4_Template,5,6,\"div\",2),core.Qc(5,WorkflowDetailComponent_div_7_ng_container_15_td_2_div_5_Template,5,7,\"div\",2),core.Qc(6,WorkflowDetailComponent_div_7_ng_container_15_td_2_div_6_Template,5,6,\"div\",2),core.Yb()),2&rf){const perm_r25=ctx.$implicit;core.Gb(1),core.tc(\"ngIf\",\"check\"===perm_r25.type),core.Gb(1),core.tc(\"ngIf\",\"input\"===perm_r25.type),core.Gb(1),core.tc(\"ngIf\",\"color\"===perm_r25.type),core.Gb(1),core.tc(\"ngIf\",\"state\"===perm_r25.type),core.Gb(1),core.tc(\"ngIf\",\"amendment\"===perm_r25.type),core.Gb(1),core.tc(\"ngIf\",\"restriction\"===perm_r25.type)}}function WorkflowDetailComponent_div_7_ng_container_15_Template(rf,ctx){if(1&rf&&(core.Xb(0,23),core.Qc(1,WorkflowDetailComponent_div_7_ng_container_15_th_1_Template,5,3,\"th\",24),core.Qc(2,WorkflowDetailComponent_div_7_ng_container_15_td_2_Template,7,6,\"td\",16),core.Wb()),2&rf){const state_r18=ctx.$implicit,ctx_r14=core.lc(2);core.tc(\"matColumnDef\",ctx_r14.getColumnDef(state_r18))}}function WorkflowDetailComponent_div_7_tr_16_Template(rf,ctx){1&rf&&core.Ub(0,\"tr\",34)}function WorkflowDetailComponent_div_7_tr_17_Template(rf,ctx){1&rf&&core.Ub(0,\"tr\",35)}function WorkflowDetailComponent_div_7_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"div\",11),core.Zb(2,\"strong\"),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Sc(6,\": \"),core.Zb(7,\"span\"),core.Sc(8),core.mc(9,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(10,\"div\",12),core.Zb(11,\"table\",13),core.Xb(12,14),core.Qc(13,WorkflowDetailComponent_div_7_th_13_Template,3,3,\"th\",15),core.Qc(14,WorkflowDetailComponent_div_7_td_14_Template,4,3,\"td\",16),core.Wb(),core.Qc(15,WorkflowDetailComponent_div_7_ng_container_15_Template,3,1,\"ng-container\",17),core.Qc(16,WorkflowDetailComponent_div_7_tr_16_Template,1,0,\"tr\",18),core.Qc(17,WorkflowDetailComponent_div_7_tr_17_Template,1,0,\"tr\",19),core.Yb(),core.Yb(),core.Yb()),2&rf){const ctx_r1=core.lc();core.Gb(4),core.Tc(core.nc(5,7,\"First state\")),core.Gb(4),core.Tc(core.nc(9,9,ctx_r1.workflow.first_state.name)),core.Gb(3),core.tc(\"dataSource\",ctx_r1.getTableDataSource()),core.Gb(4),core.tc(\"ngForOf\",ctx_r1.workflow.states)(\"ngForTrackBy\",ctx_r1.trackByIndex),core.Gb(1),core.tc(\"matHeaderRowDef\",ctx_r1.headerRowDef),core.Gb(1),core.tc(\"matRowDefColumns\",ctx_r1.headerRowDef)}}const _c2=function(){return{action:\"delete\"}};function WorkflowDetailComponent_ng_template_8_button_19_Template(rf,ctx){1&rf&&(core.Zb(0,\"button\",43),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.tc(\"mat-dialog-close\",core.yc(4,_c2)),core.Gb(2),core.Tc(core.nc(3,2,\"Delete\")))}const _c3=function(a1){return{action:\"update\",value:a1}};function WorkflowDetailComponent_ng_template_8_Template(rf,ctx){if(1&rf){const _r66=core.ac();core.Zb(0,\"h1\",36),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb(),core.Zb(4,\"div\",37),core.Zb(5,\"p\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Zb(8,\"mat-form-field\"),core.Zb(9,\"input\",38),core.hc(\"ngModelChange\",(function($event){return core.Ic(_r66),core.lc().dialogData.value=$event})),core.Yb(),core.Yb(),core.Yb(),core.Zb(10,\"div\",39),core.Zb(11,\"button\",40),core.Zb(12,\"span\"),core.Sc(13),core.mc(14,\"translate\"),core.Yb(),core.Yb(),core.Zb(15,\"button\",41),core.Zb(16,\"span\"),core.Sc(17),core.mc(18,\"translate\"),core.Yb(),core.Yb(),core.Qc(19,WorkflowDetailComponent_ng_template_8_button_19_Template,4,5,\"button\",42),core.Yb()}if(2&rf){const ctx_r3=core.lc();core.Gb(2),core.Tc(core.nc(3,9,ctx_r3.dialogData.title)),core.Gb(4),core.Tc(core.nc(7,11,ctx_r3.dialogData.description)),core.Gb(3),core.tc(\"ngModel\",ctx_r3.dialogData.value),core.Gb(2),core.tc(\"disabled\",\"\"===ctx_r3.dialogData.value&&!ctx_r3.dialogData.allowEmpty)(\"mat-dialog-close\",core.zc(17,_c3,ctx_r3.dialogData.value)),core.Gb(2),core.Tc(core.nc(14,13,\"Save\")),core.Gb(2),core.tc(\"mat-dialog-close\",null),core.Gb(2),core.Tc(core.nc(18,15,\"Cancel\")),core.Gb(2),core.tc(\"ngIf\",ctx_r3.dialogData.deletable)}}function WorkflowDetailComponent_ng_template_12_button_0_mat_icon_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-icon\"),core.Sc(1,\"check\"),core.Yb())}function WorkflowDetailComponent_ng_template_12_button_0_Template(rf,ctx){if(1&rf){const _r73=core.ac();core.Zb(0,\"button\",45),core.hc(\"click\",(function(){core.Ic(_r73);const color_r69=ctx.$implicit,state_r67=core.lc().state;return core.lc().onSelectColor(state_r67,color_r69)})),core.Qc(1,WorkflowDetailComponent_ng_template_12_button_0_mat_icon_1_Template,2,0,\"mat-icon\",2),core.Zb(2,\"span\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const color_r69=ctx.$implicit,state_r67=core.lc().state;core.Gb(1),core.tc(\"ngIf\",color_r69===state_r67.css_class),core.Gb(2),core.Tc(core.nc(4,2,color_r69))}}function WorkflowDetailComponent_ng_template_12_Template(rf,ctx){if(1&rf&&core.Qc(0,WorkflowDetailComponent_ng_template_12_button_0_Template,5,4,\"button\",44),2&rf){const ctx_r5=core.lc();core.tc(\"ngForOf\",ctx_r5.labelColors)}}function WorkflowDetailComponent_ng_template_15_div_0_button_1_mat_icon_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-icon\"),core.Sc(1,\"check\"),core.Yb())}function WorkflowDetailComponent_ng_template_15_div_0_button_1_Template(rf,ctx){if(1&rf){const _r82=core.ac();core.Zb(0,\"button\",45),core.hc(\"click\",(function(){core.Ic(_r82);const nextState_r77=core.lc().$implicit,state_r75=core.lc().state;return core.lc().onSetNextState(nextState_r77,state_r75)})),core.Qc(1,WorkflowDetailComponent_ng_template_15_div_0_button_1_mat_icon_1_Template,2,0,\"mat-icon\",2),core.Zb(2,\"span\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const nextState_r77=core.lc().$implicit,state_r75=core.lc().state;core.Gb(1),core.tc(\"ngIf\",state_r75.next_states_id.includes(nextState_r77.id)),core.Gb(2),core.Tc(core.nc(4,2,nextState_r77.name))}}function WorkflowDetailComponent_ng_template_15_div_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,WorkflowDetailComponent_ng_template_15_div_0_button_1_Template,5,4,\"button\",46),core.Yb()),2&rf){const nextState_r77=ctx.$implicit,state_r75=core.lc().state;core.Gb(1),core.tc(\"ngIf\",nextState_r77.name!==state_r75.name)}}function WorkflowDetailComponent_ng_template_15_Template(rf,ctx){if(1&rf&&core.Qc(0,WorkflowDetailComponent_ng_template_15_div_0_Template,2,1,\"div\",33),2&rf){const ctx_r7=core.lc();core.tc(\"ngForOf\",ctx_r7.workflow.states)}}function WorkflowDetailComponent_ng_template_18_button_0_mat_icon_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-icon\"),core.Sc(1,\"check\"),core.Yb())}function WorkflowDetailComponent_ng_template_18_button_0_Template(rf,ctx){if(1&rf){const _r93=core.ac();core.Zb(0,\"button\",45),core.hc(\"click\",(function(){core.Ic(_r93);const restriction_r89=ctx.$implicit,state_r87=core.lc().state;return core.lc().onSetRestriction(restriction_r89.key,state_r87)})),core.Qc(1,WorkflowDetailComponent_ng_template_18_button_0_mat_icon_1_Template,2,0,\"mat-icon\",2),core.Zb(2,\"span\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const restriction_r89=ctx.$implicit,state_r87=core.lc().state;core.Gb(1),core.tc(\"ngIf\",state_r87.restriction.includes(restriction_r89.key)),core.Gb(2),core.Tc(core.nc(4,2,restriction_r89.label))}}function WorkflowDetailComponent_ng_template_18_Template(rf,ctx){if(1&rf&&core.Qc(0,WorkflowDetailComponent_ng_template_18_button_0_Template,5,4,\"button\",44),2&rf){const ctx_r9=core.lc();core.tc(\"ngForOf\",ctx_r9.restrictions)}}function WorkflowDetailComponent_ng_template_21_div_0_mat_icon_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-icon\"),core.Sc(1,\"check\"),core.Yb())}function WorkflowDetailComponent_ng_template_21_div_0_Template(rf,ctx){if(1&rf){const _r101=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",45),core.hc(\"click\",(function(){core.Ic(_r101);const amendment_r97=ctx.$implicit,state_r95=core.lc().state;return core.lc().setMergeAmendment(amendment_r97.merge,state_r95)})),core.Qc(2,WorkflowDetailComponent_ng_template_21_div_0_mat_icon_2_Template,2,0,\"mat-icon\",2),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const amendment_r97=ctx.$implicit,state_r95=core.lc().state;core.Gb(2),core.tc(\"ngIf\",amendment_r97.merge===state_r95.merge_amendment_into_final),core.Gb(2),core.Tc(core.nc(5,2,amendment_r97.label))}}function WorkflowDetailComponent_ng_template_21_Template(rf,ctx){if(1&rf&&core.Qc(0,WorkflowDetailComponent_ng_template_21_div_0_Template,6,4,\"div\",33),2&rf){const ctx_r11=core.lc();core.tc(\"ngForOf\",ctx_r11.amendmentIntoFinal)}}let workflow_detail_component_WorkflowDetailComponent=(()=>{class WorkflowDetailComponent extends base_view.a{constructor(title,translate,matSnackBar,promptService,dialog,workflowRepo,stateRepo,route,cd){super(title,translate,matSnackBar),this.translate=translate,this.promptService=promptService,this.dialog=dialog,this.workflowRepo=workflowRepo,this.stateRepo=stateRepo,this.route=route,this.cd=cd,this.headerRowDef=[],this.labelColors=[\"grey\",\"red\",\"green\",\"lightblue\",\"yellow\"],this.statePermissionsList=[{name:\"Recommendation label\",selector:\"recommendation_label\",type:\"input\"},{name:\"Allow support\",selector:\"allow_support\",type:\"check\"},{name:\"Allow create poll\",selector:\"allow_create_poll\",type:\"check\"},{name:\"Allow submitter edit\",selector:\"allow_submitter_edit\",type:\"check\"},{name:\"Do not set identifier\",selector:\"dont_set_identifier\",type:\"check\"},{name:\"Show state extension field\",selector:\"show_state_extension_field\",type:\"check\"},{name:\"Show recommendation extension field\",selector:\"show_recommendation_extension_field\",type:\"check\"},{name:\"Show amendment in parent motion\",selector:\"merge_amendment_into_final\",type:\"amendment\"},{name:\"Restrictions\",selector:\"restriction\",type:\"restriction\"},{name:\"Label color\",selector:\"css_class\",type:\"color\"},{name:\"Next states\",selector:\"next_states_id\",type:\"state\"}],this.restrictions=[{key:motions_state.b.motionsCanManage,label:\"Can manage motions\"},{key:motions_state.b.motionsCanSeeInternal,label:\"Can see motions in internal state\"},{key:motions_state.b.motionsCanManageMetadata,label:\"Can manage motion metadata\"},{key:motions_state.b.motionsIsSubmitter,label:\"Submitters\"}],this.amendmentIntoFinal=[{merge:motions_state.a.NO,label:\"No\"},{merge:motions_state.a.UNDEFINED,label:\"-\"},{merge:motions_state.a.YES,label:\"Yes\"}]}ngOnInit(){const paramsId=parseInt(this.route.snapshot.paramMap.get(\"id\"),10);this.subscriptions.push(this.workflowRepo.getViewModelObservable(paramsId).subscribe(newWorkflow=>{newWorkflow&&(this.workflow=newWorkflow,this.updateRowDef(),this.cd.markForCheck())}),this.stateRepo.getViewModelListObservable().pipe(Object(map.a)(states=>states.filter(state=>this.workflow.states_id.includes(state.id)))).subscribe(states=>{states&&this.cd.markForCheck()}))}onClickStateName(state){this.openEditDialog(state.name,\"Rename state\",\"\",!0).subscribe(result=>{if(result)if(this.cd.detectChanges(),\"update\"===result.action)this.stateRepo.update({name:result.value},state).then(()=>{},this.raiseError);else if(\"delete\"===result.action){const content=this.translate.instant(\"Delete\")+` ${state.name}?`;this.promptService.open(\"Are you sure\",content).then(promptResult=>{promptResult&&this.stateRepo.delete(state).then(()=>{},this.raiseError)})}})}onNewStateButton(){this.openEditDialog(\"\",this.translate.instant(\"New state\"),this.translate.instant(\"Name\")).subscribe(result=>{if(result&&\"update\"===result.action){const state=new motions_state.c({name:result.value,workflow_id:this.workflow.id});this.stateRepo.create(state).then(()=>{},this.raiseError)}})}onEditWorkflowButton(){this.openEditDialog(this.workflow.name,\"Edit name\",\"Please enter a new workflow name:\").subscribe(result=>{result&&\"update\"===result.action&&this.workflowRepo.update({name:result.value},this.workflow).then(()=>{},this.raiseError)})}onClickInputPerm(perm,state){this.openEditDialog(state[perm.selector],\"Edit\",perm.name,!1,!0).subscribe(result=>{\"\"===result.value&&(result.value=null),result&&\"update\"===result.action&&this.stateRepo.update({[perm.selector]:result.value},state).then(()=>{},this.raiseError)})}onToggleStatePerm(state,perm,event){this.stateRepo.update({[perm]:event.checked},state).then(()=>{},this.raiseError)}onSelectColor(state,color){this.stateRepo.update({css_class:color},state).then(()=>{},this.raiseError)}onSetNextState(nextState,state){const ids=state.next_states_id.map(id=>id),stateIdIndex=ids.findIndex(id=>id===nextState.id);stateIdIndex<0?ids.push(nextState.id):ids.splice(stateIdIndex,1),this.stateRepo.update({next_states_id:ids},state).then(()=>{},this.raiseError)}onSetRestriction(restriction,state){const restrictions=state.restriction.map(r=>r),restrictionIndex=restrictions.findIndex(r=>r===restriction);restrictionIndex<0?restrictions.push(restriction):restrictions.splice(restrictionIndex,1),this.stateRepo.update({restriction:restrictions},state).then(()=>{},this.raiseError)}getRestrictionLabel(restriction){const entry=this.restrictions.find(r=>r.key===restriction);return entry?entry.label:\"\"}setMergeAmendment(amendment,state){this.stateRepo.update({merge_amendment_into_final:amendment},state).then(()=>{},this.raiseError)}openEditDialog(value,title,description,deletable,allowEmpty){return this.dialogData={title:title||\"\",description:description||\"\",value:value,deletable:deletable,allowEmpty:allowEmpty},this.dialog.open(this.workflowDialog,dialog_settings.a).afterClosed()}getMergeAmendmentLabel(mergeAmendment){return this.amendmentIntoFinal.find(amendment=>amendment.merge===mergeAmendment).label}getTableDataSource(){const dataSource=new table.o;return dataSource.data=this.statePermissionsList,dataSource}updateRowDef(){this.headerRowDef=[\"perm\"],this.workflow&&this.workflow.states.forEach(state=>{this.headerRowDef.push(this.getColumnDef(state))})}getColumnDef(state){return`${state.name}${state.id}`}trackElement(index){return index}}return WorkflowDetailComponent.ɵfac=function(t){return new(t||WorkflowDetailComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(prompt_service.a),core.Tb(fesm2015_dialog.b),core.Tb(workflow_repository_service.a),core.Tb(state_repository_service.a),core.Tb(router.a),core.Tb(core.h))},WorkflowDetailComponent.ɵcmp=core.Nb({type:WorkflowDetailComponent,selectors:[[\"os-workflow-detail\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.Oc(_c0,!0),2&rf&&core.Dc(_t=core.ic())&&(ctx.workflowDialog=_t.first)},features:[core.Db],decls:22,vars:4,consts:[[3,\"nav\",\"hasMainButton\",\"mainEvent\"],[1,\"title-slot\"],[4,\"ngIf\"],[1,\"extra-controls-slot\"],[\"mat-icon-button\",\"\",3,\"click\"],[\"workflowDialog\",\"\"],[\"matMenuContent\",\"\"],[\"colorMenu\",\"matMenu\"],[\"nextStatesMenu\",\"matMenu\"],[\"restrictionMenu\",\"matMenu\"],[\"mergeAmendmentMenu\",\"matMenu\"],[1,\"title-line\"],[1,\"scrollable-matrix\"],[\"mat-table\",\"\",3,\"dataSource\"],[\"matColumnDef\",\"perm\",\"sticky\",\"\"],[\"mat-header-cell\",\"\",\"class\",\"group-head-table-cell\",4,\"matHeaderCellDef\"],[\"mat-cell\",\"\",4,\"matCellDef\"],[3,\"matColumnDef\",4,\"ngFor\",\"ngForOf\",\"ngForTrackBy\"],[\"mat-header-row\",\"\",4,\"matHeaderRowDef\"],[\"mat-row\",\"\",4,\"matRowDef\",\"matRowDefColumns\"],[\"mat-header-cell\",\"\",1,\"group-head-table-cell\"],[\"mat-cell\",\"\"],[1,\"permission-name\"],[3,\"matColumnDef\"],[\"mat-header-cell\",\"\",3,\"click\",4,\"matHeaderCellDef\"],[\"mat-header-cell\",\"\",3,\"click\"],[1,\"clickable-cell\",\"stretch-to-fill-parent\"],[1,\"inner-table\"],[\"class\",\"inner-table\",4,\"ngIf\"],[3,\"checked\",\"change\"],[1,\"clickable-cell\",\"stretch-to-fill-parent\",3,\"click\"],[3,\"matMenuTriggerFor\",\"matMenuTriggerData\",\"disableRipple\",\"ngClass\"],[1,\"clickable-cell\",\"stretch-to-fill-parent\",3,\"matMenuTriggerFor\",\"matMenuTriggerData\"],[4,\"ngFor\",\"ngForOf\"],[\"mat-header-row\",\"\"],[\"mat-row\",\"\"],[\"mat-dialog-title\",\"\"],[\"mat-dialog-content\",\"\",1,\"os-form-card-mobile\"],[\"matInput\",\"\",\"osAutofocus\",\"\",3,\"ngModel\",\"ngModelChange\"],[\"mat-dialog-actions\",\"\"],[\"type\",\"submit\",\"mat-button\",\"\",\"color\",\"accent\",3,\"disabled\",\"mat-dialog-close\"],[\"type\",\"button\",\"mat-button\",\"\",3,\"mat-dialog-close\"],[\"type\",\"button\",\"mat-button\",\"\",\"color\",\"warn\",3,\"mat-dialog-close\",4,\"ngIf\"],[\"type\",\"button\",\"mat-button\",\"\",\"color\",\"warn\",3,\"mat-dialog-close\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"ngFor\",\"ngForOf\"],[\"mat-menu-item\",\"\",3,\"click\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"ngIf\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"os-head-bar\",0),core.hc(\"mainEvent\",(function(){return ctx.onNewStateButton()})),core.Zb(1,\"div\",1),core.Qc(2,WorkflowDetailComponent_h2_2_Template,3,3,\"h2\",2),core.Yb(),core.Zb(3,\"div\",3),core.Zb(4,\"button\",4),core.hc(\"click\",(function(){return ctx.onEditWorkflowButton()})),core.Zb(5,\"mat-icon\"),core.Sc(6,\"edit\"),core.Yb(),core.Yb(),core.Yb(),core.Yb(),core.Qc(7,WorkflowDetailComponent_div_7_Template,18,11,\"div\",2),core.Qc(8,WorkflowDetailComponent_ng_template_8_Template,20,19,\"ng-template\",null,5,core.Rc),core.Zb(10,\"mat-menu\",6,7),core.Qc(12,WorkflowDetailComponent_ng_template_12_Template,1,1,\"ng-template\",6),core.Yb(),core.Zb(13,\"mat-menu\",6,8),core.Qc(15,WorkflowDetailComponent_ng_template_15_Template,1,1,\"ng-template\",6),core.Yb(),core.Zb(16,\"mat-menu\",6,9),core.Qc(18,WorkflowDetailComponent_ng_template_18_Template,1,1,\"ng-template\",6),core.Yb(),core.Zb(19,\"mat-menu\",6,10),core.Qc(21,WorkflowDetailComponent_ng_template_21_Template,1,1,\"ng-template\",6),core.Yb()),2&rf&&(core.tc(\"nav\",!1)(\"hasMainButton\",!0),core.Gb(2),core.tc(\"ngIf\",ctx.workflow),core.Gb(5),core.tc(\"ngIf\",ctx.workflow))},directives:[head_bar_component.a,common.t,fesm2015_button.b,icon.a,menu.f,menu.b,table.n,table.c,table.i,table.b,common.s,table.k,table.m,table.h,table.a,fesm2015_checkbox.a,chips.a,menu.e,common.q,table.j,table.l,fesm2015_dialog.i,fesm2015_dialog.f,form_field.c,input.b,fesm2015_forms.c,autofocus_directive.a,fesm2015_forms.s,fesm2015_forms.v,fesm2015_dialog.c,fesm2015_dialog.d,menu.c],pipes:[ngx_translate_core.j],styles:[\".title-line[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.title-line[_ngcontent-%COMP%]   .icon-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line[_ngcontent-%COMP%]   .favorite-star[_ngcontent-%COMP%]{padding-right:3px}.mat-table[_ngcontent-%COMP%]{width:100%}.mat-table[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{display:none}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{z-index:2}.mat-table[_ngcontent-%COMP%]   .mat-table-sticky[_ngcontent-%COMP%]{z-index:3!important}.title-line[_ngcontent-%COMP%]{margin:20px 25px}table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{min-width:200px;position:relative}table[_ngcontent-%COMP%]   .clickable-cell[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;cursor:pointer}table[_ngcontent-%COMP%]   .clickable-cell[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.025)}table[_ngcontent-%COMP%]   .inner-table[_ngcontent-%COMP%]{text-align:center;-ms-flex-align:center;align-items:center;margin:auto;overflow:hidden;padding:0 10px}table[_ngcontent-%COMP%]   .mat-column-perm[_ngcontent-%COMP%]{min-width:150px}table[_ngcontent-%COMP%]   .mat-column-perm[_ngcontent-%COMP%]   .permission-name[_ngcontent-%COMP%]{margin-right:10px}.mat-chip[_ngcontent-%COMP%]:hover{cursor:pointer}.scrollable-matrix[_ngcontent-%COMP%]{overflow-y:scroll;overflow-x:auto;height:calc(100vh - 128px)}\"],changeDetection:0}),WorkflowDetailComponent})();var tslib_es6=__webpack_require__(\"mrSG\"),storage_service=__webpack_require__(\"AqIO\"),workflow=__webpack_require__(\"hsNs\"),base_list_view=__webpack_require__(\"wL0i\"),list_view_table_component=__webpack_require__(\"0Obk\"),pebula_ngrid=__webpack_require__(\"dRZP\");function WorkflowListComponent_div_6_a_1_Template(rf,ctx){if(1&rf&&core.Ub(0,\"a\",7),2&rf){const workflow_r5=core.lc().row;core.tc(\"routerLink\",workflow_r5.id)}}function WorkflowListComponent_div_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",5),core.Qc(1,WorkflowListComponent_div_6_a_1_Template,1,1,\"a\",6),core.Zb(2,\"div\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb()),2&rf){const name_r4=ctx.value,ctx_r0=core.lc();core.Gb(1),core.tc(\"ngIf\",!ctx_r0.isMultiSelect),core.Gb(2),core.Tc(core.nc(4,2,name_r4))}}function WorkflowListComponent_div_7_Template(rf,ctx){if(1&rf){const _r11=core.ac();core.Zb(0,\"div\",5),core.Zb(1,\"button\",8),core.hc(\"click\",(function(){core.Ic(_r11);const workflow_r9=ctx.row;return core.lc().onDeleteWorkflow(workflow_r9)})),core.Zb(2,\"mat-icon\",9),core.Sc(3,\"delete\"),core.Yb(),core.Yb(),core.Yb()}}function WorkflowListComponent_ng_template_8_Template(rf,ctx){if(1&rf){const _r13=core.ac();core.Zb(0,\"h1\",10),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb(),core.Zb(4,\"div\",11),core.Zb(5,\"p\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Zb(8,\"mat-form-field\"),core.Zb(9,\"input\",12),core.hc(\"ngModelChange\",(function($event){return core.Ic(_r13),core.lc().newWorkflowTitle=$event})),core.Yb(),core.Yb(),core.Yb(),core.Zb(10,\"div\",13),core.Zb(11,\"button\",14),core.Zb(12,\"span\"),core.Sc(13),core.mc(14,\"translate\"),core.Yb(),core.Yb(),core.Zb(15,\"button\",15),core.Zb(16,\"span\"),core.Sc(17),core.mc(18,\"translate\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r3=core.lc();core.Gb(2),core.Tc(core.nc(3,8,\"New workflow\")),core.Gb(4),core.Tc(core.nc(7,10,\"Please enter a name for the new workflow:\")),core.Gb(3),core.tc(\"ngModel\",ctx_r3.newWorkflowTitle),core.Gb(2),core.tc(\"disabled\",\"\"===ctx_r3.newWorkflowTitle)(\"mat-dialog-close\",ctx_r3.newWorkflowTitle),core.Gb(2),core.Tc(core.nc(14,12,\"Save\")),core.Gb(2),core.tc(\"mat-dialog-close\",null),core.Gb(2),core.Tc(core.nc(18,14,\"Cancel\"))}}const workflow_list_component_c0=function(){return[\"menu\"]},routes=[{path:\"\",component:(()=>{class WorkflowListComponent extends base_list_view.a{constructor(titleService,translate,matSnackBar,storage,dialog,workflowRepo,promptService){super(titleService,translate,matSnackBar,storage),this.translate=translate,this.dialog=dialog,this.workflowRepo=workflowRepo,this.promptService=promptService,this.tableColumnDefinition=[{prop:\"name\",width:\"auto\"},{prop:\"delete\"}],this.filterProps=[\"name\",\"states\"]}ngOnInit(){super.setTitle(\"Workflows\")}onNewButton(templateRef){this.newWorkflowTitle=\"\",this.dialog.open(templateRef,dialog_settings.a).afterClosed().subscribe(result=>{result&&this.workflowRepo.create(new workflow.a({name:result})).then(()=>{},this.raiseError)})}onDeleteWorkflow(selected){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to delete this workflow?\"),content=selected.getTitle();(yield this.promptService.open(title,content))&&this.workflowRepo.delete(selected).then(()=>{},this.raiseError)}))}}return WorkflowListComponent.ɵfac=function(t){return new(t||WorkflowListComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(storage_service.a),core.Tb(fesm2015_dialog.b),core.Tb(workflow_repository_service.a),core.Tb(prompt_service.a))},WorkflowListComponent.ɵcmp=core.Nb({type:WorkflowListComponent,selectors:[[\"os-workflow-list\"]],features:[core.Db],decls:10,vars:14,consts:[[\"prevUrl\",\"../..\",3,\"nav\",\"hasMainButton\",\"mainEvent\"],[1,\"title-slot\"],[\"listStorageKey\",\"workflow\",3,\"listObservableProvider\",\"columns\",\"allowProjector\",\"hiddenInMobile\",\"showListOfSpeakers\",\"filterProps\",\"dataSourceChange\"],[\"class\",\"cell-slot fill\",4,\"pblNgridCellDef\"],[\"newWorkflowDialog\",\"\"],[1,\"cell-slot\",\"fill\"],[\"class\",\"detail-link\",3,\"routerLink\",4,\"ngIf\"],[1,\"detail-link\",3,\"routerLink\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"click\"],[\"color\",\"warn\"],[\"mat-dialog-title\",\"\"],[\"mat-dialog-content\",\"\"],[\"matInput\",\"\",\"osAutofocus\",\"\",\"required\",\"\",3,\"ngModel\",\"ngModelChange\"],[\"mat-dialog-actions\",\"\"],[\"type\",\"submit\",\"mat-button\",\"\",\"color\",\"accent\",3,\"disabled\",\"mat-dialog-close\"],[\"type\",\"button\",\"mat-button\",\"\",3,\"mat-dialog-close\"]],template:function(rf,ctx){if(1&rf){const _r14=core.ac();core.Zb(0,\"os-head-bar\",0),core.hc(\"mainEvent\",(function(){core.Ic(_r14);const _r2=core.Ec(9);return ctx.onNewButton(_r2)})),core.Zb(1,\"div\",1),core.Zb(2,\"h2\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(5,\"os-list-view-table\",2),core.hc(\"dataSourceChange\",(function($event){return ctx.onDataSourceChange($event)})),core.Qc(6,WorkflowListComponent_div_6_Template,5,4,\"div\",3),core.Qc(7,WorkflowListComponent_div_7_Template,4,0,\"div\",3),core.Yb(),core.Qc(8,WorkflowListComponent_ng_template_8_Template,19,16,\"ng-template\",null,4,core.Rc)}2&rf&&(core.tc(\"nav\",!1)(\"hasMainButton\",!0),core.Gb(3),core.Tc(core.nc(4,11,\"Workflows\")),core.Gb(2),core.tc(\"listObservableProvider\",ctx.workflowRepo)(\"columns\",ctx.tableColumnDefinition)(\"allowProjector\",!1)(\"hiddenInMobile\",core.yc(13,workflow_list_component_c0))(\"showListOfSpeakers\",!1)(\"filterProps\",ctx.filterProps),core.Gb(1),core.tc(\"pblNgridCellDef\",\"name\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"delete\"))},directives:[head_bar_component.a,list_view_table_component.a,pebula_ngrid.c,common.t,router.i,fesm2015_button.b,icon.a,fesm2015_dialog.i,fesm2015_dialog.f,form_field.c,input.b,fesm2015_forms.c,autofocus_directive.a,fesm2015_forms.D,fesm2015_forms.s,fesm2015_forms.v,fesm2015_dialog.c,fesm2015_dialog.d],pipes:[ngx_translate_core.j],styles:[\"\"]}),WorkflowListComponent})(),pathMatch:\"full\"},{path:\":id\",component:workflow_detail_component_WorkflowDetailComponent}];let motion_workflow_routing_module_MotionWorkflowRoutingModule=(()=>{class MotionWorkflowRoutingModule{}return MotionWorkflowRoutingModule.ɵmod=core.Rb({type:MotionWorkflowRoutingModule}),MotionWorkflowRoutingModule.ɵinj=core.Qb({factory:function(t){return new(t||MotionWorkflowRoutingModule)},imports:[[router.j.forChild(routes)],router.j]}),MotionWorkflowRoutingModule})(),motion_workflow_module_MotionWorkflowModule=(()=>{class MotionWorkflowModule{}return MotionWorkflowModule.ɵmod=core.Rb({type:MotionWorkflowModule}),MotionWorkflowModule.ɵinj=core.Qb({factory:function(t){return new(t||MotionWorkflowModule)},imports:[[common.c,motion_workflow_routing_module_MotionWorkflowRoutingModule,shared_module.a]]}),MotionWorkflowModule})()},wL0i:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return BaseListViewComponent}));var _base_view__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mV3u\");class BaseListViewComponent extends _base_view__WEBPACK_IMPORTED_MODULE_0__.a{constructor(titleService,translate,matSnackBar,storage){super(titleService,translate,matSnackBar),this.storage=storage,this.canMultiSelect=!1,this._multiSelectMode=!1,this.singleButtonWidth=\"40px\",this.badgeButtonWidth=\"45px\",this.selectedRows=[]}onDataSourceChange(newDataSource){this.dataSource=newDataSource}toggleMultiSelect(){!this.canMultiSelect||this.isMultiSelect?(this._multiSelectMode=!1,this.deselectAll()):this._multiSelectMode=!0}selectAll(){this.dataSource.selection.select(...this.dataSource.filteredData)}deselectAll(){this.dataSource&&this.dataSource.selection.clear()}get isMultiSelect(){return this._multiSelectMode}}}}]);","extractedComments":[]}