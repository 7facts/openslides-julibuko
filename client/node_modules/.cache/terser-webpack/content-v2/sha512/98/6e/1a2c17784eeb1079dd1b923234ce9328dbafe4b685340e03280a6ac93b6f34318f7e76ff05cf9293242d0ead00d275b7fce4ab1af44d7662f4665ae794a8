{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[22,36],{\"68w7\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"CategoryModule\",(function(){return category_module_CategoryModule}));var common=__webpack_require__(\"ofXK\"),shared_module=__webpack_require__(\"PCNd\"),router=__webpack_require__(\"tyNb\"),watch_for_changes_guard=__webpack_require__(\"+QJK\"),tslib_es6=__webpack_require__(\"mrSG\"),category_repository_service=__webpack_require__(\"iTQr\"),prompt_service=__webpack_require__(\"F48D\"),sorting_tree_component=__webpack_require__(\"/tkw\"),base_view=__webpack_require__(\"mV3u\"),core=__webpack_require__(\"fXoL\"),platform_browser=__webpack_require__(\"jhN1\"),ngx_translate_core=__webpack_require__(\"sYmb\"),snack_bar=__webpack_require__(\"dNgK\"),head_bar_component=__webpack_require__(\"mksl\"),card=__webpack_require__(\"Wp6s\");const _c0=[\"osSortedTree\"];function CategoriesSortComponent_ng_template_8_Template(rf,ctx){1&rf&&core.Sc(0),2&rf&&core.Uc(\" \",ctx.item.getTitle(),\" \")}let categories_sort_component_CategoriesSortComponent=(()=>{class CategoriesSortComponent extends base_view.a{constructor(title,translate,matSnackBar,categoryRepo,promptService){super(title,translate,matSnackBar),this.categoryRepo=categoryRepo,this.promptService=promptService,this.hasChanged=!1,this.categoriesObservable=this.categoryRepo.getViewModelListObservable()}onSave(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){yield this.categoryRepo.sortCategories(this.osSortTree.getTreeData()).then(()=>this.osSortTree.setSubscription(),this.raiseError)}))}onCancel(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){(yield this.canDeactivate())&&this.osSortTree.setSubscription()}))}receiveChanges(hasChanged){this.hasChanged=hasChanged}canDeactivate(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){if(this.hasChanged){const title=this.translate.instant(\"Do you really want to exit this page?\"),content=this.translate.instant(\"You made changes.\");return yield this.promptService.open(title,content)}return!0}))}}return CategoriesSortComponent.ɵfac=function(t){return new(t||CategoriesSortComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(category_repository_service.a),core.Tb(prompt_service.a))},CategoriesSortComponent.ɵcmp=core.Nb({type:CategoriesSortComponent,selectors:[[\"os-categories-sort\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.Oc(_c0,!0),2&rf&&core.Dc(_t=core.ic())&&(ctx.osSortTree=_t.first)},features:[core.Db],decls:10,vars:6,consts:[[3,\"editMode\",\"nav\",\"saveEvent\",\"mainEvent\"],[1,\"title-slot\"],[\"parentKey\",\"parent_id\",\"weightKey\",\"weight\",3,\"model\",\"hasChanged\"],[\"osSortedTree\",\"\"],[\"innerNode\",\"\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"os-head-bar\",0),core.hc(\"saveEvent\",(function(){return ctx.onSave()}))(\"mainEvent\",(function(){return ctx.onCancel()})),core.Zb(1,\"div\",1),core.Zb(2,\"h2\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(5,\"mat-card\"),core.Zb(6,\"os-sorting-tree\",2,3),core.hc(\"hasChanged\",(function($event){return ctx.receiveChanges($event)})),core.Qc(8,CategoriesSortComponent_ng_template_8_Template,1,1,\"ng-template\",null,4,core.Rc),core.Yb(),core.Yb()),2&rf&&(core.tc(\"editMode\",ctx.hasChanged)(\"nav\",!1),core.Gb(3),core.Tc(core.nc(4,4,\"Sort categories\")),core.Gb(3),core.tc(\"model\",ctx.categoriesObservable))},directives:[head_bar_component.a,card.a,sorting_tree_component.a],pipes:[ngx_translate_core.j],styles:[\".line[_ngcontent-%COMP%]{display:table;width:100%;font-size:14px;min-height:50px;margin-bottom:5px}.line[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{max-width:100%}.line[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .line[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.line[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{padding-right:10px;width:auto;white-space:nowrap}\"]}),CategoriesSortComponent})();var fesm2015_forms=__webpack_require__(\"3Pt+\"),table=__webpack_require__(\"+0xr\"),operator_service=__webpack_require__(\"OwvW\"),motion_repository_service=__webpack_require__(\"dOok\"),dialog_settings=__webpack_require__(\"Izkr\"),fesm2015_dialog=__webpack_require__(\"0IaG\"),perms_directive=__webpack_require__(\"3Xi6\"),menu=__webpack_require__(\"STbY\"),icon=__webpack_require__(\"NFeN\"),divider=__webpack_require__(\"f0Cb\"),fesm2015_button=__webpack_require__(\"bTqV\"),chips=__webpack_require__(\"A5z7\"),form_field=__webpack_require__(\"kmnG\"),input=__webpack_require__(\"qFsG\"),autofocus_directive=__webpack_require__(\"IZUe\");const category_detail_component_c0=[\"editForm\"],_c1=[\"editDialog\"];function CategoryDetailComponent_h2_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"h2\"),core.Sc(1),core.Yb()),2&rf){const ctx_r0=core.lc();core.Gb(1),core.Uc(\" \",ctx_r0.selectedCategory.prefixedName,\" \")}}function CategoryDetailComponent_div_4_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"button\",11),core.Zb(2,\"mat-icon\"),core.Sc(3,\"more_vert\"),core.Yb(),core.Yb(),core.Yb()),2&rf){core.lc();const _r3=core.Ec(8);core.Gb(1),core.tc(\"matMenuTriggerFor\",_r3)}}function CategoryDetailComponent_div_6_mat_header_cell_7_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-header-cell\"),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(2),core.Tc(core.nc(3,1,\"Motion\")))}function CategoryDetailComponent_div_6_mat_cell_8_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-cell\"),core.Sc(1),core.Yb()),2&rf){const motion_r17=ctx.$implicit;core.Gb(1),core.Uc(\" \",motion_r17.getTitle(),\" \")}}function CategoryDetailComponent_div_6_mat_header_cell_10_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-header-cell\"),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(2),core.Tc(core.nc(3,1,\"State\")))}function CategoryDetailComponent_div_6_mat_cell_11_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-cell\",22),core.Zb(1,\"mat-basic-chip\",23),core.Sc(2),core.Yb(),core.Yb()),2&rf){const motion_r18=ctx.$implicit,ctx_r10=core.lc(2);core.Gb(1),core.tc(\"ngClass\",motion_r18.stateCssColor),core.Gb(1),core.Uc(\" \",ctx_r10.getStateLabel(motion_r18),\" \")}}function CategoryDetailComponent_div_6_mat_header_cell_13_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-header-cell\"),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(2),core.Tc(core.nc(3,1,\"Recommendation\")))}function CategoryDetailComponent_div_6_mat_cell_14_mat_basic_chip_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-basic-chip\",25),core.Sc(1),core.Yb()),2&rf){const motion_r19=core.lc().$implicit,ctx_r20=core.lc(2);core.Gb(1),core.Uc(\" \",ctx_r20.getRecommendationLabel(motion_r19),\" \")}}function CategoryDetailComponent_div_6_mat_cell_14_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-cell\",22),core.Qc(1,CategoryDetailComponent_div_6_mat_cell_14_mat_basic_chip_1_Template,2,1,\"mat-basic-chip\",24),core.Yb()),2&rf){const motion_r19=ctx.$implicit;core.Gb(1),core.tc(\"ngIf\",motion_r19.recommendation)}}function CategoryDetailComponent_div_6_mat_header_cell_16_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-header-cell\")}const _c2=function(){return{back:\"true\"}};function CategoryDetailComponent_div_6_mat_cell_17_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-cell\"),core.Ub(1,\"a\",26),core.Yb()),2&rf){const motion_r22=ctx.$implicit;core.Gb(1),core.tc(\"routerLink\",motion_r22.getDetailStateURL())(\"state\",core.yc(2,_c2))}}function CategoryDetailComponent_div_6_mat_header_row_18_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-header-row\")}function CategoryDetailComponent_div_6_mat_row_19_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-row\")}function CategoryDetailComponent_div_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"h2\"),core.Zb(2,\"span\"),core.Sc(3),core.Yb(),core.Sc(4),core.Yb(),core.Zb(5,\"table\",12),core.Xb(6,13),core.Qc(7,CategoryDetailComponent_div_6_mat_header_cell_7_Template,4,3,\"mat-header-cell\",14),core.Qc(8,CategoryDetailComponent_div_6_mat_cell_8_Template,2,1,\"mat-cell\",15),core.Wb(),core.Xb(9,16),core.Qc(10,CategoryDetailComponent_div_6_mat_header_cell_10_Template,4,3,\"mat-header-cell\",14),core.Qc(11,CategoryDetailComponent_div_6_mat_cell_11_Template,3,2,\"mat-cell\",17),core.Wb(),core.Xb(12,18),core.Qc(13,CategoryDetailComponent_div_6_mat_header_cell_13_Template,4,3,\"mat-header-cell\",14),core.Qc(14,CategoryDetailComponent_div_6_mat_cell_14_Template,2,1,\"mat-cell\",17),core.Wb(),core.Xb(15,19),core.Qc(16,CategoryDetailComponent_div_6_mat_header_cell_16_Template,1,0,\"mat-header-cell\",14),core.Qc(17,CategoryDetailComponent_div_6_mat_cell_17_Template,2,3,\"mat-cell\",15),core.Wb(),core.Qc(18,CategoryDetailComponent_div_6_mat_header_row_18_Template,1,0,\"mat-header-row\",20),core.Qc(19,CategoryDetailComponent_div_6_mat_row_19_Template,1,0,\"mat-row\",21),core.Yb(),core.Yb()),2&rf){const category_r6=ctx.$implicit,ctx_r2=core.lc();core.Gb(3),core.Tc(ctx_r2.getLevelDashes(category_r6)),core.Gb(1),core.Uc(\" \",category_r6.prefixedName,\" \"),core.Gb(1),core.tc(\"dataSource\",ctx_r2.dataSources[category_r6.id]),core.Gb(13),core.tc(\"matHeaderRowDef\",ctx_r2.getColumnDefinition()),core.Gb(1),core.tc(\"matRowDefColumns\",ctx_r2.getColumnDefinition())}}function CategoryDetailComponent_ng_template_34_Template(rf,ctx){if(1&rf){const _r25=core.ac();core.Zb(0,\"h1\",27),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb(),core.Zb(4,\"div\",28),core.Zb(5,\"form\",29),core.hc(\"ngSubmit\",(function(){return core.Ic(_r25),core.lc().save()}))(\"keydown\",(function($event){return core.Ic(_r25),core.lc().onKeyDown($event)})),core.Zb(6,\"mat-form-field\"),core.Ub(7,\"input\",30),core.mc(8,\"translate\"),core.Yb(),core.Zb(9,\"mat-form-field\"),core.Ub(10,\"input\",31),core.mc(11,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(12,\"div\",32),core.Zb(13,\"button\",33),core.hc(\"click\",(function(){return core.Ic(_r25),core.lc().save()})),core.Zb(14,\"span\"),core.Sc(15),core.mc(16,\"translate\"),core.Yb(),core.Yb(),core.Zb(17,\"button\",34),core.Zb(18,\"span\"),core.Sc(19),core.mc(20,\"translate\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r5=core.lc();core.Gb(2),core.Vc(\"\",core.nc(3,9,\"Edit details for\"),\" \",ctx_r5.selectedCategory.prefixedName,\"\"),core.Gb(3),core.tc(\"formGroup\",ctx_r5.editForm),core.Gb(2),core.uc(\"placeholder\",core.nc(8,11,\"Prefix\")),core.Gb(3),core.uc(\"placeholder\",core.nc(11,13,\"Name\")),core.Gb(3),core.tc(\"disabled\",!ctx_r5.editForm.valid),core.Gb(2),core.Tc(core.nc(16,15,\"Save\")),core.Gb(2),core.tc(\"mat-dialog-close\",null),core.Gb(2),core.Tc(core.nc(20,17,\"Cancel\"))}}let category_detail_component_CategoryDetailComponent=(()=>{class CategoryDetailComponent extends base_view.a{constructor(titleService,translate,matSnackBar,route,operator,router,repo,motionRepo,promptService,fb,dialog){super(titleService,translate,matSnackBar),this.translate=translate,this.route=route,this.operator=operator,this.router=router,this.repo=repo,this.motionRepo=motionRepo,this.promptService=promptService,this.fb=fb,this.dialog=dialog,this.dataSources={}}get canEdit(){return this.operator.hasPerms(operator_service.b.motionsCanManage)}ngOnInit(){const selectedCategoryId=parseInt(this.route.snapshot.params.id,10);this.subscriptions.push(this.repo.getViewModelListObservable().subscribe(categories=>{const selectedCategoryIndex=categories.findIndex(category=>category.id===selectedCategoryId);if(selectedCategoryIndex<0)return;let lastChildIndex;for(this.selectedCategory=categories[selectedCategoryIndex],super.setTitle(this.selectedCategory.prefixedName),lastChildIndex=selectedCategoryIndex+1;lastChildIndex<categories.length&&categories[lastChildIndex].level>this.selectedCategory.level;lastChildIndex++);this.categories=categories.slice(selectedCategoryIndex,lastChildIndex),this.categories.forEach(category=>{const dataSource=new table.o;dataSource.data=category.motions,this.dataSources[category.id]=dataSource})}))}getColumnDefinition(){return[\"title\",\"state\",\"recommendation\",\"anchor\"]}onDeleteButton(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to delete this category and all subcategories?\"),content=this.selectedCategory.prefixedName;(yield this.promptService.open(title,content))&&(yield this.repo.delete(this.selectedCategory),this.router.navigate([\"../\"],{relativeTo:this.route}))}))}onKeyDown(event){\"Escape\"===event.key&&this.dialogRef.close(),\"Enter\"===event.key&&this.save()}save(){this.repo.update(this.editForm.value,this.selectedCategory).then(()=>this.dialogRef.close()).catch(this.raiseError)}toggleEditMode(){this.editForm=this.fb.group({prefix:[this.selectedCategory.prefix],name:[this.selectedCategory.name,fesm2015_forms.G.required]}),this.dialogRef=this.dialog.open(this.editDialog,dialog_settings.a)}getRecommendationLabel(motion){return this.motionRepo.getExtendedRecommendationLabel(motion)}getStateLabel(motion){return this.motionRepo.getExtendedStateLabel(motion)}getLevelDashes(category){return\"–\".repeat(category.level-this.selectedCategory.level)}numberMotions(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to renumber all motions of this category?\"),content=this.selectedCategory.getTitle();(yield this.promptService.open(title,content))&&(yield this.repo.numberMotionsInCategory(this.selectedCategory).catch(this.raiseError))}))}}return CategoryDetailComponent.ɵfac=function(t){return new(t||CategoryDetailComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(router.a),core.Tb(operator_service.a),core.Tb(router.f),core.Tb(category_repository_service.a),core.Tb(motion_repository_service.a),core.Tb(prompt_service.a),core.Tb(fesm2015_forms.f),core.Tb(fesm2015_dialog.b))},CategoryDetailComponent.ɵcmp=core.Nb({type:CategoryDetailComponent,selectors:[[\"os-category-detail\"]],viewQuery:function(rf,ctx){var _t;1&rf&&(core.Oc(category_detail_component_c0,!0),core.Oc(_c1,!0)),2&rf&&(core.Dc(_t=core.ic())&&(ctx.editForm=_t.first),core.Dc(_t=core.ic())&&(ctx.editDialog=_t.first))},features:[core.Db],decls:36,vars:17,consts:[[3,\"nav\"],[1,\"title-slot\"],[4,\"ngIf\"],[1,\"menu-slot\"],[4,\"osPerms\"],[4,\"ngFor\",\"ngForOf\"],[\"categoryMenu\",\"matMenu\"],[\"mat-menu-item\",\"\",3,\"click\"],[\"mat-menu-item\",\"\",3,\"routerLink\"],[\"mat-menu-item\",\"\",1,\"red-warning-text\",3,\"click\"],[\"editDialog\",\"\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"matMenuTriggerFor\"],[\"mat-table\",\"\",1,\"os-headed-listview-table\",3,\"dataSource\"],[\"matColumnDef\",\"title\"],[4,\"matHeaderCellDef\"],[4,\"matCellDef\"],[\"matColumnDef\",\"state\"],[\"class\",\"chip-container\",4,\"matCellDef\"],[\"matColumnDef\",\"recommendation\"],[\"matColumnDef\",\"anchor\"],[4,\"matHeaderRowDef\"],[4,\"matRowDef\",\"matRowDefColumns\"],[1,\"chip-container\"],[\"disableRipple\",\"\",3,\"ngClass\"],[\"disableRipple\",\"\",\"class\",\"bluegrey\",4,\"ngIf\"],[\"disableRipple\",\"\",1,\"bluegrey\"],[3,\"routerLink\",\"state\"],[\"mat-dialog-title\",\"\"],[\"mat-dialog-content\",\"\",1,\"os-form-card-mobile\"],[1,\"edit-form\",3,\"formGroup\",\"ngSubmit\",\"keydown\"],[\"matInput\",\"\",\"osAutofocus\",\"\",\"formControlName\",\"prefix\",3,\"placeholder\"],[\"matInput\",\"\",\"osAutofocus\",\"\",\"formControlName\",\"name\",\"required\",\"\",3,\"placeholder\"],[\"mat-dialog-actions\",\"\"],[\"type\",\"submit\",\"mat-button\",\"\",\"color\",\"accent\",3,\"disabled\",\"click\"],[\"type\",\"button\",\"mat-button\",\"\",3,\"mat-dialog-close\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"os-head-bar\",0),core.Zb(1,\"div\",1),core.Qc(2,CategoryDetailComponent_h2_2_Template,2,1,\"h2\",2),core.Yb(),core.Zb(3,\"div\",3),core.Qc(4,CategoryDetailComponent_div_4_Template,4,1,\"div\",4),core.Yb(),core.Yb(),core.Zb(5,\"mat-card\"),core.Qc(6,CategoryDetailComponent_div_6_Template,20,5,\"div\",5),core.Yb(),core.Zb(7,\"mat-menu\",null,6),core.Zb(9,\"button\",7),core.hc(\"click\",(function(){return ctx.toggleEditMode()})),core.Zb(10,\"mat-icon\"),core.Sc(11,\"edit\"),core.Yb(),core.Zb(12,\"span\"),core.Sc(13),core.mc(14,\"translate\"),core.Yb(),core.Yb(),core.Zb(15,\"button\",8),core.Zb(16,\"mat-icon\"),core.Sc(17,\"sort\"),core.Yb(),core.Zb(18,\"span\"),core.Sc(19),core.mc(20,\"translate\"),core.Yb(),core.Yb(),core.Zb(21,\"button\",7),core.hc(\"click\",(function(){return ctx.numberMotions()})),core.Zb(22,\"mat-icon\"),core.Sc(23,\"format_list_numbered\"),core.Yb(),core.Zb(24,\"span\"),core.Sc(25),core.mc(26,\"translate\"),core.Yb(),core.Yb(),core.Ub(27,\"mat-divider\"),core.Zb(28,\"button\",9),core.hc(\"click\",(function(){return ctx.onDeleteButton()})),core.Zb(29,\"mat-icon\"),core.Sc(30,\"delete\"),core.Yb(),core.Zb(31,\"span\"),core.Sc(32),core.mc(33,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Qc(34,CategoryDetailComponent_ng_template_34_Template,21,19,\"ng-template\",null,10,core.Rc)),2&rf&&(core.tc(\"nav\",!1),core.Gb(2),core.tc(\"ngIf\",ctx.selectedCategory),core.Gb(2),core.tc(\"osPerms\",\"motions.can_manage\"),core.Gb(2),core.tc(\"ngForOf\",ctx.categories),core.Gb(7),core.Tc(core.nc(14,9,\"Edit\")),core.Gb(2),core.tc(\"routerLink\",\"./sort\"),core.Gb(4),core.Tc(core.nc(20,11,\"Sort motions\")),core.Gb(6),core.Tc(core.nc(26,13,\"Number motions\")),core.Gb(7),core.Tc(core.nc(33,15,\"Delete\")))},directives:[head_bar_component.a,common.t,perms_directive.a,card.a,common.s,menu.f,menu.c,icon.a,router.g,divider.a,fesm2015_button.b,menu.e,table.n,table.c,table.i,table.b,table.k,table.m,table.h,table.a,chips.a,common.q,router.i,table.j,table.l,fesm2015_dialog.i,fesm2015_dialog.f,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,form_field.c,input.b,fesm2015_forms.c,autofocus_directive.a,fesm2015_forms.s,fesm2015_forms.i,fesm2015_forms.D,fesm2015_dialog.c,fesm2015_dialog.d],pipes:[ngx_translate_core.j],styles:[\".title-line[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.title-line[_ngcontent-%COMP%]   .icon-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line[_ngcontent-%COMP%]   .favorite-star[_ngcontent-%COMP%]{padding-right:3px}.mat-table[_ngcontent-%COMP%]{width:100%}.mat-table[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{display:none}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{z-index:2}.mat-table[_ngcontent-%COMP%]   .mat-table-sticky[_ngcontent-%COMP%]{z-index:3!important}.block-title[_ngcontent-%COMP%]{padding:40px 40px 40px 25px;line-height:180%;font-size:120%;color:#317796}.block-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:400}.block-card[_ngcontent-%COMP%]{margin:0 20px;padding:25px}.block-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:5px}.chip-container[_ngcontent-%COMP%]{display:block;min-height:0}.os-headed-listview-table[_ngcontent-%COMP%]   .mat-column-title[_ngcontent-%COMP%]{-ms-flex:4 0 0px;flex:4 0 0}.os-headed-listview-table[_ngcontent-%COMP%]   .mat-column-recommendation[_ngcontent-%COMP%], .os-headed-listview-table[_ngcontent-%COMP%]   .mat-column-state[_ngcontent-%COMP%]{-ms-flex:2 0 0px;flex:2 0 0}.os-headed-listview-table[_ngcontent-%COMP%]   .mat-column-remove[_ngcontent-%COMP%]{-ms-flex:1 0 0px;flex:1 0 0;-ms-flex-pack:end!important;justify-content:flex-end!important}.edit-form[_ngcontent-%COMP%]{overflow:hidden}\"]}),CategoryDetailComponent})();var storage_service=__webpack_require__(\"AqIO\"),base_list_view=__webpack_require__(\"wL0i\"),list_view_table_component=__webpack_require__(\"0Obk\"),pebula_ngrid=__webpack_require__(\"dRZP\"),tooltip=__webpack_require__(\"Qu3c\");const category_list_component_c0=[\"newCategoryDialog\"];function CategoryListComponent_div_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",8),core.Zb(1,\"button\",9),core.Zb(2,\"mat-icon\"),core.Sc(3,\"more_vert\"),core.Yb(),core.Yb(),core.Yb()),2&rf){core.lc();const _r3=core.Ec(10);core.Gb(1),core.tc(\"matMenuTriggerFor\",_r3)}}function CategoryListComponent_div_7_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",10),core.Ub(1,\"a\",11),core.Zb(2,\"div\"),core.Sc(3),core.Yb(),core.Yb()),2&rf){const category_r6=ctx.row,ctx_r1=core.lc();core.Gb(1),core.tc(\"routerLink\",category_r6.id),core.Gb(1),core.Pc(\"margin-left\",ctx_r1.getMargin(category_r6)),core.Gb(1),core.Tc(category_r6.prefixedName)}}function CategoryListComponent_div_8_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",10),core.Zb(1,\"span\",12),core.mc(2,\"translate\"),core.Sc(3),core.Yb(),core.Yb()),2&rf){const category_r8=ctx.row;core.Gb(1),core.uc(\"matTooltip\",core.nc(2,2,\"Motions\")),core.Gb(2),core.Tc(category_r8.motions.length)}}function CategoryListComponent_ng_template_17_mat_error_14_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-error\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"A name is required\"),\" \"))}function CategoryListComponent_ng_template_17_Template(rf,ctx){if(1&rf){const _r11=core.ac();core.Zb(0,\"h1\",13),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb(),core.Zb(4,\"div\",14),core.Zb(5,\"form\",15),core.hc(\"keydown\",(function($event){return core.Ic(_r11),core.lc().onKeyDown($event)})),core.Zb(6,\"p\"),core.Zb(7,\"mat-form-field\"),core.Ub(8,\"input\",16),core.mc(9,\"translate\"),core.Yb(),core.Yb(),core.Zb(10,\"p\"),core.Zb(11,\"mat-form-field\"),core.Ub(12,\"input\",17),core.mc(13,\"translate\"),core.Qc(14,CategoryListComponent_ng_template_17_mat_error_14_Template,3,3,\"mat-error\",18),core.Yb(),core.Yb(),core.Yb(),core.Yb(),core.Zb(15,\"div\",19),core.Zb(16,\"button\",20),core.Zb(17,\"span\"),core.Sc(18),core.mc(19,\"translate\"),core.Yb(),core.Yb(),core.Zb(20,\"button\",21),core.Zb(21,\"span\"),core.Sc(22),core.mc(23,\"translate\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r5=core.lc();core.Gb(2),core.Tc(core.nc(3,10,\"New category\")),core.Gb(3),core.tc(\"formGroup\",ctx_r5.createForm),core.Gb(3),core.uc(\"placeholder\",core.nc(9,12,\"Prefix\")),core.Gb(4),core.uc(\"placeholder\",core.nc(13,14,\"Name\")),core.Gb(2),core.tc(\"ngIf\",!ctx_r5.createForm.controls.name.valid),core.Gb(2),core.tc(\"disabled\",!ctx_r5.createForm.valid)(\"mat-dialog-close\",!0),core.Gb(2),core.Tc(core.nc(19,16,\"Save\")),core.Gb(2),core.tc(\"mat-dialog-close\",!1),core.Gb(2),core.Tc(core.nc(23,18,\"Cancel\"))}}const category_list_component_c1=function(){return[\"menu\"]};let category_list_component_CategoryListComponent=(()=>{class CategoryListComponent extends base_list_view.a{constructor(titleService,translate,matSnackBar,storage,repo,formBuilder,dialog,operator){super(titleService,translate,matSnackBar,storage),this.repo=repo,this.formBuilder=formBuilder,this.dialog=dialog,this.operator=operator,this.tableColumnDefinition=[{prop:\"title\",width:\"auto\"},{prop:\"amount\",width:this.singleButtonWidth}],this.filterProps=[\"prefixedName\"],this.createForm=this.formBuilder.group({prefix:[\"\"],name:[\"\",fesm2015_forms.G.required],parent_id:[\"\"]})}get canEdit(){return this.operator.hasPerms(operator_service.b.motionsCanManage)}ngOnInit(){super.setTitle(\"Categories\")}onPlusButton(){this.createForm.reset(),this.dialogRef=this.dialog.open(this.newCategoryDialog,dialog_settings.a),this.dialogRef.afterClosed().subscribe(res=>{res&&this.save()})}save(){this.createForm.valid&&this.repo.create(this.createForm.value).catch(this.raiseError)}onKeyDown(event){\"Enter\"===event.key&&(this.save(),this.dialogRef.close()),\"Escape\"===event.key&&this.dialogRef.close()}getMargin(category){return 20*category.level+\"px\"}}return CategoryListComponent.ɵfac=function(t){return new(t||CategoryListComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(storage_service.a),core.Tb(category_repository_service.a),core.Tb(fesm2015_forms.f),core.Tb(fesm2015_dialog.b),core.Tb(operator_service.a))},CategoryListComponent.ɵcmp=core.Nb({type:CategoryListComponent,selectors:[[\"os-category-list\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.Oc(category_list_component_c0,!0),2&rf&&core.Dc(_t=core.ic())&&(ctx.newCategoryDialog=_t.first)},features:[core.Db],decls:19,vars:20,consts:[[\"prevUrl\",\"../..\",3,\"nav\",\"hasMainButton\",\"mainEvent\"],[1,\"title-slot\"],[\"class\",\"menu-slot\",4,\"osPerms\"],[\"listStorageKey\",\"category\",3,\"vScrollFixed\",\"listObservableProvider\",\"allowProjector\",\"showListOfSpeakers\",\"columns\",\"filterProps\",\"hiddenInMobile\",\"dataSourceChange\"],[\"class\",\"cell-slot fill\",4,\"pblNgridCellDef\"],[\"categoryMenu\",\"matMenu\"],[\"mat-menu-item\",\"\",3,\"routerLink\"],[\"newCategoryDialog\",\"\"],[1,\"menu-slot\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"matMenuTriggerFor\"],[1,\"cell-slot\",\"fill\"],[1,\"detail-link\",3,\"routerLink\"],[1,\"os-amount-chip\",3,\"matTooltip\"],[\"mat-dialog-title\",\"\"],[\"mat-dialog-content\",\"\",1,\"os-form-card-mobile\"],[3,\"formGroup\",\"keydown\"],[\"formControlName\",\"prefix\",\"matInput\",\"\",3,\"placeholder\"],[\"formControlName\",\"name\",\"matInput\",\"\",\"required\",\"\",3,\"placeholder\"],[4,\"ngIf\"],[\"mat-dialog-actions\",\"\"],[\"mat-button\",\"\",3,\"disabled\",\"mat-dialog-close\"],[\"mat-button\",\"\",3,\"mat-dialog-close\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"os-head-bar\",0),core.hc(\"mainEvent\",(function(){return ctx.onPlusButton()})),core.Zb(1,\"div\",1),core.Zb(2,\"h2\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Qc(5,CategoryListComponent_div_5_Template,4,1,\"div\",2),core.Yb(),core.Zb(6,\"os-list-view-table\",3),core.hc(\"dataSourceChange\",(function($event){return ctx.onDataSourceChange($event)})),core.Qc(7,CategoryListComponent_div_7_Template,4,4,\"div\",4),core.Qc(8,CategoryListComponent_div_8_Template,4,4,\"div\",4),core.Yb(),core.Zb(9,\"mat-menu\",null,5),core.Zb(11,\"button\",6),core.Zb(12,\"mat-icon\"),core.Sc(13,\"sort\"),core.Yb(),core.Zb(14,\"span\"),core.Sc(15),core.mc(16,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Qc(17,CategoryListComponent_ng_template_17_Template,24,20,\"ng-template\",null,7,core.Rc)),2&rf&&(core.tc(\"nav\",!1)(\"hasMainButton\",ctx.canEdit),core.Gb(3),core.Tc(core.nc(4,15,\"Categories\")),core.Gb(2),core.tc(\"osPerms\",\"motions.can_manage\"),core.Gb(1),core.tc(\"vScrollFixed\",64)(\"listObservableProvider\",ctx.repo)(\"allowProjector\",!1)(\"showListOfSpeakers\",!1)(\"columns\",ctx.tableColumnDefinition)(\"filterProps\",ctx.filterProps)(\"hiddenInMobile\",core.yc(19,category_list_component_c1)),core.Gb(1),core.tc(\"pblNgridCellDef\",\"title\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"amount\"),core.Gb(3),core.tc(\"routerLink\",\"./sort\"),core.Gb(4),core.Tc(core.nc(16,17,\"Sort categories\")))},directives:[head_bar_component.a,perms_directive.a,list_view_table_component.a,pebula_ngrid.c,menu.f,menu.c,router.g,icon.a,fesm2015_button.b,menu.e,router.i,tooltip.c,fesm2015_dialog.i,fesm2015_dialog.f,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,form_field.c,fesm2015_forms.c,input.b,fesm2015_forms.s,fesm2015_forms.i,fesm2015_forms.D,common.t,fesm2015_dialog.c,fesm2015_dialog.d,form_field.b],pipes:[ngx_translate_core.j],styles:[\".title-line[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.title-line[_ngcontent-%COMP%]   .icon-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line[_ngcontent-%COMP%]   .favorite-star[_ngcontent-%COMP%]{padding-right:3px}.mat-table[_ngcontent-%COMP%]{width:100%}.mat-table[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{display:none}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{z-index:2}.mat-table[_ngcontent-%COMP%]   .mat-table-sticky[_ngcontent-%COMP%]{z-index:3!important}\"]}),CategoryListComponent})();var BehaviorSubject=__webpack_require__(\"2Vo4\"),choice_service=__webpack_require__(\"Jc+d\"),sorting_list_component=__webpack_require__(\"IBZR\");const category_motions_sort_component_c0=[\"sorter\"];function CategoryMotionsSortComponent_h2_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"h2\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const ctx_r0=core.lc();core.Gb(1),core.Vc(\"\",core.nc(2,2,\"Sort motions\"),\" (\",ctx_r0.category.prefixedName,\")\")}}function CategoryMotionsSortComponent_div_4_Template(rf,ctx){if(1&rf){const _r5=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"span\"),core.Sc(2),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Zb(6,\"button\",6),core.hc(\"click\",(function(){return core.Ic(_r5),core.lc().moveToPosition()})),core.Zb(7,\"span\"),core.Sc(8),core.mc(9,\"translate\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r1=core.lc();core.Gb(2),core.Uc(\"\",ctx_r1.sortSelector.multiSelectedIndex.length,\" \"),core.Gb(2),core.Tc(core.nc(5,3,\"selected\")),core.Gb(4),core.Tc(core.nc(9,5,\"move ...\"))}}function CategoryMotionsSortComponent_ng_template_7_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-basic-chip\",7),core.mc(1,\"translate\"),core.Sc(2),core.Yb()),2&rf){const motion_r6=ctx.$implicit;core.uc(\"matTooltip\",core.nc(1,2,\"Sequential number\")),core.Gb(2),core.Uc(\" \",motion_r6.id,\" \")}}const routes=[{path:\"\",component:category_list_component_CategoryListComponent,pathMatch:\"full\"},{path:\":id/sort\",component:(()=>{class CategoryMotionsSortComponent extends base_view.a{constructor(title,translate,matSnackBar,promptService,repo,route,motionRepo,choiceService){super(title,translate,matSnackBar),this.translate=translate,this.promptService=promptService,this.repo=repo,this.route=route,this.motionRepo=motionRepo,this.choiceService=choiceService,this.motionsSubject=new BehaviorSubject.a([]),this.motionsCount=0,this.hasChanged=!1,this.motionsCopy=[],this.motionsBackup=[]}get isMultiSelect(){return this.sortSelector.multiSelectedIndex.length>0}get motionObservable(){return this.motionsSubject.asObservable()}ngOnInit(){const category_id=+this.route.snapshot.params.id;this.repo.getViewModelObservable(category_id).subscribe(cat=>{this.category=cat}),this.motionRepo.getViewModelListObservable().subscribe(motions=>{const filtered=motions.filter(m=>m.category_id===category_id);this.motionsBackup=[...filtered],this.motionsCount=filtered.length,0===this.motionsCopy.length?this.initializeList(filtered):this.motionsSubject.next(this.handleMotionUpdates(filtered))})}initializeList(motions){motions.sort((a,b)=>a.category_weight-b.category_weight),this.motionsSubject.next(motions),this.motionsCopy=motions}onListUpdate(motions){this.hasChanged=!0,this.motionsCopy=motions}onCancel(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){(yield this.canDeactivate())&&(this.motionsSubject.next([]),this.initializeList(this.motionsBackup),this.hasChanged=!1)}))}sendUpdate(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Do you really want to save your changes?\");if(yield this.promptService.open(title)){const ids=this.motionsCopy.map(motion=>motion.id);this.repo.sortMotionsInCategory(this.category.category,ids),this.hasChanged=!1}}))}handleMotionUpdates(nextMotions){const copy=this.motionsCopy;if(nextMotions.length>copy.length)for(const motion of nextMotions)this.motionsCopy.includes(motion)||copy.push(motion);else if(nextMotions.length<copy.length)for(const motion of copy)nextMotions.includes(motion)||copy.splice(copy.indexOf(motion),1);else for(const motion of copy)if(!nextMotions.includes(motion)){const updatedMotion=nextMotions.find(theMotion=>theMotion.id===motion.id);copy.splice(copy.indexOf(motion),1,updatedMotion)}return copy}canDeactivate(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){if(this.hasChanged){const title=this.translate.instant(\"Do you really want to exit this page?\"),content=this.translate.instant(\"You made changes.\");return yield this.promptService.open(title,content)}return!0}))}moveToPosition(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){if(this.sortSelector.multiSelectedIndex.length){const content=this.translate.instant(\"Move selected items ...\"),choices=this.sortSelector.sortedItems.filter(f=>!this.sortSelector.multiSelectedIndex.includes(f.id)),actions=[this.translate.instant(\"Insert before\"),this.translate.instant(\"Insert behind\")],selectedChoice=yield this.choiceService.open(content,choices,!1,actions);selectedChoice&&this.sortSelector.drop({currentIndex:selectedChoice.items,previousIndex:null},selectedChoice.action===actions[1])}}))}}return CategoryMotionsSortComponent.ɵfac=function(t){return new(t||CategoryMotionsSortComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(prompt_service.a),core.Tb(category_repository_service.a),core.Tb(router.a),core.Tb(motion_repository_service.a),core.Tb(choice_service.a))},CategoryMotionsSortComponent.ɵcmp=core.Nb({type:CategoryMotionsSortComponent,selectors:[[\"os-category-motions-sort\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.Oc(category_motions_sort_component_c0,!0),2&rf&&core.Dc(_t=core.ic())&&(ctx.sortSelector=_t.first)},features:[core.Db],decls:8,vars:5,consts:[[3,\"editMode\",\"nav\",\"saveEvent\",\"mainEvent\"],[1,\"title-slot\"],[4,\"ngIf\"],[1,\"os-form-card\"],[3,\"input\",\"sortEvent\"],[\"sorter\",\"\"],[\"mat-button\",\"\",3,\"click\"],[\"disableRipple\",\"\",1,\"bluegrey\",3,\"matTooltip\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"os-head-bar\",0),core.hc(\"saveEvent\",(function(){return ctx.sendUpdate()}))(\"mainEvent\",(function(){return ctx.onCancel()})),core.Zb(1,\"div\",1),core.Qc(2,CategoryMotionsSortComponent_h2_2_Template,3,4,\"h2\",2),core.Yb(),core.Yb(),core.Zb(3,\"mat-card\",3),core.Qc(4,CategoryMotionsSortComponent_div_4_Template,10,7,\"div\",2),core.Zb(5,\"os-sorting-list\",4,5),core.hc(\"sortEvent\",(function($event){return ctx.onListUpdate($event)})),core.Qc(7,CategoryMotionsSortComponent_ng_template_7_Template,3,4,\"ng-template\"),core.Yb(),core.Yb()),2&rf&&(core.tc(\"editMode\",ctx.hasChanged)(\"nav\",!1),core.Gb(2),core.tc(\"ngIf\",ctx.category),core.Gb(2),core.tc(\"ngIf\",ctx.isMultiSelect),core.Gb(1),core.tc(\"input\",ctx.motionObservable))},directives:[head_bar_component.a,common.t,card.a,sorting_list_component.a,fesm2015_button.b,chips.a,tooltip.c],pipes:[ngx_translate_core.j],styles:[\"\"]}),CategoryMotionsSortComponent})(),canDeactivate:[watch_for_changes_guard.a]},{path:\"sort\",component:categories_sort_component_CategoriesSortComponent,canDeactivate:[watch_for_changes_guard.a]},{path:\":id\",component:category_detail_component_CategoryDetailComponent}];let category_routing_module_CategoryRoutingModule=(()=>{class CategoryRoutingModule{}return CategoryRoutingModule.ɵmod=core.Rb({type:CategoryRoutingModule}),CategoryRoutingModule.ɵinj=core.Qb({factory:function(t){return new(t||CategoryRoutingModule)},imports:[[router.j.forChild(routes)],router.j]}),CategoryRoutingModule})(),category_module_CategoryModule=(()=>{class CategoryModule{}return CategoryModule.ɵmod=core.Rb({type:CategoryModule}),CategoryModule.ɵinj=core.Qb({factory:function(t){return new(t||CategoryModule)},imports:[[common.c,category_routing_module_CategoryRoutingModule,shared_module.a]]}),CategoryModule})()},F48D:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return PromptService}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mrSG\"),_shared_components_prompt_dialog_prompt_dialog_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"LBBb\"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"fXoL\"),_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"0IaG\");let PromptService=(()=>{class PromptService{constructor(dialog){this.dialog=dialog}open(title,content=\"\"){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){return this.dialog.open(_shared_components_prompt_dialog_prompt_dialog_component__WEBPACK_IMPORTED_MODULE_1__.a,{width:\"250px\",data:{title:title,content:content}}).afterClosed().toPromise()}))}}return PromptService.ɵfac=function(t){return new(t||PromptService)(_angular_core__WEBPACK_IMPORTED_MODULE_2__.dc(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__.b))},PromptService.ɵprov=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Pb({token:PromptService,factory:PromptService.ɵfac,providedIn:\"root\"}),PromptService})()},\"Jc+d\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return choice_service_ChoiceService}));var tslib_es6=__webpack_require__(\"mrSG\"),dialog_settings=__webpack_require__(\"Izkr\"),dialog=__webpack_require__(\"0IaG\"),core=__webpack_require__(\"fXoL\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),common=__webpack_require__(\"ofXK\"),fesm2015_button=__webpack_require__(\"bTqV\"),search_value_selector_component=__webpack_require__(\"oqD5\"),ngx_translate_core=__webpack_require__(\"sYmb\");function ChoiceDialogComponent_h2_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"h2\",2),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const ctx_r0=core.lc();core.Gb(1),core.Tc(core.nc(2,1,ctx_r0.data.title))}}function ChoiceDialogComponent_form_1_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",9),core.Ub(1,\"os-search-value-selector\",10),core.Yb()),2&rf){const ctx_r2=core.lc(2);core.Gb(1),core.tc(\"multiple\",ctx_r2.data.multiSelect)(\"formControl\",ctx_r2.selectForm.get(\"select\"))(\"inputListValues\",ctx_r2.data.choices)}}function ChoiceDialogComponent_form_1_div_3_button_1_Template(rf,ctx){if(1&rf){const _r9=core.ac();core.Zb(0,\"button\",12),core.hc(\"click\",(function(){core.Ic(_r9);const button_r7=ctx.$implicit;return core.lc(3).closeDialog(!0,button_r7)})),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const button_r7=ctx.$implicit,ctx_r6=core.lc(3);core.tc(\"disabled\",!ctx_r6.hasSelection),core.Gb(2),core.Tc(core.nc(3,2,button_r7))}}function ChoiceDialogComponent_form_1_div_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,ChoiceDialogComponent_form_1_div_3_button_1_Template,4,4,\"button\",11),core.Yb()),2&rf){const ctx_r3=core.lc(2);core.Gb(1),core.tc(\"ngForOf\",ctx_r3.data.actionButtons)}}function ChoiceDialogComponent_form_1_div_4_button_1_Template(rf,ctx){if(1&rf){const _r12=core.ac();core.Zb(0,\"button\",12),core.hc(\"click\",(function(){return core.Ic(_r12),core.lc(3).closeDialog(!0)})),core.Zb(1,\"span\"),core.Sc(2,\"OK\"),core.Yb(),core.Yb()}if(2&rf){const ctx_r10=core.lc(3);core.tc(\"disabled\",!ctx_r10.hasSelection)}}function ChoiceDialogComponent_form_1_div_4_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,ChoiceDialogComponent_form_1_div_4_button_1_Template,3,1,\"button\",13),core.Yb()),2&rf){const ctx_r4=core.lc(2);core.Gb(1),core.tc(\"ngIf\",!ctx_r4.data.multiSelect||ctx_r4.data.choices)}}function ChoiceDialogComponent_form_1_button_5_Template(rf,ctx){if(1&rf){const _r14=core.ac();core.Zb(0,\"button\",8),core.hc(\"click\",(function(){core.Ic(_r14);const ctx_r13=core.lc(2);return ctx_r13.closeDialog(!0,ctx_r13.data.clearChoice)})),core.Zb(1,\"span\"),core.Sc(2),core.Yb(),core.Yb()}if(2&rf){const ctx_r5=core.lc(2);core.Gb(2),core.Tc(ctx_r5.data.clearChoice)}}function ChoiceDialogComponent_form_1_Template(rf,ctx){if(1&rf){const _r16=core.ac();core.Zb(0,\"form\",3),core.Qc(1,ChoiceDialogComponent_form_1_div_1_Template,2,3,\"div\",4),core.Zb(2,\"div\",5),core.Qc(3,ChoiceDialogComponent_form_1_div_3_Template,2,1,\"div\",6),core.Qc(4,ChoiceDialogComponent_form_1_div_4_Template,2,1,\"div\",6),core.Qc(5,ChoiceDialogComponent_form_1_button_5_Template,3,1,\"button\",7),core.Zb(6,\"button\",8),core.hc(\"click\",(function(){return core.Ic(_r16),core.lc().closeDialog(!1)})),core.Zb(7,\"span\"),core.Sc(8),core.mc(9,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r1=core.lc();core.tc(\"formGroup\",ctx_r1.selectForm),core.Gb(1),core.tc(\"ngIf\",ctx_r1.data.choices),core.Gb(2),core.tc(\"ngIf\",ctx_r1.data.actionButtons),core.Gb(1),core.tc(\"ngIf\",!ctx_r1.data.actionButtons),core.Gb(1),core.tc(\"ngIf\",ctx_r1.data.clearChoice),core.Gb(3),core.Tc(core.nc(9,6,\"Cancel\"))}}let choice_dialog_component_ChoiceDialogComponent=(()=>{class ChoiceDialogComponent{constructor(dialogRef,formBuilder,data){this.dialogRef=dialogRef,this.formBuilder=formBuilder,this.data=data,this.selectedMultiChoices=[],this.selectForm=this.formBuilder.group({select:[]})}get hasSelection(){return!(this.data&&this.data.choices&&(!this.selectForm.get(\"select\").value||!this.selectForm.get(\"select\").value&&!this.selectForm.get(\"select\").value.length))}closeDialog(ok,action){this.data.multiSelect||null!==this.selectedChoice||(action=this.data.clearChoice),ok?this.dialogRef.close({action:action||null,items:this.selectForm.get(\"select\").value}):this.dialogRef.close()}}return ChoiceDialogComponent.ɵfac=function(t){return new(t||ChoiceDialogComponent)(core.Tb(dialog.h),core.Tb(fesm2015_forms.f),core.Tb(dialog.a))},ChoiceDialogComponent.ɵcmp=core.Nb({type:ChoiceDialogComponent,selectors:[[\"os-choice-dialog\"]],decls:2,vars:2,consts:[[\"mat-dialog-title\",\"\",4,\"ngIf\"],[3,\"formGroup\",4,\"ngIf\"],[\"mat-dialog-title\",\"\"],[3,\"formGroup\"],[\"mat-dialog-content\",\"\",4,\"ngIf\"],[\"mat-dialog-actions\",\"\"],[4,\"ngIf\"],[\"mat-button\",\"\",3,\"click\",4,\"ngIf\"],[\"mat-button\",\"\",3,\"click\"],[\"mat-dialog-content\",\"\"],[\"ngDefaultControl\",\"\",3,\"multiple\",\"formControl\",\"inputListValues\"],[\"mat-button\",\"\",3,\"disabled\",\"click\",4,\"ngFor\",\"ngForOf\"],[\"mat-button\",\"\",3,\"disabled\",\"click\"],[\"mat-button\",\"\",3,\"disabled\",\"click\",4,\"ngIf\"]],template:function(rf,ctx){1&rf&&(core.Qc(0,ChoiceDialogComponent_h2_0_Template,3,3,\"h2\",0),core.Qc(1,ChoiceDialogComponent_form_1_Template,10,8,\"form\",1)),2&rf&&(core.tc(\"ngIf\",ctx.data),core.Gb(1),core.tc(\"ngIf\",ctx.data))},directives:[common.t,dialog.i,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,dialog.c,fesm2015_button.b,dialog.f,search_value_selector_component.a,fesm2015_forms.c,fesm2015_forms.s,fesm2015_forms.h,common.s],pipes:[ngx_translate_core.j],styles:[\".mat-form-field{width:100%}\"],encapsulation:2}),ChoiceDialogComponent})(),choice_service_ChoiceService=(()=>{class ChoiceService{constructor(dialog){this.dialog=dialog}open(title,choices,multiSelect=!1,actions,clearChoice){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){return this.dialog.open(choice_dialog_component_ChoiceDialogComponent,Object.assign(Object.assign({},dialog_settings.a),{data:{title:title,choices:choices,multiSelect:multiSelect,actionButtons:actions,clearChoice:clearChoice}})).afterClosed().toPromise()}))}}return ChoiceService.ɵfac=function(t){return new(t||ChoiceService)(core.dc(dialog.b))},ChoiceService.ɵprov=core.Pb({token:ChoiceService,factory:ChoiceService.ɵfac,providedIn:\"root\"}),ChoiceService})()},LBBb:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return PromptDialogComponent}));var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"0IaG\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"fXoL\"),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"ofXK\"),_angular_material_button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"bTqV\"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"sYmb\");function PromptDialogComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"div\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(1,\"h2\",1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ub(3,\"mat-dialog-content\",2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(4,\"mat-dialog-actions\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(5,\"button\",3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(6),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(7,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(8,\"button\",4),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(9),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(10,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_1__.lc();_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(ctx_r0.data.title),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"innerHTML\",ctx_r0.data.content,_angular_core__WEBPACK_IMPORTED_MODULE_1__.Jc),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"mat-dialog-close\",!0),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(7,6,\"Yes\")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"mat-dialog-close\",!1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(10,8,\"Cancel\"))}}let PromptDialogComponent=(()=>{class PromptDialogComponent{constructor(dialogRef,data){this.dialogRef=dialogRef,this.data=data}}return PromptDialogComponent.ɵfac=function(t){return new(t||PromptDialogComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tb(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.h),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tb(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.a))},PromptDialogComponent.ɵcmp=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Nb({type:PromptDialogComponent,selectors:[[\"os-prompt-dialog\"]],decls:1,vars:1,consts:[[4,\"ngIf\"],[\"mat-dialog-title\",\"\"],[3,\"innerHTML\"],[\"mat-button\",\"\",\"color\",\"warn\",3,\"mat-dialog-close\"],[\"mat-button\",\"\",3,\"mat-dialog-close\"]],template:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(0,PromptDialogComponent_div_0_Template,11,10,\"div\",0),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"ngIf\",ctx.data)},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.t,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.i,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.f,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.c,_angular_material_button__WEBPACK_IMPORTED_MODULE_3__.b,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__.d],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__.j],encapsulation:2}),PromptDialogComponent})()},wL0i:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return BaseListViewComponent}));var _base_view__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mV3u\");class BaseListViewComponent extends _base_view__WEBPACK_IMPORTED_MODULE_0__.a{constructor(titleService,translate,matSnackBar,storage){super(titleService,translate,matSnackBar),this.storage=storage,this.canMultiSelect=!1,this._multiSelectMode=!1,this.singleButtonWidth=\"40px\",this.badgeButtonWidth=\"45px\",this.selectedRows=[]}onDataSourceChange(newDataSource){this.dataSource=newDataSource}toggleMultiSelect(){!this.canMultiSelect||this.isMultiSelect?(this._multiSelectMode=!1,this.deselectAll()):this._multiSelectMode=!0}selectAll(){this.dataSource.selection.select(...this.dataSource.filteredData)}deselectAll(){this.dataSource&&this.dataSource.selection.clear()}get isMultiSelect(){return this._multiSelectMode}}}}]);","extractedComments":[]}