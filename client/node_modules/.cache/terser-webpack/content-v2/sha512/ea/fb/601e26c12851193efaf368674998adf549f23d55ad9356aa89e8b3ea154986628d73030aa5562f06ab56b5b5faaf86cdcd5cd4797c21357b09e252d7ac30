{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{GTZY:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return MediaUploadContentComponent}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mrSG\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"fXoL\"),_angular_material_table__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"+0xr\"),app_core_repositories_mediafiles_mediafile_repository_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"SSyl\"),app_core_repositories_users_group_repository_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"R+Vs\"),_angular_forms__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(\"3Pt+\"),ngx_file_drop__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(\"gfTr\"),_angular_common__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(\"ofXK\"),_angular_material_button__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(\"bTqV\"),_angular_material_form_field__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(\"kmnG\"),_search_value_selector_search_value_selector_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(\"oqD5\"),_angular_material_input__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(\"qFsG\"),_angular_material_icon__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(\"NFeN\"),_angular_material_card__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(\"Wp6s\"),_angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(\"bv9b\"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(\"sYmb\");function MediaUploadContentComponent_div_6_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"div\",12),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(1,\"mat-form-field\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ub(2,\"os-search-value-selector\",13),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(3,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.lc();_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"formGroup\",ctx_r1.directorySelectionForm),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.uc(\"placeholder\",_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(3,6,\"Parent directory\")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"multiple\",!1)(\"includeNone\",!0)(\"noneTitle\",\"Base folder\")(\"inputListValues\",ctx_r1.directoryBehaviorSubject)}}function MediaUploadContentComponent_i_12_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"i\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(2,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(2,1,\"Base folder\")))}function MediaUploadContentComponent_i_13_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"i\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf){const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_1__.lc();_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(ctx_r3.getDirectory(ctx_r3.selectedDirectoryId).title)}}function MediaUploadContentComponent_div_14_th_3_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"th\",26),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(1,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(3,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(3,1,\"Title\")))}function MediaUploadContentComponent_div_14_td_4_Template(rf,ctx){if(1&rf){const _r20=_angular_core__WEBPACK_IMPORTED_MODULE_1__.ac();_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"td\",27),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(1,\"mat-form-field\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(2,\"input\",28),_angular_core__WEBPACK_IMPORTED_MODULE_1__.hc(\"input\",(function($event){_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ic(_r20);const file_r18=ctx.$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_1__.lc(2).onChangeTitle($event.target.value,file_r18)})),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()}if(2&rf){const file_r18=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"value\",file_r18.title)}}function MediaUploadContentComponent_div_14_th_6_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"th\",26),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(1,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(3,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(3,1,\"File name\")))}function MediaUploadContentComponent_div_14_td_7_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"td\",27),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf){const file_r21=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(file_r21.filename)}}function MediaUploadContentComponent_div_14_th_9_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"th\",26),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(1,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(3,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(3,1,\"File information\")))}function MediaUploadContentComponent_div_14_td_10_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"td\",27),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(1,\"div\",29),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(2,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(3,\"mat-icon\",30),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(4,\"insert_drive_file\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(5),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(6,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(7,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(8,\"mat-icon\",30),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(9,\"data_usage\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(10),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf){const file_r22=ctx.$implicit,ctx_r11=_angular_core__WEBPACK_IMPORTED_MODULE_1__.lc(2);_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"inline\",!0),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Uc(\" \",_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(6,4,ctx_r11.getFiletype(file_r22.mediafile)),\" \"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"inline\",!0),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Uc(\" \",ctx_r11.getReadableSize(file_r22.mediafile.size),\" \")}}function MediaUploadContentComponent_div_14_th_12_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"th\",26),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(1,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(3,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(3,1,\"Access groups\")))}function MediaUploadContentComponent_div_14_td_13_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"td\",31),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(1,\"mat-form-field\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ub(2,\"os-search-value-selector\",32),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(3,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf){const file_r23=ctx.$implicit,ctx_r13=_angular_core__WEBPACK_IMPORTED_MODULE_1__.lc(2);_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"formGroup\",file_r23.form),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.uc(\"placeholder\",_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(3,4,\"Access groups\")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"multiple\",!0)(\"inputListValues\",ctx_r13.groupsBehaviorSubject)}}function MediaUploadContentComponent_div_14_th_15_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"th\",26),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(1,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(3,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(3,1,\"Remove\")))}function MediaUploadContentComponent_div_14_td_16_Template(rf,ctx){if(1&rf){const _r26=_angular_core__WEBPACK_IMPORTED_MODULE_1__.ac();_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"td\",27),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(1,\"button\",33),_angular_core__WEBPACK_IMPORTED_MODULE_1__.hc(\"click\",(function(){_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ic(_r26);const file_r24=ctx.$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_1__.lc(2).onRemoveButton(file_r24)})),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(2,\"mat-icon\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(3,\"close\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()}}function MediaUploadContentComponent_div_14_tr_17_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ub(0,\"tr\",34)}function MediaUploadContentComponent_div_14_tr_18_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ub(0,\"tr\",35)}function MediaUploadContentComponent_div_14_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"div\",14),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(1,\"table\",15),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Xb(2,16),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(3,MediaUploadContentComponent_div_14_th_3_Template,4,3,\"th\",17),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(4,MediaUploadContentComponent_div_14_td_4_Template,3,1,\"td\",18),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Wb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Xb(5,19),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(6,MediaUploadContentComponent_div_14_th_6_Template,4,3,\"th\",17),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(7,MediaUploadContentComponent_div_14_td_7_Template,2,1,\"td\",18),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Wb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Xb(8,20),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(9,MediaUploadContentComponent_div_14_th_9_Template,4,3,\"th\",17),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(10,MediaUploadContentComponent_div_14_td_10_Template,11,6,\"td\",18),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Wb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Xb(11,21),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(12,MediaUploadContentComponent_div_14_th_12_Template,4,3,\"th\",17),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(13,MediaUploadContentComponent_div_14_td_13_Template,4,6,\"td\",22),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Wb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Xb(14,23),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(15,MediaUploadContentComponent_div_14_th_15_Template,4,3,\"th\",17),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(16,MediaUploadContentComponent_div_14_td_16_Template,4,0,\"td\",18),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Wb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(17,MediaUploadContentComponent_div_14_tr_17_Template,1,0,\"tr\",24),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(18,MediaUploadContentComponent_div_14_tr_18_Template,1,0,\"tr\",25),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf){const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_1__.lc();_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"dataSource\",ctx_r4.uploadList),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(16),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"matHeaderRowDef\",ctx_r4.displayedColumns),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"matRowDefColumns\",ctx_r4.displayedColumns)}}function MediaUploadContentComponent_mat_card_24_mat_progress_bar_1_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ub(0,\"mat-progress-bar\",39),2&rf){const ctx_r28=_angular_core__WEBPACK_IMPORTED_MODULE_1__.lc(2);_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"value\",ctx_r28.calcUploadProgress())}}function MediaUploadContentComponent_mat_card_24_mat_progress_bar_2_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ub(0,\"mat-progress-bar\",40)}function MediaUploadContentComponent_mat_card_24_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"mat-card\",36),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(1,MediaUploadContentComponent_mat_card_24_mat_progress_bar_1_Template,1,1,\"mat-progress-bar\",37),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(2,MediaUploadContentComponent_mat_card_24_mat_progress_bar_2_Template,1,0,\"mat-progress-bar\",38),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb()),2&rf){const ctx_r5=_angular_core__WEBPACK_IMPORTED_MODULE_1__.lc();_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"ngIf\",!ctx_r5.parallel),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"ngIf\",ctx_r5.parallel)}}let MediaUploadContentComponent=(()=>{class MediaUploadContentComponent{constructor(repo,formBuilder,groupRepo){this.repo=repo,this.formBuilder=formBuilder,this.groupRepo=groupRepo,this.displayedColumns=[\"title\",\"filename\",\"information\",\"access_groups\",\"remove\"],this.showProgress=!1,this.filesUploadedIds=[],this.parallel=!0,this.uploadSuccessEvent=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.p,this.errorEvent=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.p,this.directoryBehaviorSubject=this.repo.getDirectoryBehaviorSubject(),this.groupsBehaviorSubject=this.groupRepo.getViewModelListBehaviorSubject(),this.directorySelectionForm=this.formBuilder.group({parent_id:null})}get showDirectorySelector(){return void 0===this.directoryId}get selectedDirectoryId(){if(this.showDirectorySelector){const parent=this.directorySelectionForm.controls.parent_id;return parent.value&&\"number\"==typeof parent.value?parent.value:null}return this.directoryId}ngOnInit(){this.uploadList=new _angular_material_table__WEBPACK_IMPORTED_MODULE_2__.o}getDirectory(directoryId){return this.repo.getViewModel(directoryId)}uploadFile(fileData){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){const input=new FormData;input.set(\"mediafile\",fileData.mediafile),input.set(\"title\",fileData.title);const access_groups_id=fileData.form.value.access_groups_id||[];access_groups_id.length>0&&input.set(\"access_groups_id\",JSON.stringify(access_groups_id)),this.selectedDirectoryId&&input.set(\"parent_id\",\"\"+this.selectedDirectoryId),yield this.repo.uploadFile(input).then(fileId=>{this.filesUploadedIds.push(fileId.id),this.onRemoveButton(fileData)},error=>{this.errorMessage=error})}))}getFiletype(file){return file.type||\"File\"}getReadableSize(bytes){if(0===bytes)return\"0 B\";const unitLevel=Math.floor(Math.log(bytes)/Math.log(1024));return`${bytes=+(bytes/Math.pow(1024,unitLevel)).toFixed(2)} ${[\"B\",\"kB\",\"MB\",\"GB\",\"TB\"][unitLevel]}`}onChangeTitle(newTitle,file){file.title=newTitle}addFile(file){const newFile={mediafile:file,filename:file.name,title:file.name,form:this.formBuilder.group({access_groups_id:[[]]})};this.uploadList.data.push(newFile),this.table&&this.table.renderRows()}onSelectFile(event){if(event.target.files&&event.target.files.length>0)for(const addedFile of event.target.files)this.addFile(addedFile)}onDropFile(event){for(const droppedFile of event)droppedFile.fileEntry.isFile&&droppedFile.fileEntry.file(file=>{this.addFile(file)})}onUploadButton(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){if(this.uploadList&&this.uploadList.data.length>0){if(this.errorMessage=\"\",this.showProgress=!0,this.parallel){const promises=this.uploadList.data.map(file=>this.uploadFile(file));yield Promise.all(promises)}else for(const file of this.uploadList.data)yield this.uploadFile(file);if(this.showProgress=!1,\"\"===this.errorMessage)this.uploadSuccessEvent.next(this.filesUploadedIds);else{this.table.renderRows();const filenames=this.uploadList.data.map(file=>file.filename);this.errorEvent.next(`${this.errorMessage}\\n${filenames}`)}}}))}calcUploadProgress(){return this.filesUploadedIds&&this.filesUploadedIds.length>0&&this.uploadList.data?100/(this.uploadList.data.length/this.filesUploadedIds.length):0}onRemoveButton(file){this.uploadList.data&&(this.uploadList.data.splice(this.uploadList.data.indexOf(file),1),this.table.renderRows())}onClearButton(){this.uploadList.data=[],this.table&&this.table.renderRows()}}return MediaUploadContentComponent.ɵfac=function(t){return new(t||MediaUploadContentComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tb(app_core_repositories_mediafiles_mediafile_repository_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tb(_angular_forms__WEBPACK_IMPORTED_MODULE_5__.f),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tb(app_core_repositories_users_group_repository_service__WEBPACK_IMPORTED_MODULE_4__.a))},MediaUploadContentComponent.ɵcmp=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Nb({type:MediaUploadContentComponent,selectors:[[\"os-media-upload-content\"]],viewQuery:function(rf,ctx){var _t;1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zc(_angular_material_table__WEBPACK_IMPORTED_MODULE_2__.n,!0),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.Dc(_t=_angular_core__WEBPACK_IMPORTED_MODULE_1__.ic())&&(ctx.table=_t.first)},inputs:{parallel:\"parallel\",directoryId:\"directoryId\"},outputs:{uploadSuccessEvent:\"uploadSuccessEvent\",errorEvent:\"errorEvent\"},decls:25,vars:19,consts:[[1,\"upload-area\"],[\"hidden\",\"\",\"type\",\"file\",\"multiple\",\"\",3,\"change\"],[\"fileInput\",\"\"],[1,\"selection-area\"],[\"contentClassName\",\"file-drop-content-style\",\"dropZoneClassName\",\"file-drop-zone-style\",3,\"dropZoneLabel\",\"onFileDrop\",\"click\"],[3,\"formGroup\",4,\"ngIf\"],[4,\"ngIf\"],[\"class\",\"table-container\",4,\"ngIf\"],[1,\"action-buttons\"],[\"type\",\"button\",\"mat-raised-button\",\"\",\"color\",\"accent\",3,\"disabled\",\"click\"],[\"type\",\"button\",\"mat-raised-button\",\"\",3,\"disabled\",\"click\"],[\"class\",\"os-card\",4,\"ngIf\"],[3,\"formGroup\"],[\"formControlName\",\"parent_id\",3,\"multiple\",\"includeNone\",\"noneTitle\",\"placeholder\",\"inputListValues\"],[1,\"table-container\"],[\"mat-table\",\"\",1,\"mat-elevation-z8\",3,\"dataSource\"],[\"matColumnDef\",\"title\",\"sticky\",\"\"],[\"mat-header-cell\",\"\",4,\"matHeaderCellDef\"],[\"mat-cell\",\"\",4,\"matCellDef\"],[\"matColumnDef\",\"filename\"],[\"matColumnDef\",\"information\"],[\"matColumnDef\",\"access_groups\"],[\"mat-cell\",\"\",3,\"formGroup\",4,\"matCellDef\"],[\"matColumnDef\",\"remove\"],[\"mat-header-row\",\"\",4,\"matHeaderRowDef\"],[\"mat-row\",\"\",4,\"matRowDef\",\"matRowDefColumns\"],[\"mat-header-cell\",\"\"],[\"mat-cell\",\"\"],[\"matInput\",\"\",3,\"value\",\"input\"],[1,\"file-info-cell\"],[3,\"inline\"],[\"mat-cell\",\"\",3,\"formGroup\"],[\"formControlName\",\"access_groups_id\",3,\"multiple\",\"placeholder\",\"inputListValues\"],[\"mat-icon-button\",\"\",\"color\",\"warn\",3,\"click\"],[\"mat-header-row\",\"\"],[\"mat-row\",\"\"],[1,\"os-card\"],[\"mode\",\"determinate\",3,\"value\",4,\"ngIf\"],[\"mode\",\"buffer\",4,\"ngIf\"],[\"mode\",\"determinate\",3,\"value\"],[\"mode\",\"buffer\"]],template:function(rf,ctx){if(1&rf){const _r30=_angular_core__WEBPACK_IMPORTED_MODULE_1__.ac();_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(0,\"div\",0),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(1,\"input\",1,2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.hc(\"change\",(function($event){return ctx.onSelectFile($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(3,\"div\",3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(4,\"ngx-file-drop\",4),_angular_core__WEBPACK_IMPORTED_MODULE_1__.hc(\"onFileDrop\",(function($event){return ctx.onDropFile($event)}))(\"click\",(function(){return _angular_core__WEBPACK_IMPORTED_MODULE_1__.Ic(_r30),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Ec(2).click()})),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(5,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(6,MediaUploadContentComponent_div_6_Template,4,8,\"div\",5),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(7,\"div\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(8,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(9),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(10,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(11,\"   \"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(12,MediaUploadContentComponent_i_12_Template,3,3,\"i\",6),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(13,MediaUploadContentComponent_i_13_Template,2,1,\"i\",6),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(14,MediaUploadContentComponent_div_14_Template,19,3,\"div\",7),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(15,\"div\",8),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(16,\"button\",9),_angular_core__WEBPACK_IMPORTED_MODULE_1__.hc(\"click\",(function(){return ctx.onUploadButton()})),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(17,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(18),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(19,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(20,\"button\",10),_angular_core__WEBPACK_IMPORTED_MODULE_1__.hc(\"click\",(function(){return ctx.onClearButton()})),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Zb(21,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Sc(22),_angular_core__WEBPACK_IMPORTED_MODULE_1__.mc(23,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qc(24,MediaUploadContentComponent_mat_card_24_Template,3,2,\"mat-card\",11)}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(4),_angular_core__WEBPACK_IMPORTED_MODULE_1__.uc(\"dropZoneLabel\",_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(5,11,\"Drop files into this area OR click here to select files\")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"ngIf\",ctx.showDirectorySelector),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Uc(\" \",_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(10,13,\"Upload to:\"),\"\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"ngIf\",null===ctx.selectedDirectoryId),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"ngIf\",null!==ctx.selectedDirectoryId),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"ngIf\",ctx.uploadList.data.length>0),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"disabled\",0===ctx.uploadList.data.length),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(19,15,\"Upload\")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"disabled\",0===ctx.uploadList.data.length),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_1__.nc(23,17,\"Clear list\")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.tc(\"ngIf\",ctx.showProgress))},directives:[ngx_file_drop__WEBPACK_IMPORTED_MODULE_6__.a,_angular_common__WEBPACK_IMPORTED_MODULE_7__.t,_angular_material_button__WEBPACK_IMPORTED_MODULE_8__.b,_angular_forms__WEBPACK_IMPORTED_MODULE_5__.t,_angular_forms__WEBPACK_IMPORTED_MODULE_5__.k,_angular_material_form_field__WEBPACK_IMPORTED_MODULE_9__.c,_search_value_selector_search_value_selector_component__WEBPACK_IMPORTED_MODULE_10__.a,_angular_forms__WEBPACK_IMPORTED_MODULE_5__.s,_angular_forms__WEBPACK_IMPORTED_MODULE_5__.i,_angular_material_table__WEBPACK_IMPORTED_MODULE_2__.n,_angular_material_table__WEBPACK_IMPORTED_MODULE_2__.c,_angular_material_table__WEBPACK_IMPORTED_MODULE_2__.i,_angular_material_table__WEBPACK_IMPORTED_MODULE_2__.b,_angular_material_table__WEBPACK_IMPORTED_MODULE_2__.k,_angular_material_table__WEBPACK_IMPORTED_MODULE_2__.m,_angular_material_table__WEBPACK_IMPORTED_MODULE_2__.h,_angular_material_table__WEBPACK_IMPORTED_MODULE_2__.a,_angular_material_input__WEBPACK_IMPORTED_MODULE_11__.b,_angular_material_icon__WEBPACK_IMPORTED_MODULE_12__.a,_angular_material_table__WEBPACK_IMPORTED_MODULE_2__.j,_angular_material_table__WEBPACK_IMPORTED_MODULE_2__.l,_angular_material_card__WEBPACK_IMPORTED_MODULE_13__.a,_angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_14__.a],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_15__.j],styles:[\".title-line[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.title-line[_ngcontent-%COMP%]   .icon-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line[_ngcontent-%COMP%]   .favorite-star[_ngcontent-%COMP%]{padding-right:3px}.mat-table[_ngcontent-%COMP%]{width:100%}.mat-table[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{display:none}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{z-index:2}.mat-table[_ngcontent-%COMP%]   .mat-table-sticky[_ngcontent-%COMP%]{z-index:3!important}.table-container[_ngcontent-%COMP%]{overflow:auto}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-title[_ngcontent-%COMP%]{min-width:100px}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-title[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:95%}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-filename[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-hidden[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-information[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-remove[_ngcontent-%COMP%]{min-width:100px}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .file-info-cell[_ngcontent-%COMP%]{display:grid;margin:0}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .file-info-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:130%}.selection-area[_ngcontent-%COMP%]{cursor:pointer}.selection-area[_ngcontent-%COMP%], .upload-area[_ngcontent-%COMP%]{margin-bottom:1em}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:1em}\"]}),MediaUploadContentComponent})()}}]);","extractedComments":[]}