{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{\"0FyJ\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"AgendaModule\",(function(){return agenda_module_AgendaModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_router=__webpack_require__(\"tyNb\"),tslib_es6=__webpack_require__(\"mrSG\"),biesbjerg_ngx_translate_extract_marker=__webpack_require__(\"4u49\"),csv_export_service=__webpack_require__(\"1NkQ\"),core=__webpack_require__(\"fXoL\"),ngx_translate_core=__webpack_require__(\"sYmb\");let agenda_csv_export_service_AgendaCsvExportService=(()=>{class AgendaCsvExportService{constructor(csvExport,translate){this.csvExport=csvExport,this.translate=translate}exportItemList(items){this.csvExport.export(items,[{label:\"Title\",map:viewItem=>viewItem.getTitle()},{label:\"Text\",map:viewItem=>viewItem.contentObject?viewItem.contentObject.getCSVExportText():\"\"},{label:\"Duration\",property:\"duration\"},{label:\"Comment\",property:\"comment\"},{label:\"Item type\",property:\"verboseCsvType\"},{label:\"Tags\",property:\"tags\"}],this.translate.instant(\"Agenda\")+\".csv\")}}return AgendaCsvExportService.ɵfac=function(t){return new(t||AgendaCsvExportService)(core.dc(csv_export_service.a),core.dc(ngx_translate_core.k))},AgendaCsvExportService.ɵprov=core.Pb({token:AgendaCsvExportService,factory:AgendaCsvExportService.ɵfac,providedIn:\"root\"}),AgendaCsvExportService})();var openslides_status_service=__webpack_require__(\"D/ll\"),storage_service=__webpack_require__(\"AqIO\"),tag_repository_service=__webpack_require__(\"lv9T\"),base_filter_list_service=__webpack_require__(\"+8Rz\"),agenda_item=__webpack_require__(\"+az0\");let agenda_filter_list_service_AgendaFilterListService=(()=>{class AgendaFilterListService extends base_filter_list_service.a{constructor(store,OSStatus,translate,tagRepo){super(store,OSStatus),this.translate=translate,this.storageKey=\"AgendaList\",this.tagFilterOptions={property:\"tags_id\",label:\"Tags\",options:[]},this.updateFilterForRepo(tagRepo,this.tagFilterOptions,this.translate.instant(\"No tags\"))}getFilterDefinitions(){return[{label:\"Status\",property:\"closed\",options:[{label:this.translate.instant(\"Open items\"),condition:!1},{label:this.translate.instant(\"Closed items\"),condition:!0}]},this.tagFilterOptions,{label:\"Visibility\",property:\"type\",options:this.createVisibilityFilterOptions()},{label:\"Type\",property:\"collection\",options:[{label:this.translate.instant(\"Motions\"),condition:\"motions/motion\"},{label:this.translate.instant(\"Topics\"),condition:\"topics/topic\"},{label:this.translate.instant(\"Motion blocks\"),condition:\"motions/motion-block\"},{label:this.translate.instant(\"Elections\"),condition:\"assignments/assignment\"}]}]}preFilter(viewItems){return viewItems.filter(item=>void 0!==item.type)}createVisibilityFilterOptions(){return agenda_item.b.map(choice=>({condition:choice.key,label:choice.name}))}}return AgendaFilterListService.ɵfac=function(t){return new(t||AgendaFilterListService)(core.dc(storage_service.a),core.dc(openslides_status_service.a),core.dc(ngx_translate_core.k),core.dc(tag_repository_service.a))},AgendaFilterListService.ɵprov=core.Pb({token:AgendaFilterListService,factory:AgendaFilterListService.ɵfac,providedIn:\"root\"}),AgendaFilterListService})();var tree_service=__webpack_require__(\"pqYe\");let agenda_pdf_service_AgendaPdfService=(()=>{class AgendaPdfService{constructor(translate,treeService){this.translate=translate,this.treeService=treeService}agendaListToDocDef(items){const tree=this.treeService.makeTree(items,\"weight\",\"parent_id\");return[{text:this.translate.instant(\"Agenda\"),style:\"title\"},this.createEntries(tree)]}createEntries(tree){const content=[];return tree.forEach(treeitem=>content.push(...this.parseItem(treeitem,0))),content}parseItem(nodeItem,level){const itemList=[];if(!nodeItem.item.item.is_hidden){const resultString={style:level?\"listChild\":\"listParent\",columns:[{width:15*level,text:\"\"},{width:60,text:nodeItem.item.item_number},{text:nodeItem.item.contentObject.getTitle()}]};itemList.push(resultString),nodeItem.children&&nodeItem.children.length&&nodeItem.children.forEach(child=>{itemList.push(...this.parseItem(child,level+1))})}return itemList}}return AgendaPdfService.ɵfac=function(t){return new(t||AgendaPdfService)(core.dc(ngx_translate_core.k),core.dc(tree_service.a))},AgendaPdfService.ɵprov=core.Pb({token:AgendaPdfService,factory:AgendaPdfService.ɵfac,providedIn:\"root\"}),AgendaPdfService})();var operator_service=__webpack_require__(\"OwvW\"),pdf_document_service=__webpack_require__(\"a9GI\"),item_repository_service=__webpack_require__(\"InfO\"),list_of_speakers_repository_service=__webpack_require__(\"3Y/2\"),topic_repository_service=__webpack_require__(\"cffc\"),config_service=__webpack_require__(\"+KbT\"),duration_service=__webpack_require__(\"2aHC\"),prompt_service=__webpack_require__(\"F48D\"),viewport_service=__webpack_require__(\"KL36\"),dialog_settings=__webpack_require__(\"Izkr\"),base_list_view=__webpack_require__(\"wL0i\"),view_topic=__webpack_require__(\"Q/67\"),fesm2015_dialog=__webpack_require__(\"0IaG\");const durationValidator=control=>/^\\s*([0-9]+)(:)?([0-5][0-9]?)?\\s*[h|m]?$/g.test(control.value)||\"\"===control.value?null:{valid:!1};__webpack_require__(\"cVnz\");var fesm2015_forms=__webpack_require__(\"3Pt+\"),form_field=__webpack_require__(\"kmnG\"),fesm2015_select=__webpack_require__(\"d3UM\"),fesm2015_input=__webpack_require__(\"qFsG\"),text_field=__webpack_require__(\"ihCf\"),fesm2015_button=__webpack_require__(\"bTqV\"),fesm2015_core=__webpack_require__(\"FKr1\");function ItemInfoDialogComponent_h1_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"h1\",12),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const ctx_r0=core.lc();core.Gb(1),core.Vc(\"\",core.nc(2,2,\"Edit details for\"),\" \",ctx_r0.item.getTitle(),\"\")}}function ItemInfoDialogComponent_mat_form_field_3_mat_option_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-option\",14),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const tag_r5=ctx.$implicit;core.tc(\"value\",tag_r5.id),core.Gb(1),core.Uc(\" \",core.nc(2,2,tag_r5.getTitle()),\" \")}}function ItemInfoDialogComponent_mat_form_field_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-form-field\"),core.Zb(1,\"mat-select\",13),core.mc(2,\"translate\"),core.Qc(3,ItemInfoDialogComponent_mat_form_field_3_mat_option_3_Template,3,4,\"mat-option\",5),core.Yb(),core.Yb()),2&rf){const ctx_r1=core.lc();core.Gb(1),core.uc(\"placeholder\",core.nc(2,2,\"Tags\")),core.Gb(2),core.tc(\"ngForOf\",ctx_r1.tags)}}function ItemInfoDialogComponent_mat_option_7_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-option\",14),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf){const type_r6=ctx.$implicit;core.tc(\"value\",type_r6.key),core.Gb(2),core.Tc(core.nc(3,2,type_r6.name))}}function ItemInfoDialogComponent_mat_error_11_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-error\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,'Your input does not match the following structure: \"hh:mm\"'),\" \"))}let item_info_dialog_component_ItemInfoDialogComponent=(()=>{class ItemInfoDialogComponent{constructor(formBuilder,durationService,dialogRef,tagRepo,item){this.formBuilder=formBuilder,this.durationService=durationService,this.dialogRef=dialogRef,this.tagRepo=tagRepo,this.item=item,this.itemVisibility=agenda_item.b,this.tags=[],this.agendaInfoForm=this.formBuilder.group({tags_id:[],type:[\"\"],durationText:[\"\",durationValidator],item_number:[\"\"],comment:[\"\"]})}ngOnInit(){this.item&&(this.agendaInfoForm.get(\"tags_id\").setValue(this.item.tags_id),this.agendaInfoForm.get(\"type\").setValue(this.item.type),this.agendaInfoForm.get(\"durationText\").setValue(this.durationService.durationToString(this.item.duration,\"h\")),this.agendaInfoForm.get(\"item_number\").setValue(this.item.item_number),this.agendaInfoForm.get(\"comment\").setValue(this.item.comment)),this.tagRepo.getViewModelListObservable().subscribe(tags=>{this.tags=tags})}isTagAvailable(){return!!this.tags&&this.tags.length>0}saveItemInfo(){this.dialogRef.close(this.agendaInfoForm.value)}onCancelButton(){this.dialogRef.close()}onKeyDown(event){\"Enter\"===event.key&&event.shiftKey&&this.saveItemInfo()}}return ItemInfoDialogComponent.ɵfac=function(t){return new(t||ItemInfoDialogComponent)(core.Tb(fesm2015_forms.f),core.Tb(duration_service.a),core.Tb(fesm2015_dialog.h),core.Tb(tag_repository_service.a),core.Tb(fesm2015_dialog.a))},ItemInfoDialogComponent.ɵcmp=core.Nb({type:ItemInfoDialogComponent,selectors:[[\"os-item-info-dialog\"]],decls:27,vars:24,consts:[[\"mat-dialog-title\",\"\",4,\"ngIf\"],[\"mat-dialog-content\",\"\"],[1,\"item-dialog-form\",3,\"formGroup\",\"keydown\"],[4,\"ngIf\"],[\"formControlName\",\"type\",3,\"placeholder\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[\"type\",\"string\",\"matInput\",\"\",\"formControlName\",\"durationText\",3,\"placeholder\"],[\"matInput\",\"\",\"formControlName\",\"item_number\",3,\"placeholder\"],[\"matInput\",\"\",\"formControlName\",\"comment\",\"cdkTextareaAutosize\",\"\",\"cdkAutosizeMinRows\",\"3\",\"cdkAutosizeMaxRows\",\"5\",3,\"placeholder\"],[\"mat-dialog-actions\",\"\"],[\"mat-button\",\"\",3,\"disabled\",\"click\"],[\"mat-button\",\"\",3,\"click\"],[\"mat-dialog-title\",\"\"],[\"formControlName\",\"tags_id\",\"multiple\",\"\",3,\"placeholder\"],[3,\"value\"]],template:function(rf,ctx){1&rf&&(core.Qc(0,ItemInfoDialogComponent_h1_0_Template,3,4,\"h1\",0),core.Zb(1,\"div\",1),core.Zb(2,\"form\",2),core.hc(\"keydown\",(function($event){return ctx.onKeyDown($event)})),core.Qc(3,ItemInfoDialogComponent_mat_form_field_3_Template,4,4,\"mat-form-field\",3),core.Zb(4,\"mat-form-field\"),core.Zb(5,\"mat-select\",4),core.mc(6,\"translate\"),core.Qc(7,ItemInfoDialogComponent_mat_option_7_Template,4,4,\"mat-option\",5),core.Yb(),core.Yb(),core.Zb(8,\"mat-form-field\"),core.Ub(9,\"input\",6),core.mc(10,\"translate\"),core.Qc(11,ItemInfoDialogComponent_mat_error_11_Template,3,3,\"mat-error\",3),core.Yb(),core.Zb(12,\"mat-form-field\"),core.Ub(13,\"input\",7),core.mc(14,\"translate\"),core.Yb(),core.Zb(15,\"mat-form-field\"),core.Ub(16,\"textarea\",8),core.mc(17,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(18,\"div\",9),core.Zb(19,\"button\",10),core.hc(\"click\",(function(){return ctx.saveItemInfo()})),core.Zb(20,\"span\"),core.Sc(21),core.mc(22,\"translate\"),core.Yb(),core.Yb(),core.Zb(23,\"button\",11),core.hc(\"click\",(function(){return ctx.onCancelButton()})),core.Zb(24,\"span\"),core.Sc(25),core.mc(26,\"translate\"),core.Yb(),core.Yb(),core.Yb()),2&rf&&(core.tc(\"ngIf\",ctx.item),core.Gb(2),core.tc(\"formGroup\",ctx.agendaInfoForm),core.Gb(1),core.tc(\"ngIf\",ctx.isTagAvailable()),core.Gb(2),core.uc(\"placeholder\",core.nc(6,12,\"Agenda visibility\")),core.Gb(2),core.tc(\"ngForOf\",ctx.itemVisibility),core.Gb(2),core.uc(\"placeholder\",core.nc(10,14,\"Duration\")),core.Gb(2),core.tc(\"ngIf\",ctx.agendaInfoForm.invalid),core.Gb(2),core.uc(\"placeholder\",core.nc(14,16,\"Item number\")),core.Gb(3),core.uc(\"placeholder\",core.nc(17,18,\"Comment\")),core.Gb(3),core.tc(\"disabled\",ctx.agendaInfoForm.invalid),core.Gb(2),core.Tc(core.nc(22,20,\"Save\")),core.Gb(4),core.Tc(core.nc(26,22,\"Cancel\")))},directives:[common.t,fesm2015_dialog.f,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,form_field.c,fesm2015_select.a,fesm2015_forms.s,fesm2015_forms.i,common.s,fesm2015_input.b,fesm2015_forms.c,text_field.c,fesm2015_dialog.c,fesm2015_button.b,fesm2015_dialog.i,fesm2015_core.n,form_field.b],pipes:[ngx_translate_core.j],styles:[\".item-dialog-form[_ngcontent-%COMP%]{display:inline-block}.item-dialog-form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}\"]}),ItemInfoDialogComponent})();var platform_browser=__webpack_require__(\"jhN1\"),snack_bar=__webpack_require__(\"dNgK\"),head_bar_component=__webpack_require__(\"mksl\"),menu=__webpack_require__(\"STbY\"),icon=__webpack_require__(\"NFeN\"),list_view_table_component=__webpack_require__(\"0Obk\"),pebula_ngrid=__webpack_require__(\"dRZP\"),icon_container_component=__webpack_require__(\"vYAO\"),perms_directive=__webpack_require__(\"3Xi6\"),projector_button_component=__webpack_require__(\"Tp2j\"),divider=__webpack_require__(\"f0Cb\"),speaker_button_component=__webpack_require__(\"40uZ\");function AgendaListComponent_div_19_a_1_Template(rf,ctx){if(1&rf&&core.Ub(0,\"a\",20),2&rf){const item_r8=core.lc().row,ctx_r10=core.lc();core.tc(\"routerLink\",ctx_r10.getDetailUrl(item_r8))}}function AgendaListComponent_div_19_span_4_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\",21),core.Zb(1,\"mat-icon\"),core.Sc(2,\"check\"),core.Yb(),core.Yb())}function AgendaListComponent_div_19_div_9_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",18),core.Zb(1,\"os-icon-container\",22),core.Sc(2),core.Yb(),core.Yb()),2&rf){const item_r8=core.lc().row;core.Gb(1),core.tc(\"noWrap\",!0),core.Gb(1),core.Uc(\" \",item_r8.comment,\" \")}}const _c0=function(a0){return{\"margin-left\":a0}};function AgendaListComponent_div_19_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",13),core.Qc(1,AgendaListComponent_div_19_a_1_Template,1,1,\"a\",14),core.Zb(2,\"div\",15),core.Zb(3,\"div\",16),core.Qc(4,AgendaListComponent_div_19_span_4_Template,3,0,\"span\",17),core.Zb(5,\"span\"),core.Sc(6),core.Yb(),core.Yb(),core.Zb(7,\"div\",18),core.Sc(8),core.Yb(),core.Qc(9,AgendaListComponent_div_19_div_9_Template,3,2,\"div\",19),core.Yb(),core.Yb()),2&rf){const item_r8=ctx.row,ctx_r0=core.lc();core.Gb(1),core.tc(\"ngIf\",!ctx_r0.isMultiSelect),core.Gb(1),core.tc(\"ngStyle\",core.zc(6,_c0,25*item_r8.level+\"px\")),core.Gb(2),core.tc(\"ngIf\",item_r8.closed),core.Gb(2),core.Uc(\" \",item_r8.getListTitle(),\" \"),core.Gb(2),core.Uc(\" \",item_r8.getSubtitle(),\" \"),core.Gb(1),core.tc(\"ngIf\",item_r8.comment)}}function AgendaListComponent_div_20_div_2_span_2_span_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\", \"),core.Yb())}function AgendaListComponent_div_20_div_2_span_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.Qc(2,AgendaListComponent_div_20_div_2_span_2_span_2_Template,2,0,\"span\",10),core.Yb()),2&rf){const tag_r20=ctx.$implicit,last_r21=ctx.last;core.Gb(1),core.Uc(\" \",tag_r20.getTitle(),\" \"),core.Gb(1),core.tc(\"ngIf\",!last_r21)}}function AgendaListComponent_div_20_div_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"os-icon-container\",27),core.Qc(2,AgendaListComponent_div_20_div_2_span_2_Template,3,2,\"span\",28),core.Yb(),core.Yb()),2&rf){const item_r15=core.lc().row;core.Gb(2),core.tc(\"ngForOf\",item_r15.tags)}}function AgendaListComponent_div_20_div_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",29),core.Zb(1,\"os-icon-container\",30),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf){const item_r15=core.lc().row;core.Gb(2),core.Tc(core.nc(3,1,item_r15.verboseType))}}function AgendaListComponent_div_20_div_4_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",29),core.Zb(1,\"os-icon-container\",31),core.Sc(2),core.Yb(),core.Yb()),2&rf){const item_r15=core.lc().row,ctx_r18=core.lc();core.Gb(2),core.Uc(\" \",ctx_r18.durationService.durationToString(item_r15.duration,\"h\"),\" \")}}function AgendaListComponent_div_20_Template(rf,ctx){if(1&rf){const _r27=core.ac();core.Zb(0,\"div\",23),core.hc(\"click\",(function(){core.Ic(_r27);const item_r15=ctx.row;return core.lc().openEditInfo(item_r15)})),core.Zb(1,\"div\",24),core.Qc(2,AgendaListComponent_div_20_div_2_Template,3,1,\"div\",10),core.Qc(3,AgendaListComponent_div_20_div_3_Template,4,3,\"div\",25),core.Qc(4,AgendaListComponent_div_20_div_4_Template,3,1,\"div\",26),core.Yb(),core.Yb()}if(2&rf){const item_r15=ctx.row;core.Gb(2),core.tc(\"ngIf\",item_r15.tags&&item_r15.tags.length),core.Gb(1),core.tc(\"osPerms\",\"agenda.can_manage\")(\"osPermsAnd\",item_r15.verboseType),core.Gb(1),core.tc(\"ngIf\",item_r15.duration)}}const _c1=function(a0){return{item:a0}};function AgendaListComponent_div_21_Template(rf,ctx){if(1&rf){const _r30=core.ac();core.Zb(0,\"div\",13),core.Zb(1,\"button\",32),core.hc(\"click\",(function($event){return core.Ic(_r30),$event.stopPropagation()})),core.Zb(2,\"mat-icon\"),core.Sc(3,\"more_vert\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const item_r28=ctx.row,ctx_r2=core.lc(),_r6=core.Ec(27);core.Gb(1),core.tc(\"disabled\",ctx_r2.isMultiSelect)(\"matMenuTriggerFor\",_r6)(\"matMenuTriggerData\",core.zc(3,_c1,item_r28))}}function AgendaListComponent_div_24_div_1_button_8_Template(rf,ctx){if(1&rf){const _r40=core.ac();core.Zb(0,\"button\",38),core.hc(\"click\",(function(){return core.Ic(_r40),core.lc(3).onAutoNumbering()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"format_list_numbered\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Numbering\")))}function AgendaListComponent_div_24_div_1_Template(rf,ctx){if(1&rf){const _r42=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",38),core.hc(\"click\",(function(){return core.Ic(_r42),core.lc(2).toggleMultiSelect()})),core.Zb(2,\"mat-icon\"),core.Sc(3,\"library_add\"),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb(),core.Ub(7,\"mat-divider\"),core.Qc(8,AgendaListComponent_div_24_div_1_button_8_Template,6,3,\"button\",40),core.Zb(9,\"button\",41),core.Zb(10,\"mat-icon\"),core.Sc(11,\"sort\"),core.Yb(),core.Zb(12,\"span\"),core.Sc(13),core.mc(14,\"translate\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r31=core.lc(2);core.Gb(5),core.Tc(core.nc(6,3,\"Multiselect\")),core.Gb(3),core.tc(\"ngIf\",ctx_r31.isNumberingAllowed),core.Gb(5),core.Tc(core.nc(14,5,\"Sort\"))}}function AgendaListComponent_div_24_button_3_Template(rf,ctx){1&rf&&(core.Zb(0,\"button\",42),core.Zb(1,\"mat-icon\"),core.Sc(2,\"mic\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Current list of speakers\")))}function AgendaListComponent_div_24_button_4_Template(rf,ctx){1&rf&&(core.Zb(0,\"button\",43),core.Zb(1,\"mat-icon\"),core.Sc(2,\"local_offer\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Tags\")))}function AgendaListComponent_div_24_button_6_Template(rf,ctx){if(1&rf){const _r44=core.ac();core.Zb(0,\"button\",38),core.hc(\"click\",(function(){return core.Ic(_r44),core.lc(2).csvExportItemList()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"archive\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Export as CSV\")))}function AgendaListComponent_div_24_button_13_Template(rf,ctx){1&rf&&(core.Zb(0,\"button\",44),core.Zb(1,\"mat-icon\"),core.Sc(2,\"cloud_upload\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Import\")))}function AgendaListComponent_div_24_div_14_Template(rf,ctx){if(1&rf){const _r46=core.ac();core.Zb(0,\"div\"),core.Ub(1,\"mat-divider\"),core.Zb(2,\"button\",45),core.hc(\"click\",(function(){return core.Ic(_r46),core.lc(2).deleteAllSpeakersOfAllListsOfSpeakers()})),core.Zb(3,\"mat-icon\"),core.Sc(4,\"delete\"),core.Yb(),core.Zb(5,\"span\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Yb(),core.Yb()}2&rf&&(core.Gb(6),core.Tc(core.nc(7,1,\"Clear all list of speakers\")))}function AgendaListComponent_div_24_div_15_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\"),core.Ub(1,\"mat-divider\"),core.Zb(2,\"button\",46),core.Zb(3,\"mat-icon\"),core.Sc(4,\"settings\"),core.Yb(),core.Zb(5,\"span\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Yb(),core.Yb()),2&rf&&(core.Gb(6),core.Tc(core.nc(7,1,\"Settings\")))}function AgendaListComponent_div_24_Template(rf,ctx){if(1&rf){const _r48=core.ac();core.Zb(0,\"div\"),core.Qc(1,AgendaListComponent_div_24_div_1_Template,15,7,\"div\",33),core.Ub(2,\"os-projector-button\",34),core.Qc(3,AgendaListComponent_div_24_button_3_Template,6,3,\"button\",35),core.Qc(4,AgendaListComponent_div_24_button_4_Template,6,3,\"button\",36),core.Ub(5,\"mat-divider\"),core.Qc(6,AgendaListComponent_div_24_button_6_Template,6,3,\"button\",37),core.Zb(7,\"button\",38),core.hc(\"click\",(function(){return core.Ic(_r48),core.lc().onDownloadPdf()})),core.Zb(8,\"mat-icon\"),core.Sc(9,\"archive\"),core.Yb(),core.Zb(10,\"span\"),core.Sc(11),core.mc(12,\"translate\"),core.Yb(),core.Yb(),core.Qc(13,AgendaListComponent_div_24_button_13_Template,6,3,\"button\",39),core.Qc(14,AgendaListComponent_div_24_div_14_Template,8,3,\"div\",33),core.Qc(15,AgendaListComponent_div_24_div_15_Template,8,3,\"div\",33),core.Yb()}if(2&rf){const ctx_r4=core.lc();core.Gb(1),core.tc(\"osPerms\",\"agenda.can_manage\"),core.Gb(1),core.tc(\"object\",ctx_r4.itemListSlide)(\"menuItem\",!0),core.Gb(1),core.tc(\"osPerms\",\"agenda.can_see_list_of_speakers\"),core.Gb(1),core.tc(\"osPerms\",\"core.can_manage_tags\"),core.Gb(2),core.tc(\"osPerms\",\"agenda.can_manage\"),core.Gb(5),core.Tc(core.nc(12,10,\"Export as PDF\")),core.Gb(2),core.tc(\"osPerms\",\"agenda.can_manage\"),core.Gb(1),core.tc(\"osPerms\",\"agenda.can_manage\"),core.Gb(1),core.tc(\"osPerms\",\"core.can_manage_config\")}}function AgendaListComponent_div_25_div_14_Template(rf,ctx){if(1&rf){const _r51=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",47),core.hc(\"click\",(function(){return core.Ic(_r51),core.lc(2).setClosedSelected(!0)})),core.Zb(2,\"mat-icon\"),core.Sc(3,\"done\"),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb(),core.Zb(7,\"button\",47),core.hc(\"click\",(function(){return core.Ic(_r51),core.lc(2).setClosedSelected(!1)})),core.Zb(8,\"mat-icon\"),core.Sc(9,\"redo\"),core.Yb(),core.Zb(10,\"span\"),core.Sc(11),core.mc(12,\"translate\"),core.Yb(),core.Yb(),core.Ub(13,\"mat-divider\"),core.Zb(14,\"button\",47),core.hc(\"click\",(function(){return core.Ic(_r51),core.lc(2).setAgendaType(1)})),core.Zb(15,\"mat-icon\"),core.Sc(16,\"public\"),core.Yb(),core.Zb(17,\"span\"),core.Sc(18),core.mc(19,\"translate\"),core.Yb(),core.Yb(),core.Zb(20,\"button\",47),core.hc(\"click\",(function(){return core.Ic(_r51),core.lc(2).setAgendaType(2)})),core.Zb(21,\"mat-icon\"),core.Sc(22,\"visibility\"),core.Yb(),core.Zb(23,\"span\"),core.Sc(24),core.mc(25,\"translate\"),core.Yb(),core.Yb(),core.Zb(26,\"button\",47),core.hc(\"click\",(function(){return core.Ic(_r51),core.lc(2).setAgendaType(3)})),core.Zb(27,\"mat-icon\"),core.Sc(28,\"visibility_off\"),core.Yb(),core.Zb(29,\"span\"),core.Sc(30),core.mc(31,\"translate\"),core.Yb(),core.Yb(),core.Ub(32,\"mat-divider\"),core.Zb(33,\"button\",47),core.hc(\"click\",(function(){core.Ic(_r51);const ctx_r56=core.lc(2);return ctx_r56.duplicateMultipleTopics(ctx_r56.selectedRows)})),core.Zb(34,\"mat-icon\"),core.Sc(35,\"file_copy\"),core.Yb(),core.Zb(36,\"span\"),core.Sc(37),core.mc(38,\"translate\"),core.Yb(),core.Yb(),core.Zb(39,\"button\",47),core.hc(\"click\",(function(){return core.Ic(_r51),core.lc(2).removeSelected()})),core.Zb(40,\"mat-icon\"),core.Sc(41,\"remove\"),core.Yb(),core.Zb(42,\"span\"),core.Sc(43),core.mc(44,\"translate\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r49=core.lc(2);core.Gb(1),core.tc(\"disabled\",!ctx_r49.selectedRows.length),core.Gb(4),core.Tc(core.nc(6,14,\"Close\")),core.Gb(2),core.tc(\"disabled\",!ctx_r49.selectedRows.length),core.Gb(4),core.Tc(core.nc(12,16,\"Open\")),core.Gb(3),core.tc(\"disabled\",!ctx_r49.selectedRows.length),core.Gb(4),core.Tc(core.nc(19,18,\"Set public\")),core.Gb(2),core.tc(\"disabled\",!ctx_r49.selectedRows.length),core.Gb(4),core.Tc(core.nc(25,20,\"Set internal\")),core.Gb(2),core.tc(\"disabled\",!ctx_r49.selectedRows.length),core.Gb(4),core.Tc(core.nc(31,22,\"Set hidden\")),core.Gb(3),core.tc(\"disabled\",!ctx_r49.selectedRows.length),core.Gb(4),core.Tc(core.nc(38,24,\"Duplicate\")),core.Gb(2),core.tc(\"disabled\",!ctx_r49.selectedRows.length),core.Gb(4),core.Tc(core.nc(44,26,\"Remove from agenda\"))}}function AgendaListComponent_div_25_Template(rf,ctx){if(1&rf){const _r59=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",38),core.hc(\"click\",(function(){return core.Ic(_r59),core.lc().selectAll()})),core.Zb(2,\"mat-icon\"),core.Sc(3,\"done_all\"),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb(),core.Zb(7,\"button\",47),core.hc(\"click\",(function(){return core.Ic(_r59),core.lc().deselectAll()})),core.Zb(8,\"mat-icon\"),core.Sc(9,\"clear\"),core.Yb(),core.Zb(10,\"span\"),core.Sc(11),core.mc(12,\"translate\"),core.Yb(),core.Yb(),core.Ub(13,\"mat-divider\"),core.Qc(14,AgendaListComponent_div_25_div_14_Template,45,28,\"div\",33),core.Yb()}if(2&rf){const ctx_r5=core.lc();core.Gb(5),core.Tc(core.nc(6,4,\"Select all\")),core.Gb(2),core.tc(\"disabled\",!ctx_r5.selectedRows.length),core.Gb(4),core.Tc(core.nc(12,6,\"Deselect all\")),core.Gb(3),core.tc(\"osPerms\",\"agenda.can_manage\")}}function AgendaListComponent_ng_template_28_div_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Ub(1,\"os-projector-button\",34),core.Ub(2,\"os-speaker-button\",34),core.Yb()),2&rf){const item_r61=core.lc().item;core.Gb(1),core.tc(\"object\",item_r61.contentObject)(\"menuItem\",!0),core.Gb(1),core.tc(\"object\",item_r61.contentObjectData)(\"menuItem\",!0)}}function AgendaListComponent_ng_template_28_div_1_button_13_Template(rf,ctx){if(1&rf){const _r70=core.ac();core.Zb(0,\"button\",38),core.hc(\"click\",(function(){core.Ic(_r70);const item_r61=core.lc(2).item;return core.lc().duplicateTopic(item_r61.contentObject)})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"file_copy\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Duplicate\")))}function AgendaListComponent_ng_template_28_div_1_button_14_Template(rf,ctx){if(1&rf){const _r73=core.ac();core.Zb(0,\"button\",38),core.hc(\"click\",(function(){core.Ic(_r73);const item_r61=core.lc(2).item;return core.lc().removeFromAgenda(item_r61)})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"remove\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Remove from agenda\")))}function AgendaListComponent_ng_template_28_div_1_button_15_Template(rf,ctx){if(1&rf){const _r76=core.ac();core.Zb(0,\"button\",45),core.hc(\"click\",(function(){core.Ic(_r76);const item_r61=core.lc(2).item;return core.lc().deleteTopic(item_r61)})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"delete\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Delete\")))}function AgendaListComponent_ng_template_28_div_1_Template(rf,ctx){if(1&rf){const _r79=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",38),core.hc(\"click\",(function(){core.Ic(_r79);const item_r61=core.lc().item;return core.lc().onDoneSingleButton(item_r61)})),core.Zb(2,\"mat-icon\",48),core.Sc(3),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb(),core.Zb(7,\"button\",38),core.hc(\"click\",(function($event){core.Ic(_r79);const item_r61=core.lc().item;return core.lc().openEditInfo(item_r61,$event)})),core.Zb(8,\"mat-icon\"),core.Sc(9,\"edit\"),core.Yb(),core.Zb(10,\"span\"),core.Sc(11),core.mc(12,\"translate\"),core.Yb(),core.Yb(),core.Qc(13,AgendaListComponent_ng_template_28_div_1_button_13_Template,6,3,\"button\",40),core.Qc(14,AgendaListComponent_ng_template_28_div_1_button_14_Template,6,3,\"button\",40),core.Qc(15,AgendaListComponent_ng_template_28_div_1_button_15_Template,6,3,\"button\",49),core.Yb()}if(2&rf){const item_r61=core.lc().item,ctx_r63=core.lc();core.Gb(3),core.Uc(\" \",item_r61.closed?\"check_box\":\"check_box_outline_blank\",\" \"),core.Gb(2),core.Tc(core.nc(6,6,\"Done\")),core.Gb(6),core.Tc(core.nc(12,8,\"Edit details\")),core.Gb(2),core.tc(\"ngIf\",ctx_r63.isTopic(item_r61.contentObject)),core.Gb(1),core.tc(\"ngIf\",!ctx_r63.isTopic(item_r61.contentObject)),core.Gb(1),core.tc(\"ngIf\",ctx_r63.isTopic(item_r61.contentObject))}}function AgendaListComponent_ng_template_28_Template(rf,ctx){if(1&rf&&(core.Qc(0,AgendaListComponent_ng_template_28_div_0_Template,3,4,\"div\",10),core.Qc(1,AgendaListComponent_ng_template_28_div_1_Template,16,10,\"div\",33)),2&rf){const ctx_r7=core.lc();core.tc(\"ngIf\",ctx_r7.vp.isMobile),core.Gb(1),core.tc(\"osPerms\",\"agenda.can_manage\")}}const _c2=function(){return[\"info\"]};let agenda_list_component_AgendaListComponent=(()=>{class AgendaListComponent extends base_list_view.a{constructor(titleService,translate,matSnackBar,storage,operator,router,repo,promptService,dialog,config,vp,durationService,csvExport,filterService,agendaPdfService,pdfService,listOfSpeakersRepo,topicRepo){super(titleService,translate,matSnackBar,storage),this.translate=translate,this.operator=operator,this.router=router,this.repo=repo,this.promptService=promptService,this.dialog=dialog,this.config=config,this.vp=vp,this.durationService=durationService,this.csvExport=csvExport,this.filterService=filterService,this.agendaPdfService=agendaPdfService,this.pdfService=pdfService,this.listOfSpeakersRepo=listOfSpeakersRepo,this.topicRepo=topicRepo,this.itemListSlide={getBasicProjectorElement:options=>({name:\"agenda/item-list\",getIdentifiers:()=>[\"name\"]}),slideOptions:[{key:\"only_main_items\",displayName:Object(biesbjerg_ngx_translate_extract_marker.a)(\"Only main agenda items\"),default:!1}],projectionDefaultName:\"agenda_all_items\",getDialogTitle:()=>this.translate.instant(\"Agenda\")},this.tableColumnDefinition=[{prop:\"title\",width:\"auto\"},{prop:\"info\",width:\"15%\"}],this.restrictedColumns=[{columnName:\"menu\",permission:operator_service.b.agendaCanManage}],this.filterProps=[\"item_number\",\"comment\",\"getListTitle\"],this.canMultiSelect=!0}get canManage(){return this.operator.hasPerms(operator_service.b.agendaCanManage)}ngOnInit(){super.setTitle(\"Agenda\"),this.config.get(\"agenda_enable_numbering\").subscribe(autoNumbering=>this.isNumberingAllowed=autoNumbering),this.config.get(\"agenda_show_subtitle\").subscribe(showSubtitle=>this.showSubtitle=showSubtitle)}getListOfSpeakers(item){return this.listOfSpeakersRepo.findByContentObject(item.item.content_object)}getDetailUrl(item){if(item.contentObject&&!this.isMultiSelect)return item.contentObject.getDetailStateURL()}openEditInfo(item){!this.isMultiSelect&&this.canManage&&this.dialog.open(item_info_dialog_component_ItemInfoDialogComponent,Object.assign(Object.assign({},dialog_settings.a),{data:item})).afterClosed().subscribe(result=>{result&&(result.duration=result.durationText?this.durationService.stringToDuration(result.durationText):0,this.repo.update(result,item).catch(this.raiseError))})}onAutoNumbering(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to number all agenda items?\");(yield this.promptService.open(title))&&(yield this.repo.autoNumbering().catch(this.raiseError))}))}onDoneSingleButton(item){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){yield this.repo.update({closed:!item.closed},item).catch(this.raiseError)}))}onPlusButton(){this.router.navigate([\"/topics/new\"])}removeFromAgenda(item){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to remove this entry from the agenda?\"),content=item.contentObject.getTitle();(yield this.promptService.open(title,content))&&(yield this.repo.removeFromAgenda(item).catch(this.raiseError))}))}deleteTopic(item){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){if(!(item.contentObject instanceof view_topic.a))return;const title=this.translate.instant(\"Are you sure you want to delete this topic?\"),content=item.contentObject.getTitle();(yield this.promptService.open(title,content))&&(yield this.topicRepo.delete(item.contentObject).catch(this.raiseError))}))}removeSelected(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to remove all selected items from the agenda?\"),content=this.translate.instant(\"All topics will be deleted and won't be accessible afterwards.\");if(yield this.promptService.open(title,content))try{for(const item of this.selectedRows)item.contentObject instanceof view_topic.a?yield this.topicRepo.delete(item.contentObject):yield this.repo.removeFromAgenda(item)}catch(e){this.raiseError(e)}}))}setClosedSelected(closed){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){try{for(const item of this.selectedRows)yield this.repo.update({closed:closed},item)}catch(e){this.raiseError(e)}}))}setAgendaType(agendaType){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){try{for(const item of this.selectedRows)yield this.repo.update({type:agendaType},item).catch(this.raiseError)}catch(e){this.raiseError(e)}}))}csvExportItemList(){this.csvExport.exportItemList(this.dataSource.filteredData)}onDownloadPdf(){const filename=this.translate.instant(\"Agenda\");this.pdfService.download(this.agendaPdfService.agendaListToDocDef(this.dataSource.filteredData),filename)}getDurationEndString(){const duration=this.repo.calculateDuration();if(!duration)return\"\";const durationString=this.durationService.durationToString(duration,\"h\"),endTime=this.repo.calculateEndTime(),result=`${this.translate.instant(\"Duration\")}: ${durationString}`;return endTime?result+` (${this.translate.instant(\"Estimated end\")}:\\n            ${endTime.toLocaleTimeString(this.translate.currentLang,{hour:\"numeric\",minute:\"numeric\"})} h)`:result}deleteAllSpeakersOfAllListsOfSpeakers(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to clear all speakers of all lists?\"),content=this.translate.instant(\"All lists of speakers will be cleared.\");(yield this.promptService.open(title,content))&&this.listOfSpeakersRepo.deleteAllSpeakersOfAllListsOfSpeakers().catch(this.raiseError)}))}duplicateTopic(topic){this.topicRepo.duplicateTopic(topic)}duplicateMultipleTopics(selectedItems){for(const item of selectedItems)this.isTopic(item.contentObject)&&this.duplicateTopic(item.contentObject)}isTopic(obj){return!!obj&&void 0!==obj.collectionString&&obj.collectionString===view_topic.a.COLLECTIONSTRING&&!!obj.topic}}return AgendaListComponent.ɵfac=function(t){return new(t||AgendaListComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(storage_service.a),core.Tb(operator_service.a),core.Tb(fesm2015_router.f),core.Tb(item_repository_service.a),core.Tb(prompt_service.a),core.Tb(fesm2015_dialog.b),core.Tb(config_service.a),core.Tb(viewport_service.a),core.Tb(duration_service.a),core.Tb(agenda_csv_export_service_AgendaCsvExportService),core.Tb(agenda_filter_list_service_AgendaFilterListService),core.Tb(agenda_pdf_service_AgendaPdfService),core.Tb(pdf_document_service.b),core.Tb(list_of_speakers_repository_service.a),core.Tb(topic_repository_service.a))},AgendaListComponent.ɵcmp=core.Nb({type:AgendaListComponent,selectors:[[\"os-agenda-list\"]],features:[core.Db],decls:29,vars:26,consts:[[3,\"hasMainButton\",\"multiSelectMode\",\"mainEvent\"],[1,\"title-slot\"],[1,\"menu-slot\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"matMenuTriggerFor\"],[1,\"central-info-slot\"],[\"mat-icon-button\",\"\",3,\"click\"],[\"listStorageKey\",\"agenda\",3,\"listObservableProvider\",\"vScrollFixed\",\"filterService\",\"columns\",\"multiSelect\",\"restricted\",\"hiddenInMobile\",\"alwaysShowMenu\",\"filterProps\",\"selectedRows\",\"selectedRowsChange\",\"dataSourceChange\"],[\"class\",\"cell-slot fill\",4,\"pblNgridCellDef\"],[\"class\",\"cell-slot fill clickable\",3,\"click\",4,\"pblNgridCellDef\"],[\"agendaMenu\",\"matMenu\"],[4,\"ngIf\"],[\"singleItemMenu\",\"matMenu\"],[\"matMenuContent\",\"\"],[1,\"cell-slot\",\"fill\"],[\"class\",\"detail-link\",3,\"routerLink\",4,\"ngIf\"],[1,\"innerTable\",3,\"ngStyle\"],[1,\"title-line\",\"ellipsis-overflow\"],[\"class\",\"icon-prefix\",4,\"ngIf\"],[1,\"subtitle\",\"ellipsis-overflow\"],[\"class\",\"subtitle ellipsis-overflow\",4,\"ngIf\"],[1,\"detail-link\",3,\"routerLink\"],[1,\"icon-prefix\"],[\"size\",\"small\",\"icon\",\"comment\",3,\"noWrap\"],[1,\"cell-slot\",\"fill\",\"clickable\",3,\"click\"],[1,\"info-col-items\"],[\"class\",\"spacer-top-5\",4,\"osPerms\",\"osPermsAnd\"],[\"class\",\"spacer-top-5\",4,\"ngIf\"],[\"icon\",\"local_offer\"],[4,\"ngFor\",\"ngForOf\"],[1,\"spacer-top-5\"],[\"icon\",\"visibility\"],[\"icon\",\"access_time\"],[\"mat-icon-button\",\"\",3,\"disabled\",\"matMenuTriggerFor\",\"matMenuTriggerData\",\"click\"],[4,\"osPerms\"],[3,\"object\",\"menuItem\"],[\"mat-menu-item\",\"\",\"routerLink\",\"speakers\",4,\"osPerms\"],[\"mat-menu-item\",\"\",\"routerLink\",\"/tags\",4,\"osPerms\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"osPerms\"],[\"mat-menu-item\",\"\",3,\"click\"],[\"mat-menu-item\",\"\",\"routerLink\",\"import\",4,\"osPerms\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"ngIf\"],[\"mat-menu-item\",\"\",\"routerLink\",\"sort-agenda\"],[\"mat-menu-item\",\"\",\"routerLink\",\"speakers\"],[\"mat-menu-item\",\"\",\"routerLink\",\"/tags\"],[\"mat-menu-item\",\"\",\"routerLink\",\"import\"],[\"mat-menu-item\",\"\",1,\"red-warning-text\",3,\"click\"],[\"mat-menu-item\",\"\",\"routerLink\",\"/settings/agenda\"],[\"mat-menu-item\",\"\",3,\"disabled\",\"click\"],[\"color\",\"accent\"],[\"mat-menu-item\",\"\",\"class\",\"red-warning-text\",3,\"click\",4,\"ngIf\"]],template:function(rf,ctx){if(1&rf&&(core.Zb(0,\"os-head-bar\",0),core.hc(\"mainEvent\",(function(){return ctx.onPlusButton()})),core.Zb(1,\"div\",1),core.Zb(2,\"h2\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Zb(5,\"div\",2),core.Zb(6,\"button\",3),core.Zb(7,\"mat-icon\"),core.Sc(8,\"more_vert\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(9,\"div\",4),core.Zb(10,\"button\",5),core.hc(\"click\",(function(){return ctx.toggleMultiSelect()})),core.Zb(11,\"mat-icon\"),core.Sc(12,\"arrow_back\"),core.Yb(),core.Yb(),core.Zb(13,\"span\"),core.Sc(14),core.Yb(),core.Zb(15,\"span\"),core.Sc(16),core.mc(17,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(18,\"os-list-view-table\",6),core.hc(\"selectedRowsChange\",(function($event){return ctx.selectedRows=$event}))(\"dataSourceChange\",(function($event){return ctx.onDataSourceChange($event)})),core.Qc(19,AgendaListComponent_div_19_Template,10,8,\"div\",7),core.Qc(20,AgendaListComponent_div_20_Template,5,4,\"div\",8),core.Qc(21,AgendaListComponent_div_21_Template,4,5,\"div\",7),core.Yb(),core.Zb(22,\"mat-menu\",null,9),core.Qc(24,AgendaListComponent_div_24_Template,16,12,\"div\",10),core.Qc(25,AgendaListComponent_div_25_Template,15,8,\"div\",10),core.Yb(),core.Zb(26,\"mat-menu\",null,11),core.Qc(28,AgendaListComponent_ng_template_28_Template,2,2,\"ng-template\",12),core.Yb()),2&rf){const _r3=core.Ec(23);core.tc(\"hasMainButton\",ctx.canManage)(\"multiSelectMode\",ctx.isMultiSelect),core.Gb(3),core.Tc(core.nc(4,21,\"Agenda\")),core.Gb(3),core.tc(\"matMenuTriggerFor\",_r3),core.Gb(8),core.Uc(\"\",ctx.selectedRows.length,\" \"),core.Gb(2),core.Tc(core.nc(17,23,\"selected\")),core.Gb(2),core.tc(\"listObservableProvider\",ctx.repo)(\"vScrollFixed\",76)(\"filterService\",ctx.filterService)(\"columns\",ctx.tableColumnDefinition)(\"multiSelect\",ctx.isMultiSelect)(\"restricted\",ctx.restrictedColumns)(\"hiddenInMobile\",core.yc(25,_c2))(\"alwaysShowMenu\",!0)(\"filterProps\",ctx.filterProps)(\"selectedRows\",ctx.selectedRows),core.Gb(1),core.tc(\"pblNgridCellDef\",\"title\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"info\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"menu\"),core.Gb(3),core.tc(\"ngIf\",!ctx.isMultiSelect),core.Gb(1),core.tc(\"ngIf\",ctx.isMultiSelect)}},directives:[head_bar_component.a,fesm2015_button.b,menu.e,icon.a,list_view_table_component.a,pebula_ngrid.c,menu.f,common.t,menu.b,common.w,fesm2015_router.i,icon_container_component.a,perms_directive.a,common.s,projector_button_component.a,divider.a,menu.c,fesm2015_router.g,speaker_button_component.a],pipes:[ngx_translate_core.j],styles:[\".title-line[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.title-line[_ngcontent-%COMP%]   .icon-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line[_ngcontent-%COMP%]   .favorite-star[_ngcontent-%COMP%]{padding-right:3px}.mat-table[_ngcontent-%COMP%]{width:100%}.mat-table[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{display:none}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{z-index:2}.mat-table[_ngcontent-%COMP%]   .mat-table-sticky[_ngcontent-%COMP%]{z-index:3!important}.info-col-items[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap;font-size:14px}.info-col-items[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:18px;height:18px;width:18px}.align-right[_ngcontent-%COMP%]{margin-left:auto}\"],changeDetection:0}),AgendaListComponent})();var BehaviorSubject=__webpack_require__(\"2Vo4\"),sort_tree_component=__webpack_require__(\"Qy/R\"),sidenav=__webpack_require__(\"XhcP\"),card=__webpack_require__(\"Wp6s\"),sorting_tree_component=__webpack_require__(\"/tkw\"),fesm2015_checkbox=__webpack_require__(\"bSwM\"),tooltip=__webpack_require__(\"Qu3c\");function AgendaSortComponent_div_13_Template(rf,ctx){if(1&rf){const _r7=core.ac();core.Zb(0,\"div\",18),core.Zb(1,\"div\"),core.Zb(2,\"span\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Sc(5,\":  \"),core.Yb(),core.Zb(6,\"div\"),core.Zb(7,\"button\",4),core.hc(\"click\",(function(){return core.Ic(_r7),core.lc().resetFilters()})),core.Zb(8,\"mat-icon\",19),core.Sc(9,\"cancel\"),core.Yb(),core.Zb(10,\"span\"),core.Sc(11),core.mc(12,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Yb()}2&rf&&(core.Gb(3),core.Tc(core.nc(4,2,\"Active filters\")),core.Gb(8),core.Tc(core.nc(12,4,\"Visibility\")))}function AgendaSortComponent_mat_checkbox_28_Template(rf,ctx){if(1&rf){const _r10=core.ac();core.Zb(0,\"mat-checkbox\",20),core.hc(\"ngModelChange\",(function($event){return core.Ic(_r10),ctx.$implicit.state=$event}))(\"change\",(function(){core.Ic(_r10);const option_r8=ctx.$implicit;return core.lc().onFilterChange(option_r8.id)})),core.Zb(1,\"mat-icon\",21),core.mc(2,\"translate\"),core.Sc(3),core.Yb(),core.Sc(4),core.mc(5,\"translate\"),core.Yb()}if(2&rf){const option_r8=ctx.$implicit,ctx_r2=core.lc();core.tc(\"ngModel\",option_r8.state),core.Gb(1),core.uc(\"matTooltip\",core.nc(2,4,option_r8.label)),core.Gb(2),core.Tc(ctx_r2.getIcon(option_r8.label)),core.Gb(1),core.Uc(\" \",core.nc(5,6,option_r8.label),\" \")}}function AgendaSortComponent_ng_template_41_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\",22),core.Sc(1),core.Yb(),core.Zb(2,\"span\",23),core.Sc(3),core.mc(4,\"translate\"),core.Zb(5,\"mat-icon\"),core.Sc(6),core.Yb(),core.Yb()),2&rf){const item_r12=ctx.item,ctx_r5=core.lc();core.Gb(1),core.Tc(item_r12.getTitle()),core.Gb(2),core.Uc(\" \",core.nc(4,3,item_r12.verboseType),\" \"),core.Gb(3),core.Tc(ctx_r5.getIcon(item_r12.verboseType))}}let agenda_sort_component_AgendaSortComponent=(()=>{class AgendaSortComponent extends sort_tree_component.a{constructor(title,translate,matSnackBar,agendaRepo,promptService){super(title,translate,matSnackBar,promptService),this.agendaRepo=agendaRepo,this.filterOptions=agenda_item.b.map(item=>({label:item.name,id:item.key,state:!1})),this.activeFilters=new BehaviorSubject.a([]),this.itemsObservable=this.agendaRepo.getViewModelListObservable()}onFilterChange(filter){const value=this.activeFilters.value;value.includes(filter)?value.splice(value.indexOf(filter),1):value.push(filter),this.activeFilters.next(value)}ngOnInit(){const filter=this.activeFilters.subscribe(value=>{this.hasActiveFilter=0!==value.length,this.changeFilter.emit(item=>!(value.includes(item.type)||0===value.length))});this.subscriptions.push(filter)}resetFilters(){for(const option of this.filterOptions)option.state=!1;this.activeFilters.next([])}onSave(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){yield this.agendaRepo.sortItems(this.osSortTree.getTreeData()).then(()=>this.osSortTree.setSubscription(),this.raiseError)}))}onStateChange(nextState){this.changeState.emit(nextState)}getIcon(type){switch(type.toLowerCase()){case\"public item\":return\"public\";case\"internal item\":return\"visibility\";case\"hidden item\":return\"visibility_off\"}}}return AgendaSortComponent.ɵfac=function(t){return new(t||AgendaSortComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(item_repository_service.a),core.Tb(prompt_service.a))},AgendaSortComponent.ɵcmp=core.Nb({type:AgendaSortComponent,selectors:[[\"os-agenda-sort\"]],features:[core.Db],decls:43,vars:27,consts:[[3,\"nav\",\"editMode\",\"mainEvent\",\"saveEvent\"],[1,\"title-slot\"],[1,\"custom-table-header\",\"sort-header\"],[1,\"button-menu\",\"left\"],[\"mat-button\",\"\",3,\"click\"],[\"class\",\"current-filters\",4,\"ngIf\"],[1,\"button-menu\",\"right\"],[\"mode\",\"over\",\"position\",\"end\"],[\"visibilityFilter\",\"\"],[1,\"sort-drawer-content\"],[1,\"sort-grid\"],[1,\"hint\"],[3,\"ngModel\",\"ngModelChange\",\"change\",4,\"ngFor\",\"ngForOf\"],[1,\"current-nodes\"],[\"parentKey\",\"parent_id\",\"weightKey\",\"weight\",3,\"model\",\"stateChange\",\"filterChange\",\"hasChanged\",\"visibleNodes\"],[\"osSortedTree\",\"\"],[\"class\",\"sorting-tree-node\"],[\"innerNode\",\"\"],[1,\"current-filters\"],[\"inline\",\"\"],[3,\"ngModel\",\"ngModelChange\",\"change\"],[3,\"matTooltip\"],[1,\"sort-node-title\"],[1,\"sort-node-icon\"]],template:function(rf,ctx){if(1&rf){const _r13=core.ac();core.Zb(0,\"os-head-bar\",0),core.hc(\"mainEvent\",(function(){return ctx.onCancel()}))(\"saveEvent\",(function(){return ctx.onSave()})),core.Zb(1,\"div\",1),core.Zb(2,\"h2\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(5,\"div\",2),core.Zb(6,\"div\",3),core.Zb(7,\"button\",4),core.hc(\"click\",(function(){return ctx.onStateChange(!0)})),core.Sc(8),core.mc(9,\"translate\"),core.Yb(),core.Zb(10,\"button\",4),core.hc(\"click\",(function(){return ctx.onStateChange(!1)})),core.Sc(11),core.mc(12,\"translate\"),core.Yb(),core.Yb(),core.Qc(13,AgendaSortComponent_div_13_Template,13,6,\"div\",5),core.Zb(14,\"div\",6),core.Zb(15,\"button\",4),core.hc(\"click\",(function(){core.Ic(_r13);const _r1=core.Ec(18);return _r1.opened?_r1.close():_r1.open()})),core.Sc(16,\" Filter \"),core.Yb(),core.Zb(17,\"mat-drawer\",7,8),core.Zb(19,\"section\",9),core.Zb(20,\"button\",4),core.hc(\"click\",(function(){return core.Ic(_r13),core.Ec(18).toggle()})),core.Zb(21,\"mat-icon\"),core.Sc(22,\"keyboard_arrow_right\"),core.Yb(),core.Yb(),core.Zb(23,\"span\",10),core.Zb(24,\"div\",11),core.Sc(25),core.mc(26,\"translate\"),core.Yb(),core.Zb(27,\"div\"),core.Qc(28,AgendaSortComponent_mat_checkbox_28_Template,6,8,\"mat-checkbox\",12),core.Yb(),core.Yb(),core.Yb(),core.Yb(),core.Yb(),core.Yb(),core.Zb(29,\"mat-card\"),core.Zb(30,\"div\",13),core.Sc(31),core.Zb(32,\"span\"),core.Sc(33),core.mc(34,\"translate\"),core.Yb(),core.Sc(35),core.Zb(36,\"span\"),core.Sc(37),core.mc(38,\"translate\"),core.Yb(),core.Yb(),core.Zb(39,\"os-sorting-tree\",14,15),core.hc(\"hasChanged\",(function($event){return ctx.receiveChanges($event)}))(\"visibleNodes\",(function($event){return ctx.onChangeAmountOfItems($event)})),core.Qc(41,AgendaSortComponent_ng_template_41_Template,7,5,\"ng-template\",16,17,core.Rc),core.Yb(),core.Yb()}2&rf&&(core.tc(\"nav\",!1)(\"editMode\",ctx.hasChanged),core.Gb(3),core.Tc(core.nc(4,15,\"Sort agenda\")),core.Gb(5),core.Tc(core.nc(9,17,\"Expand all\")),core.Gb(3),core.Tc(core.nc(12,19,\"Collapse all\")),core.Gb(2),core.tc(\"ngIf\",ctx.hasActiveFilter),core.Gb(12),core.Tc(core.nc(26,21,\"Visibility\")),core.Gb(3),core.tc(\"ngForOf\",ctx.filterOptions),core.Gb(3),core.Uc(\" \",ctx.seenNodes[0],\" \"),core.Gb(2),core.Tc(core.nc(34,23,\"of\")),core.Gb(2),core.Uc(\" \",ctx.seenNodes[1],\" \"),core.Gb(2),core.Tc(core.nc(38,25,\"items\")),core.Gb(2),core.tc(\"model\",ctx.itemsObservable)(\"stateChange\",ctx.changeState)(\"filterChange\",ctx.changeFilter))},directives:[head_bar_component.a,fesm2015_button.b,common.t,sidenav.a,icon.a,common.s,card.a,sorting_tree_component.a,fesm2015_checkbox.a,fesm2015_forms.s,fesm2015_forms.v,tooltip.c],pipes:[ngx_translate_core.j],styles:[\".sort-header[_ngcontent-%COMP%]{display:block;padding:0 8px;width:auto;position:relative;text-align:center}.sort-header[_ngcontent-%COMP%]   .button-menu[_ngcontent-%COMP%]{display:inline-block}.sort-header[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{float:left}.sort-header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{float:right}.sort-header[_ngcontent-%COMP%]   mat-drawer[_ngcontent-%COMP%]{min-width:320px}.sort-header[_ngcontent-%COMP%]   .sort-drawer-content[_ngcontent-%COMP%]{text-align:left}.sort-header[_ngcontent-%COMP%]   .sort-drawer-content[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{margin-left:8px}.sort-header[_ngcontent-%COMP%]   .sort-drawer-content[_ngcontent-%COMP%]   .sort-grid[_ngcontent-%COMP%]{display:inline-grid;grid-template-columns:auto;grid-template-rows:20px 30px;margin:8px;vertical-align:top;line-height:1.5}.sort-header[_ngcontent-%COMP%]   .sort-drawer-content[_ngcontent-%COMP%]   .sort-grid[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}.sort-header[_ngcontent-%COMP%]   .current-filters[_ngcontent-%COMP%]{display:inline-block}.sort-header[_ngcontent-%COMP%]   .current-filters[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline}.current-nodes[_ngcontent-%COMP%]{position:relative;margin-bottom:8px}.sort-node-icon[_ngcontent-%COMP%]{margin:0 12px 0 auto}.sort-node-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;vertical-align:middle}\"]}),AgendaSortComponent})();var watch_for_changes_guard=__webpack_require__(\"+QJK\"),base_import_list=__webpack_require__(\"gjbj\"),base_import_service=__webpack_require__(\"E2rH\"),create_topic=__webpack_require__(\"W+e+\"),ngx_papaparse=__webpack_require__(\"P6Fj\");let topic_import_service_TopicImportService=(()=>{class TopicImportService extends base_import_service.a{constructor(durationService,repo,translate,papa,matSnackBar){super(translate,papa,matSnackBar),this.durationService=durationService,this.repo=repo,this.headerMap=[\"title\",\"text\",\"agenda_duration\",\"agenda_comment\",\"agenda_type\"],this.requiredHeaderLength=1,this.errorList={NoTitle:\"A Topic needs a title\",ParsingErrors:\"Some csv values could not be read correctly.\"},this.expectedHeader=this.headerMap}clearData(){}mapData(line){const newEntry=new create_topic.a,headerLength=Math.min(this.expectedHeader.length,line.length);let hasErrors=!1;for(let idx=0;idx<headerLength;idx++)switch(this.expectedHeader[idx]){case\"agenda_duration\":try{const duration=this.parseDuration(line[idx]);duration>0&&(newEntry.agenda_duration=duration)}catch(e){if(e instanceof TypeError){hasErrors=!0;continue}}break;case\"agenda_type\":try{newEntry.agenda_type=this.parseType(line[idx])}catch(e){if(e instanceof TypeError){hasErrors=!0;continue}}break;default:newEntry[this.expectedHeader[idx]]=line[idx]}newEntry.agenda_type||(newEntry.agenda_type=1);const mappedEntry={newEntry:newEntry,status:\"new\",errors:[]};return hasErrors&&this.setError(mappedEntry,\"ParsingErrors\"),mappedEntry.newEntry.isValid||this.setError(mappedEntry,\"NoTitle\"),mappedEntry}doImport(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){for(const entry of this.entries)\"new\"===entry.status&&(yield this.repo.create(entry.newEntry),entry.status=\"done\");this.updatePreview()}))}parseDuration(input){return this.durationService.stringToDuration(input)}parseType(input){if(!input)return 1;if(\"string\"==typeof input){const visibility=agenda_item.b.find(choice=>choice.csvName===input);if(visibility)return visibility.key}else{if(1!==input)throw new TypeError(\"type could not be matched\");{const visibility=agenda_item.b.find(choice=>\"Internal item\"===choice.name);if(visibility)return visibility.key}}}parseTextArea(data){const newEntries=[];this.clearData(),this.clearPreview(),data.split(\"\\n\").forEach(line=>{if(!line.length)return;const newTopic=new create_topic.a(new create_topic.a({title:line,agenda_type:1}));newEntries.push({newEntry:newTopic,status:\"new\",errors:[]})}),this.setParsedEntries(newEntries)}}return TopicImportService.ɵfac=function(t){return new(t||TopicImportService)(core.dc(duration_service.a),core.dc(topic_repository_service.a),core.dc(ngx_translate_core.k),core.dc(ngx_papaparse.a),core.dc(snack_bar.a))},TopicImportService.ɵprov=core.Pb({token:TopicImportService,factory:TopicImportService.ɵfac,providedIn:\"root\"}),TopicImportService})();var tabs=__webpack_require__(\"wZkO\"),autofocus_directive=__webpack_require__(\"IZUe\"),table=__webpack_require__(\"+0xr\"),sort=__webpack_require__(\"Dh3D\");function TopicImportListComponent_button_6_Template(rf,ctx){if(1&rf){const _r7=core.ac();core.Zb(0,\"button\",20),core.hc(\"click\",(function(){return core.Ic(_r7),core.lc().doImport()})),core.Zb(1,\"span\",21),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(2),core.Tc(core.nc(3,1,\"Import\")))}function TopicImportListComponent_mat_option_69_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-option\",22),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const option_r8=ctx.$implicit;core.tc(\"value\",option_r8.value),core.Gb(1),core.Uc(\" \",core.nc(2,2,option_r8.label),\" \")}}function TopicImportListComponent_mat_option_75_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-option\",22),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const option_r9=ctx.$implicit;core.tc(\"value\",option_r9.value),core.Gb(1),core.Uc(\" \",core.nc(2,2,option_r9.label),\" \")}}function TopicImportListComponent_mat_option_81_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-option\",22),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const option_r10=ctx.$implicit;core.tc(\"value\",option_r10.value),core.Gb(1),core.Uc(\" \",core.nc(2,2,option_r10.label),\" \")}}function TopicImportListComponent_mat_card_90_div_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Sc(1,\"   \"),core.Zb(2,\"mat-icon\",42),core.Sc(3,\"playlist_add\"),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.Yb(),core.Zb(6,\"span\"),core.Sc(7),core.mc(8,\"translate\"),core.Yb(),core.Yb()),2&rf){const ctx_r11=core.lc(2);core.Gb(5),core.Uc(\" \",ctx_r11.newCount,\" \"),core.Gb(2),core.Tc(core.nc(8,2,\"Topics(s) will be imported.\"))}}function TopicImportListComponent_mat_card_90_div_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",43),core.Sc(1,\"   \"),core.Zb(2,\"mat-icon\",42),core.Sc(3,\"warning\"),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.Yb(),core.Zb(6,\"span\"),core.Sc(7),core.mc(8,\"translate\"),core.Yb(),core.Yb()),2&rf){const ctx_r12=core.lc(2);core.Gb(5),core.Uc(\" \",ctx_r12.nonImportableCount,\" \"),core.Gb(2),core.Tc(core.nc(8,2,\"entries will be ommitted.\"))}}function TopicImportListComponent_mat_card_90_div_7_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",44),core.Sc(1,\"   \"),core.Zb(2,\"mat-icon\",42),core.Sc(3,\"done\"),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.Yb(),core.Zb(6,\"span\"),core.Sc(7),core.mc(8,\"translate\"),core.Yb(),core.Yb()),2&rf){const ctx_r13=core.lc(2);core.Gb(5),core.Uc(\" \",ctx_r13.doneCount,\" \"),core.Gb(2),core.Tc(core.nc(8,2,\"Topics have been imported.\"))}}function TopicImportListComponent_mat_card_90_div_8_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(2),core.Tc(core.nc(3,1,'After verifiy the preview click on \"import\" please (see top right).')))}function TopicImportListComponent_mat_card_90_mat_select_10_Template(rf,ctx){if(1&rf){const _r31=core.ac();core.Zb(0,\"mat-select\",45),core.hc(\"valueChange\",(function($event){return core.Ic(_r31),core.lc(2).shown=$event}))(\"selectionChange\",(function(){return core.Ic(_r31),core.lc(2).setFilter()})),core.Zb(1,\"mat-option\",46),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Zb(4,\"mat-option\",47),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Zb(7,\"mat-option\",48),core.Sc(8),core.mc(9,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const ctx_r15=core.lc(2);core.tc(\"value\",ctx_r15.shown),core.Gb(2),core.Tc(core.nc(3,4,\"Show all\")),core.Gb(3),core.Tc(core.nc(6,6,\"Show errors only\")),core.Gb(3),core.Tc(core.nc(9,8,\"Show correct entries only\"))}}function TopicImportListComponent_mat_card_90_mat_header_cell_14_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-header-cell\")}function TopicImportListComponent_mat_card_90_mat_cell_15_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"mat-icon\",50),core.mc(2,\"translate\"),core.Sc(3),core.Yb(),core.Yb()),2&rf){const entry_r33=core.lc().$implicit,ctx_r34=core.lc(2);core.Gb(1),core.wc(\"matTooltip\",\"\",entry_r33.errors.length,\" \",core.nc(2,3,\"errors\"),\"\"),core.Gb(2),core.Uc(\" \",ctx_r34.getActionIcon(entry_r33),\" \")}}function TopicImportListComponent_mat_card_90_mat_cell_15_div_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"mat-icon\",51),core.mc(2,\"translate\"),core.Sc(3),core.Yb(),core.Yb()),2&rf){const entry_r33=core.lc().$implicit,ctx_r35=core.lc(2);core.Gb(1),core.uc(\"matTooltip\",core.nc(2,2,\"Topic will be imported\")),core.Gb(2),core.Uc(\" \",ctx_r35.getActionIcon(entry_r33),\" \")}}function TopicImportListComponent_mat_card_90_mat_cell_15_div_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"mat-icon\",51),core.mc(2,\"translate\"),core.Sc(3),core.Yb(),core.Yb()),2&rf){const entry_r33=core.lc().$implicit,ctx_r36=core.lc(2);core.Gb(1),core.uc(\"matTooltip\",core.nc(2,2,\"Topic has been imported\")),core.Gb(2),core.Uc(\" \",ctx_r36.getActionIcon(entry_r33),\" \")}}function TopicImportListComponent_mat_card_90_mat_cell_15_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-cell\",49),core.Qc(1,TopicImportListComponent_mat_card_90_mat_cell_15_div_1_Template,4,5,\"div\",24),core.Qc(2,TopicImportListComponent_mat_card_90_mat_cell_15_div_2_Template,4,4,\"div\",24),core.Qc(3,TopicImportListComponent_mat_card_90_mat_cell_15_div_3_Template,4,4,\"div\",24),core.Yb()),2&rf){const entry_r33=ctx.$implicit;core.Gb(1),core.tc(\"ngIf\",\"error\"===entry_r33.status),core.Gb(1),core.tc(\"ngIf\",\"new\"===entry_r33.status),core.Gb(1),core.tc(\"ngIf\",\"done\"===entry_r33.status)}}function TopicImportListComponent_mat_card_90_mat_header_cell_17_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-header-cell\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Title\")))}function TopicImportListComponent_mat_card_90_mat_cell_18_mat_icon_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-icon\",53),core.mc(1,\"translate\"),core.Sc(2,\" warning \"),core.Yb()),2&rf){const ctx_r41=core.lc(3);core.uc(\"matTooltip\",core.nc(1,1,ctx_r41.getVerboseError(\"Duplicates\")))}}function TopicImportListComponent_mat_card_90_mat_cell_18_mat_icon_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-icon\",53),core.mc(1,\"translate\"),core.Sc(2,\" warning \"),core.Yb()),2&rf){const ctx_r42=core.lc(3);core.uc(\"matTooltip\",core.nc(1,1,ctx_r42.getVerboseError(\"NoTitle\")))}}function TopicImportListComponent_mat_card_90_mat_cell_18_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-cell\"),core.Qc(1,TopicImportListComponent_mat_card_90_mat_cell_18_mat_icon_1_Template,3,3,\"mat-icon\",52),core.Qc(2,TopicImportListComponent_mat_card_90_mat_cell_18_mat_icon_2_Template,3,3,\"mat-icon\",52),core.Sc(3),core.Yb()),2&rf){const entry_r40=ctx.$implicit,ctx_r19=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r19.hasError(entry_r40,\"Duplicates\")),core.Gb(1),core.tc(\"ngIf\",ctx_r19.hasError(entry_r40,\"NoTitle\")),core.Gb(1),core.Uc(\" \",entry_r40.newEntry.title,\" \")}}function TopicImportListComponent_mat_card_90_mat_header_cell_20_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-header-cell\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Text\")))}function TopicImportListComponent_mat_card_90_mat_cell_21_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-cell\",51),core.Sc(1),core.Yb()),2&rf){const entry_r43=ctx.$implicit,ctx_r21=core.lc(2);core.uc(\"matTooltip\",ctx_r21.getLongPreview(entry_r43.newEntry.text)),core.Gb(1),core.Uc(\" \",ctx_r21.getShortPreview(entry_r43.newEntry.text),\" \")}}function TopicImportListComponent_mat_card_90_mat_header_cell_23_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-header-cell\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Duration\")))}function TopicImportListComponent_mat_card_90_mat_cell_24_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-cell\"),core.Sc(1),core.Yb()),2&rf){const entry_r44=ctx.$implicit,ctx_r23=core.lc(2);core.Gb(1),core.Uc(\" \",ctx_r23.getDuration(entry_r44.newEntry.agenda_duration),\" \")}}function TopicImportListComponent_mat_card_90_mat_header_cell_26_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-header-cell\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Comment\")))}function TopicImportListComponent_mat_card_90_mat_cell_27_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-cell\"),core.Sc(1),core.Yb()),2&rf){const entry_r45=ctx.$implicit;core.Gb(1),core.Uc(\" \",entry_r45.newEntry.agenda_comment,\" \")}}function TopicImportListComponent_mat_card_90_mat_header_cell_29_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-header-cell\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Type\")))}function TopicImportListComponent_mat_card_90_mat_cell_30_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-cell\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const entry_r46=ctx.$implicit,ctx_r27=core.lc(2);core.Gb(1),core.Uc(\" \",core.nc(2,1,ctx_r27.getTypeString(entry_r46.newEntry.agenda_type)),\" \")}}function TopicImportListComponent_mat_card_90_mat_header_row_31_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-header-row\")}function TopicImportListComponent_mat_card_90_mat_row_32_Template(rf,ctx){if(1&rf&&core.Ub(0,\"mat-row\",54),2&rf){const row_r47=ctx.$implicit,ctx_r29=core.lc(2);core.tc(\"ngClass\",ctx_r29.getStateClass(row_r47))}}function TopicImportListComponent_mat_card_90_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-card\",4),core.Zb(1,\"h3\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Zb(4,\"div\",23),core.Qc(5,TopicImportListComponent_mat_card_90_div_5_Template,9,4,\"div\",24),core.Qc(6,TopicImportListComponent_mat_card_90_div_6_Template,9,4,\"div\",25),core.Qc(7,TopicImportListComponent_mat_card_90_div_7_Template,9,4,\"div\",26),core.Yb(),core.Qc(8,TopicImportListComponent_mat_card_90_div_8_Template,4,3,\"div\",24),core.Zb(9,\"div\"),core.Qc(10,TopicImportListComponent_mat_card_90_mat_select_10_Template,10,10,\"mat-select\",27),core.Yb(),core.Zb(11,\"div\",28),core.Zb(12,\"table\",29),core.Xb(13,30),core.Qc(14,TopicImportListComponent_mat_card_90_mat_header_cell_14_Template,1,0,\"mat-header-cell\",31),core.Qc(15,TopicImportListComponent_mat_card_90_mat_cell_15_Template,4,3,\"mat-cell\",32),core.Wb(),core.Xb(16,33),core.Qc(17,TopicImportListComponent_mat_card_90_mat_header_cell_17_Template,3,3,\"mat-header-cell\",31),core.Qc(18,TopicImportListComponent_mat_card_90_mat_cell_18_Template,4,3,\"mat-cell\",34),core.Wb(),core.Xb(19,35),core.Qc(20,TopicImportListComponent_mat_card_90_mat_header_cell_20_Template,3,3,\"mat-header-cell\",31),core.Qc(21,TopicImportListComponent_mat_card_90_mat_cell_21_Template,2,2,\"mat-cell\",36),core.Wb(),core.Xb(22,37),core.Qc(23,TopicImportListComponent_mat_card_90_mat_header_cell_23_Template,3,3,\"mat-header-cell\",31),core.Qc(24,TopicImportListComponent_mat_card_90_mat_cell_24_Template,2,1,\"mat-cell\",34),core.Wb(),core.Xb(25,38),core.Qc(26,TopicImportListComponent_mat_card_90_mat_header_cell_26_Template,3,3,\"mat-header-cell\",31),core.Qc(27,TopicImportListComponent_mat_card_90_mat_cell_27_Template,2,1,\"mat-cell\",34),core.Wb(),core.Xb(28,39),core.Qc(29,TopicImportListComponent_mat_card_90_mat_header_cell_29_Template,3,3,\"mat-header-cell\",31),core.Qc(30,TopicImportListComponent_mat_card_90_mat_cell_30_Template,3,3,\"mat-cell\",34),core.Wb(),core.Qc(31,TopicImportListComponent_mat_card_90_mat_header_row_31_Template,1,0,\"mat-header-row\",40),core.Qc(32,TopicImportListComponent_mat_card_90_mat_row_32_Template,1,1,\"mat-row\",41),core.Yb(),core.Yb(),core.Yb()),2&rf){const ctx_r5=core.lc();core.Gb(2),core.Tc(core.nc(3,9,\"Preview\")),core.Gb(3),core.tc(\"ngIf\",ctx_r5.newCount),core.Gb(1),core.tc(\"ngIf\",ctx_r5.nonImportableCount),core.Gb(1),core.tc(\"ngIf\",ctx_r5.doneCount),core.Gb(1),core.tc(\"ngIf\",ctx_r5.newCount),core.Gb(2),core.tc(\"ngIf\",ctx_r5.nonImportableCount),core.Gb(2),core.tc(\"dataSource\",ctx_r5.dataSource),core.Gb(19),core.tc(\"matHeaderRowDef\",ctx_r5.getColumnDefinition()),core.Gb(1),core.tc(\"matRowDefColumns\",ctx_r5.getColumnDefinition())}}let topic_import_list_component_TopicImportListComponent=(()=>{class TopicImportListComponent extends base_import_list.a{constructor(titleService,matSnackBar,translate,importer,formBuilder,exporter,durationService){super(importer,titleService,translate,matSnackBar),this.exporter=exporter,this.durationService=durationService,this.textAreaForm=formBuilder.group({inputtext:[\"\"]})}downloadCsvExample(){this.exporter.dummyCSVExport([\"Title\",\"Text\",\"Duration\",\"Comment\",\"Internal item\"],[[\"Demo 1\",\"Demo text 1\",\"1:00\",\"test comment\",null],[\"Break\",null,\"0:10\",null,\"internal\",null],[\"Demo 2\",\"Demo text 2\",\"1:30\",null,\"hidden\"]],`${this.translate.instant(\"Agenda\")}-${this.translate.instant(\"example\")}.csv`)}getTypeString(type){const visibility=agenda_item.b.find(choice=>choice.key===type);return visibility?visibility.name:\"\"}parseTextArea(){this.importer.parseTextArea(this.textAreaForm.get(\"inputtext\").value)}onTabChange(){this.importer.clearPreview()}getDuration(duration){return duration>=0?this.durationService.durationToString(duration,\"h\"):\"\"}}return TopicImportListComponent.ɵfac=function(t){return new(t||TopicImportListComponent)(core.Tb(platform_browser.d),core.Tb(snack_bar.a),core.Tb(ngx_translate_core.k),core.Tb(topic_import_service_TopicImportService),core.Tb(fesm2015_forms.f),core.Tb(csv_export_service.a),core.Tb(duration_service.a))},TopicImportListComponent.ɵcmp=core.Nb({type:TopicImportListComponent,selectors:[[\"os-topic-import-list\"]],features:[core.Db],decls:91,vars:68,consts:[[3,\"nav\"],[1,\"title-slot\"],[1,\"menu-slot\"],[\"mat-button\",\"\",3,\"click\",4,\"ngIf\"],[1,\"os-form-card\",\"import-table\",\"spacer-bottom-60\"],[3,\"selectedTabChange\"],[3,\"label\"],[3,\"formGroup\"],[\"matInput\",\"\",\"osAutofocus\",\"\",\"formControlName\",\"inputtext\",\"cdkTextareaAutosize\",\"\",\"cdkAutosizeMinRows\",\"3\",\"cdkAutosizeMaxRows\",\"10\",3,\"placeholder\"],[\"mat-button\",\"\",\"color\",\"accent\",3,\"click\"],[1,\"code\",\"red-warning-text\"],[1,\"wrapper\"],[1,\"selection\",3,\"value\",\"selectionChange\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[\"value\",\"\",1,\"selection\",3,\"selectionChange\"],[\"value\",'\"',1,\"selection\",3,\"selectionChange\"],[\"id\",\"agenda-import-file-input\",\"type\",\"file\",\"accept\",\"text\",1,\"hidden-input\",3,\"change\"],[\"fileInput\",\"\"],[\"mat-button\",\"\",\"onclick\",\"document.getElementById('agenda-import-file-input').click()\"],[\"class\",\"os-form-card import-table spacer-bottom-60\",4,\"ngIf\"],[\"mat-button\",\"\",3,\"click\"],[1,\"upper\"],[3,\"value\"],[1,\"summary\"],[4,\"ngIf\"],[\"class\",\"red-warning-text\",4,\"ngIf\"],[\"class\",\"green-text\",4,\"ngIf\"],[\"class\",\"filter-imports\",3,\"value\",\"valueChange\",\"selectionChange\",4,\"ngIf\"],[1,\"table-container\"],[\"mat-table\",\"\",\"matSort\",\"\",3,\"dataSource\"],[\"matColumnDef\",\"status\",\"sticky\",\"\",1,\"first-column\"],[4,\"matHeaderCellDef\"],[\"class\",\"first-column\",4,\"matCellDef\"],[\"matColumnDef\",\"title\"],[4,\"matCellDef\"],[\"matColumnDef\",\"text\"],[3,\"matTooltip\",4,\"matCellDef\"],[\"matColumnDef\",\"agenda_duration\"],[\"matColumnDef\",\"agenda_comment\"],[\"matColumnDef\",\"agenda_type\"],[4,\"matHeaderRowDef\"],[3,\"ngClass\",4,\"matRowDef\",\"matRowDefColumns\"],[\"inline\",\"\"],[1,\"red-warning-text\"],[1,\"green-text\"],[1,\"filter-imports\",3,\"value\",\"valueChange\",\"selectionChange\"],[\"value\",\"all\"],[\"value\",\"error\"],[\"value\",\"noerror\"],[1,\"first-column\"],[1,\"red-warning-text\",3,\"matTooltip\"],[3,\"matTooltip\"],[\"color\",\"warn\",\"inline\",\"\",3,\"matTooltip\",4,\"ngIf\"],[\"color\",\"warn\",\"inline\",\"\",3,\"matTooltip\"],[3,\"ngClass\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"os-head-bar\",0),core.Zb(1,\"div\",1),core.Zb(2,\"h2\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Zb(5,\"div\",2),core.Qc(6,TopicImportListComponent_button_6_Template,4,3,\"button\",3),core.Yb(),core.Yb(),core.Zb(7,\"mat-card\",4),core.Zb(8,\"mat-tab-group\",5),core.hc(\"selectedTabChange\",(function(){return ctx.onTabChange()})),core.Zb(9,\"mat-tab\",6),core.mc(10,\"translate\"),core.Zb(11,\"div\",7),core.Zb(12,\"div\"),core.Zb(13,\"span\"),core.Sc(14),core.mc(15,\"translate\"),core.Yb(),core.Zb(16,\"span\"),core.Sc(17),core.mc(18,\"translate\"),core.Yb(),core.Yb(),core.Zb(19,\"mat-form-field\"),core.Ub(20,\"textarea\",8),core.mc(21,\"translate\"),core.Yb(),core.Yb(),core.Zb(22,\"div\"),core.Zb(23,\"button\",9),core.hc(\"click\",(function(){return ctx.parseTextArea()})),core.Zb(24,\"span\"),core.Sc(25),core.mc(26,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Yb(),core.Zb(27,\"mat-tab\",6),core.mc(28,\"translate\"),core.Zb(29,\"span\"),core.Sc(30),core.mc(31,\"translate\"),core.Yb(),core.Ub(32,\"br\"),core.Zb(33,\"div\",10),core.Zb(34,\"span\"),core.Sc(35),core.mc(36,\"translate\"),core.Yb(),core.Sc(37,\",  \"),core.Zb(38,\"span\"),core.Sc(39),core.mc(40,\"translate\"),core.Yb(),core.Sc(41,\",  \"),core.Zb(42,\"span\"),core.Sc(43),core.mc(44,\"translate\"),core.Yb(),core.Sc(45,\",  \"),core.Zb(46,\"span\"),core.Sc(47),core.mc(48,\"translate\"),core.Yb(),core.Sc(49,\",  \"),core.Zb(50,\"span\"),core.Sc(51),core.mc(52,\"translate\"),core.Yb(),core.Yb(),core.Zb(53,\"ul\"),core.Zb(54,\"li\"),core.Sc(55),core.mc(56,\"translate\"),core.Yb(),core.Zb(57,\"li\"),core.Sc(58),core.mc(59,\"translate\"),core.Yb(),core.Yb(),core.Zb(60,\"button\",9),core.hc(\"click\",(function(){return ctx.downloadCsvExample()})),core.Sc(61),core.mc(62,\"translate\"),core.Yb(),core.Zb(63,\"div\",11),core.Zb(64,\"mat-form-field\"),core.Zb(65,\"mat-label\"),core.Sc(66),core.mc(67,\"translate\"),core.Yb(),core.Zb(68,\"mat-select\",12),core.hc(\"selectionChange\",(function($event){return ctx.selectEncoding($event)})),core.Qc(69,TopicImportListComponent_mat_option_69_Template,3,4,\"mat-option\",13),core.Yb(),core.Yb(),core.Zb(70,\"mat-form-field\"),core.Zb(71,\"mat-label\"),core.Sc(72),core.mc(73,\"translate\"),core.Yb(),core.Zb(74,\"mat-select\",14),core.hc(\"selectionChange\",(function($event){return ctx.selectColSep($event)})),core.Qc(75,TopicImportListComponent_mat_option_75_Template,3,4,\"mat-option\",13),core.Yb(),core.Yb(),core.Zb(76,\"mat-form-field\"),core.Zb(77,\"mat-label\"),core.Sc(78),core.mc(79,\"translate\"),core.Yb(),core.Zb(80,\"mat-select\",15),core.hc(\"selectionChange\",(function($event){return ctx.selectTextSep($event)})),core.Qc(81,TopicImportListComponent_mat_option_81_Template,3,4,\"mat-option\",13),core.Yb(),core.Yb(),core.Yb(),core.Zb(82,\"div\"),core.Zb(83,\"div\"),core.Zb(84,\"input\",16,17),core.hc(\"change\",(function($event){return ctx.onSelectFile($event)})),core.Yb(),core.Zb(86,\"button\",18),core.Zb(87,\"span\"),core.Sc(88),core.mc(89,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Yb(),core.Yb(),core.Yb(),core.Yb(),core.Qc(90,TopicImportListComponent_mat_card_90_Template,33,11,\"mat-card\",19)),2&rf&&(core.tc(\"nav\",!1),core.Gb(3),core.Tc(core.nc(4,28,\"Import topics\")),core.Gb(3),core.tc(\"ngIf\",ctx.hasFile&&ctx.newCount),core.Gb(3),core.uc(\"label\",core.nc(10,30,\"Text import\")),core.Gb(2),core.tc(\"formGroup\",ctx.textAreaForm),core.Gb(3),core.Tc(core.nc(15,32,\"Paste/write your topics in this textbox.\")),core.Gb(3),core.Tc(core.nc(18,34,\"Keep each item in a single line.\")),core.Gb(3),core.uc(\"placeholder\",core.nc(21,36,\"Insert topics here\")),core.Gb(5),core.Tc(core.nc(26,38,\"Preview\")),core.Gb(2),core.uc(\"label\",core.nc(28,40,\"CSV import\")),core.Gb(3),core.Tc(core.nc(31,42,\"Required comma or semicolon separated values with these column header names in the first row:\")),core.Gb(5),core.Tc(core.nc(36,44,\"Title\")),core.Gb(4),core.Tc(core.nc(40,46,\"Text\")),core.Gb(4),core.Tc(core.nc(44,48,\"Duration\")),core.Gb(4),core.Tc(core.nc(48,50,\"Comment\")),core.Gb(4),core.Tc(core.nc(52,52,\"Internal item\")),core.Gb(4),core.Tc(core.nc(56,54,\"Title is required. All other fields are optional and may be empty.\")),core.Gb(3),core.Uc(\" \",core.nc(59,56,\"Additional columns after the required ones may be present and will not affect the import.\"),\" \"),core.Gb(3),core.Uc(\" \",core.nc(62,58,\"Download CSV example file\"),\" \"),core.Gb(5),core.Tc(core.nc(67,60,\"Encoding of the file\")),core.Gb(2),core.tc(\"value\",ctx.encodings[0].value),core.Gb(1),core.tc(\"ngForOf\",ctx.encodings),core.Gb(3),core.Tc(core.nc(73,62,\"Column separator\")),core.Gb(3),core.tc(\"ngForOf\",ctx.columnSeparators),core.Gb(3),core.Tc(core.nc(79,64,\"Text separator\")),core.Gb(3),core.tc(\"ngForOf\",ctx.textSeparators),core.Gb(7),core.Tc(core.nc(89,66,\"Select file\")),core.Gb(2),core.tc(\"ngIf\",ctx.hasFile))},directives:[head_bar_component.a,common.t,card.a,tabs.c,tabs.a,fesm2015_forms.t,fesm2015_forms.k,form_field.c,fesm2015_input.b,fesm2015_forms.c,text_field.c,autofocus_directive.a,fesm2015_forms.s,fesm2015_forms.i,fesm2015_button.b,form_field.g,fesm2015_select.a,common.s,fesm2015_core.n,table.n,sort.a,table.c,table.i,table.b,table.k,table.m,icon.a,table.h,table.a,tooltip.c,table.j,table.l,common.q],pipes:[ngx_translate_core.j],encapsulation:2}),TopicImportListComponent})();var collection_string_mapper_service=__webpack_require__(\"TG9O\"),projector_repository_service=__webpack_require__(\"3moa\"),user_repository_service=__webpack_require__(\"ZDbo\"),sorting_list_component=__webpack_require__(\"IBZR\"),base_view=__webpack_require__(\"mV3u\"),current_list_of_speakers_slide_service=__webpack_require__(\"kYDr\"),current_list_of_speakers_service=__webpack_require__(\"DJZM\"),view_speaker=__webpack_require__(\"FyoB\"),expansion=__webpack_require__(\"7EHt\"),list=__webpack_require__(\"MutI\"),search_value_selector_component=__webpack_require__(\"oqD5\");function ListOfSpeakersComponent_span_3_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"List of speakers\")))}function ListOfSpeakersComponent_span_4_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Current list of speakers\")))}function ListOfSpeakersComponent_div_5_Template(rf,ctx){if(1&rf){const _r14=core.ac();core.Zb(0,\"div\",11),core.Zb(1,\"button\",12),core.hc(\"click\",(function(){return core.Ic(_r14),core.lc().readdLastSpeaker()})),core.mc(2,\"translate\"),core.Zb(3,\"mat-icon\"),core.Sc(4,\"undo\"),core.Yb(),core.Yb(),core.Zb(5,\"button\",13),core.Zb(6,\"mat-icon\"),core.Sc(7,\"more_vert\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r2=core.lc(),_r4=core.Ec(8);core.Gb(1),core.uc(\"matTooltip\",core.nc(2,3,\"Re-add last speaker\")),core.tc(\"disabled\",!ctx_r2.finishedSpeakers||!ctx_r2.finishedSpeakers.length),core.Gb(4),core.tc(\"matMenuTriggerFor\",_r4)}}function ListOfSpeakersComponent_mat_card_6_mat_icon_3_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-icon\"),core.Sc(1,\" lock \"),core.Yb())}function ListOfSpeakersComponent_mat_card_6_mat_expansion_panel_4_mat_list_item_6_button_10_Template(rf,ctx){if(1&rf){const _r29=core.ac();core.Zb(0,\"button\",30),core.hc(\"click\",(function(){core.Ic(_r29);const speaker_r24=core.lc().$implicit;return core.lc(3).onDeleteButton(speaker_r24)})),core.mc(1,\"translate\"),core.Zb(2,\"mat-icon\"),core.Sc(3,\"close\"),core.Yb(),core.Yb()}2&rf&&core.uc(\"matTooltip\",core.nc(1,1,\"Remove\"))}function ListOfSpeakersComponent_mat_card_6_mat_expansion_panel_4_mat_list_item_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-list-item\"),core.Zb(1,\"div\",24),core.Zb(2,\"div\",25),core.Sc(3),core.Yb(),core.Zb(4,\"div\",26),core.Sc(5),core.Yb(),core.Zb(6,\"div\",27),core.Sc(7),core.mc(8,\"translate\"),core.Yb(),core.Zb(9,\"div\",28),core.Qc(10,ListOfSpeakersComponent_mat_card_6_mat_expansion_panel_4_mat_list_item_6_button_10_Template,4,3,\"button\",29),core.Yb(),core.Yb(),core.Yb()),2&rf){const speaker_r24=ctx.$implicit,number_r25=ctx.index,ctx_r23=core.lc(3);core.Gb(3),core.Uc(\"\",number_r25+1,\".\"),core.Gb(2),core.Tc(speaker_r24.getTitle()),core.Gb(2),core.Wc(\" \",ctx_r23.durationString(speaker_r24),\" (\",core.nc(8,6,\"Start time\"),\": \",ctx_r23.startTimeToString(speaker_r24),\") \"),core.Gb(3),core.tc(\"osPerms\",\"agenda.can_manage_list_of_speakers\")}}function ListOfSpeakersComponent_mat_card_6_mat_expansion_panel_4_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-expansion-panel\",22),core.Zb(1,\"mat-expansion-panel-header\"),core.Zb(2,\"mat-panel-title\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Zb(5,\"mat-list\"),core.Qc(6,ListOfSpeakersComponent_mat_card_6_mat_expansion_panel_4_mat_list_item_6_Template,11,8,\"mat-list-item\",23),core.Yb(),core.Yb()),2&rf){const ctx_r16=core.lc(2);core.Gb(3),core.Tc(core.nc(4,2,\"Last speakers\")),core.Gb(3),core.tc(\"ngForOf\",ctx_r16.finishedSpeakers)}}function ListOfSpeakersComponent_mat_card_6_mat_divider_5_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-divider\")}function ListOfSpeakersComponent_mat_card_6_div_6_Template(rf,ctx){1&rf&&core.Ub(0,\"div\",31)}function ListOfSpeakersComponent_mat_card_6_div_7_button_7_Template(rf,ctx){if(1&rf){const _r32=core.ac();core.Zb(0,\"button\",30),core.hc(\"click\",(function(){return core.Ic(_r32),core.lc(3).onStopButton()})),core.mc(1,\"translate\"),core.Zb(2,\"mat-icon\"),core.Sc(3,\"stop\"),core.Yb(),core.Yb()}2&rf&&core.uc(\"matTooltip\",core.nc(1,1,\"End speech\"))}function ListOfSpeakersComponent_mat_card_6_div_7_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",32),core.Zb(1,\"span\",33),core.Zb(2,\"mat-icon\"),core.Sc(3,\"mic\"),core.Yb(),core.Yb(),core.Zb(4,\"span\",26),core.Sc(5),core.Yb(),core.Zb(6,\"span\",34),core.Qc(7,ListOfSpeakersComponent_mat_card_6_div_7_button_7_Template,4,3,\"button\",29),core.Yb(),core.Yb()),2&rf){const ctx_r19=core.lc(2);core.Gb(5),core.Tc(ctx_r19.activeSpeaker.getListTitle()),core.Gb(2),core.tc(\"osPerms\",\"agenda.can_manage_list_of_speakers\")}}function ListOfSpeakersComponent_mat_card_6_div_8_ng_template_2_span_0_span_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\",38),core.Sc(1),core.Zb(2,\"span\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb()),2&rf){const speaker_r34=core.lc(2).$implicit,ctx_r37=core.lc(3);core.Gb(1),core.Uc(\" \",ctx_r37.hasSpokenCount(speaker_r34)+1,\". \"),core.Gb(2),core.Tc(core.nc(4,2,\"contribution\"))}}function ListOfSpeakersComponent_mat_card_6_div_8_ng_template_2_span_0_span_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\",38),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"First speech\"),\" \"))}function ListOfSpeakersComponent_mat_card_6_div_8_ng_template_2_span_0_span_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const speaker_r34=core.lc(2).$implicit;core.Gb(1),core.Uc(\"(\",core.nc(2,1,speaker_r34.gender),\")\")}}function ListOfSpeakersComponent_mat_card_6_div_8_ng_template_2_span_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Qc(1,ListOfSpeakersComponent_mat_card_6_div_8_ng_template_2_span_0_span_1_Template,5,4,\"span\",37),core.Qc(2,ListOfSpeakersComponent_mat_card_6_div_8_ng_template_2_span_0_span_2_Template,3,3,\"span\",37),core.Qc(3,ListOfSpeakersComponent_mat_card_6_div_8_ng_template_2_span_0_span_3_Template,3,3,\"span\",2),core.Yb()),2&rf){const speaker_r34=core.lc().$implicit,ctx_r35=core.lc(3);core.Gb(1),core.tc(\"ngIf\",ctx_r35.hasSpokenCount(speaker_r34)),core.Gb(1),core.tc(\"ngIf\",ctx_r35.showFistContributionHint&&ctx_r35.isFirstContribution(speaker_r34)),core.Gb(1),core.tc(\"ngIf\",speaker_r34.gender)}}function ListOfSpeakersComponent_mat_card_6_div_8_ng_template_2_span_1_Template(rf,ctx){if(1&rf){const _r45=core.ac();core.Zb(0,\"span\"),core.Zb(1,\"button\",30),core.hc(\"click\",(function(){core.Ic(_r45);const speaker_r34=core.lc().$implicit;return core.lc(3).onStartButton(speaker_r34)})),core.mc(2,\"translate\"),core.Zb(3,\"mat-icon\"),core.Sc(4,\"play_arrow\"),core.Yb(),core.Yb(),core.Zb(5,\"button\",30),core.hc(\"click\",(function(){core.Ic(_r45);const speaker_r34=core.lc().$implicit;return core.lc(3).onMarkButton(speaker_r34)})),core.mc(6,\"translate\"),core.Zb(7,\"mat-icon\"),core.Sc(8),core.Yb(),core.Yb(),core.Zb(9,\"button\",30),core.hc(\"click\",(function(){core.Ic(_r45);const speaker_r34=core.lc().$implicit;return core.lc(3).onDeleteButton(speaker_r34)})),core.mc(10,\"translate\"),core.Zb(11,\"mat-icon\"),core.Sc(12,\"close\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const speaker_r34=core.lc().$implicit;core.Gb(1),core.uc(\"matTooltip\",core.nc(2,4,\"Begin speech\")),core.Gb(4),core.uc(\"matTooltip\",core.nc(6,6,\"Mark speaker\")),core.Gb(3),core.Tc(speaker_r34.marked?\"star\":\"star_border\"),core.Gb(1),core.uc(\"matTooltip\",core.nc(10,8,\"Remove\"))}}function ListOfSpeakersComponent_mat_card_6_div_8_ng_template_2_Template(rf,ctx){1&rf&&(core.Qc(0,ListOfSpeakersComponent_mat_card_6_div_8_ng_template_2_span_0_Template,4,3,\"span\",20),core.Qc(1,ListOfSpeakersComponent_mat_card_6_div_8_ng_template_2_span_1_Template,13,10,\"span\",20)),2&rf&&(core.tc(\"osPerms\",\"agenda.can_manage_list_of_speakers\"),core.Gb(1),core.tc(\"osPerms\",\"agenda.can_manage_list_of_speakers\"))}function ListOfSpeakersComponent_mat_card_6_div_8_Template(rf,ctx){if(1&rf){const _r52=core.ac();core.Zb(0,\"div\",35),core.Zb(1,\"os-sorting-list\",36),core.hc(\"sortEvent\",(function($event){return core.Ic(_r52),core.lc(2).onSortingChanged($event)})),core.Qc(2,ListOfSpeakersComponent_mat_card_6_div_8_ng_template_2_Template,2,2,\"ng-template\"),core.Yb(),core.Yb()}if(2&rf){const ctx_r20=core.lc(2);core.Gb(1),core.tc(\"live\",!0)(\"input\",ctx_r20.speakers)(\"count\",!0)(\"enable\",ctx_r20.opCanManage()&&ctx_r20.isSortMode)}}function ListOfSpeakersComponent_mat_card_6_div_9_form_1_Template(rf,ctx){if(1&rf){const _r55=core.ac();core.Zb(0,\"form\",40),core.Zb(1,\"mat-form-field\",41),core.Zb(2,\"os-search-value-selector\",42),core.hc(\"clickNotFound\",(function($event){return core.Ic(_r55),core.lc(3).onCreateUser($event)})),core.mc(3,\"translate\"),core.Xb(4,43),core.Zb(5,\"mat-icon\"),core.Sc(6,\"add\"),core.Yb(),core.Sc(7),core.mc(8,\"translate\"),core.Wb(),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r53=core.lc(3);core.tc(\"formGroup\",ctx_r53.addSpeakerForm),core.Gb(2),core.uc(\"placeholder\",core.nc(3,5,\"Select or search new speaker ...\")),core.tc(\"inputListValues\",ctx_r53.filteredUsers)(\"showNotFoundButton\",!0),core.Gb(5),core.Uc(\" \",core.nc(8,7,\"Create user\"),\" \")}}function ListOfSpeakersComponent_mat_card_6_div_9_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,ListOfSpeakersComponent_mat_card_6_div_9_form_1_Template,9,9,\"form\",39),core.Yb()),2&rf){const ctx_r21=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r21.filteredUsers&&ctx_r21.filteredUsers.value.length>0)}}function ListOfSpeakersComponent_mat_card_6_div_10_div_1_button_1_Template(rf,ctx){if(1&rf){const _r60=core.ac();core.Zb(0,\"button\",47),core.hc(\"click\",(function(){return core.Ic(_r60),core.lc(4).addNewSpeaker()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"add\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const ctx_r57=core.lc(4);core.tc(\"disabled\",ctx_r57.viewListOfSpeakers.closed),core.Gb(4),core.Tc(core.nc(5,2,\"Add me\"))}}function ListOfSpeakersComponent_mat_card_6_div_10_div_1_button_2_Template(rf,ctx){if(1&rf){const _r62=core.ac();core.Zb(0,\"button\",48),core.hc(\"click\",(function(){return core.Ic(_r62),core.lc(4).onDeleteButton()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"remove\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Remove me\")))}function ListOfSpeakersComponent_mat_card_6_div_10_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,ListOfSpeakersComponent_mat_card_6_div_10_div_1_button_1_Template,6,4,\"button\",45),core.Qc(2,ListOfSpeakersComponent_mat_card_6_div_10_div_1_button_2_Template,6,3,\"button\",46),core.Yb()),2&rf){const ctx_r56=core.lc(3);core.Gb(1),core.tc(\"ngIf\",!ctx_r56.isOpInList()&&ctx_r56.canAddSelf),core.Gb(1),core.tc(\"ngIf\",ctx_r56.isOpInList())}}function ListOfSpeakersComponent_mat_card_6_div_10_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",44),core.Qc(1,ListOfSpeakersComponent_mat_card_6_div_10_div_1_Template,3,2,\"div\",2),core.Yb()),2&rf){const ctx_r22=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r22.speakers&&!ctx_r22.closedList)}}function ListOfSpeakersComponent_mat_card_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-card\",14),core.Zb(1,\"h1\",15),core.Sc(2),core.Qc(3,ListOfSpeakersComponent_mat_card_6_mat_icon_3_Template,2,0,\"mat-icon\",2),core.Yb(),core.Qc(4,ListOfSpeakersComponent_mat_card_6_mat_expansion_panel_4_Template,7,4,\"mat-expansion-panel\",16),core.Qc(5,ListOfSpeakersComponent_mat_card_6_mat_divider_5_Template,1,0,\"mat-divider\",2),core.Qc(6,ListOfSpeakersComponent_mat_card_6_div_6_Template,1,0,\"div\",17),core.Qc(7,ListOfSpeakersComponent_mat_card_6_div_7_Template,8,2,\"div\",18),core.Qc(8,ListOfSpeakersComponent_mat_card_6_div_8_Template,3,4,\"div\",19),core.Qc(9,ListOfSpeakersComponent_mat_card_6_div_9_Template,2,1,\"div\",20),core.Qc(10,ListOfSpeakersComponent_mat_card_6_div_10_Template,2,1,\"div\",21),core.Yb()),2&rf){const ctx_r3=core.lc();core.Gb(2),core.Uc(\" \",ctx_r3.viewListOfSpeakers.getTitle(),\" \"),core.Gb(1),core.tc(\"ngIf\",ctx_r3.viewListOfSpeakers.closed),core.Gb(1),core.tc(\"ngIf\",ctx_r3.finishedSpeakers&&ctx_r3.finishedSpeakers.length>0),core.Gb(1),core.tc(\"ngIf\",ctx_r3.finishedSpeakers&&ctx_r3.finishedSpeakers.length),core.Gb(1),core.tc(\"ngIf\",ctx_r3.finishedSpeakers&&ctx_r3.finishedSpeakers.length),core.Gb(1),core.tc(\"ngIf\",ctx_r3.activeSpeaker),core.Gb(1),core.tc(\"ngIf\",ctx_r3.speakers&&ctx_r3.speakers.length>0),core.Gb(1),core.tc(\"osPerms\",\"agenda.can_manage_list_of_speakers\"),core.Gb(1),core.tc(\"osPerms\",\"agenda.can_be_speaker\")}}function ListOfSpeakersComponent_button_9_Template(rf,ctx){if(1&rf){const _r64=core.ac();core.Zb(0,\"button\",49),core.hc(\"click\",(function(){return core.Ic(_r64),core.lc().isSortMode=!0})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"sort\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Sort\")))}function ListOfSpeakersComponent_os_projector_button_10_Template(rf,ctx){if(1&rf&&core.Ub(0,\"os-projector-button\",50),2&rf){const ctx_r6=core.lc();core.tc(\"object\",ctx_r6.getClosSlide())(\"menuItem\",!0)}}function ListOfSpeakersComponent_os_projector_button_11_Template(rf,ctx){if(1&rf&&core.Ub(0,\"os-projector-button\",51),2&rf){const ctx_r7=core.lc();core.tc(\"object\",ctx_r7.viewListOfSpeakers)(\"menuItem\",!0)}}function ListOfSpeakersComponent_os_projector_button_12_Template(rf,ctx){if(1&rf&&core.Ub(0,\"os-projector-button\",52),2&rf){const ctx_r8=core.lc();core.tc(\"object\",ctx_r8.viewListOfSpeakers.contentObject)(\"menuItem\",!0)(\"text\",ctx_r8.getContentObjectProjectorButtonText())}}function ListOfSpeakersComponent_button_13_Template(rf,ctx){if(1&rf){const _r66=core.ac();core.Zb(0,\"button\",49),core.hc(\"click\",(function(){return core.Ic(_r66),core.lc().openSpeakerList()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"lock_open\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Open list of speakers\")))}function ListOfSpeakersComponent_button_14_Template(rf,ctx){if(1&rf){const _r68=core.ac();core.Zb(0,\"button\",49),core.hc(\"click\",(function(){return core.Ic(_r68),core.lc().closeSpeakerList()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"lock\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Close list of speakers\")))}function ListOfSpeakersComponent_mat_divider_15_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-divider\")}function ListOfSpeakersComponent_button_16_Template(rf,ctx){if(1&rf){const _r70=core.ac();core.Zb(0,\"button\",53),core.hc(\"click\",(function(){return core.Ic(_r70),core.lc().clearSpeakerList()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"delete\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Remove all speakers\")))}const list_of_speakers_component_c0=function(){return[\"agenda.can_manage_list_of_speakers\",\"core.can_manage_projector\"]};let list_of_speakers_component_ListOfSpeakersComponent=(()=>{class ListOfSpeakersComponent extends base_view.a{constructor(title,translate,snackBar,projectorRepo,route,listOfSpeakersRepo,operator,promptService,currentListOfSpeakersService,durationService,userRepository,collectionStringMapper,currentListOfSpeakersSlideService,config,viewport,cd){super(title,translate,snackBar),this.translate=translate,this.projectorRepo=projectorRepo,this.route=route,this.listOfSpeakersRepo=listOfSpeakersRepo,this.operator=operator,this.promptService=promptService,this.currentListOfSpeakersService=currentListOfSpeakersService,this.durationService=durationService,this.userRepository=userRepository,this.collectionStringMapper=collectionStringMapper,this.currentListOfSpeakersSlideService=currentListOfSpeakersSlideService,this.config=config,this.viewport=viewport,this.cd=cd,this.isCurrentListOfSpeakers=!1,this.isSortMode=!1,this.users=new BehaviorSubject.a([]),this.filteredUsers=new BehaviorSubject.a([]),this.isMobile=!1,this.speakerListAsSelectable=[],this.addSpeakerForm=new fesm2015_forms.j({user_id:new fesm2015_forms.g})}get isListOfSpeakersClosed(){return this.viewListOfSpeakers&&this.viewListOfSpeakers.closed}get isListOfSpeakersEmpty(){return!(this.speakers&&this.speakers.length||this.finishedSpeakers&&this.finishedSpeakers.length||this.activeSpeaker)}get canAddSelf(){return!this.config.instant(\"agenda_present_speakers_only\")||this.operator.user.is_present}ngOnInit(){this.isCurrentListOfSpeakers=!(this.route.snapshot.url.length>0)||\"speakers\"===this.route.snapshot.url[this.route.snapshot.url.length-1].path,this.isCurrentListOfSpeakers?(this.projectors=this.projectorRepo.getViewModelList(),this.updateClosProjector(),this.subscriptions.push(this.projectorRepo.getViewModelListObservable().subscribe(newProjectors=>{this.projectors=newProjectors,this.updateClosProjector()}))):this.setListOfSpeakersId(+this.route.snapshot.url[this.route.snapshot.url.length-1].path),this.subscriptions.push(this.userRepository.getViewModelListObservable().subscribe(users=>{this.users.next(users),this.filterUsers(),this.cd.markForCheck()}),this.addSpeakerForm.valueChanges.subscribe(formResult=>{formResult&&formResult.user_id&&this.addNewSpeaker(formResult.user_id)}),this.viewport.isMobileSubject.subscribe(isMobile=>this.checkSortMode(isMobile)),this.config.get(\"agenda_present_speakers_only\").subscribe(()=>{this.filterUsers()}),this.config.get(\"agenda_show_first_contribution\").subscribe(show=>{this.showFistContributionHint=show}))}opCanManage(){return this.operator.hasPerms(operator_service.b.agendaCanManageListOfSpeakers)}updateClosProjector(){if(!this.projectors.length)return;const referenceProjector=this.projectors[0].referenceProjector;referenceProjector&&referenceProjector.id!==this.closReferenceProjectorId&&(this.closReferenceProjectorId=referenceProjector.id,this.projectorSubscription&&(this.projectorSubscription.unsubscribe(),this.viewListOfSpeakers=null),this.projectorSubscription=this.currentListOfSpeakersService.getListOfSpeakersObservable(referenceProjector).subscribe(listOfSpeakers=>{listOfSpeakers&&this.setListOfSpeakers(listOfSpeakers)}),this.subscriptions.push(this.projectorSubscription))}getClosSlide(){return this.currentListOfSpeakersSlideService.getSlide(!1)}setListOfSpeakersId(id){this.closSubscription&&this.closSubscription.unsubscribe(),this.closSubscription=this.listOfSpeakersRepo.getViewModelObservable(id).subscribe(listOfSpeakers=>{listOfSpeakers&&this.setListOfSpeakers(listOfSpeakers)})}setListOfSpeakers(listOfSpeakers){const title=this.isCurrentListOfSpeakers?\"Current list of speakers\":listOfSpeakers.getTitle()+\" - \"+this.translate.instant(\"List of speakers\");super.setTitle(title),this.viewListOfSpeakers=listOfSpeakers;const allSpeakers=this.viewListOfSpeakers.speakers.sort((a,b)=>a.weight-b.weight);this.speakers=allSpeakers.filter(speaker=>speaker.state===view_speaker.a.WAITING),this.speakers.sort((a,b)=>a.weight-b.weight),this.filterUsers(),this.finishedSpeakers=allSpeakers.filter(speaker=>speaker.state===view_speaker.a.FINISHED),this.finishedSpeakers.sort((a,b)=>new Date(a.begin_time).getTime()-new Date(b.begin_time).getTime()),this.activeSpeaker=allSpeakers.find(speaker=>speaker.state===view_speaker.a.CURRENT)}getContentObjectProjectorButtonText(){return this.collectionStringMapper.getRepository(this.viewListOfSpeakers.listOfSpeakers.content_object.collection).getVerboseName()}addNewSpeaker(userId){this.listOfSpeakersRepo.createSpeaker(this.viewListOfSpeakers,userId).then(()=>this.addSpeakerForm.reset(),this.raiseError)}onMobileSaveSorting(){this.onSaveSorting(this.speakerListAsSelectable),this.isSortMode=!1}onSortingChanged(sortedSpeakerList){this.speakerListAsSelectable=sortedSpeakerList,this.isMobile||this.onSaveSorting(sortedSpeakerList)}onCancelSorting(){this.isSortMode&&(this.isSortMode=!1,this.listElement.restore())}onStartButton(speaker){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){try{yield this.listOfSpeakersRepo.startSpeaker(this.viewListOfSpeakers,speaker),this.filterUsers()}catch(e){this.raiseError(e)}}))}onStopButton(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){try{yield this.listOfSpeakersRepo.stopCurrentSpeaker(this.viewListOfSpeakers),this.filterUsers()}catch(e){this.raiseError(e)}}))}onMarkButton(speaker){this.listOfSpeakersRepo.markSpeaker(this.viewListOfSpeakers,speaker,!speaker.marked).catch(this.raiseError)}readdLastSpeaker(){this.listOfSpeakersRepo.readdLastSpeaker(this.viewListOfSpeakers).catch(this.raiseError)}onDeleteButton(speaker){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to delete this speaker from this list of speakers?\");if(yield this.promptService.open(title))try{yield this.listOfSpeakersRepo.delete(this.viewListOfSpeakers,speaker?speaker.id:null),this.filterUsers()}catch(e){this.raiseError(e)}}))}isOpInList(){return this.speakers.some(speaker=>speaker.user_id===this.operator.user.id)}hasSpokenCount(speaker){return this.finishedSpeakers.filter(finishedSpeaker=>{if(finishedSpeaker&&finishedSpeaker.user)return finishedSpeaker.user.id===speaker.user.id}).length}isFirstContribution(speaker){return this.listOfSpeakersRepo.isFirstContribution(speaker)}closeSpeakerList(){if(!this.viewListOfSpeakers.closed)return this.listOfSpeakersRepo.update({closed:!0},this.viewListOfSpeakers).catch(this.raiseError)}openSpeakerList(){if(this.viewListOfSpeakers.closed)return this.listOfSpeakersRepo.update({closed:!1},this.viewListOfSpeakers).catch(this.raiseError)}clearSpeakerList(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to delete all speakers from this list of speakers?\");(yield this.promptService.open(title))&&this.listOfSpeakersRepo.deleteAllSpeakers(this.viewListOfSpeakers)}))}startTimeToString(speaker){return new Date(speaker.begin_time).toLocaleString(this.translate.currentLang)}durationString(speaker){const duration=Math.floor((new Date(speaker.end_time).valueOf()-new Date(speaker.begin_time).valueOf())/1e3);return\"\"+this.durationService.durationToString(duration,\"m\")}onCreateUser(username){this.userRepository.createFromString(username).then(result=>{this.addNewSpeaker(result.id)})}filterUsers(){const users=this.config.instant(\"agenda_present_speakers_only\")?this.users.getValue().filter(u=>u.is_present):this.users.getValue();this.filteredUsers.next(this.speakers&&this.speakers.length?users.filter(u=>!this.speakers.some(speaker=>speaker.user_id===u.id)):users)}onSaveSorting(sortedSpeakerList){this.isSortMode&&this.listOfSpeakersRepo.sortSpeakers(this.viewListOfSpeakers,sortedSpeakerList.map(el=>el.id)).catch(this.raiseError)}checkSortMode(isMobile){this.isMobile=isMobile,this.isSortMode=!isMobile}}return ListOfSpeakersComponent.ɵfac=function(t){return new(t||ListOfSpeakersComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(projector_repository_service.a),core.Tb(fesm2015_router.a),core.Tb(list_of_speakers_repository_service.a),core.Tb(operator_service.a),core.Tb(prompt_service.a),core.Tb(current_list_of_speakers_service.a),core.Tb(duration_service.a),core.Tb(user_repository_service.a),core.Tb(collection_string_mapper_service.a),core.Tb(current_list_of_speakers_slide_service.a),core.Tb(config_service.a),core.Tb(viewport_service.a),core.Tb(core.h))},ListOfSpeakersComponent.ɵcmp=core.Nb({type:ListOfSpeakersComponent,selectors:[[\"os-list-of-speakers\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.Zc(sorting_list_component.a,!0),2&rf&&core.Dc(_t=core.ic())&&(ctx.listElement=_t.first)},features:[core.Db],decls:17,vars:16,consts:[[3,\"nav\",\"goBack\",\"editMode\",\"cancelEditEvent\",\"saveEvent\"],[1,\"title-slot\"],[4,\"ngIf\"],[\"class\",\"menu-slot\",4,\"osPerms\"],[\"class\",\"os-card speaker-card\",4,\"ngIf\"],[\"speakerMenu\",\"matMenu\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"ngIf\"],[\"text\",\"Current list of speakers (as slide)\",3,\"object\",\"menuItem\",4,\"ngIf\"],[\"text\",\"List of speakers\",3,\"object\",\"menuItem\",4,\"ngIf\"],[3,\"object\",\"menuItem\",\"text\",4,\"ngIf\"],[\"mat-menu-item\",\"\",\"class\",\"red-warning-text\",3,\"click\",4,\"ngIf\"],[1,\"menu-slot\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"matTooltip\",\"disabled\",\"click\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"matMenuTriggerFor\"],[1,\"os-card\",\"speaker-card\"],[1,\"los-title\"],[\"class\",\"finished-list\",4,\"ngIf\"],[\"class\",\"spacer-bottom-40\",4,\"ngIf\"],[\"class\",\"current-speaker\",4,\"ngIf\"],[\"class\",\"waiting-list\",4,\"ngIf\"],[4,\"osPerms\"],[\"class\",\"add-self-buttons\",4,\"osPerms\"],[1,\"finished-list\"],[4,\"ngFor\",\"ngForOf\"],[1,\"finished-speaker-grid\"],[1,\"number\"],[1,\"name\"],[1,\"time\"],[1,\"controls\"],[\"mat-icon-button\",\"\",3,\"matTooltip\",\"click\",4,\"osPerms\"],[\"mat-icon-button\",\"\",3,\"matTooltip\",\"click\"],[1,\"spacer-bottom-40\"],[1,\"current-speaker\"],[1,\"prefix\"],[1,\"suffix\"],[1,\"waiting-list\"],[3,\"live\",\"input\",\"count\",\"enable\",\"sortEvent\"],[\"class\",\"red-warning-text speaker-warning\",4,\"ngIf\"],[1,\"red-warning-text\",\"speaker-warning\"],[3,\"formGroup\",4,\"ngIf\"],[3,\"formGroup\"],[1,\"search-users-field\"],[\"formControlName\",\"user_id\",1,\"search-users\",3,\"placeholder\",\"inputListValues\",\"showNotFoundButton\",\"clickNotFound\"],[\"notFoundDescription\",\"\"],[1,\"add-self-buttons\"],[\"mat-stroked-button\",\"\",3,\"disabled\",\"click\",4,\"ngIf\"],[\"mat-stroked-button\",\"\",3,\"click\",4,\"ngIf\"],[\"mat-stroked-button\",\"\",3,\"disabled\",\"click\"],[\"mat-stroked-button\",\"\",3,\"click\"],[\"mat-menu-item\",\"\",3,\"click\"],[\"text\",\"Current list of speakers (as slide)\",3,\"object\",\"menuItem\"],[\"text\",\"List of speakers\",3,\"object\",\"menuItem\"],[3,\"object\",\"menuItem\",\"text\"],[\"mat-menu-item\",\"\",1,\"red-warning-text\",3,\"click\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"os-head-bar\",0),core.hc(\"cancelEditEvent\",(function(){return ctx.onCancelSorting()}))(\"saveEvent\",(function(){return ctx.onMobileSaveSorting()})),core.Zb(1,\"div\",1),core.Zb(2,\"h2\"),core.Qc(3,ListOfSpeakersComponent_span_3_Template,3,3,\"span\",2),core.Qc(4,ListOfSpeakersComponent_span_4_Template,3,3,\"span\",2),core.Yb(),core.Yb(),core.Qc(5,ListOfSpeakersComponent_div_5_Template,8,5,\"div\",3),core.Yb(),core.Qc(6,ListOfSpeakersComponent_mat_card_6_Template,11,9,\"mat-card\",4),core.Zb(7,\"mat-menu\",null,5),core.Qc(9,ListOfSpeakersComponent_button_9_Template,6,3,\"button\",6),core.Qc(10,ListOfSpeakersComponent_os_projector_button_10_Template,1,2,\"os-projector-button\",7),core.Qc(11,ListOfSpeakersComponent_os_projector_button_11_Template,1,2,\"os-projector-button\",8),core.Qc(12,ListOfSpeakersComponent_os_projector_button_12_Template,1,3,\"os-projector-button\",9),core.Qc(13,ListOfSpeakersComponent_button_13_Template,6,3,\"button\",6),core.Qc(14,ListOfSpeakersComponent_button_14_Template,6,3,\"button\",6),core.Qc(15,ListOfSpeakersComponent_mat_divider_15_Template,1,0,\"mat-divider\",2),core.Qc(16,ListOfSpeakersComponent_button_16_Template,6,3,\"button\",10),core.Yb()),2&rf&&(core.tc(\"nav\",!1)(\"goBack\",!0)(\"editMode\",ctx.isMobile&&ctx.isSortMode),core.Gb(3),core.tc(\"ngIf\",!ctx.isCurrentListOfSpeakers),core.Gb(1),core.tc(\"ngIf\",ctx.isCurrentListOfSpeakers),core.Gb(1),core.tc(\"osPerms\",core.yc(15,list_of_speakers_component_c0)),core.Gb(1),core.tc(\"ngIf\",ctx.viewListOfSpeakers),core.Gb(3),core.tc(\"ngIf\",ctx.isMobile),core.Gb(1),core.tc(\"ngIf\",ctx.viewListOfSpeakers&&ctx.projectors&&ctx.projectors.length>1),core.Gb(1),core.tc(\"ngIf\",ctx.viewListOfSpeakers),core.Gb(1),core.tc(\"ngIf\",ctx.viewListOfSpeakers),core.Gb(1),core.tc(\"ngIf\",ctx.isListOfSpeakersClosed),core.Gb(1),core.tc(\"ngIf\",!ctx.isListOfSpeakersClosed),core.Gb(1),core.tc(\"ngIf\",!ctx.isListOfSpeakersEmpty),core.Gb(1),core.tc(\"ngIf\",!ctx.isListOfSpeakersEmpty))},directives:[head_bar_component.a,common.t,perms_directive.a,menu.f,fesm2015_button.b,tooltip.c,icon.a,menu.e,card.a,expansion.c,expansion.g,expansion.h,list.a,common.s,list.d,divider.a,sorting_list_component.a,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,form_field.c,search_value_selector_component.a,fesm2015_forms.s,fesm2015_forms.i,menu.c,projector_button_component.a],pipes:[ngx_translate_core.j],styles:['.los-title[_ngcontent-%COMP%]{margin-left:25px}.finished-list[_ngcontent-%COMP%]{box-shadow:none!important;margin-bottom:15px}.finished-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:auto;margin-bottom:10px}.finished-list[_ngcontent-%COMP%]   .finished-speaker-grid[_ngcontent-%COMP%]{display:grid;width:100%;grid-gap:5px;grid-template-areas:\"number name controls\" \"number time controls\";grid-template-columns:30px 1fr -webkit-min-content;grid-template-columns:30px 1fr min-content}@media (min-width:960px){.finished-list[_ngcontent-%COMP%]   .finished-speaker-grid[_ngcontent-%COMP%]{grid-template-areas:\"number name time controls\";grid-template-columns:30px 1fr -webkit-min-content -webkit-min-content;grid-template-columns:30px 1fr min-content min-content}}.finished-list[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{grid-area:number;margin:0}.finished-list[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{grid-area:name;margin:0}.finished-list[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{grid-area:time;margin:0;white-space:nowrap;font-size:80%}.finished-list[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{grid-area:controls;margin:0;opacity:.7}.finished-list[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{height:20px;line-height:1}.finished-list[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{line-height:19px}.current-speaker[_ngcontent-%COMP%]{display:table;width:-webkit-fill-available;height:50px;margin:50px 25px 20px;box-shadow:0 3px 10px 0 rgba(0,0,0,.25)}.current-speaker[_ngcontent-%COMP%]   .prefix[_ngcontent-%COMP%]{display:table-cell;padding:0 15px;vertical-align:middle}.current-speaker[_ngcontent-%COMP%]   .prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{vertical-align:middle}.current-speaker[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;font-weight:700;padding-left:10px;width:100%}.current-speaker[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;white-space:nowrap;padding-right:10px}.waiting-list[_ngcontent-%COMP%]{padding:10px 25px 0}form[_ngcontent-%COMP%]{padding:15px 25px 10px;width:auto}form[_ngcontent-%COMP%]   .search-users-field[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]   .search-users-field[_ngcontent-%COMP%]   .search-users[_ngcontent-%COMP%]{display:grid}form[_ngcontent-%COMP%]   .search-users-field[_ngcontent-%COMP%]   .search-users[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.add-self-buttons[_ngcontent-%COMP%]{padding:15px 0 20px 25px}.speaker-warning[_ngcontent-%COMP%]{margin-right:5px}'],changeDetection:0}),ListOfSpeakersComponent})();const routes=[{path:\"\",component:agenda_list_component_AgendaListComponent,pathMatch:\"full\"},{path:\"import\",component:topic_import_list_component_TopicImportListComponent,data:{basePerm:operator_service.b.agendaCanManage}},{path:\"sort-agenda\",component:agenda_sort_component_AgendaSortComponent,canDeactivate:[watch_for_changes_guard.a],data:{basePerm:operator_service.b.agendaCanManage}},{path:\"speakers\",component:list_of_speakers_component_ListOfSpeakersComponent,data:{basePerm:operator_service.b.agendaCanSeeListOfSpeakers}},{path:\"speakers/:id\",component:list_of_speakers_component_ListOfSpeakersComponent,data:{basePerm:operator_service.b.agendaCanSeeListOfSpeakers}}];let agenda_routing_module_AgendaRoutingModule=(()=>{class AgendaRoutingModule{}return AgendaRoutingModule.ɵmod=core.Rb({type:AgendaRoutingModule}),AgendaRoutingModule.ɵinj=core.Qb({factory:function(t){return new(t||AgendaRoutingModule)},imports:[[fesm2015_router.j.forChild(routes)],fesm2015_router.j]}),AgendaRoutingModule})();var shared_module=__webpack_require__(\"PCNd\");let agenda_module_AgendaModule=(()=>{class AgendaModule{}return AgendaModule.ɵmod=core.Rb({type:AgendaModule}),AgendaModule.ɵinj=core.Qb({factory:function(t){return new(t||AgendaModule)},imports:[[common.c,agenda_routing_module_AgendaRoutingModule,shared_module.a]]}),AgendaModule})()},wL0i:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return BaseListViewComponent}));var _base_view__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mV3u\");class BaseListViewComponent extends _base_view__WEBPACK_IMPORTED_MODULE_0__.a{constructor(titleService,translate,matSnackBar,storage){super(titleService,translate,matSnackBar),this.storage=storage,this.canMultiSelect=!1,this._multiSelectMode=!1,this.singleButtonWidth=\"40px\",this.badgeButtonWidth=\"45px\",this.selectedRows=[]}onDataSourceChange(newDataSource){this.dataSource=newDataSource}toggleMultiSelect(){!this.canMultiSelect||this.isMultiSelect?(this._multiSelectMode=!1,this.deselectAll()):this._multiSelectMode=!0}selectAll(){this.dataSource.selection.select(...this.dataSource.filteredData)}deselectAll(){this.dataSource&&this.dataSource.selection.clear()}get isMultiSelect(){return this._multiSelectMode}}}}]);","extractedComments":[]}