{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[20,38],{\"6Ehv\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return AgendaContentObjectFormComponent}));var app_core_repositories_agenda_item_repository_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"InfO\"),app_core_ui_services_config_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"+KbT\"),app_shared_models_agenda_item__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"+az0\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"fXoL\"),_directives_perms_directive__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"3Xi6\"),_angular_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(\"ofXK\"),_angular_forms__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(\"3Pt+\"),_angular_material_checkbox__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(\"bSwM\"),_angular_material_form_field__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(\"kmnG\"),_angular_material_select__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(\"d3UM\"),_angular_material_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(\"FKr1\"),_search_value_selector_search_value_selector_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(\"oqD5\"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(\"sYmb\");function AgendaContentObjectFormComponent_ng_container_0_ng_container_1_ng_container_7_mat_option_5_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(0,\"mat-option\",7),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(1,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Sc(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.mc(3,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb()),2&rf){const type_r5=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"value\",type_r5.key),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_3__.nc(3,2,type_r5.name))}}function AgendaContentObjectFormComponent_ng_container_0_ng_container_1_ng_container_7_div_6_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(0,\"div\",2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(1,\"mat-form-field\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Ub(2,\"os-search-value-selector\",8),_angular_core__WEBPACK_IMPORTED_MODULE_3__.mc(3,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb()),2&rf){const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_3__.lc(4);_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"formGroup\",ctx_r4.form),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.uc(\"placeholder\",_angular_core__WEBPACK_IMPORTED_MODULE_3__.nc(3,5,\"Parent agenda item\")),_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"multiple\",!1)(\"includeNone\",!0)(\"inputListValues\",ctx_r4.itemObserver)}}function AgendaContentObjectFormComponent_ng_container_0_ng_container_1_ng_container_7_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Xb(0),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(1,\"div\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(2,\"mat-form-field\",2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(3,\"mat-select\",4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.mc(4,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Qc(5,AgendaContentObjectFormComponent_ng_container_0_ng_container_1_ng_container_7_mat_option_5_Template,4,4,\"mat-option\",5),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Qc(6,AgendaContentObjectFormComponent_ng_container_0_ng_container_1_ng_container_7_div_6_Template,4,7,\"div\",6),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Wb()),2&rf){const ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_3__.lc(3);_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"formGroup\",ctx_r2.form),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.uc(\"placeholder\",_angular_core__WEBPACK_IMPORTED_MODULE_3__.nc(4,4,\"Agenda visibility\")),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"ngForOf\",ctx_r2.ItemVisibilityChoices),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"ngIf\",ctx_r2.itemObserver.value.length>0)}}function AgendaContentObjectFormComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Xb(0),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(1,\"div\",2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(2,\"p\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(3,\"mat-checkbox\",3),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Zb(4,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Sc(5),_angular_core__WEBPACK_IMPORTED_MODULE_3__.mc(6,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Qc(7,AgendaContentObjectFormComponent_ng_container_0_ng_container_1_ng_container_7_Template,7,6,\"ng-container\",1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Wb()),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_3__.lc(2);_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"formGroup\",ctx_r1.form),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_3__.nc(6,3,\"Add to agenda\")),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"ngIf\",!!ctx_r1.checkbox.value)}}function AgendaContentObjectFormComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Xb(0),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Qc(1,AgendaContentObjectFormComponent_ng_container_0_ng_container_1_Template,8,5,\"ng-container\",1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Wb()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_3__.lc();_angular_core__WEBPACK_IMPORTED_MODULE_3__.Gb(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"ngIf\",ctx_r0.showForm)}}let AgendaContentObjectFormComponent=(()=>{class AgendaContentObjectFormComponent{constructor(configService,itemRepo){this.configService=configService,this.itemRepo=itemRepo,this.showForm=!1,this.ItemVisibilityChoices=app_shared_models_agenda_item__WEBPACK_IMPORTED_MODULE_2__.b}ngOnInit(){this.checkbox=this.form.controls.agenda_create,this.configService.get(\"agenda_item_creation\").subscribe(value=>{if(\"always\"===value)this.showForm=!0,this.checkbox.disable(),this.form.patchValue({agenda_create:!0});else if(\"never\"===value)this.showForm=!1,this.checkbox.disable(),this.form.patchValue({agenda_create:!1});else{const defaultValue=\"default_yes\"===value;this.showForm=!0,this.checkbox.enable(),this.form.patchValue({agenda_create:defaultValue})}}),this.configService.get(\"agenda_new_items_default_visibility\").subscribe(visibility=>{this.form.get(\"agenda_type\").setValue(+visibility)}),this.itemObserver=this.itemRepo.getViewModelListBehaviorSubject()}}return AgendaContentObjectFormComponent.ɵfac=function(t){return new(t||AgendaContentObjectFormComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Tb(app_core_ui_services_config_service__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Tb(app_core_repositories_agenda_item_repository_service__WEBPACK_IMPORTED_MODULE_0__.a))},AgendaContentObjectFormComponent.ɵcmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.Nb({type:AgendaContentObjectFormComponent,selectors:[[\"os-agenda-content-object-form\"]],inputs:{form:\"form\"},decls:1,vars:1,consts:[[4,\"osPerms\"],[4,\"ngIf\"],[3,\"formGroup\"],[\"formControlName\",\"agenda_create\"],[\"formControlName\",\"agenda_type\",3,\"placeholder\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[3,\"formGroup\",4,\"ngIf\"],[3,\"value\"],[\"formControlName\",\"agenda_parent_id\",3,\"multiple\",\"includeNone\",\"placeholder\",\"inputListValues\"]],template:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_3__.Qc(0,AgendaContentObjectFormComponent_ng_container_0_Template,2,1,\"ng-container\",0),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_3__.tc(\"osPerms\",\"agenda.can_manage\")},directives:[_directives_perms_directive__WEBPACK_IMPORTED_MODULE_4__.a,_angular_common__WEBPACK_IMPORTED_MODULE_5__.t,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.t,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.k,_angular_material_checkbox__WEBPACK_IMPORTED_MODULE_7__.a,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.s,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.i,_angular_material_form_field__WEBPACK_IMPORTED_MODULE_8__.c,_angular_material_select__WEBPACK_IMPORTED_MODULE_9__.a,_angular_common__WEBPACK_IMPORTED_MODULE_5__.s,_angular_material_core__WEBPACK_IMPORTED_MODULE_10__.n,_search_value_selector_search_value_selector_component__WEBPACK_IMPORTED_MODULE_11__.a],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__.j],styles:[\"\"]}),AgendaContentObjectFormComponent})()},BBYV:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return HtmlToPdfService}));var app_site_motions_motions_constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"3Y4h\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"fXoL\");let HtmlToPdfService=(()=>{class HtmlToPdfService{constructor(){this.LI_MARGIN_BOTTOM=8,this.LINE_HEIGHT=1.25,this.P_MARGIN_BOTTOM=4,this.H_MARGIN_TOP=10,this.elementStyles={b:[\"font-weight:bold\"],strong:[\"font-weight:bold\"],u:[\"text-decoration:underline\"],em:[\"font-style:italic\"],i:[\"font-style:italic\"],h1:[\"font-size:14\",\"font-weight:bold\"],h2:[\"font-size:12\",\"font-weight:bold\"],h3:[\"font-size:10\",\"font-weight:bold\"],h4:[\"font-size:10\",\"font-style:italic\"],h5:[\"font-size:10\"],h6:[\"font-size:10\"],a:[\"color:blue\",\"text-decoration:underline\"],strike:[\"text-decoration:line-through\"],del:[\"color:red\",\"text-decoration:line-through\"],ins:[\"color:green\",\"text-decoration:underline\"]},this.classStyles={delete:[\"color:red\",\"text-decoration:line-through\"],insert:[\"color:green\",\"text-decoration:underline\"],paragraphcontext:[\"color:grey\"]}}getMarginTop(nodeName){switch(nodeName){case\"h1\":case\"h2\":case\"h3\":case\"h4\":case\"h5\":case\"h6\":return this.H_MARGIN_TOP;default:return 0}}getMarginBottom(nodeName){switch(nodeName){case\"h1\":case\"h2\":case\"h3\":case\"h4\":case\"h5\":case\"h6\":case\"li\":default:return this.P_MARGIN_BOTTOM}}addPlainText(text){return{columns:[{stack:this.convertHtml(text,app_site_motions_motions_constants__WEBPACK_IMPORTED_MODULE_0__.d.None)}]}}convertHtml(htmlText,lnMode){const docDef=[];this.lineNumberingMode=lnMode||app_site_motions_motions_constants__WEBPACK_IMPORTED_MODULE_0__.d.None;const parsedHtml=(new DOMParser).parseFromString(htmlText,\"text/html\"),htmlArray=Array.from(parsedHtml.body.childNodes);for(const child of htmlArray){const parsedElement=this.parseElement(child);docDef.push(parsedElement)}return docDef}parseElement(element,styles){const nodeName=element.nodeName.toLowerCase();let newParagraph,classes=[];if(styles=styles||[],element.getAttribute){const nodeStyle=element.getAttribute(\"style\"),nodeClass=element.getAttribute(\"class\");if(nodeStyle&&(styles=nodeStyle.split(\";\").map(style=>style.replace(/\\s/g,\"\")).concat(styles)),nodeClass){classes=nodeClass.toLowerCase().split(\" \");for(const cssClass of classes)this.classStyles[cssClass]&&this.classStyles[cssClass].forEach(style=>{styles.push(style)})}}switch(nodeName){case\"h1\":case\"h2\":case\"h3\":case\"h4\":case\"h5\":case\"h6\":case\"li\":case\"p\":case\"div\":{const children=this.parseChildren(element,styles);this.lineNumberingMode!==app_site_motions_motions_constants__WEBPACK_IMPORTED_MODULE_0__.d.Outside||classes.includes(\"insert\")?(newParagraph=this.create(\"text\"),newParagraph.text=children):(newParagraph=this.create(\"stack\"),newParagraph.stack=children),newParagraph.margin=[0,0,0,0],newParagraph.margin[1]=this.getMarginTop(nodeName),newParagraph.margin[3]=this.getMarginBottom(nodeName),this.lineNumberingMode===app_site_motions_motions_constants__WEBPACK_IMPORTED_MODULE_0__.d.Outside&&classes.includes(\"insert\")&&(newParagraph.margin[0]=20,newParagraph.margin[3]=this.P_MARGIN_BOTTOM),classes.includes(\"os-split-before\")&&(newParagraph.listType=\"none\"),(classes.includes(\"os-split-after\")||this.withSublist(element))&&(newParagraph.margin[3]=0),newParagraph.lineHeight=this.LINE_HEIGHT,newParagraph=Object.assign(Object.assign(Object.assign({},newParagraph),this.computeStyle(styles)),this.computeStyle(this.elementStyles[nodeName]));break}case\"a\":case\"b\":case\"strong\":case\"u\":case\"em\":case\"i\":case\"ins\":case\"del\":case\"strike\":{const children=this.parseChildren(element,styles.concat(this.elementStyles[nodeName]));newParagraph=this.create(\"text\"),newParagraph.text=children;break}case\"span\":if(element.getAttribute(\"data-line-number\")&&!this.isInsideAList(element)){if(this.lineNumberingMode===app_site_motions_motions_constants__WEBPACK_IMPORTED_MODULE_0__.d.Inside);else if(this.lineNumberingMode===app_site_motions_motions_constants__WEBPACK_IMPORTED_MODULE_0__.d.Outside){const currentLineNumber=element.getAttribute(\"data-line-number\");newParagraph={columns:[this.getLineNumberObject({lineNumber:+currentLineNumber}),{text:[]}]}}}else{const children=this.parseChildren(element,styles);newParagraph=Object.assign(Object.assign({},this.create(\"text\")),this.computeStyle(styles)),newParagraph.text=children}break;case\"br\":if(this.lineNumberingMode===app_site_motions_motions_constants__WEBPACK_IMPORTED_MODULE_0__.d.None&&classes.includes(\"os-line-break\")||this.lineNumberingMode===app_site_motions_motions_constants__WEBPACK_IMPORTED_MODULE_0__.d.Outside&&this.isInsideAList(element))break;newParagraph=this.create(\"text\"),newParagraph.text=\"\\n\",newParagraph.lineHeight=this.LINE_HEIGHT;break;case\"ul\":case\"ol\":{const list=this.create(nodeName);if(\"ol\"===nodeName){const start=element.getAttribute(\"start\");start&&(list.start=parseInt(start,10))}if(this.lineNumberingMode===app_site_motions_motions_constants__WEBPACK_IMPORTED_MODULE_0__.d.Outside){const lines=this.extractLineNumbers(element),cleanedChildDom=this.cleanLineNumbers(element),cleanedChildren=this.parseChildren(cleanedChildDom,styles);if(lines.length>0){const listCol={columns:[{width:20,stack:[]}],margin:[0,0,0,0]};this.isFakeList(element)&&(listCol.margin[3]=-this.LI_MARGIN_BOTTOM);for(const line of lines)listCol.columns[0].stack.push(this.getLineNumberObject(line));list[nodeName]=cleanedChildren,listCol.columns.push(list),newParagraph=listCol}else list.margin=[20,0,0,0],newParagraph=list,newParagraph[nodeName]=cleanedChildren}else{const children=this.parseChildren(element,styles);newParagraph=list,newParagraph[nodeName]=children}break}default:newParagraph=Object.assign(Object.assign({},this.create(\"text\",element.textContent.replace(/\\n/g,\"\"))),this.computeStyle(styles))}return newParagraph}parseChildren(element,styles){const childNodes=Array.from(element.childNodes),paragraph=[];if(childNodes.length>0)for(const child of childNodes)if(\"#text\"!==child.nodeName||\"\"!==child.textContent.trim()){const parsedElement=this.parseElement(child,styles),firstChild=element.firstChild;if(this.lineNumberingMode===app_site_motions_motions_constants__WEBPACK_IMPORTED_MODULE_0__.d.Outside&&child&&child.classList&&child.classList.contains(\"os-line-number\"))paragraph.push(parsedElement);else if(this.lineNumberingMode===app_site_motions_motions_constants__WEBPACK_IMPORTED_MODULE_0__.d.Outside&&firstChild&&firstChild.classList&&firstChild.classList.contains(\"os-line-number\")){const currentLine=paragraph.pop();currentLine.columns[1].text.push(parsedElement),paragraph.push(currentLine)}else paragraph.push(parsedElement)}return paragraph}getLineNumberObject(line){return{width:20,text:[{text:\" \",fontSize:10,decoration:\"\"},{text:line.lineNumber,color:\"gray\",fontSize:8}],marginBottom:line.marginBottom,lineHeight:this.LINE_HEIGHT}}withSublist(element){return\"li\"===element.nodeName.toLowerCase()&&Array.from(element.children).some(child=>\"ul\"===child.nodeName.toLowerCase())}cleanLineNumbers(element){const elementCopy=element.cloneNode(!0),children=elementCopy.childNodes;for(let i=0;i<children.length;i++)if(this.getLineNumber(children[i])&&children[i].remove(),children[i].childNodes.length>0){const cleanChildren=this.cleanLineNumbers(children[i]);elementCopy.replaceChild(cleanChildren,children[i])}return elementCopy}extractLineNumbers(element){let foundLineNumbers=[];const lineNumber=this.getLineNumber(element);if(lineNumber)foundLineNumbers.push({lineNumber:lineNumber});else if(\"BR\"===element.nodeName)this.getLineNumber(element.nextSibling)||foundLineNumbers.push({lineNumber:\"\"});else{const children=Array.from(element.childNodes);let childrenLength=children.length,childrenLineNumbers=[];for(let i=0;i<children.length;i++)childrenLineNumbers=childrenLineNumbers.concat(this.extractLineNumbers(children[i])),children.length<childrenLength&&(i-=childrenLength-children.length,childrenLength=children.length);childrenLineNumbers.length&&\"LI\"===element.nodeName?childrenLineNumbers[childrenLineNumbers.length-1].marginBottom=this.LI_MARGIN_BOTTOM:childrenLineNumbers.length&&\"LI\"===element.parentNode.nodeName&&(childrenLineNumbers[childrenLineNumbers.length-1].marginBottom=this.P_MARGIN_BOTTOM),foundLineNumbers=foundLineNumbers.concat(childrenLineNumbers)}return foundLineNumbers}isInsideAList(element){let parent=element.parentNode;for(;null!==parent;){if(\"UL\"===parent.nodeName||\"OL\"===parent.nodeName)return!0;parent=parent.parentNode}return!1}isFakeList(element){if(element.firstElementChild&&element.classList.contains(\"os-split-after\")){const firstChild=element.firstElementChild,lastChild=element.childNodes[element.childNodes.length-1],splitBefore=\"LI\"===firstChild.nodeName&&firstChild.classList.contains(\"os-split-before\"),splitAfter=\"LI\"===lastChild.nodeName&&lastChild.classList.contains(\"os-split-after\");return splitBefore||splitAfter}return!1}getLineNumber(element){if(element&&\"SPAN\"===element.nodeName&&element.getAttribute(\"class\")&&element.getAttribute(\"class\").indexOf(\"os-line-number\")>-1)return parseInt(element.getAttribute(\"data-line-number\"),10)}computeStyle(styles){const styleObject={};if(styles&&styles.length>0)for(const style of styles){const styleDefinition=style.trim().toLowerCase().split(\":\"),key=styleDefinition[0],value=styleDefinition[1];if(2===styleDefinition.length)switch(key){case\"padding-left\":styleObject.margin=[parseInt(value,10),0,0,0];break;case\"font-size\":styleObject.fontSize=parseInt(value,10);break;case\"text-align\":switch(value){case\"right\":case\"center\":case\"justify\":styleObject.alignment=value}break;case\"font-weight\":switch(value){case\"bold\":styleObject.bold=!0}break;case\"text-decoration\":switch(value){case\"underline\":styleObject.decoration=\"underline\";break;case\"line-through\":styleObject.decoration=\"lineThrough\"}break;case\"font-style\":switch(value){case\"italic\":styleObject.italics=!0}break;case\"color\":styleObject.color=this.parseColor(value);break;case\"background-color\":styleObject.background=this.parseColor(value)}}return styleObject}parseColor(color){const haxRegex=new RegExp(\"^#([0-9a-f]{3}|[0-9a-f]{6})$\"),rgbRegex=new RegExp(\"^rgb\\\\((\\\\d+),\\\\s*(\\\\d+),\\\\s*(\\\\d+)\\\\)$\"),nameRegex=new RegExp(\"^[a-z]+$\");if(haxRegex.test(color))return color;if(rgbRegex.test(color)){const decimalColors=rgbRegex.exec(color).slice(1);for(let i=0;i<3;i++){let decimalValue=parseInt(decimalColors[i],10);decimalValue>255&&(decimalValue=255);let hexString=\"0\"+decimalValue.toString(16);hexString=hexString.slice(-2),decimalColors[i]=hexString}return\"#\"+decimalColors.join(\"\")}return nameRegex.test(color)||console.error('Could not parse color \"'+color+'\"'),color}create(name,content){const container={};return container[name]=content||[],container}}return HtmlToPdfService.ɵfac=function(t){return new(t||HtmlToPdfService)},HtmlToPdfService.ɵprov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Pb({token:HtmlToPdfService,factory:HtmlToPdfService.ɵfac,providedIn:\"root\"}),HtmlToPdfService})()},DNKu:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return BasePollDialogService}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mrSG\"),app_core_core_services_collection_string_mapper_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"TG9O\"),app_shared_models_poll_base_poll__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"qnZ9\"),app_shared_utils_dialog_settings__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"Izkr\"),_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"fXoL\"),_angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(\"0IaG\");let BasePollDialogService=(()=>{class BasePollDialogService{constructor(dialog,mapper){this.dialog=dialog,this.mapper=mapper}openDialog(viewPoll){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){const dialogRef=this.dialog.open(this.dialogComponent,Object.assign({data:viewPoll},app_shared_utils_dialog_settings__WEBPACK_IMPORTED_MODULE_3__.c)),result=yield dialogRef.afterClosed().toPromise();if(result){const repo=this.mapper.getRepository(viewPoll.collectionString);if(viewPoll.poll){let update=result;viewPoll.state!==app_shared_models_poll_base_poll__WEBPACK_IMPORTED_MODULE_2__.e.Created&&(update={title:result.title,onehundred_percent_base:result.onehundred_percent_base,majority_method:result.majority_method,description:result.description},viewPoll.type===app_shared_models_poll_base_poll__WEBPACK_IMPORTED_MODULE_2__.f.Analog&&(update=Object.assign(Object.assign({},update),{votes:result.votes,publish_immediately:result.publish_immediately}))),yield repo.patch(update,viewPoll)}else yield repo.create(result)}}))}}return BasePollDialogService.ɵfac=function(t){return new(t||BasePollDialogService)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.dc(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__.b),_angular_core__WEBPACK_IMPORTED_MODULE_4__.dc(app_core_core_services_collection_string_mapper_service__WEBPACK_IMPORTED_MODULE_1__.a))},BasePollDialogService.ɵprov=_angular_core__WEBPACK_IMPORTED_MODULE_4__.Pb({token:BasePollDialogService,factory:BasePollDialogService.ɵfac,providedIn:\"root\"}),BasePollDialogService})()},JAMN:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return AttachmentControlComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"fXoL\"),_angular_material_form_field__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"kmnG\"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"lJxs\"),app_core_repositories_mediafiles_mediafile_repository_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"SSyl\"),app_shared_models_base_base_form_control__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"aAo1\"),app_shared_utils_dialog_settings__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(\"Izkr\"),_angular_forms__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(\"3Pt+\"),_angular_cdk_a11y__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(\"u47x\"),_angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(\"0IaG\"),_angular_common__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(\"ofXK\"),_search_value_selector_search_value_selector_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(\"oqD5\"),_directives_perms_directive__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(\"3Xi6\"),_angular_material_button__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(\"bTqV\"),_angular_material_icon__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(\"NFeN\"),_media_upload_content_media_upload_content_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(\"GTZY\"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(\"sYmb\");function AttachmentControlComponent_div_0_button_4_Template(rf,ctx){if(1&rf){const _r5=_angular_core__WEBPACK_IMPORTED_MODULE_0__.ac();_angular_core__WEBPACK_IMPORTED_MODULE_0__.Zb(0,\"button\",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__.hc(\"click\",(function(){_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ic(_r5);const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__.lc(2),_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ec(2);return ctx_r4.openUploadDialog(_r1)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Zb(1,\"mat-icon\"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Sc(2,\"cloud_upload\"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yb()}}function AttachmentControlComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Zb(0,\"div\",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Zb(1,\"mat-form-field\"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ub(2,\"os-search-value-selector\",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__.mc(3,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Qc(4,AttachmentControlComponent_div_0_button_4_Template,3,0,\"button\",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yb()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__.lc();_angular_core__WEBPACK_IMPORTED_MODULE_0__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.uc(\"placeholder\",_angular_core__WEBPACK_IMPORTED_MODULE_0__.nc(3,5,\"Attachments\")),_angular_core__WEBPACK_IMPORTED_MODULE_0__.tc(\"multiple\",!0)(\"formControl\",ctx_r0.contentForm)(\"inputListValues\",ctx_r0.mediaFileList),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.tc(\"osPerms\",\"mediafiles.can_manage\")}}function AttachmentControlComponent_ng_template_1_Template(rf,ctx){if(1&rf){const _r7=_angular_core__WEBPACK_IMPORTED_MODULE_0__.ac();_angular_core__WEBPACK_IMPORTED_MODULE_0__.Zb(0,\"h1\",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Zb(1,\"span\"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Sc(2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.mc(3,\"translate\"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Zb(4,\"os-media-upload-content\",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__.hc(\"uploadSuccessEvent\",(function($event){return _angular_core__WEBPACK_IMPORTED_MODULE_0__.Ic(_r7),_angular_core__WEBPACK_IMPORTED_MODULE_0__.lc().uploadSuccess($event)}))(\"errorEvent\",(function($event){return _angular_core__WEBPACK_IMPORTED_MODULE_0__.Ic(_r7),_angular_core__WEBPACK_IMPORTED_MODULE_0__.lc().uploadError($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yb()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Gb(2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Tc(_angular_core__WEBPACK_IMPORTED_MODULE_0__.nc(3,1,\"Upload files\")))}let AttachmentControlComponent=(()=>{class AttachmentControlComponent extends app_shared_models_base_base_form_control__WEBPACK_IMPORTED_MODULE_4__.a{constructor(formBuilder,focusMonitor,element,ngControl,dialogService,mediaService){super(formBuilder,focusMonitor,element,ngControl),this.ngControl=ngControl,this.dialogService=dialogService,this.mediaService=mediaService,this.errorHandler=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.p}get empty(){return!this.contentForm.value.length}get controlType(){return\"attachment-control\"}ngOnInit(){this.mediaFileList=this.mediaService.getViewModelListObservable().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)(files=>files.filter(file=>!file.is_directory)))}openUploadDialog(dialog){this.dialogRef=this.dialogService.open(dialog,Object.assign(Object.assign({},app_shared_utils_dialog_settings__WEBPACK_IMPORTED_MODULE_5__.c),{disableClose:!1}))}uploadSuccess(fileIDs){const newValues=[...this.contentForm.value,...fileIDs];this.updateForm(newValues),this.dialogRef.close()}uploadError(error){this.errorHandler.emit(error)}onContainerClick(event){}initializeForm(){this.contentForm=this.fb.control([])}updateForm(value){this.contentForm.setValue(value||[])}}return AttachmentControlComponent.ɵfac=function(t){return new(t||AttachmentControlComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Tb(_angular_forms__WEBPACK_IMPORTED_MODULE_6__.f),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Tb(_angular_cdk_a11y__WEBPACK_IMPORTED_MODULE_7__.h),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Tb(_angular_core__WEBPACK_IMPORTED_MODULE_0__.m),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Tb(_angular_forms__WEBPACK_IMPORTED_MODULE_6__.r,10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Tb(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__.b),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Tb(app_core_repositories_mediafiles_mediafile_repository_service__WEBPACK_IMPORTED_MODULE_3__.a))},AttachmentControlComponent.ɵcmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb({type:AttachmentControlComponent,selectors:[[\"os-attachment-control\"]],outputs:{errorHandler:\"errorHandler\"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.Fb([{provide:_angular_material_form_field__WEBPACK_IMPORTED_MODULE_1__.d,useExisting:AttachmentControlComponent}]),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Db],decls:3,vars:1,consts:[[\"class\",\"attachment-container\",4,\"ngIf\"],[\"uploadDialog\",\"\"],[1,\"attachment-container\"],[1,\"selector\",3,\"multiple\",\"placeholder\",\"formControl\",\"inputListValues\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"click\",4,\"osPerms\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"click\"],[\"mat-dialog-title\",\"\"],[3,\"uploadSuccessEvent\",\"errorEvent\"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Qc(0,AttachmentControlComponent_div_0_Template,5,7,\"div\",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Qc(1,AttachmentControlComponent_ng_template_1_Template,5,3,\"ng-template\",null,1,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rc)),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.tc(\"ngIf\",ctx.contentForm)},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_9__.t,_angular_material_form_field__WEBPACK_IMPORTED_MODULE_1__.c,_search_value_selector_search_value_selector_component__WEBPACK_IMPORTED_MODULE_10__.a,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.s,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.h,_directives_perms_directive__WEBPACK_IMPORTED_MODULE_11__.a,_angular_material_button__WEBPACK_IMPORTED_MODULE_12__.b,_angular_material_icon__WEBPACK_IMPORTED_MODULE_13__.a,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__.i,_media_upload_content_media_upload_content_component__WEBPACK_IMPORTED_MODULE_14__.a],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_15__.j],styles:[\"[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .attachment-container[_ngcontent-%COMP%]{-ms-flex-pack:justify;justify-content:space-between;display:-ms-flexbox;display:flex}[_nghost-%COMP%]   .attachment-container[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]{width:95%}[_nghost-%COMP%]   .attachment-container[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{top:20px}\"],changeDetection:0}),AttachmentControlComponent})()},QFkl:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"AssignmentsModule\",(function(){return assignments_module_AssignmentsModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_router=__webpack_require__(\"tyNb\"),operator_service=__webpack_require__(\"OwvW\"),tslib_es6=__webpack_require__(\"mrSG\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),BehaviorSubject=__webpack_require__(\"2Vo4\"),item_repository_service=__webpack_require__(\"InfO\"),assignment_repository_service=__webpack_require__(\"ctLh\"),mediafile_repository_service=__webpack_require__(\"SSyl\"),tag_repository_service=__webpack_require__(\"lv9T\"),user_repository_service=__webpack_require__(\"ZDbo\"),prompt_service=__webpack_require__(\"F48D\"),assignments_assignment=__webpack_require__(\"2BSV\"),base_view=__webpack_require__(\"mV3u\"),local_permissions_service=__webpack_require__(\"f3I0\"),pdf_document_service=__webpack_require__(\"a9GI\"),html_to_pdf_service=__webpack_require__(\"BBYV\"),assignment_poll=__webpack_require__(\"HRp2\"),parse_poll_number_pipe=__webpack_require__(\"j7f2\"),poll_key_verbose_pipe=__webpack_require__(\"6ako\"),poll_percent_base_pipe=__webpack_require__(\"QUb3\"),assignment_poll_service=__webpack_require__(\"o7cs\"),core=__webpack_require__(\"fXoL\"),ngx_translate_core=__webpack_require__(\"sYmb\");let assignment_pdf_service_AssignmentPdfService=(()=>{class AssignmentPdfService{constructor(translate,htmlToPdfService,pollKeyVerbose,parsePollNumber,pollPercentBase,assignmentPollService){this.translate=translate,this.htmlToPdfService=htmlToPdfService,this.pollKeyVerbose=pollKeyVerbose,this.parsePollNumber=parsePollNumber,this.pollPercentBase=pollPercentBase,this.assignmentPollService=assignmentPollService}assignmentToDocDef(assignment){return[this.createTitle(assignment),this.createPreamble(assignment),this.createDescription(assignment),this.createCandidateList(assignment),this.createPollResultTable(assignment)]}createTitle(assignment){return{text:assignment.title,style:\"title\"}}createPreamble(assignment){return{text:[{text:this.translate.instant(\"Number of persons to be elected\")+\": \",bold:!0,style:\"textItem\"},{text:\"\"+assignment.open_posts,style:\"textItem\"}]}}createDescription(assignment){if(assignment.description){const descriptionDocDef=this.htmlToPdfService.addPlainText(assignment.description);return[{text:this.translate.instant(\"Description\")+\": \",bold:!0,style:\"textItem\"},descriptionDocDef]}return{}}createCandidateList(assignment){if(2!==assignment.phase){const candidates=assignment.assignment_related_users.sort((a,b)=>a.weight-b.weight),candidatesText=this.translate.instant(\"Candidates\")+\": \",userList=candidates.map(candidate=>({text:candidate.user.full_name,margin:[0,0,0,10]}));return{columns:[{text:candidatesText,bold:!0,width:\"25%\",style:\"textItem\"},{[assignment.number_poll_candidates?\"ol\":\"ul\"]:userList,style:\"textItem\"}]}}return{}}createPollResultTable(assignment){const resultBody=[];for(const poll of assignment.polls)if(poll.isPublished){const pollTableBody=[];resultBody.push({text:poll.title,bold:!0,style:\"textItem\",margin:[0,15,0,0]}),pollTableBody.push([{text:this.translate.instant(\"Candidates\"),style:\"tableHeader\"},{text:this.translate.instant(\"Votes\"),style:\"tableHeader\"}]);const tableData=this.assignmentPollService.generateTableData(poll);for(const pollResult of tableData){const voteOption=this.translate.instant(this.pollKeyVerbose.transform(pollResult.votingOption)),resultLine=this.getPollResult(pollResult,poll);pollTableBody.push([{text:voteOption},{text:resultLine}])}resultBody.push({table:{widths:[\"64%\",\"33%\"],headerRows:1,body:pollTableBody},layout:\"switchColorTableLayout\"})}return resultBody}getPollResult(votingResult,poll){return votingResult.value.filter(singleResult=>poll.pollmethod===assignment_poll.b.Votes?\"no\"!==singleResult.vote&&\"abstain\"!==singleResult.vote:poll.pollmethod!==assignment_poll.b.YN||\"abstain\"!==singleResult.vote).map(singleResult=>{const votingKey=this.translate.instant(this.pollKeyVerbose.transform(singleResult.vote)),resultValue=this.parsePollNumber.transform(singleResult.amount),resultInPercent=this.pollPercentBase.transform(singleResult.amount,poll);return`${votingKey}${votingKey?\": \":\"\"}${resultValue} ${singleResult.showPercent&&resultInPercent?resultInPercent:\"\"}`}).join(\"\\n\")}}return AssignmentPdfService.ɵfac=function(t){return new(t||AssignmentPdfService)(core.dc(ngx_translate_core.k),core.dc(html_to_pdf_service.a),core.dc(poll_key_verbose_pipe.a),core.dc(parse_poll_number_pipe.a),core.dc(poll_percent_base_pipe.a),core.dc(assignment_poll_service.a))},AssignmentPdfService.ɵprov=core.Pb({token:AssignmentPdfService,factory:AssignmentPdfService.ɵfac,providedIn:\"root\"}),AssignmentPdfService})(),assignment_pdf_export_service_AssignmentPdfExportService=(()=>{class AssignmentPdfExportService{constructor(translate,assignmentPdfService,pdfDocumentService){this.translate=translate,this.assignmentPdfService=assignmentPdfService,this.pdfDocumentService=pdfDocumentService}exportSingleAssignment(assignment){const doc=this.assignmentPdfService.assignmentToDocDef(assignment),filename=`${this.translate.instant(\"Election\")}_${assignment.title}`;this.pdfDocumentService.download(doc,filename,{title:filename})}exportMultipleAssignments(assignments){const doc=this.createDocOfMultipleAssignments(assignments),filename=this.translate.instant(\"Elections\");this.pdfDocumentService.download(doc,filename,{title:filename})}createDocOfMultipleAssignments(assignments){const doc=[],fileList=assignments.map((assignment,index)=>{try{const assignmentDocDef=this.assignmentPdfService.assignmentToDocDef(assignment);return assignmentDocDef[0].id=\"\"+assignment.id,index<assignments.length-1?[assignmentDocDef,this.pdfDocumentService.getPageBreak()]:[assignmentDocDef]}catch(error){const errorText=`${this.translate.instant(\"Error during PDF creation of election:\")} ${assignment.title}`;throw console.error(errorText+\"\\nDebugInfo:\\n\",error),new pdf_document_service.c(errorText)}});return assignments.length>1&&doc.push(this.pdfDocumentService.createTitle(\"assignments_pdf_title\"),this.pdfDocumentService.createPreamble(\"assignments_pdf_preamble\"),this.createToc(assignments)),doc.push(fileList),doc}createToc(assignments){const toc=[],tocTitle={text:this.translate.instant(\"Table of contents\"),style:\"heading2\"},tocBody=assignments.map((assignment,index)=>this.pdfDocumentService.createTocLine(\"\"+(index+1),assignment.title,\"\"+assignment.id));return toc.push(this.pdfDocumentService.createTocTableDef(tocBody)),[tocTitle,toc,this.pdfDocumentService.getPageBreak()]}}return AssignmentPdfExportService.ɵfac=function(t){return new(t||AssignmentPdfExportService)(core.dc(ngx_translate_core.k),core.dc(assignment_pdf_service_AssignmentPdfService),core.dc(pdf_document_service.b))},AssignmentPdfExportService.ɵprov=core.Pb({token:AssignmentPdfExportService,factory:AssignmentPdfExportService.ɵfac,providedIn:\"root\"}),AssignmentPdfExportService})();var collection_string_mapper_service=__webpack_require__(\"TG9O\"),base_poll_dialog_service=__webpack_require__(\"DNKu\"),fesm2015_dialog=__webpack_require__(\"0IaG\"),debounceTime=__webpack_require__(\"Kj3r\"),distinctUntilChanged=__webpack_require__(\"/uUt\"),base_poll=__webpack_require__(\"qnZ9\"),base_vote=__webpack_require__(\"YIhf\"),view_assignment_poll=__webpack_require__(\"aOHa\"),base_poll_dialog_component=__webpack_require__(\"b1ae\"),poll_form_component=__webpack_require__(\"5NaA\"),platform_browser=__webpack_require__(\"jhN1\"),snack_bar=__webpack_require__(\"dNgK\"),fesm2015_button=__webpack_require__(\"bTqV\"),fesm2015_checkbox=__webpack_require__(\"bSwM\"),check_input_component=__webpack_require__(\"acT5\"),form_field=__webpack_require__(\"kmnG\");const _c0=[\"pollForm\"];function AssignmentPollDialogComponent_ng_container_2_div_3_span_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.Yb()),2&rf){const option_r8=core.lc().$implicit;core.Gb(1),core.Tc(option_r8.user.getFullName())}}function AssignmentPollDialogComponent_ng_container_2_div_3_span_3_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Unknown user\")))}function AssignmentPollDialogComponent_ng_container_2_div_3_div_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",15),core.Ub(1,\"os-check-input\",16),core.mc(2,\"translate\"),core.mc(3,\"translate\"),core.Yb()),2&rf){const value_r13=ctx.$implicit,option_r8=core.lc().$implicit,ctx_r11=core.lc(2);core.tc(\"formGroupName\",option_r8.user_id),core.Gb(1),core.tc(\"placeholder\",core.nc(2,5,ctx_r11.voteValueVerbose[value_r13]))(\"checkboxValue\",-1)(\"checkboxLabel\",core.nc(3,7,\"majority\"))(\"formControlName\",value_r13)}}function AssignmentPollDialogComponent_ng_container_2_div_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",13),core.Zb(1,\"div\"),core.Qc(2,AssignmentPollDialogComponent_ng_container_2_div_3_span_2_Template,2,1,\"span\",2),core.Qc(3,AssignmentPollDialogComponent_ng_container_2_div_3_span_3_Template,3,3,\"span\",2),core.Yb(),core.Zb(4,\"div\"),core.Qc(5,AssignmentPollDialogComponent_ng_container_2_div_3_div_5_Template,4,9,\"div\",14),core.Yb(),core.Yb()),2&rf){const option_r8=ctx.$implicit,ctx_r3=core.lc(2);core.Gb(2),core.tc(\"ngIf\",option_r8.user),core.Gb(1),core.tc(\"ngIf\",!option_r8.user),core.Gb(2),core.tc(\"ngForOf\",ctx_r3.analogPollValues)}}function AssignmentPollDialogComponent_ng_container_2_div_4_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",13),core.Ub(1,\"div\"),core.Ub(2,\"os-check-input\",16),core.mc(3,\"translate\"),core.mc(4,\"translate\"),core.Yb()),2&rf){const value_r15=ctx.$implicit,ctx_r4=core.lc(2);core.Gb(2),core.tc(\"placeholder\",core.nc(3,4,ctx_r4.generalValueVerbose[value_r15]))(\"checkboxValue\",-1)(\"checkboxLabel\",core.nc(4,6,\"majority\"))(\"formControlName\",value_r15)}}function AssignmentPollDialogComponent_ng_container_2_os_check_input_6_Template(rf,ctx){1&rf&&(core.Ub(0,\"os-check-input\",17),core.mc(1,\"translate\"),core.mc(2,\"translate\")),2&rf&&(core.uc(\"placeholder\",core.nc(1,3,\"General No\")),core.tc(\"checkboxValue\",-1)(\"checkboxLabel\",core.nc(2,5,\"majority\")))}function AssignmentPollDialogComponent_ng_container_2_os_check_input_7_Template(rf,ctx){1&rf&&(core.Ub(0,\"os-check-input\",18),core.mc(1,\"translate\"),core.mc(2,\"translate\")),2&rf&&(core.uc(\"placeholder\",core.nc(1,3,\"General Abstain\")),core.tc(\"checkboxValue\",-1)(\"checkboxLabel\",core.nc(2,5,\"majority\")))}function AssignmentPollDialogComponent_ng_container_2_mat_error_13_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-error\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"Error in form field.\"),\"\"))}function AssignmentPollDialogComponent_ng_container_2_Template(rf,ctx){if(1&rf){const _r17=core.ac();core.Xb(0),core.Zb(1,\"form\",6),core.Zb(2,\"div\",7),core.Qc(3,AssignmentPollDialogComponent_ng_container_2_div_3_Template,6,3,\"div\",8),core.Yb(),core.Qc(4,AssignmentPollDialogComponent_ng_container_2_div_4_Template,5,8,\"div\",8),core.Zb(5,\"div\"),core.Qc(6,AssignmentPollDialogComponent_ng_container_2_os_check_input_6_Template,3,7,\"os-check-input\",9),core.Qc(7,AssignmentPollDialogComponent_ng_container_2_os_check_input_7_Template,3,7,\"os-check-input\",10),core.Yb(),core.Yb(),core.Zb(8,\"div\",11),core.Zb(9,\"mat-checkbox\",12),core.hc(\"ngModelChange\",(function($event){return core.Ic(_r17),core.lc().publishImmediately=$event}))(\"change\",(function($event){return core.Ic(_r17),core.lc().publishStateChanged($event.checked)})),core.Zb(10,\"span\"),core.Sc(11),core.mc(12,\"translate\"),core.Yb(),core.Yb(),core.Qc(13,AssignmentPollDialogComponent_ng_container_2_mat_error_13_Template,3,3,\"mat-error\",2),core.Yb(),core.Wb()}if(2&rf){const ctx_r1=core.lc();core.Gb(1),core.tc(\"formGroup\",ctx_r1.dialogVoteForm),core.Gb(2),core.tc(\"ngForOf\",ctx_r1.options),core.Gb(1),core.tc(\"ngForOf\",ctx_r1.sumValues),core.Gb(2),core.tc(\"ngIf\",ctx_r1.globalNoEnabled),core.Gb(1),core.tc(\"ngIf\",ctx_r1.globalAbstainEnabled),core.Gb(2),core.tc(\"ngModel\",ctx_r1.publishImmediately),core.Gb(2),core.Tc(core.nc(12,8,\"Publish immediately\")),core.Gb(2),core.tc(\"ngIf\",!ctx_r1.dialogVoteForm.valid)}}function AssignmentPollDialogComponent_button_4_Template(rf,ctx){if(1&rf){const _r20=core.ac();core.Zb(0,\"button\",19),core.hc(\"click\",(function(){return core.Ic(_r20),core.lc().submitPoll()})),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const ctx_r2=core.lc(),_r0=core.Ec(1);core.tc(\"disabled\",_r0.contentForm.invalid||ctx_r2.dialogVoteForm.invalid),core.Gb(2),core.Tc(core.nc(3,2,\"Save\"))}}let assignment_poll_dialog_component_AssignmentPollDialogComponent=(()=>{class AssignmentPollDialogComponent extends base_poll_dialog_component.a{constructor(fb,title,translate,matSnackbar,dialogRef,assignmentPollService,pollData){super(title,translate,matSnackbar,dialogRef),this.fb=fb,this.translate=translate,this.dialogRef=dialogRef,this.assignmentPollService=assignmentPollService,this.pollData=pollData,this.voteValueVerbose=base_vote.c,this.generalValueVerbose=base_vote.b,this.AssignmentPollMethodVerbose=view_assignment_poll.a,this.AssignmentPollPercentBaseVerbose=view_assignment_poll.b}get sumValues(){return[\"votesvalid\",\"votesinvalid\",\"votescast\"]}get isAnalogPoll(){return this.pollForm&&this.pollForm.contentForm&&this.pollForm.contentForm.get(\"type\").value===base_poll.f.Analog}ngOnInit(){this.pollData&&(this.pollData.options?this.options=this.pollData.options:this.pollData.assignment&&this.pollData.assignment.candidates&&this.pollData.assignment.candidates.length&&(this.options=this.pollData.assignment.candidates.map(user=>({user_id:user.id,user:user}),{}))),this.subscriptions.push(this.pollForm.contentForm.valueChanges.pipe(Object(debounceTime.a)(150),Object(distinctUntilChanged.a)()).subscribe(()=>{this.createDialog()}))}setAnalogPollValues(){const pollmethod=this.pollForm.contentForm.get(\"pollmethod\").value;this.globalNoEnabled=this.pollForm.contentForm.get(\"global_no\").value,this.globalAbstainEnabled=this.pollForm.contentForm.get(\"global_abstain\").value;const analogPollValues=[\"Y\"];pollmethod!==assignment_poll.b.Votes&&analogPollValues.push(\"N\"),pollmethod===assignment_poll.b.YNA&&analogPollValues.push(\"A\"),this.analogPollValues=analogPollValues}updateDialogVoteForm(data){const update={options:{},votesvalid:data.votesvalid,votesinvalid:data.votesinvalid,votescast:data.votescast,amount_global_no:data.amount_global_no,amount_global_abstain:data.amount_global_abstain};for(const option of data.options){const votes={};votes.Y=option.yes,data.pollmethod!==assignment_poll.b.Votes&&(votes.N=option.no),data.pollmethod===assignment_poll.b.YNA&&(votes.A=option.abstain),update.options[option.user_id]=votes}if(this.dialogVoteForm){const result=this.undoReplaceEmptyValues(update);this.dialogVoteForm.patchValue(result)}}createDialog(){this.setAnalogPollValues(),this.dialogVoteForm=this.fb.group(Object.assign({options:this.fb.group(this.options.mapToObject(option=>({[option.user_id]:this.fb.group(this.analogPollValues.mapToObject(value=>({[value]:[\"\",[fesm2015_forms.G.min(base_poll.b)]]})))}))),amount_global_no:[\"\",[fesm2015_forms.G.min(base_poll.b)]],amount_global_abstain:[\"\",[fesm2015_forms.G.min(base_poll.b)]]},this.sumValues.mapToObject(sumValue=>({[sumValue]:[\"\",[fesm2015_forms.G.min(base_poll.b)]]})))),this.isAnalogPoll&&this.pollData.poll&&this.updateDialogVoteForm(this.pollData)}}return AssignmentPollDialogComponent.ɵfac=function(t){return new(t||AssignmentPollDialogComponent)(core.Tb(fesm2015_forms.f),core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(fesm2015_dialog.h),core.Tb(assignment_poll_service.a),core.Tb(fesm2015_dialog.a))},AssignmentPollDialogComponent.ɵcmp=core.Nb({type:AssignmentPollDialogComponent,selectors:[[\"os-assignment-poll-dialog\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.Oc(_c0,!0),2&rf&&core.Dc(_t=core.ic())&&(ctx.pollForm=_t.first)},features:[core.Db],decls:9,vars:10,consts:[[3,\"data\",\"pollService\",\"pollMethods\",\"percentBases\"],[\"pollForm\",\"\"],[4,\"ngIf\"],[\"mat-dialog-actions\",\"\"],[\"mat-button\",\"\",3,\"disabled\",\"click\",4,\"ngIf\"],[\"mat-button\",\"\",3,\"mat-dialog-close\"],[3,\"formGroup\"],[\"formGroupName\",\"options\"],[\"class\",\"votes-grid\",4,\"ngFor\",\"ngForOf\"],[\"inputType\",\"number\",\"formControlName\",\"amount_global_no\",3,\"placeholder\",\"checkboxValue\",\"checkboxLabel\",4,\"ngIf\"],[\"inputType\",\"number\",\"formControlName\",\"amount_global_abstain\",3,\"placeholder\",\"checkboxValue\",\"checkboxLabel\",4,\"ngIf\"],[1,\"spacer-top-20\"],[3,\"ngModel\",\"ngModelChange\",\"change\"],[1,\"votes-grid\"],[3,\"formGroupName\",4,\"ngFor\",\"ngForOf\"],[3,\"formGroupName\"],[\"inputType\",\"number\",3,\"placeholder\",\"checkboxValue\",\"checkboxLabel\",\"formControlName\"],[\"inputType\",\"number\",\"formControlName\",\"amount_global_no\",3,\"placeholder\",\"checkboxValue\",\"checkboxLabel\"],[\"inputType\",\"number\",\"formControlName\",\"amount_global_abstain\",3,\"placeholder\",\"checkboxValue\",\"checkboxLabel\"],[\"mat-button\",\"\",3,\"disabled\",\"click\"]],template:function(rf,ctx){if(1&rf&&(core.Ub(0,\"os-poll-form\",0,1),core.Qc(2,AssignmentPollDialogComponent_ng_container_2_Template,14,10,\"ng-container\",2),core.Zb(3,\"div\",3),core.Qc(4,AssignmentPollDialogComponent_button_4_Template,4,4,\"button\",4),core.Zb(5,\"button\",5),core.Zb(6,\"span\"),core.Sc(7),core.mc(8,\"translate\"),core.Yb(),core.Yb(),core.Yb()),2&rf){const _r0=core.Ec(1);core.tc(\"data\",ctx.pollData)(\"pollService\",ctx.assignmentPollService)(\"pollMethods\",ctx.AssignmentPollMethodVerbose)(\"percentBases\",ctx.AssignmentPollPercentBaseVerbose),core.Gb(2),core.tc(\"ngIf\",ctx.isAnalogPoll&&ctx.dialogVoteForm),core.Gb(2),core.tc(\"ngIf\",_r0&&ctx.dialogVoteForm&&_r0.contentForm),core.Gb(1),core.tc(\"mat-dialog-close\",!1),core.Gb(2),core.Tc(core.nc(8,8,\"Cancel\"))}},directives:[poll_form_component.a,common.t,fesm2015_dialog.c,fesm2015_button.b,fesm2015_dialog.d,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,fesm2015_forms.l,common.s,fesm2015_checkbox.a,fesm2015_forms.s,fesm2015_forms.v,check_input_component.a,fesm2015_forms.i,form_field.b],pipes:[ngx_translate_core.j],styles:[\".submit-buttons[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end}.meta-text[_ngcontent-%COMP%]{font-style:italic;margin-left:10px;margin-right:10px}.meta-text[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{margin-left:5px;margin-right:2px}.candidate-name[_ngcontent-%COMP%]{word-wrap:break-word;width:100%;border-bottom:1px solid grey}.votes-grid[_ngcontent-%COMP%]{display:grid;grid-gap:5px;margin-bottom:10px;-ms-flex-align:baseline;align-items:baseline;grid-template-columns:auto -webkit-max-content;grid-template-columns:auto max-content}.votes-grid[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.sum-value[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end}.width-600[_ngcontent-%COMP%]{max-width:600px}\"]}),AssignmentPollDialogComponent})(),assignment_poll_dialog_service_AssignmentPollDialogService=(()=>{class AssignmentPollDialogService extends base_poll_dialog_service.a{constructor(dialog,mapper){super(dialog,mapper),this.dialogComponent=assignment_poll_dialog_component_AssignmentPollDialogComponent}}return AssignmentPollDialogService.ɵfac=function(t){return new(t||AssignmentPollDialogService)(core.dc(fesm2015_dialog.b),core.dc(collection_string_mapper_service.a))},AssignmentPollDialogService.ɵprov=core.Pb({token:AssignmentPollDialogService,factory:AssignmentPollDialogService.ɵfac,providedIn:\"root\"}),AssignmentPollDialogService})();var view_assignment=__webpack_require__(\"ITcc\"),head_bar_component=__webpack_require__(\"mksl\"),menu=__webpack_require__(\"STbY\"),icon=__webpack_require__(\"NFeN\"),projector_button_component=__webpack_require__(\"Tp2j\"),perms_directive=__webpack_require__(\"3Xi6\"),speaker_button_component=__webpack_require__(\"40uZ\"),divider=__webpack_require__(\"f0Cb\"),assignment_poll_repository_service=__webpack_require__(\"tCBf\"),voting_privacy_warning_component=__webpack_require__(\"owL4\"),dialog_settings=__webpack_require__(\"Izkr\"),base_poll_component=__webpack_require__(\"c3p6\"),base_poll_pdf_service=__webpack_require__(\"EHvM\"),config_service=__webpack_require__(\"+KbT\");let assignment_poll_pdf_service_AssignmentPollPdfService=(()=>{class AssignmentPollPdfService extends base_poll_pdf_service.a{constructor(translate,assignmentRepo,configService,userRepo,pdfService){super(configService,userRepo),this.translate=translate,this.assignmentRepo=assignmentRepo,this.pdfService=pdfService,this.configService.get(\"assignments_pdf_ballot_papers_number\").subscribe(count=>this.ballotCustomCount=count),this.configService.get(\"assignments_pdf_ballot_papers_selection\").subscribe(selection=>this.ballotCountSelection=selection)}printBallots(poll,title,subtitle){const assignment=this.assignmentRepo.getViewModel(poll.assignment_id),fileName=`${this.translate.instant(\"Election\")} - ${assignment.getTitle()} - ${this.translate.instant(\"ballot-paper\")}`;title||(title=assignment.getTitle()),subtitle||(subtitle=\"\"),assignment.polls.length>1&&(subtitle=`${this.translate.instant(\"Ballot\")} ${assignment.polls.length} ${subtitle}`),subtitle.length>90&&(subtitle=subtitle.substring(0,90)+\"...\");let rowsPerPage=1;rowsPerPage=\"votes\"===poll.pollmethod?poll.options.length<=2?4:poll.options.length<=5?3:poll.options.length<=10?2:1:poll.options.length<=2?4:poll.options.length<=3?3:poll.options.length<=7?2:1;const sheetEnd=Math.floor(417/rowsPerPage);this.pdfService.downloadWithBallotPaper(this.getPages(rowsPerPage,{sheetend:sheetEnd,title:title,subtitle:subtitle,poll:poll}),fileName,this.logo)}createBallot(data){return{columns:[{width:1,margin:[0,data.sheetend],text:\"\"},{width:\"*\",stack:[this.getHeader(),this.getTitle(data.title),this.getSubtitle(data.subtitle),this.createPollHint(data.poll),this.createCandidateFields(data.poll)],margin:[0,0,0,0]}]}}createCandidateFields(poll){const resultObject=poll.options.sort((a,b)=>a.weight-b.weight).map(cand=>\"votes\"===poll.pollmethod?this.createBallotOption(cand.user.full_name):this.createYNBallotEntry(cand.user.full_name,poll.pollmethod));if(\"votes\"===poll.pollmethod){if(poll.global_no){const noEntry=this.createBallotOption(this.translate.instant(\"No\"));noEntry.margin[1]=25,resultObject.push(noEntry)}if(poll.global_abstain){const abstainEntry=this.createBallotOption(this.translate.instant(\"Abstain\"));abstainEntry.margin[1]=25,resultObject.push(abstainEntry)}}return resultObject}createYNBallotEntry(option,method){return[{text:option,margin:[40,10,0,0]},{width:\"auto\",columns:(\"YNA\"===method?[\"Yes\",\"No\",\"Abstain\"]:[\"Yes\",\"No\"]).map(choice=>({width:\"auto\",stack:[this.createBallotOption(this.translate.instant(choice))]}))}]}createPollHint(poll){return{text:poll.assignment.default_poll_description||\"\",style:\"description\"}}}return AssignmentPollPdfService.ɵfac=function(t){return new(t||AssignmentPollPdfService)(core.dc(ngx_translate_core.k),core.dc(assignment_repository_service.a),core.dc(config_service.a),core.dc(user_repository_service.a),core.dc(pdf_document_service.b))},AssignmentPollPdfService.ɵprov=core.Pb({token:AssignmentPollPdfService,factory:AssignmentPollPdfService.ɵfac,providedIn:\"root\"}),AssignmentPollPdfService})();var card=__webpack_require__(\"Wp6s\"),assignment_poll_detail_content_component=__webpack_require__(\"DGQJ\"),poll_progress_component=__webpack_require__(\"pA48\"),voting_service=__webpack_require__(\"M0z7\"),base_poll_vote_component=__webpack_require__(\"Xqcw\"),progress_spinner=__webpack_require__(\"Xa2L\");function AssignmentPollVoteComponent_ng_container_0_ng_container_1_p_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"p\"),core.Zb(1,\"i\"),core.Sc(2),core.Yb(),core.Yb()),2&rf){const ctx_r7=core.lc(3);core.Gb(2),core.Tc(ctx_r7.pollHint)}}function AssignmentPollVoteComponent_ng_container_0_ng_container_1_h4_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"h4\"),core.Sc(1),core.mc(2,\"translate\"),core.Zb(3,\"b\"),core.Sc(4),core.Yb(),core.Yb()),2&rf){const ctx_r8=core.lc(3);core.Gb(1),core.Uc(\" \",core.nc(2,3,\"Available votes\"),\": \"),core.Gb(3),core.Vc(\" \",ctx_r8.getVotesAvailable(),\"/\",ctx_r8.poll.votes_amount,\" \")}}function AssignmentPollVoteComponent_ng_container_0_ng_container_1_div_3_div_1_span_3_div_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",9),core.Sc(1),core.Yb()),2&rf){const option_r11=core.lc(3).$implicit;core.Gb(1),core.Uc(\" \",option_r11.user.getLevelAndNumber(),\" \")}}function AssignmentPollVoteComponent_ng_container_0_ng_container_1_div_3_div_1_span_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Zb(1,\"span\"),core.Sc(2),core.Yb(),core.Qc(3,AssignmentPollVoteComponent_ng_container_0_ng_container_1_div_3_div_1_span_3_div_3_Template,2,1,\"div\",8),core.Yb()),2&rf){const option_r11=core.lc(2).$implicit;core.Gb(2),core.Tc(option_r11.user.short_name),core.Gb(1),core.tc(\"ngIf\",option_r11.user.getLevelAndNumber())}}function AssignmentPollVoteComponent_ng_container_0_ng_container_1_div_3_div_1_span_4_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Unknown user\")))}function AssignmentPollVoteComponent_ng_container_0_ng_container_1_div_3_div_1_div_5_span_4_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\",12),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const action_r21=core.lc().$implicit;core.Gb(1),core.Uc(\" \",core.nc(2,1,action_r21.label),\" \")}}function AssignmentPollVoteComponent_ng_container_0_ng_container_1_div_3_div_1_div_5_Template(rf,ctx){if(1&rf){const _r26=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",10),core.hc(\"click\",(function(){core.Ic(_r26);const action_r21=ctx.$implicit,option_r11=core.lc(2).$implicit;return core.lc(3).saveSingleVote(option_r11.id,action_r21.vote)})),core.Zb(2,\"mat-icon\"),core.Sc(3),core.Yb(),core.Yb(),core.Qc(4,AssignmentPollVoteComponent_ng_container_0_ng_container_1_div_3_div_1_div_5_span_4_Template,3,3,\"span\",11),core.Yb()}if(2&rf){const action_r21=ctx.$implicit,option_r11=core.lc(2).$implicit,ctx_r16=core.lc(3);core.Gb(1),core.tc(\"disabled\",ctx_r16.deliveringVote)(\"ngClass\",ctx_r16.voteRequestData.votes[option_r11.id]===action_r21.vote||1===ctx_r16.voteRequestData.votes[option_r11.id]?action_r21.css:\"\"),core.Gb(2),core.Uc(\" \",action_r21.icon,\"\"),core.Gb(1),core.tc(\"ngIf\",ctx_r16.poll.pollmethod!==ctx_r16.AssignmentPollMethod.Votes)}}function AssignmentPollVoteComponent_ng_container_0_ng_container_1_div_3_div_1_mat_divider_6_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-divider\")}const assignment_poll_vote_component_c0=function(a0,a1,a2){return{\"yna-grid\":a0,\"yn-grid\":a1,\"single-vote-grid\":a2}};function AssignmentPollVoteComponent_ng_container_0_ng_container_1_div_3_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"div\",6),core.Zb(2,\"div\",7),core.Qc(3,AssignmentPollVoteComponent_ng_container_0_ng_container_1_div_3_div_1_span_3_Template,4,2,\"span\",0),core.Qc(4,AssignmentPollVoteComponent_ng_container_0_ng_container_1_div_3_div_1_span_4_Template,3,3,\"span\",0),core.Yb(),core.Qc(5,AssignmentPollVoteComponent_ng_container_0_ng_container_1_div_3_div_1_div_5_Template,5,4,\"div\",4),core.Yb(),core.Qc(6,AssignmentPollVoteComponent_ng_container_0_ng_container_1_div_3_div_1_mat_divider_6_Template,1,0,\"mat-divider\",0),core.Yb()),2&rf){const ctx_r28=core.lc(),option_r11=ctx_r28.$implicit,i_r12=ctx_r28.index,ctx_r13=core.lc(3);core.Gb(1),core.tc(\"ngClass\",core.Bc(5,assignment_poll_vote_component_c0,ctx_r13.poll.pollmethod===ctx_r13.AssignmentPollMethod.YNA,ctx_r13.poll.pollmethod===ctx_r13.AssignmentPollMethod.YN,ctx_r13.poll.pollmethod===ctx_r13.AssignmentPollMethod.Votes)),core.Gb(2),core.tc(\"ngIf\",option_r11.user),core.Gb(1),core.tc(\"ngIf\",!option_r11.user),core.Gb(1),core.tc(\"ngForOf\",ctx_r13.voteActions),core.Gb(1),core.tc(\"ngIf\",ctx_r13.poll.options.length-1>i_r12)}}function AssignmentPollVoteComponent_ng_container_0_ng_container_1_div_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,AssignmentPollVoteComponent_ng_container_0_ng_container_1_div_3_div_1_Template,7,9,\"div\",0),core.Yb()),2&rf){const option_r11=ctx.$implicit,ctx_r9=core.lc(3);core.Gb(1),core.tc(\"ngIf\",ctx_r9.poll.type!==ctx_r9.PollType.Pseudoanonymous||!option_r11.user_has_voted)}}function AssignmentPollVoteComponent_ng_container_0_ng_container_1_ng_container_4_div_3_Template(rf,ctx){if(1&rf){const _r32=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",14),core.hc(\"click\",(function(){return core.Ic(_r32),core.lc(4).saveGlobalVote(\"N\")})),core.Zb(2,\"mat-icon\"),core.Sc(3,\" thumb_down \"),core.Yb(),core.Yb(),core.Zb(4,\"span\",12),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const ctx_r29=core.lc(4);core.Gb(1),core.tc(\"ngClass\",\"N\"===ctx_r29.voteRequestData.global?\"voted-no\":\"\")(\"disabled\",ctx_r29.deliveringVote),core.Gb(4),core.Uc(\" \",core.nc(6,3,\"General No\"),\" \")}}function AssignmentPollVoteComponent_ng_container_0_ng_container_1_ng_container_4_div_4_Template(rf,ctx){if(1&rf){const _r34=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",15),core.hc(\"click\",(function(){return core.Ic(_r34),core.lc(4).saveGlobalVote(\"A\")})),core.Zb(2,\"mat-icon\"),core.Sc(3,\" trip_origin\"),core.Yb(),core.Yb(),core.Zb(4,\"span\",12),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const ctx_r30=core.lc(4);core.Gb(1),core.tc(\"ngClass\",\"A\"===ctx_r30.voteRequestData.global?\"voted-abstain\":\"\"),core.Gb(4),core.Uc(\" \",core.nc(6,2,\"General Abstain\"),\" \")}}function AssignmentPollVoteComponent_ng_container_0_ng_container_1_ng_container_4_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Ub(1,\"mat-divider\"),core.Zb(2,\"div\",13),core.Qc(3,AssignmentPollVoteComponent_ng_container_0_ng_container_1_ng_container_4_div_3_Template,7,5,\"div\",0),core.Qc(4,AssignmentPollVoteComponent_ng_container_0_ng_container_1_ng_container_4_div_4_Template,7,4,\"div\",0),core.Yb(),core.Wb()),2&rf){const ctx_r10=core.lc(3);core.Gb(3),core.tc(\"ngIf\",ctx_r10.poll.global_no),core.Gb(1),core.tc(\"ngIf\",ctx_r10.poll.global_abstain)}}function AssignmentPollVoteComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Qc(1,AssignmentPollVoteComponent_ng_container_0_ng_container_1_p_1_Template,3,1,\"p\",0),core.Qc(2,AssignmentPollVoteComponent_ng_container_0_ng_container_1_h4_2_Template,5,5,\"h4\",0),core.Qc(3,AssignmentPollVoteComponent_ng_container_0_ng_container_1_div_3_Template,2,1,\"div\",4),core.Qc(4,AssignmentPollVoteComponent_ng_container_0_ng_container_1_ng_container_4_Template,5,2,\"ng-container\",0),core.Vb(5,5),core.Wb()),2&rf){const ctx_r5=core.lc(2),_r3=core.Ec(4);core.Gb(1),core.tc(\"ngIf\",ctx_r5.pollHint),core.Gb(1),core.tc(\"ngIf\",ctx_r5.poll.pollmethod===ctx_r5.AssignmentPollMethod.Votes&&ctx_r5.poll.votes_amount>1),core.Gb(1),core.tc(\"ngForOf\",ctx_r5.poll.options),core.Gb(1),core.tc(\"ngIf\",ctx_r5.poll.pollmethod===ctx_r5.AssignmentPollMethod.Votes&&(ctx_r5.poll.global_no||ctx_r5.poll.global_abstain)),core.Gb(1),core.tc(\"ngTemplateOutlet\",_r3)}}function AssignmentPollVoteComponent_ng_container_0_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Zb(1,\"span\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Wb()),2&rf){const ctx_r6=core.lc(2);core.Gb(2),core.Tc(core.nc(3,1,ctx_r6.vmanager.getVotePermissionErrorVerbose(ctx_r6.poll)))}}function AssignmentPollVoteComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Qc(1,AssignmentPollVoteComponent_ng_container_0_ng_container_1_Template,6,5,\"ng-container\",3),core.Qc(2,AssignmentPollVoteComponent_ng_container_0_ng_container_2_Template,4,3,\"ng-container\",0),core.Wb()),2&rf){const ctx_r0=core.lc(),_r1=core.Ec(2);core.Gb(1),core.tc(\"ngIf\",ctx_r0.vmanager.canVote(ctx_r0.poll)&&!ctx_r0.alreadyVoted&&!ctx_r0.deliveringVote)(\"ngIfElse\",_r1),core.Gb(1),core.tc(\"ngIf\",!ctx_r0.vmanager.canVote(ctx_r0.poll))}}function AssignmentPollVoteComponent_ng_template_1_div_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"mat-icon\",18),core.Sc(2,\" check_circle \"),core.Yb(),core.Ub(3,\"br\"),core.Zb(4,\"span\"),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(5),core.Tc(core.nc(6,1,\"Voting successful.\")))}function AssignmentPollVoteComponent_ng_template_1_div_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",19),core.Ub(1,\"mat-spinner\",20),core.Ub(2,\"br\"),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()),2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Delivering vote... Please wait!\")))}function AssignmentPollVoteComponent_ng_template_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",16),core.Qc(1,AssignmentPollVoteComponent_ng_template_1_div_1_Template,7,3,\"div\",0),core.Qc(2,AssignmentPollVoteComponent_ng_template_1_div_2_Template,6,3,\"div\",17),core.Yb()),2&rf){const ctx_r2=core.lc();core.Gb(1),core.tc(\"ngIf\",!ctx_r2.deliveringVote),core.Gb(1),core.tc(\"ngIf\",ctx_r2.deliveringVote)}}function AssignmentPollVoteComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r38=core.ac();core.Zb(0,\"div\",16),core.Zb(1,\"button\",21),core.hc(\"click\",(function(){return core.Ic(_r38),core.lc().submitVote()})),core.Zb(2,\"mat-icon\"),core.Sc(3,\" how_to_vote \"),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb(),core.Yb()}2&rf&&(core.Gb(5),core.Uc(\" \",core.nc(6,1,\"Submit vote now\"),\" \"))}let assignment_poll_vote_component_AssignmentPollVoteComponent=(()=>{class AssignmentPollVoteComponent extends base_poll_vote_component.a{constructor(title,translate,matSnackbar,operator,vmanager,pollRepo,promptService,cd){super(title,translate,matSnackbar,operator),this.translate=translate,this.vmanager=vmanager,this.pollRepo=pollRepo,this.promptService=promptService,this.cd=cd,this.AssignmentPollMethod=assignment_poll.b,this.PollType=base_poll.f,this.voteActions=[],this.voteRequestData={votes:{}}}ngOnInit(){this.poll&&!this.poll.user_has_voted?(this.alreadyVoted=!1,this.defineVoteOptions()):(this.alreadyVoted=!0,this.cd.markForCheck())}get pollHint(){return this.poll.assignment.default_poll_description}defineVoteOptions(){this.voteActions.push({vote:\"Y\",css:\"voted-yes\",icon:\"thumb_up\",label:\"Yes\"}),this.poll.pollmethod!==assignment_poll.b.Votes&&this.voteActions.push({vote:\"N\",css:\"voted-no\",icon:\"thumb_down\",label:\"No\"}),this.poll.pollmethod===assignment_poll.b.YNA&&this.voteActions.push({vote:\"A\",css:\"voted-abstain\",icon:\"trip_origin\",label:\"Abstain\"})}getVotesCount(){return Object.keys(this.voteRequestData.votes).filter(key=>this.voteRequestData.votes[key]).length}getVotesAvailable(){return this.poll.votes_amount-this.getVotesCount()}isGlobalOptionSelected(){return!!this.voteRequestData.global}submitVote(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Submit selection now?\"),content=this.translate.instant(\"Your decision cannot be changed afterwards.\");(yield this.promptService.open(title,content))&&(this.deliveringVote=!0,this.cd.markForCheck(),this.pollRepo.vote(this.voteRequestData,this.poll.id).then(()=>{this.alreadyVoted=!0}).catch(this.raiseError).finally(()=>{this.deliveringVote=!1}))}))}saveSingleVote(optionId,vote){if(this.isGlobalOptionSelected()&&delete this.voteRequestData.global,this.poll.pollmethod===assignment_poll.b.Votes){const votesAmount=this.poll.votes_amount,tmpVoteRequest=this.poll.options.map(option=>option.id).reduce((o,n)=>(o[n]=0,1===votesAmount?n===optionId&&1!==this.voteRequestData.votes[n]&&(o[n]=1):n===optionId!=(1===this.voteRequestData.votes[n])&&(o[n]=1),o),{});Object.keys(tmpVoteRequest).filter(key=>tmpVoteRequest[key]).length<=votesAmount?(this.voteRequestData.votes=tmpVoteRequest,this.getVotesCount()===votesAmount&&this.submitVote()):this.raiseError(this.translate.instant(\"You reached the maximum amount of votes. Deselect somebody first.\"))}else this.voteRequestData.votes[optionId]&&this.voteRequestData.votes[optionId]===vote?delete this.voteRequestData.votes[optionId]:this.voteRequestData.votes[optionId]=vote,Object.keys(this.voteRequestData.votes).length===this.poll.options.length&&this.submitVote()}saveGlobalVote(globalVote){this.voteRequestData.votes={},this.voteRequestData.global&&this.voteRequestData.global===globalVote?delete this.voteRequestData.global:(this.voteRequestData.global=globalVote,this.submitVote())}}return AssignmentPollVoteComponent.ɵfac=function(t){return new(t||AssignmentPollVoteComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(operator_service.a),core.Tb(voting_service.b),core.Tb(assignment_poll_repository_service.a),core.Tb(prompt_service.a),core.Tb(core.h))},AssignmentPollVoteComponent.ɵcmp=core.Nb({type:AssignmentPollVoteComponent,selectors:[[\"os-assignment-poll-vote\"]],features:[core.Db],decls:5,vars:1,consts:[[4,\"ngIf\"],[\"cannotVote\",\"\"],[\"sendNow\",\"\"],[4,\"ngIf\",\"ngIfElse\"],[4,\"ngFor\",\"ngForOf\"],[3,\"ngTemplateOutlet\"],[3,\"ngClass\"],[1,\"vote-candidate-name\"],[\"class\",\"user-subtitle\",4,\"ngIf\"],[1,\"user-subtitle\"],[\"mat-raised-button\",\"\",1,\"vote-button\",3,\"disabled\",\"ngClass\",\"click\"],[\"class\",\"vote-label\",4,\"ngIf\"],[1,\"vote-label\"],[1,\"global-option-grid\"],[\"mat-raised-button\",\"\",1,\"vote-button\",3,\"ngClass\",\"disabled\",\"click\"],[\"mat-raised-button\",\"\",1,\"vote-button\",3,\"ngClass\",\"click\"],[1,\"centered-button-wrapper\"],[\"class\",\"submit-vote-indicator\",4,\"ngIf\"],[1,\"vote-submitted\"],[1,\"submit-vote-indicator\"],[1,\"small-spinner\"],[\"mat-flat-button\",\"\",\"color\",\"accent\",3,\"click\"]],template:function(rf,ctx){1&rf&&(core.Qc(0,AssignmentPollVoteComponent_ng_container_0_Template,3,3,\"ng-container\",0),core.Qc(1,AssignmentPollVoteComponent_ng_template_1_Template,3,2,\"ng-template\",null,1,core.Rc),core.Qc(3,AssignmentPollVoteComponent_ng_template_3_Template,7,3,\"ng-template\",null,2,core.Rc)),2&rf&&core.tc(\"ngIf\",ctx.poll)},directives:[common.t,common.s,common.A,common.q,fesm2015_button.b,icon.a,divider.a,progress_spinner.c],pipes:[ngx_translate_core.j],styles:['.yes[_ngcontent-%COMP%]{color:#4caf50}.no[_ngcontent-%COMP%]{color:#cc6c5b}.abstain[_ngcontent-%COMP%]{color:#a6a6a6}.voted-yes[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.voted-no[_ngcontent-%COMP%]{background-color:#cc6c5b;color:#fff}.voted-abstain[_ngcontent-%COMP%]{background-color:#a6a6a6;color:#fff}.start-poll-button[_ngcontent-%COMP%]{color:#4caf50}.stop-poll-button[_ngcontent-%COMP%]{color:#ff5252}.publish-poll-button[_ngcontent-%COMP%]{color:#e6b100}.global-option-grid[_ngcontent-%COMP%], .single-vote-grid[_ngcontent-%COMP%], .yn-grid[_ngcontent-%COMP%], .yna-grid[_ngcontent-%COMP%]{display:grid;grid-gap:10px;margin:20px 0}.yn-grid[_ngcontent-%COMP%]{grid-template-areas:\"name name\" \"yes no\"}.yna-grid[_ngcontent-%COMP%]{grid-template-areas:\"name name name\" \"yes no abstain\"}.single-vote-grid[_ngcontent-%COMP%]{grid-template-areas:\"yes name\";grid-template-columns:-webkit-min-content auto;grid-template-columns:min-content auto}.global-option-grid[_ngcontent-%COMP%]{grid-template-columns:auto auto}.vote-candidate-name[_ngcontent-%COMP%]{grid-area:name;display:-ms-flexbox;display:flex}.vote-candidate-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.centered-button-wrapper[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;text-align:center}.centered-button-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.centered-button-wrapper[_ngcontent-%COMP%]   .vote-submitted[_ngcontent-%COMP%]{color:#4caf50;font-size:200%}.vote-button[_ngcontent-%COMP%]{min-width:50px;min-height:50px}.vote-label[_ngcontent-%COMP%]{margin-left:10px}.mat-divider-horizontal[_ngcontent-%COMP%]{position:static}.submit-vote-indicator[_ngcontent-%COMP%]{text-align:center}.submit-vote-indicator[_ngcontent-%COMP%]   .mat-spinner[_ngcontent-%COMP%]{margin:auto}'],changeDetection:0}),AssignmentPollVoteComponent})();var tooltip=__webpack_require__(\"Qu3c\");function AssignmentPollComponent_mat_card_0_span_7_Template(rf,ctx){if(1&rf){const _r15=core.ac();core.Zb(0,\"span\"),core.Zb(1,\"button\",15),core.hc(\"click\",(function(){return core.Ic(_r15),core.lc(2).openVotingWarning()})),core.Zb(2,\"mat-icon\"),core.Sc(3,\" warning \"),core.Yb(),core.Yb(),core.Yb()}}function AssignmentPollComponent_mat_card_0_span_8_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const ctx_r6=core.lc(2);core.Gb(1),core.Uc(\" \",core.nc(2,1,ctx_r6.poll.typeVerbose),\" · \")}}function AssignmentPollComponent_mat_card_0_button_13_Template(rf,ctx){if(1&rf){const _r17=core.ac();core.Zb(0,\"button\",16),core.hc(\"click\",(function($event){return core.Ic(_r17),$event.stopPropagation()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"more_horiz\"),core.Yb(),core.Yb()}if(2&rf){core.lc(2);const _r1=core.Ec(2);core.tc(\"matMenuTriggerFor\",_r1)}}function AssignmentPollComponent_mat_card_0_div_14_ng_container_5_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Sc(1),core.mc(2,\"translate\"),core.Wb()),2&rf){const ctx_r18=core.lc(3);core.Gb(1),core.Uc(\" \",core.nc(2,1,ctx_r18.poll.nextStateActionVerbose),\" \")}}function AssignmentPollComponent_mat_card_0_div_14_ng_container_6_Template(rf,ctx){1&rf&&(core.Xb(0),core.Sc(1),core.mc(2,\"translate\"),core.Wb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"In progress, please wait...\"),\" \"))}function AssignmentPollComponent_mat_card_0_div_14_Template(rf,ctx){if(1&rf){const _r21=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",17),core.hc(\"click\",(function(){core.Ic(_r21);const ctx_r20=core.lc(2);return ctx_r20.changeState(ctx_r20.poll.nextState)})),core.Zb(2,\"mat-icon\"),core.Sc(3),core.Yb(),core.Zb(4,\"span\",18),core.Qc(5,AssignmentPollComponent_mat_card_0_div_14_ng_container_5_Template,3,3,\"ng-container\",8),core.Qc(6,AssignmentPollComponent_mat_card_0_div_14_ng_container_6_Template,3,3,\"ng-container\",8),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r8=core.lc(2);core.Gb(1),core.tc(\"ngClass\",ctx_r8.pollStateActions[ctx_r8.poll.state].css)(\"disabled\",ctx_r8.stateChangePending),core.Gb(2),core.Uc(\" \",ctx_r8.pollStateActions[ctx_r8.poll.state].icon,\"\"),core.Gb(2),core.tc(\"ngIf\",!ctx_r8.stateChangePending),core.Gb(1),core.tc(\"ngIf\",ctx_r8.stateChangePending)}}function AssignmentPollComponent_mat_card_0_div_15_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"Edit to enter votes.\"),\" \"))}function AssignmentPollComponent_mat_card_0_div_16_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Ub(1,\"os-assignment-poll-detail-content\",22),core.Yb()),2&rf){const ctx_r22=core.lc(3);core.Gb(1),core.vc(\"routerLink\",\"/assignments/polls/\",ctx_r22.poll.id,\"\"),core.tc(\"poll\",ctx_r22.poll)}}function AssignmentPollComponent_mat_card_0_div_16_div_2_span_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"Counting of votes is in progress ...\"),\" \"))}function AssignmentPollComponent_mat_card_0_div_16_div_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,AssignmentPollComponent_mat_card_0_div_16_div_2_span_1_Template,3,3,\"span\",8),core.Yb()),2&rf){const ctx_r23=core.lc(3);core.Gb(1),core.tc(\"ngIf\",ctx_r23.poll.isFinished)}}function AssignmentPollComponent_mat_card_0_div_16_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",19),core.Qc(1,AssignmentPollComponent_mat_card_0_div_16_div_1_Template,2,2,\"div\",20),core.Qc(2,AssignmentPollComponent_mat_card_0_div_16_div_2_Template,2,1,\"div\",21),core.Yb()),2&rf){const ctx_r10=core.lc(2);core.Gb(1),core.tc(\"osPerms\",\"assignments.can_manage\")(\"osPermsOr\",ctx_r10.poll.isPublished),core.Gb(1),core.tc(\"osPerms\",\"assignments.can_manage\")(\"osPermsComplement\",!0)}}function AssignmentPollComponent_mat_card_0_div_17_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Ub(1,\"os-poll-progress\",23),core.Yb()),2&rf){const ctx_r11=core.lc(2);core.Gb(1),core.tc(\"poll\",ctx_r11.poll)}}function AssignmentPollComponent_mat_card_0_os_assignment_poll_vote_18_Template(rf,ctx){if(1&rf&&core.Ub(0,\"os-assignment-poll-vote\",23),2&rf){const ctx_r12=core.lc(2);core.tc(\"poll\",ctx_r12.poll)}}function AssignmentPollComponent_mat_card_0_a_20_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"a\",24),core.mc(1,\"translate\"),core.Zb(2,\"mat-icon\",25),core.Sc(3,\" visibility \"),core.Yb(),core.Yb()),2&rf){const ctx_r13=core.lc(2);core.vc(\"routerLink\",\"/assignments/polls/\",ctx_r13.poll.id,\"\"),core.uc(\"matTooltip\",core.nc(1,2,\"More\"))}}const assignment_poll_component_c0=function(){return[\"core.can_manage_projector\",\"assignments.can_manage\"]};function AssignmentPollComponent_mat_card_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-card\",3),core.Zb(1,\"div\",4),core.Zb(2,\"div\"),core.Zb(3,\"mat-card-title\"),core.Zb(4,\"a\",5),core.Sc(5),core.Yb(),core.Yb(),core.Zb(6,\"div\",6),core.Qc(7,AssignmentPollComponent_mat_card_0_span_7_Template,4,0,\"span\",7),core.Qc(8,AssignmentPollComponent_mat_card_0_span_8_Template,3,3,\"span\",8),core.Zb(9,\"span\"),core.Sc(10),core.mc(11,\"translate\"),core.Yb(),core.Yb(),core.Zb(12,\"div\",9),core.Qc(13,AssignmentPollComponent_mat_card_0_button_13_Template,3,1,\"button\",10),core.Yb(),core.Qc(14,AssignmentPollComponent_mat_card_0_div_14_Template,7,5,\"div\",7),core.Qc(15,AssignmentPollComponent_mat_card_0_div_15_Template,3,3,\"div\",7),core.Yb(),core.Qc(16,AssignmentPollComponent_mat_card_0_div_16_Template,3,4,\"div\",11),core.Qc(17,AssignmentPollComponent_mat_card_0_div_17_Template,2,1,\"div\",7),core.Qc(18,AssignmentPollComponent_mat_card_0_os_assignment_poll_vote_18_Template,1,1,\"os-assignment-poll-vote\",12),core.Zb(19,\"div\",13),core.Qc(20,AssignmentPollComponent_mat_card_0_a_20_Template,4,4,\"a\",14),core.Yb(),core.Yb(),core.Yb()),2&rf){const ctx_r0=core.lc();core.Gb(4),core.vc(\"routerLink\",\"/assignments/polls/\",ctx_r0.poll.id,\"\"),core.Gb(1),core.Uc(\" \",ctx_r0.poll.title,\" \"),core.Gb(2),core.tc(\"osPerms\",\"assignments.can_manage\")(\"osPermsAnd\",\"pseudoanonymous\"===ctx_r0.poll.type),core.Gb(1),core.tc(\"ngIf\",\"analog\"!==ctx_r0.poll.type),core.Gb(2),core.Uc(\" \",core.nc(11,16,ctx_r0.poll.stateVerbose),\" \"),core.Gb(3),core.tc(\"osPerms\",core.yc(18,assignment_poll_component_c0)),core.Gb(1),core.tc(\"osPerms\",\"assignments.can_manage\")(\"osPermsAnd\",!ctx_r0.hideChangeState),core.Gb(1),core.tc(\"osPerms\",\"assignments.can_manage\")(\"osPermsAnd\",\"analog\"===ctx_r0.poll.type&&!ctx_r0.poll.stateHasVotes),core.Gb(1),core.tc(\"ngIf\",ctx_r0.poll.stateHasVotes),core.Gb(1),core.tc(\"osPerms\",\"assignments.can_manage\")(\"osPermsAnd\",ctx_r0.poll&&ctx_r0.poll.isStarted),core.Gb(1),core.tc(\"ngIf\",ctx_r0.poll.canBeVotedFor()),core.Gb(2),core.tc(\"ngIf\",ctx_r0.poll.isPublished)}}function AssignmentPollComponent_div_3_Template(rf,ctx){if(1&rf){const _r26=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",26),core.hc(\"click\",(function(){return core.Ic(_r26),core.lc().openDialog()})),core.Zb(2,\"mat-icon\"),core.Sc(3,\"edit\"),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb(),core.Yb()}2&rf&&(core.Gb(5),core.Tc(core.nc(6,1,\"Edit\")))}function AssignmentPollComponent_div_4_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Ub(1,\"os-projector-button\",27),core.Yb()),2&rf){const ctx_r3=core.lc();core.Gb(1),core.tc(\"object\",ctx_r3.poll)}}function AssignmentPollComponent_div_5_Template(rf,ctx){if(1&rf){const _r28=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",26),core.hc(\"click\",(function(){return core.Ic(_r28),core.lc().printBallot()})),core.Zb(2,\"mat-icon\"),core.Sc(3,\"picture_as_pdf\"),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb(),core.Ub(7,\"mat-divider\"),core.Zb(8,\"button\",26),core.hc(\"click\",(function(){return core.Ic(_r28),core.lc().refreshPoll()})),core.Zb(9,\"mat-icon\"),core.Sc(10,\"refresh\"),core.Yb(),core.Zb(11,\"span\"),core.Sc(12),core.mc(13,\"translate\"),core.Yb(),core.Yb(),core.Zb(14,\"button\",26),core.hc(\"click\",(function(){return core.Ic(_r28),core.lc().resetState()})),core.Zb(15,\"mat-icon\",28),core.Sc(16,\"replay\"),core.Yb(),core.Zb(17,\"span\"),core.Sc(18),core.mc(19,\"translate\"),core.Yb(),core.Yb(),core.Zb(20,\"button\",29),core.hc(\"click\",(function(){return core.Ic(_r28),core.lc().onDeletePoll()})),core.Zb(21,\"mat-icon\"),core.Sc(22,\"delete\"),core.Yb(),core.Zb(23,\"span\"),core.Sc(24),core.mc(25,\"translate\"),core.Yb(),core.Yb(),core.Yb()}2&rf&&(core.Gb(5),core.Tc(core.nc(6,4,\"Ballot papers\")),core.Gb(7),core.Tc(core.nc(13,6,\"Refresh\")),core.Gb(6),core.Tc(core.nc(19,8,\"Reset state\")),core.Gb(6),core.Tc(core.nc(25,10,\"Delete\")))}let assignment_poll_component_AssignmentPollComponent=(()=>{class AssignmentPollComponent extends base_poll_component.a{constructor(titleService,matSnackBar,translate,dialog,promptService,repo,pollDialog,pollService,formBuilder,pdfService){super(titleService,matSnackBar,translate,dialog,promptService,repo,pollDialog),this.pollService=pollService,this.formBuilder=formBuilder,this.pdfService=pdfService,this.candidatesLabels=[]}set poll(value){this.initPoll(value),this.candidatesLabels=this.pollService.getChartLabels(value);const chartData=this.pollService.generateChartData(value);this.chartDataSubject.next(chartData)}get poll(){return this._poll}get dirtyDescription(){return this.descriptionForm.get(\"description\").value!==this.poll.description}ngOnInit(){this.descriptionForm=this.formBuilder.group({description:this.poll?this.poll.description:\"\"})}printBallot(){this.pdfService.printBallots(this.poll)}openVotingWarning(){this.dialog.open(voting_privacy_warning_component.a,dialog_settings.a)}}return AssignmentPollComponent.ɵfac=function(t){return new(t||AssignmentPollComponent)(core.Tb(platform_browser.d),core.Tb(snack_bar.a),core.Tb(ngx_translate_core.k),core.Tb(fesm2015_dialog.b),core.Tb(prompt_service.a),core.Tb(assignment_poll_repository_service.a),core.Tb(assignment_poll_dialog_service_AssignmentPollDialogService),core.Tb(assignment_poll_service.a),core.Tb(fesm2015_forms.f),core.Tb(assignment_poll_pdf_service_AssignmentPollPdfService))},AssignmentPollComponent.ɵcmp=core.Nb({type:AssignmentPollComponent,selectors:[[\"os-assignment-poll\"]],inputs:{poll:\"poll\"},features:[core.Db],decls:6,vars:4,consts:[[\"class\",\"os-card\",4,\"ngIf\"],[\"pollItemMenu\",\"matMenu\"],[4,\"osPerms\"],[1,\"os-card\"],[1,\"assignment-poll-wrapper\"],[3,\"routerLink\"],[1,\"italic\",\"spacer-bottom-20\"],[4,\"osPerms\",\"osPermsAnd\"],[4,\"ngIf\"],[1,\"poll-menu\"],[\"mat-icon-button\",\"\",3,\"matMenuTriggerFor\",\"click\",4,\"osPerms\"],[\"class\",\"poll-result-wrapper\",4,\"ngIf\"],[3,\"poll\",4,\"ngIf\"],[1,\"poll-detail-button-wrapper\"],[\"mat-icon-button\",\"\",3,\"routerLink\",\"matTooltip\",4,\"ngIf\"],[\"mat-icon-button\",\"\",\"color\",\"warn\",3,\"click\"],[\"mat-icon-button\",\"\",3,\"matMenuTriggerFor\",\"click\"],[\"mat-stroked-button\",\"\",3,\"ngClass\",\"disabled\",\"click\"],[1,\"next-state-label\"],[1,\"poll-result-wrapper\"],[4,\"osPerms\",\"osPermsOr\"],[4,\"osPerms\",\"osPermsComplement\"],[3,\"routerLink\",\"poll\"],[3,\"poll\"],[\"mat-icon-button\",\"\",3,\"routerLink\",\"matTooltip\"],[1,\"small-icon\"],[\"mat-menu-item\",\"\",3,\"click\"],[\"menuItem\",\"true\",3,\"object\"],[\"color\",\"warn\"],[\"mat-menu-item\",\"\",1,\"red-warning-text\",3,\"click\"]],template:function(rf,ctx){1&rf&&(core.Qc(0,AssignmentPollComponent_mat_card_0_Template,21,19,\"mat-card\",0),core.Zb(1,\"mat-menu\",null,1),core.Qc(3,AssignmentPollComponent_div_3_Template,7,3,\"div\",2),core.Qc(4,AssignmentPollComponent_div_4_Template,2,1,\"div\",2),core.Qc(5,AssignmentPollComponent_div_5_Template,26,12,\"div\",2),core.Yb()),2&rf&&(core.tc(\"ngIf\",ctx.poll),core.Gb(3),core.tc(\"osPerms\",\"assignments.can_manage\"),core.Gb(1),core.tc(\"osPerms\",\"core.can_manage_projector\"),core.Gb(1),core.tc(\"osPerms\",\"assignments.can_manage\"))},directives:[common.t,menu.f,perms_directive.a,card.a,card.m,fesm2015_router.i,fesm2015_button.b,icon.a,menu.e,common.q,assignment_poll_detail_content_component.a,fesm2015_router.g,poll_progress_component.a,assignment_poll_vote_component_AssignmentPollVoteComponent,fesm2015_button.a,tooltip.c,menu.c,projector_button_component.a,divider.a],pipes:[ngx_translate_core.j],styles:[\".yes[_ngcontent-%COMP%]{color:#4caf50}.no[_ngcontent-%COMP%]{color:#cc6c5b}.abstain[_ngcontent-%COMP%]{color:#a6a6a6}.voted-yes[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.voted-no[_ngcontent-%COMP%]{background-color:#cc6c5b;color:#fff}.voted-abstain[_ngcontent-%COMP%]{background-color:#a6a6a6;color:#fff}.start-poll-button[_ngcontent-%COMP%]{color:#4caf50}.stop-poll-button[_ngcontent-%COMP%]{color:#ff5252}.publish-poll-button[_ngcontent-%COMP%]{color:#e6b100}.assignment-poll-wrapper[_ngcontent-%COMP%]{position:relative;margin:0 15px}.assignment-poll-wrapper[_ngcontent-%COMP%]   .poll-menu[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.assignment-poll-wrapper[_ngcontent-%COMP%]   .poll-result-wrapper[_ngcontent-%COMP%]{cursor:pointer}.assignment-poll-wrapper[_ngcontent-%COMP%]   .poll-detail-button-wrapper[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;margin:auto 0}.assignment-poll-wrapper[_ngcontent-%COMP%]   .poll-detail-button-wrapper[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{margin-left:auto}\"]}),AssignmentPollComponent})();var chips=__webpack_require__(\"A5z7\"),list=__webpack_require__(\"MutI\"),sorting_list_component=__webpack_require__(\"IBZR\"),search_value_selector_component=__webpack_require__(\"oqD5\"),input=__webpack_require__(\"qFsG\"),tinymce_tinymce_angular=__webpack_require__(\"fB2i\"),attachment_control_component=__webpack_require__(\"JAMN\"),agenda_content_object_form_component=__webpack_require__(\"6Ehv\"),reverse_pipe=__webpack_require__(\"DShQ\"),trust_pipe=__webpack_require__(\"7jBc\");function AssignmentDetailComponent_h2_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"h2\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"Election\")))}function AssignmentDetailComponent_h2_3_Template(rf,ctx){1&rf&&(core.Zb(0,\"h2\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Tc(core.nc(2,1,\"New election\")))}function AssignmentDetailComponent_div_10_Template(rf,ctx){if(1&rf){const _r15=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",11),core.hc(\"click\",(function(){return core.Ic(_r15),core.lc().onDownloadPdf()})),core.Zb(2,\"mat-icon\"),core.Sc(3,\"picture_as_pdf\"),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb(),core.Ub(7,\"os-speaker-button\",6),core.Yb()}if(2&rf){const ctx_r3=core.lc();core.Gb(5),core.Tc(core.nc(6,3,\"PDF\")),core.Gb(2),core.tc(\"object\",ctx_r3.assignment)(\"menuItem\",!0)}}function AssignmentDetailComponent_div_12_button_1_Template(rf,ctx){if(1&rf){const _r19=core.ac();core.Zb(0,\"button\",11),core.hc(\"click\",(function(){return core.Ic(_r19),core.lc(2).addToAgenda()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"add\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Add to agenda\")))}function AssignmentDetailComponent_div_12_button_2_Template(rf,ctx){if(1&rf){const _r21=core.ac();core.Zb(0,\"button\",11),core.hc(\"click\",(function(){return core.Ic(_r21),core.lc(2).removeFromAgenda()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"remove\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Remove from agenda\")))}function AssignmentDetailComponent_div_12_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,AssignmentDetailComponent_div_12_button_1_Template,6,3,\"button\",12),core.Qc(2,AssignmentDetailComponent_div_12_button_2_Template,6,3,\"button\",12),core.Yb()),2&rf){const ctx_r4=core.lc();core.Gb(1),core.tc(\"ngIf\",ctx_r4.assignment&&!ctx_r4.assignment.item),core.Gb(1),core.tc(\"ngIf\",ctx_r4.assignment&&ctx_r4.assignment.item)}}function AssignmentDetailComponent_div_13_Template(rf,ctx){if(1&rf){const _r23=core.ac();core.Zb(0,\"div\"),core.Ub(1,\"mat-divider\"),core.Zb(2,\"button\",13),core.hc(\"click\",(function(){return core.Ic(_r23),core.lc().onDeleteAssignmentButton()})),core.Zb(3,\"mat-icon\"),core.Sc(4,\"delete\"),core.Yb(),core.Zb(5,\"span\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Yb(),core.Yb()}2&rf&&(core.Gb(6),core.Tc(core.nc(7,1,\"Delete\")))}function AssignmentDetailComponent_div_15_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Vb(1,14),core.Yb()),2&rf){core.lc();const _r12=core.Ec(22);core.Gb(1),core.tc(\"ngTemplateOutlet\",_r12)}}function AssignmentDetailComponent_div_16_ng_container_2_ng_container_1_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Ub(1,\"os-assignment-poll\",17),core.Wb()),2&rf){const poll_r27=ctx.$implicit;core.Gb(1),core.tc(\"poll\",poll_r27)}}function AssignmentDetailComponent_div_16_ng_container_2_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Qc(1,AssignmentDetailComponent_div_16_ng_container_2_ng_container_1_Template,2,1,\"ng-container\",16),core.mc(2,\"reverse\"),core.Wb()),2&rf){const ctx_r24=core.lc(2);core.Gb(1),core.tc(\"ngForOf\",core.nc(2,2,ctx_r24.assignment.polls))(\"ngForTrackBy\",ctx_r24.trackByIndex)}}function AssignmentDetailComponent_div_16_div_3_Template(rf,ctx){if(1&rf){const _r29=core.ac();core.Zb(0,\"div\",18),core.Zb(1,\"button\",19),core.hc(\"click\",(function(){return core.Ic(_r29),core.lc(2).openDialog()})),core.Zb(2,\"mat-icon\"),core.Sc(3,\"add\"),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb(),core.Yb()}2&rf&&(core.Gb(5),core.Tc(core.nc(6,1,\"New ballot\")))}function AssignmentDetailComponent_div_16_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Vb(1,14),core.Qc(2,AssignmentDetailComponent_div_16_ng_container_2_Template,3,4,\"ng-container\",2),core.Qc(3,AssignmentDetailComponent_div_16_div_3_Template,7,3,\"div\",15),core.Vb(4,14),core.Yb()),2&rf){const ctx_r7=core.lc(),_r8=core.Ec(18),_r10=core.Ec(20);core.Gb(1),core.tc(\"ngTemplateOutlet\",_r8),core.Gb(1),core.tc(\"ngIf\",ctx_r7.assignment&&ctx_r7.assignment.polls.length),core.Gb(1),core.tc(\"ngIf\",ctx_r7.assignment&&ctx_r7.hasPerms(\"createPoll\")),core.Gb(1),core.tc(\"ngTemplateOutlet\",_r10)}}function AssignmentDetailComponent_ng_template_17_mat_card_0_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"h1\"),core.Sc(2),core.Yb(),core.Yb()),2&rf){const ctx_r31=core.lc(3);core.Gb(2),core.Tc(ctx_r31.assignment.getTitle())}}function AssignmentDetailComponent_ng_template_17_mat_card_0_div_2_div_1_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"div\",30),core.mc(1,\"trust\")),2&rf){const ctx_r38=core.lc(4);core.tc(\"innerHTML\",core.oc(1,1,ctx_r38.assignment.assignment.description,\"html\"),core.Jc)}}function AssignmentDetailComponent_ng_template_17_mat_card_0_div_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,AssignmentDetailComponent_ng_template_17_mat_card_0_div_2_div_1_Template,2,4,\"div\",29),core.Yb()),2&rf){const ctx_r32=core.lc(3);core.Gb(1),core.tc(\"ngIf\",ctx_r32.assignment.assignment.description)}}function AssignmentDetailComponent_ng_template_17_mat_card_0_mat_basic_chip_14_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-basic-chip\",31),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){core.lc();const _r35=core.Ec(17),ctx_r33=core.lc(2);core.tc(\"matMenuTriggerFor\",_r35),core.Gb(1),core.Uc(\" \",core.nc(2,2,ctx_r33.assignment.phaseString),\" \")}}function AssignmentDetailComponent_ng_template_17_mat_card_0_mat_basic_chip_15_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-basic-chip\",32),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const ctx_r34=core.lc(3);core.Gb(1),core.Uc(\" \",core.nc(2,1,ctx_r34.assignment.phaseString),\" \")}}function AssignmentDetailComponent_ng_template_17_mat_card_0_button_18_Template(rf,ctx){if(1&rf){const _r41=core.ac();core.Zb(0,\"button\",11),core.hc(\"click\",(function(){core.Ic(_r41);const option_r39=ctx.$implicit;return core.lc(3).onSetPhaseButton(option_r39.value)})),core.Sc(1),core.mc(2,\"translate\"),core.Yb()}if(2&rf){const option_r39=ctx.$implicit;core.Gb(1),core.Uc(\" \",core.nc(2,1,option_r39.display_name),\" \")}}function AssignmentDetailComponent_ng_template_17_mat_card_0_div_19_mat_list_item_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-list-item\"),core.Zb(1,\"a\",35),core.Sc(2),core.Yb(),core.Yb()),2&rf){const file_r43=ctx.$implicit;core.Gb(1),core.tc(\"routerLink\",file_r43.url),core.Gb(1),core.Tc(file_r43.getTitle())}}function AssignmentDetailComponent_ng_template_17_mat_card_0_div_19_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"h4\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Zb(4,\"mat-list\",33),core.Qc(5,AssignmentDetailComponent_ng_template_17_mat_card_0_div_19_mat_list_item_5_Template,3,2,\"mat-list-item\",34),core.Yb(),core.Yb()),2&rf){const ctx_r37=core.lc(3);core.Gb(2),core.Tc(core.nc(3,2,\"Election documents\")),core.Gb(3),core.tc(\"ngForOf\",ctx_r37.assignment.attachments)}}function AssignmentDetailComponent_ng_template_17_mat_card_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-card\",21),core.Qc(1,AssignmentDetailComponent_ng_template_17_mat_card_0_div_1_Template,3,1,\"div\",2),core.Qc(2,AssignmentDetailComponent_ng_template_17_mat_card_0_div_2_Template,2,1,\"div\",2),core.Zb(3,\"div\",22),core.Zb(4,\"div\",23),core.Zb(5,\"h4\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Zb(8,\"span\"),core.Sc(9),core.Yb(),core.Yb(),core.Zb(10,\"div\",24),core.Zb(11,\"h4\"),core.Sc(12),core.mc(13,\"translate\"),core.Yb(),core.Qc(14,AssignmentDetailComponent_ng_template_17_mat_card_0_mat_basic_chip_14_Template,3,4,\"mat-basic-chip\",25),core.Qc(15,AssignmentDetailComponent_ng_template_17_mat_card_0_mat_basic_chip_15_Template,3,3,\"mat-basic-chip\",26),core.Zb(16,\"mat-menu\",null,27),core.Qc(18,AssignmentDetailComponent_ng_template_17_mat_card_0_button_18_Template,3,3,\"button\",28),core.Yb(),core.Yb(),core.Yb(),core.Qc(19,AssignmentDetailComponent_ng_template_17_mat_card_0_div_19_Template,6,4,\"div\",2),core.Yb()),2&rf){const ctx_r30=core.lc(2);core.Gb(1),core.tc(\"ngIf\",!ctx_r30.editAssignment&&ctx_r30.assignment.getTitle),core.Gb(1),core.tc(\"ngIf\",ctx_r30.assignment),core.Gb(4),core.Tc(core.nc(7,9,\"Number of persons to be elected\")),core.Gb(3),core.Tc(ctx_r30.assignment.assignment.open_posts),core.Gb(3),core.Tc(core.nc(13,11,\"Phase\")),core.Gb(2),core.tc(\"ngIf\",ctx_r30.hasPerms(\"manage\")),core.Gb(1),core.tc(\"ngIf\",!ctx_r30.hasPerms(\"manage\")),core.Gb(3),core.tc(\"ngForOf\",ctx_r30.phaseOptions),core.Gb(1),core.tc(\"ngIf\",ctx_r30.assignment.attachments.length)}}function AssignmentDetailComponent_ng_template_17_Template(rf,ctx){if(1&rf&&core.Qc(0,AssignmentDetailComponent_ng_template_17_mat_card_0_Template,20,13,\"mat-card\",20),2&rf){const ctx_r9=core.lc();core.tc(\"ngIf\",ctx_r9.assignment)}}function AssignmentDetailComponent_ng_template_19_mat_card_0_div_6_ng_template_2_span_0_Template(rf,ctx){if(1&rf){const _r53=core.ac();core.Zb(0,\"span\"),core.Zb(1,\"button\",41),core.hc(\"click\",(function(){core.Ic(_r53);const item_r49=core.lc().$implicit;return core.lc(4).removeUser(item_r49)})),core.mc(2,\"translate\"),core.Zb(3,\"mat-icon\"),core.Sc(4,\"clear\"),core.Yb(),core.Yb(),core.Yb()}2&rf&&(core.Gb(1),core.uc(\"matTooltip\",core.nc(2,1,\"Remove candidate\")))}function AssignmentDetailComponent_ng_template_19_mat_card_0_div_6_ng_template_2_Template(rf,ctx){if(1&rf&&core.Qc(0,AssignmentDetailComponent_ng_template_19_mat_card_0_div_6_ng_template_2_span_0_Template,5,3,\"span\",2),2&rf){const ctx_r48=core.lc(4);core.tc(\"ngIf\",ctx_r48.hasPerms(\"manage\"))}}function AssignmentDetailComponent_ng_template_19_mat_card_0_div_6_Template(rf,ctx){if(1&rf){const _r55=core.ac();core.Zb(0,\"div\",39),core.Zb(1,\"os-sorting-list\",40),core.hc(\"sortEvent\",(function($event){return core.Ic(_r55),core.lc(3).onSortingChange($event)})),core.Qc(2,AssignmentDetailComponent_ng_template_19_mat_card_0_div_6_ng_template_2_Template,1,1,\"ng-template\"),core.Yb(),core.Yb()}if(2&rf){const ctx_r45=core.lc(3);core.Gb(1),core.tc(\"input\",ctx_r45.assignment.assignment_related_users)(\"live\",!0)(\"count\",ctx_r45.assignment.number_poll_candidates)(\"enable\",ctx_r45.hasPerms(\"manage\"))}}function AssignmentDetailComponent_ng_template_19_mat_card_0_div_8_form_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"form\",44),core.Zb(1,\"mat-form-field\"),core.Ub(2,\"os-search-value-selector\",45),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf){const ctx_r56=core.lc(4);core.tc(\"formGroup\",ctx_r56.candidatesForm),core.Gb(2),core.uc(\"placeholder\",core.nc(3,4,\"Select a new candidate\")),core.tc(\"multiple\",!1)(\"inputListValues\",ctx_r56.filteredCandidates)}}function AssignmentDetailComponent_ng_template_19_mat_card_0_div_8_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",42),core.Qc(1,AssignmentDetailComponent_ng_template_19_mat_card_0_div_8_form_1_Template,4,6,\"form\",43),core.Yb()),2&rf){const ctx_r46=core.lc(3);core.Gb(1),core.tc(\"ngIf\",ctx_r46.hasPerms(\"addOthers\")&&ctx_r46.filteredCandidates&&ctx_r46.filteredCandidates.value&&ctx_r46.filteredCandidates.value.length)}}function AssignmentDetailComponent_ng_template_19_mat_card_0_div_9_button_2_Template(rf,ctx){if(1&rf){const _r60=core.ac();core.Zb(0,\"button\",47),core.hc(\"click\",(function(){return core.Ic(_r60),core.lc(4).addSelf()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"add\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Add me\")))}function AssignmentDetailComponent_ng_template_19_mat_card_0_div_9_button_3_Template(rf,ctx){if(1&rf){const _r62=core.ac();core.Zb(0,\"button\",47),core.hc(\"click\",(function(){return core.Ic(_r62),core.lc(4).removeSelf()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"remove\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Remove me\")))}function AssignmentDetailComponent_ng_template_19_mat_card_0_div_9_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"div\"),core.Qc(2,AssignmentDetailComponent_ng_template_19_mat_card_0_div_9_button_2_Template,6,3,\"button\",46),core.Qc(3,AssignmentDetailComponent_ng_template_19_mat_card_0_div_9_button_3_Template,6,3,\"button\",46),core.Yb(),core.Yb()),2&rf){const ctx_r47=core.lc(3);core.Gb(2),core.tc(\"ngIf\",!ctx_r47.isSelfCandidate),core.Gb(1),core.tc(\"ngIf\",ctx_r47.isSelfCandidate)}}function AssignmentDetailComponent_ng_template_19_mat_card_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-card\",21),core.Xb(1),core.Zb(2,\"h3\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Zb(5,\"div\"),core.Qc(6,AssignmentDetailComponent_ng_template_19_mat_card_0_div_6_Template,3,4,\"div\",36),core.Zb(7,\"div\",37),core.Qc(8,AssignmentDetailComponent_ng_template_19_mat_card_0_div_8_Template,2,1,\"div\",38),core.Qc(9,AssignmentDetailComponent_ng_template_19_mat_card_0_div_9_Template,4,2,\"div\",2),core.Yb(),core.Yb(),core.Wb(),core.Yb()),2&rf){const ctx_r44=core.lc(2);core.Gb(3),core.Tc(core.nc(4,4,\"Candidates\")),core.Gb(3),core.tc(\"ngIf\",ctx_r44.assignment&&ctx_r44.assignment.assignment_related_users&&ctx_r44.assignment.assignment_related_users.length>0),core.Gb(2),core.tc(\"ngIf\",ctx_r44.hasPerms(\"addOthers\")),core.Gb(1),core.tc(\"ngIf\",ctx_r44.assignment&&ctx_r44.hasPerms(\"addSelf\")&&ctx_r44.assignment.candidates)}}function AssignmentDetailComponent_ng_template_19_Template(rf,ctx){if(1&rf&&core.Qc(0,AssignmentDetailComponent_ng_template_19_mat_card_0_Template,10,6,\"mat-card\",20),2&rf){const ctx_r11=core.lc();core.tc(\"ngIf\",ctx_r11.assignment&&!ctx_r11.assignment.isFinished)}}function AssignmentDetailComponent_ng_template_21_form_1_editor_11_Template(rf,ctx){if(1&rf&&core.Ub(0,\"editor\",59),2&rf){const ctx_r64=core.lc(3);core.tc(\"init\",ctx_r64.tinyMceSettings)}}function AssignmentDetailComponent_ng_template_21_form_1_div_12_Template(rf,ctx){if(1&rf){const _r70=core.ac();core.Zb(0,\"div\",60),core.Zb(1,\"mat-form-field\"),core.Ub(2,\"os-search-value-selector\",61),core.mc(3,\"translate\"),core.Yb(),core.Zb(4,\"os-attachment-control\",62),core.hc(\"errorHandler\",(function($event){return core.Ic(_r70),core.lc(3).raiseError($event)})),core.Yb(),core.Yb()}if(2&rf){const ctx_r65=core.lc(3);core.tc(\"formGroup\",ctx_r65.assignmentForm),core.Gb(2),core.uc(\"placeholder\",core.nc(3,5,\"Tags\")),core.tc(\"multiple\",!0)(\"includeNone\",!0)(\"inputListValues\",ctx_r65.tagsObserver)}}function AssignmentDetailComponent_ng_template_21_form_1_os_agenda_content_object_form_13_Template(rf,ctx){if(1&rf&&core.Ub(0,\"os-agenda-content-object-form\",63),2&rf){const ctx_r66=core.lc(3);core.tc(\"form\",ctx_r66.assignmentForm)}}function AssignmentDetailComponent_ng_template_21_form_1_mat_error_22_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-error\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"This field is required.\"),\" \"))}function AssignmentDetailComponent_ng_template_21_form_1_mat_error_23_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-error\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"The number has to be greater than 0.\"),\" \"))}function AssignmentDetailComponent_ng_template_21_form_1_Template(rf,ctx){if(1&rf){const _r72=core.ac();core.Zb(0,\"form\",50),core.hc(\"keydown\",(function($event){return core.Ic(_r72),core.lc(2).onKeyDown($event)})),core.Zb(1,\"div\"),core.Zb(2,\"mat-form-field\",51),core.Ub(3,\"input\",52),core.mc(4,\"translate\"),core.Zb(5,\"mat-error\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(8,\"h4\"),core.Sc(9),core.mc(10,\"translate\"),core.Yb(),core.Qc(11,AssignmentDetailComponent_ng_template_21_form_1_editor_11_Template,1,1,\"editor\",53),core.Qc(12,AssignmentDetailComponent_ng_template_21_form_1_div_12_Template,5,7,\"div\",54),core.Qc(13,AssignmentDetailComponent_ng_template_21_form_1_os_agenda_content_object_form_13_Template,1,1,\"os-agenda-content-object-form\",55),core.Zb(14,\"div\"),core.Zb(15,\"mat-form-field\"),core.Ub(16,\"input\",56),core.mc(17,\"translate\"),core.Yb(),core.Yb(),core.Zb(18,\"div\"),core.Zb(19,\"mat-form-field\"),core.Ub(20,\"input\",57),core.mc(21,\"translate\"),core.Qc(22,AssignmentDetailComponent_ng_template_21_form_1_mat_error_22_Template,3,3,\"mat-error\",2),core.Qc(23,AssignmentDetailComponent_ng_template_21_form_1_mat_error_23_Template,3,3,\"mat-error\",2),core.Yb(),core.Yb(),core.Zb(24,\"div\"),core.Zb(25,\"mat-checkbox\",58),core.Zb(26,\"span\"),core.Sc(27),core.mc(28,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const ctx_r63=core.lc(2);core.tc(\"formGroup\",ctx_r63.assignmentForm),core.Gb(3),core.uc(\"placeholder\",core.nc(4,12,\"Title\")),core.Gb(3),core.Tc(core.nc(7,14,\"The title is required\")),core.Gb(3),core.Uc(\"\",core.nc(10,16,\"Description\"),\":\"),core.Gb(2),core.tc(\"ngIf\",ctx_r63.assignment&&ctx_r63.editAssignment),core.Gb(1),core.tc(\"ngIf\",ctx_r63.tagsAvailable),core.Gb(1),core.tc(\"ngIf\",ctx_r63.newAssignment),core.Gb(3),core.uc(\"placeholder\",core.nc(17,18,\"Hint on voting\")),core.Gb(4),core.uc(\"placeholder\",core.nc(21,20,\"Number of persons to be elected\")),core.Gb(2),core.tc(\"ngIf\",ctx_r63.assignmentForm.get(\"open_posts\").hasError(\"required\")),core.Gb(1),core.tc(\"ngIf\",ctx_r63.assignmentForm.get(\"open_posts\").hasError(\"min\")),core.Gb(4),core.Tc(core.nc(28,22,\"Number candidates\"))}}function AssignmentDetailComponent_ng_template_21_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-card\",48),core.Qc(1,AssignmentDetailComponent_ng_template_21_form_1_Template,29,24,\"form\",49),core.Yb()),2&rf){const ctx_r13=core.lc();core.Gb(1),core.tc(\"ngIf\",ctx_r13.assignment&&ctx_r13.editAssignment)}}let assignment_detail_component_AssignmentDetailComponent=(()=>{class AssignmentDetailComponent extends base_view.a{constructor(title,translate,matSnackBar,operator,perms,router,route,formBuilder,repo,userRepo,itemRepo,tagRepo,promptService,pdfService,mediafileRepo,pollDialog,assignmentPollService){super(title,translate,matSnackBar),this.translate=translate,this.operator=operator,this.perms=perms,this.router=router,this.route=route,this.repo=repo,this.userRepo=userRepo,this.itemRepo=itemRepo,this.tagRepo=tagRepo,this.promptService=promptService,this.pdfService=pdfService,this.mediafileRepo=mediafileRepo,this.pollDialog=pollDialog,this.assignmentPollService=assignmentPollService,this.newAssignment=!1,this.editAssignment=!1,this.phaseOptions=view_assignment.a,this.availableCandidates=new BehaviorSubject.a([]),this.filteredCandidates=new BehaviorSubject.a([]),this.subscriptions.push(this.userRepo.getViewModelListObservable().subscribe(users=>{this.availableCandidates.next(users),this.filterCandidates()})),this.assignmentForm=formBuilder.group({phase:null,tags_id:[],attachments_id:[],title:[\"\",fesm2015_forms.G.required],description:[\"\"],default_poll_description:[\"\"],open_posts:[1,[fesm2015_forms.G.required,fesm2015_forms.G.min(1)]],agenda_create:[\"\"],agenda_parent_id:[],agenda_type:[\"\"],number_poll_candidates:[!1]}),this.candidatesForm=formBuilder.group({userId:null})}set assignment(assignment){this._assignment=assignment,this.filterCandidates()}get assignment(){return this._assignment}get isSelfCandidate(){return!!this.assignment.candidates.find(user=>user.id===this.operator.user.id)}get tagsAvailable(){return this.tagsObserver.getValue().length>0}get mediafilesAvailable(){return this.mediafilesObserver.getValue().length>0}get parentsAvailable(){return this.agendaObserver.getValue().length>0}ngOnInit(){this.getAssignmentByUrl(),this.agendaObserver=this.itemRepo.getViewModelListBehaviorSubject(),this.tagsObserver=this.tagRepo.getViewModelListBehaviorSubject(),this.mediafilesObserver=this.mediafileRepo.getViewModelListBehaviorSubject()}hasPerms(operation){const isManager=this.operator.hasPerms(operator_service.b.assignmentsCanManage);switch(operation){case\"addSelf\":return!(!isManager||this.assignment.isFinished)||this.assignment.isSearchingForCandidates&&this.operator.hasPerms(operator_service.b.assignmentsCanNominateSelf)&&!this.assignment.isFinished;case\"addOthers\":return!(!isManager||this.assignment.isFinished)||this.assignment.isSearchingForCandidates&&this.operator.hasPerms(operator_service.b.assignmentsCanNominateOther)&&!this.assignment.isFinished;case\"createPoll\":return isManager&&this.assignment&&!this.assignment.isFinished&&this.assignment.candidateAmount>0;case\"manage\":return isManager;default:return!1}}setEditMode(newMode){newMode&&this.hasPerms(\"manage\")&&(this.patchForm(this.assignment),this.editAssignment=!0),!newMode&&this.newAssignment&&this.router.navigate([\"./assignments/\"]),newMode||(this.editAssignment=!1)}patchForm(assignment){const contentPatch={};Object.keys(this.assignmentForm.controls).forEach(control=>{contentPatch[control]=assignment[control]}),this.assignmentForm.patchValue(contentPatch)}saveAssignment(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){this.newAssignment?this.createAssignment():yield this.updateAssignmentFromForm()}))}openDialog(){const dialogData=Object.assign({collectionString:view_assignment_poll.c.COLLECTIONSTRING,assignment_id:this.assignment.id,assignment:this.assignment},this.assignmentPollService.getDefaultPollData(this.assignment.id));this.pollDialog.openDialog(dialogData)}addSelf(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){yield this.repo.addSelf(this.assignment).catch(this.raiseError)}))}removeSelf(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){yield this.repo.deleteSelf(this.assignment).catch(this.raiseError)}))}addUser(userId){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const user=this.userRepo.getViewModel(userId);user&&(yield this.repo.changeCandidate(user,this.assignment,!0).catch(this.raiseError))}))}removeUser(candidate){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){yield this.repo.changeCandidate(candidate.user,this.assignment,!1).catch(this.raiseError)}))}getAssignmentByUrl(){const params=this.route.snapshot.params;params&&params.id?(this.subscriptions.push(this.repo.getViewModelObservable(+params.id).subscribe(assignment=>{if(assignment){const title=assignment.getTitle();super.setTitle(title),this.assignment=assignment,this.editAssignment||this.patchForm(this.assignment)}})),this.subscriptions.push(this.candidatesForm.valueChanges.subscribe(formResult=>{formResult&&formResult.userId&&(this.addUser(formResult.userId),this.candidatesForm.setValue({userId:null}))}))):(super.setTitle(\"New election\"),this.newAssignment=!0,this.editAssignment=!0,this.assignment=new view_assignment.b(new assignments_assignment.a))}onDeleteAssignmentButton(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to delete this election?\");(yield this.promptService.open(title,this.assignment.getTitle()))&&this.repo.delete(this.assignment).then(()=>this.router.navigate([\"../\"]),this.raiseError)}))}onTabChange(){}onSetPhaseButton(value){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){this.repo.update({phase:value},this.assignment).catch(this.raiseError)}))}onDownloadPdf(){this.pdfService.exportSingleAssignment(this.assignment)}createAssignment(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const newAssignmentValues=Object.assign({},this.assignmentForm.value);newAssignmentValues.agenda_parent_id||delete newAssignmentValues.agenda_parent_id;try{const response=yield this.repo.create(newAssignmentValues);this.router.navigate([\"./assignments/\"+response.id])}catch(e){this.raiseError(this.translate.instant(e))}}))}updateAssignmentFromForm(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){try{yield this.repo.patch(Object.assign({},this.assignmentForm.value),this.assignment),this.editAssignment=!1}catch(e){this.raiseError(e)}}))}onKeyDown(event){\"Enter\"===event.key&&event.shiftKey&&this.saveAssignment(),\"Escape\"===event.key&&this.setEditMode(!1)}filterCandidates(){this.filteredCandidates.next(this.assignment&&this.assignment.candidates.length?this.availableCandidates.getValue().filter(u=>!this.assignment.candidates.some(cand=>cand.id===u.id)):this.availableCandidates.getValue())}onSortingChange(listInNewOrder){this.repo.sortCandidates(listInNewOrder.map(relatedUser=>relatedUser.id),this.assignment).catch(this.raiseError)}addToAgenda(){this.itemRepo.addItemToAgenda(this.assignment).catch(this.raiseError)}removeFromAgenda(){this.itemRepo.removeFromAgenda(this.assignment.item).catch(this.raiseError)}}return AssignmentDetailComponent.ɵfac=function(t){return new(t||AssignmentDetailComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(operator_service.a),core.Tb(local_permissions_service.a),core.Tb(fesm2015_router.f),core.Tb(fesm2015_router.a),core.Tb(fesm2015_forms.f),core.Tb(assignment_repository_service.a),core.Tb(user_repository_service.a),core.Tb(item_repository_service.a),core.Tb(tag_repository_service.a),core.Tb(prompt_service.a),core.Tb(assignment_pdf_export_service_AssignmentPdfExportService),core.Tb(mediafile_repository_service.a),core.Tb(assignment_poll_dialog_service_AssignmentPollDialogService),core.Tb(assignment_poll_service.a))},AssignmentDetailComponent.ɵcmp=core.Nb({type:AssignmentDetailComponent,selectors:[[\"os-assignment-detail\"]],features:[core.Db],decls:23,vars:14,consts:[[\"mainButtonIcon\",\"edit\",3,\"hasMainButton\",\"nav\",\"editMode\",\"isSaveButtonEnabled\",\"mainEvent\",\"saveEvent\"],[1,\"title-slot\"],[4,\"ngIf\"],[1,\"menu-slot\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"matMenuTriggerFor\"],[\"assignmentDetailMenu\",\"matMenu\"],[3,\"object\",\"menuItem\"],[4,\"osPerms\"],[\"metaInfoTemplate\",\"\"],[\"candidatesTemplate\",\"\"],[\"assignmentFormTemplate\",\"\"],[\"mat-menu-item\",\"\",3,\"click\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"ngIf\"],[\"mat-menu-item\",\"\",1,\"red-warning-text\",3,\"click\"],[3,\"ngTemplateOutlet\"],[\"class\",\"new-ballot-button\",4,\"ngIf\"],[4,\"ngFor\",\"ngForOf\",\"ngForTrackBy\"],[3,\"poll\"],[1,\"new-ballot-button\"],[\"mat-stroked-button\",\"\",3,\"click\"],[\"class\",\"os-card spacer-bottom-60\",4,\"ngIf\"],[1,\"os-card\",\"spacer-bottom-60\"],[1,\"meta-info-grid\"],[1,\"number-of-elected\"],[1,\"current-phase\"],[\"class\",\"bluegrey\",\"disableRipple\",\"\",3,\"matMenuTriggerFor\",4,\"ngIf\"],[\"class\",\"bluegrey\",\"disableRipple\",\"\",4,\"ngIf\"],[\"phaseMenu\",\"matMenu\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"ngFor\",\"ngForOf\"],[3,\"innerHTML\",4,\"ngIf\"],[3,\"innerHTML\"],[\"disableRipple\",\"\",1,\"bluegrey\",3,\"matMenuTriggerFor\"],[\"disableRipple\",\"\",1,\"bluegrey\"],[\"dense\",\"\",1,\"election-document-list\"],[4,\"ngFor\",\"ngForOf\"],[\"target\",\"_blank\",3,\"routerLink\"],[\"class\",\"candidates-list\",4,\"ngIf\"],[1,\"add-candidates\"],[\"class\",\"search-field\",4,\"ngIf\"],[1,\"candidates-list\"],[3,\"input\",\"live\",\"count\",\"enable\",\"sortEvent\"],[\"mat-icon-button\",\"\",3,\"matTooltip\",\"click\"],[1,\"search-field\"],[3,\"formGroup\",4,\"ngIf\"],[3,\"formGroup\"],[\"formControlName\",\"userId\",3,\"multiple\",\"placeholder\",\"inputListValues\"],[\"mat-button\",\"\",\"color\",\"accent\",3,\"click\",4,\"ngIf\"],[\"mat-button\",\"\",\"color\",\"accent\",3,\"click\"],[1,\"os-form-card\",\"spacer-bottom-60\"],[\"class\",\"content\",3,\"formGroup\",\"keydown\",4,\"ngIf\"],[1,\"content\",3,\"formGroup\",\"keydown\"],[1,\"full-width\"],[\"matInput\",\"\",\"formControlName\",\"title\",3,\"placeholder\"],[\"formControlName\",\"description\",3,\"init\",4,\"ngIf\"],[\"class\",\"content-field\",3,\"formGroup\",4,\"ngIf\"],[3,\"form\",4,\"ngIf\"],[\"matInput\",\"\",\"formControlName\",\"default_poll_description\",3,\"placeholder\"],[\"matInput\",\"\",\"formControlName\",\"open_posts\",\"type\",\"number\",\"required\",\"\",3,\"placeholder\"],[\"formControlName\",\"number_poll_candidates\"],[\"formControlName\",\"description\",3,\"init\"],[1,\"content-field\",3,\"formGroup\"],[\"formControlName\",\"tags_id\",3,\"multiple\",\"includeNone\",\"placeholder\",\"inputListValues\"],[\"formControlName\",\"attachments_id\",3,\"errorHandler\"],[3,\"form\"]],template:function(rf,ctx){if(1&rf&&(core.Zb(0,\"os-head-bar\",0),core.hc(\"mainEvent\",(function(){return ctx.setEditMode(!ctx.editAssignment)}))(\"saveEvent\",(function(){return ctx.saveAssignment()})),core.Zb(1,\"div\",1),core.Qc(2,AssignmentDetailComponent_h2_2_Template,3,3,\"h2\",2),core.Qc(3,AssignmentDetailComponent_h2_3_Template,3,3,\"h2\",2),core.Yb(),core.Zb(4,\"div\",3),core.Zb(5,\"button\",4),core.Zb(6,\"mat-icon\"),core.Sc(7,\"more_vert\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(8,\"mat-menu\",null,5),core.Qc(10,AssignmentDetailComponent_div_10_Template,8,5,\"div\",2),core.Ub(11,\"os-projector-button\",6),core.Qc(12,AssignmentDetailComponent_div_12_Template,3,2,\"div\",7),core.Qc(13,AssignmentDetailComponent_div_13_Template,8,3,\"div\",2),core.Yb(),core.Yb(),core.Zb(14,\"div\"),core.Qc(15,AssignmentDetailComponent_div_15_Template,2,1,\"div\",2),core.Qc(16,AssignmentDetailComponent_div_16_Template,5,4,\"div\",2),core.Yb(),core.Qc(17,AssignmentDetailComponent_ng_template_17_Template,1,1,\"ng-template\",null,8,core.Rc),core.Qc(19,AssignmentDetailComponent_ng_template_19_Template,1,1,\"ng-template\",null,9,core.Rc),core.Qc(21,AssignmentDetailComponent_ng_template_21_Template,2,1,\"ng-template\",null,10,core.Rc)),2&rf){const _r2=core.Ec(9);core.tc(\"hasMainButton\",ctx.hasPerms(\"manage\"))(\"nav\",!1)(\"editMode\",ctx.editAssignment)(\"isSaveButtonEnabled\",ctx.assignmentForm.valid),core.Gb(2),core.tc(\"ngIf\",!ctx.newAssignment),core.Gb(1),core.tc(\"ngIf\",ctx.newAssignment),core.Gb(2),core.tc(\"matMenuTriggerFor\",_r2),core.Gb(5),core.tc(\"ngIf\",ctx.assignment),core.Gb(1),core.tc(\"object\",ctx.assignment)(\"menuItem\",!0),core.Gb(1),core.tc(\"osPerms\",\"agenda.can_manage\"),core.Gb(1),core.tc(\"ngIf\",ctx.assignment&&ctx.hasPerms(\"manage\")),core.Gb(2),core.tc(\"ngIf\",ctx.editAssignment),core.Gb(1),core.tc(\"ngIf\",!ctx.editAssignment)}},directives:[head_bar_component.a,common.t,fesm2015_button.b,menu.e,icon.a,menu.f,projector_button_component.a,perms_directive.a,menu.c,speaker_button_component.a,divider.a,common.A,common.s,assignment_poll_component_AssignmentPollComponent,card.a,chips.a,list.a,list.d,fesm2015_router.i,sorting_list_component.a,tooltip.c,fesm2015_forms.I,fesm2015_forms.t,fesm2015_forms.k,form_field.c,search_value_selector_component.a,fesm2015_forms.s,fesm2015_forms.i,input.b,fesm2015_forms.c,form_field.b,fesm2015_forms.y,fesm2015_forms.D,fesm2015_checkbox.a,tinymce_tinymce_angular.a,attachment_control_component.a,agenda_content_object_form_component.a],pipes:[ngx_translate_core.j,reverse_pipe.a,trust_pipe.a],styles:[\".full-width[_ngcontent-%COMP%]{width:100%}.meta-info-grid[_ngcontent-%COMP%]{display:grid;grid-column-gap:30px;grid-template-columns:1fr}.meta-info-grid[_ngcontent-%COMP%]   .current-phase[_ngcontent-%COMP%], .meta-info-grid[_ngcontent-%COMP%]   .number-of-elected[_ngcontent-%COMP%]{grid-column:1}@media (min-width:960px){.meta-info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 2fr}.meta-info-grid[_ngcontent-%COMP%]   .current-phase[_ngcontent-%COMP%]{grid-column:2}}.new-ballot-button[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.new-ballot-button[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.election-document-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:20px}.candidates-list[_ngcontent-%COMP%]{padding:10px 25px 0}.add-candidates[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{padding:15px 25px 0;width:auto}.add-candidates[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.ballot-controls-grid[_ngcontent-%COMP%]{display:grid;grid-column-gap:10px;grid-template-columns:auto -webkit-min-content;grid-template-columns:auto min-content}.ballot-controls-grid[_ngcontent-%COMP%]   .ballot-title[_ngcontent-%COMP%]{grid-column:1}.ballot-controls-grid[_ngcontent-%COMP%]   .ballot-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.candidate-list-separator[_ngcontent-%COMP%]{position:static!important;margin:20px 0}.candidate[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;width:100%;border-bottom:1px solid #d3d3d3;vertical-align:top}.candidate[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{word-wrap:break-word;-ms-flex:1;flex:1}.top-aligned[_ngcontent-%COMP%]{position:absolute;top:0;left:0}\"]}),AssignmentDetailComponent})();var storage_service=__webpack_require__(\"AqIO\"),viewport_service=__webpack_require__(\"KL36\"),base_list_view=__webpack_require__(\"wL0i\"),openslides_status_service=__webpack_require__(\"D/ll\"),base_filter_list_service=__webpack_require__(\"+8Rz\");let assignment_filter_list_service_AssignmentFilterListService=(()=>{class AssignmentFilterListService extends base_filter_list_service.a{constructor(store,OSStatus){super(store,OSStatus),this.storageKey=\"AssignmentList\"}getFilterDefinitions(){return[{label:\"Phase\",property:\"phase\",options:this.createPhaseOptions()}]}createPhaseOptions(){return view_assignment.a.map(ap=>({label:ap.display_name,condition:ap.value,isActive:!1}))}}return AssignmentFilterListService.ɵfac=function(t){return new(t||AssignmentFilterListService)(core.dc(storage_service.a),core.dc(openslides_status_service.a))},AssignmentFilterListService.ɵprov=core.Pb({token:AssignmentFilterListService,factory:AssignmentFilterListService.ɵfac,providedIn:\"root\"}),AssignmentFilterListService})();var base_sort_list_service=__webpack_require__(\"A6Ob\");let assignment_sort_list_service_AssignmentSortListService=(()=>{class AssignmentSortListService extends base_sort_list_service.a{constructor(translate,storage,OSStatus){super(translate,storage,OSStatus),this.storageKey=\"AssignmentList\",this.assignmentSortOptions=[{property:\"title\",label:\"Name\"},{property:\"phase\",label:\"Phase\"},{property:\"candidateAmount\",label:\"Number of candidates\"},{property:\"id\",label:\"Creation date\"}]}getSortOptions(){return this.assignmentSortOptions}getDefaultDefinition(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){return{sortProperty:\"title\",sortAscending:!0}}))}}return AssignmentSortListService.ɵfac=function(t){return new(t||AssignmentSortListService)(core.dc(ngx_translate_core.k),core.dc(storage_service.a),core.dc(openslides_status_service.a))},AssignmentSortListService.ɵprov=core.Pb({token:AssignmentSortListService,factory:AssignmentSortListService.ɵfac,providedIn:\"root\"}),AssignmentSortListService})();var list_view_table_component=__webpack_require__(\"0Obk\"),pebula_ngrid=__webpack_require__(\"dRZP\");function AssignmentListComponent_div_19_a_1_Template(rf,ctx){if(1&rf&&core.Ub(0,\"a\",18),2&rf){const assignment_r9=core.lc().row;core.tc(\"routerLink\",assignment_r9.id)}}function AssignmentListComponent_div_19_mat_chip_list_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-chip-list\",19),core.Zb(1,\"mat-chip\",20),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb()),2&rf){const assignment_r9=core.lc().row;core.Gb(2),core.Uc(\" \",core.nc(3,1,assignment_r9.phaseString),\" \")}}function AssignmentListComponent_div_19_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",13),core.Qc(1,AssignmentListComponent_div_19_a_1_Template,1,1,\"a\",14),core.Zb(2,\"div\",15),core.Zb(3,\"div\",16),core.Sc(4),core.Yb(),core.Qc(5,AssignmentListComponent_div_19_mat_chip_list_5_Template,4,3,\"mat-chip-list\",17),core.Yb(),core.Yb()),2&rf){const assignment_r9=ctx.row,ctx_r0=core.lc();core.Gb(1),core.tc(\"ngIf\",!ctx_r0.isMultiSelect),core.Gb(3),core.Uc(\" \",assignment_r9.getListTitle(),\" \"),core.Gb(1),core.tc(\"ngIf\",ctx_r0.vp.isMobile)}}function AssignmentListComponent_div_20_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",21),core.Zb(1,\"mat-chip-list\"),core.Zb(2,\"mat-chip\",20),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Yb()),2&rf){const assignment_r15=ctx.row;core.Gb(3),core.Uc(\" \",core.nc(4,1,assignment_r15.phaseString),\" \")}}function AssignmentListComponent_div_21_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",13),core.Zb(1,\"mat-chip-list\"),core.Zb(2,\"mat-chip\",22),core.mc(3,\"translate\"),core.Sc(4),core.Yb(),core.Yb(),core.Yb()),2&rf){const assignment_r16=ctx.row;core.Gb(2),core.uc(\"matTooltip\",core.nc(3,2,\"Number of candidates\")),core.Gb(2),core.Uc(\" \",assignment_r16.candidateAmount,\" \")}}const assignment_list_component_c0=function(a0){return{assignment:a0}};function AssignmentListComponent_div_22_Template(rf,ctx){if(1&rf){const _r19=core.ac();core.Zb(0,\"div\",13),core.Zb(1,\"button\",23),core.hc(\"click\",(function($event){return core.Ic(_r19),$event.stopPropagation()})),core.Zb(2,\"mat-icon\"),core.Sc(3,\"more_vert\"),core.Yb(),core.Yb(),core.Yb()}if(2&rf){const assignment_r17=ctx.row,ctx_r3=core.lc(),_r4=core.Ec(24);core.Gb(1),core.tc(\"disabled\",ctx_r3.isMultiSelect)(\"matMenuTriggerFor\",_r4)(\"matMenuTriggerData\",core.zc(3,assignment_list_component_c0,assignment_r17))}}function AssignmentListComponent_ng_template_25_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"os-projector-button\",24),core.Ub(1,\"os-speaker-button\",24)),2&rf){const assignment_r20=ctx.assignment;core.tc(\"object\",assignment_r20)(\"menuItem\",!0),core.Gb(1),core.tc(\"object\",assignment_r20)(\"menuItem\",!0)}}function AssignmentListComponent_div_28_button_1_Template(rf,ctx){if(1&rf){const _r24=core.ac();core.Zb(0,\"button\",26),core.hc(\"click\",(function(){return core.Ic(_r24),core.lc(2).toggleMultiSelect()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"library_add\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Multiselect\")))}function AssignmentListComponent_div_28_div_8_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\"),core.Ub(1,\"mat-divider\"),core.Zb(2,\"button\",28),core.Zb(3,\"mat-icon\"),core.Sc(4,\"settings\"),core.Yb(),core.Zb(5,\"span\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Yb(),core.Yb()),2&rf&&(core.Gb(6),core.Tc(core.nc(7,1,\"Settings\")))}function AssignmentListComponent_div_28_Template(rf,ctx){if(1&rf){const _r26=core.ac();core.Zb(0,\"div\"),core.Qc(1,AssignmentListComponent_div_28_button_1_Template,6,3,\"button\",25),core.Zb(2,\"button\",26),core.hc(\"click\",(function(){return core.Ic(_r26),core.lc().downloadAssignmentButton()})),core.Zb(3,\"mat-icon\"),core.Sc(4,\"archive\"),core.Yb(),core.Zb(5,\"span\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Yb(),core.Qc(8,AssignmentListComponent_div_28_div_8_Template,8,3,\"div\",27),core.Yb()}2&rf&&(core.Gb(1),core.tc(\"osPerms\",\"assignment.can_manage\"),core.Gb(5),core.Tc(core.nc(7,3,\"Export as PDF\")),core.Gb(2),core.tc(\"osPerms\",\"core.can_manage_config\"))}function AssignmentListComponent_div_29_button_14_Template(rf,ctx){if(1&rf){const _r30=core.ac();core.Zb(0,\"button\",29),core.hc(\"click\",(function(){core.Ic(_r30);const ctx_r29=core.lc(2);return ctx_r29.downloadAssignmentButton(ctx_r29.selectedRows)})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"archive\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const ctx_r27=core.lc(2);core.tc(\"disabled\",!ctx_r27.selectedRows.length),core.Gb(4),core.Tc(core.nc(5,2,\"Export selected elections\"))}}function AssignmentListComponent_div_29_button_16_Template(rf,ctx){if(1&rf){const _r32=core.ac();core.Zb(0,\"button\",32),core.hc(\"click\",(function(){return core.Ic(_r32),core.lc(2).deleteSelected()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"delete\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}if(2&rf){const ctx_r28=core.lc(2);core.tc(\"disabled\",!ctx_r28.selectedRows.length),core.Gb(4),core.Tc(core.nc(5,2,\"Delete\"))}}function AssignmentListComponent_div_29_Template(rf,ctx){if(1&rf){const _r34=core.ac();core.Zb(0,\"div\"),core.Zb(1,\"button\",26),core.hc(\"click\",(function(){return core.Ic(_r34),core.lc().selectAll()})),core.Zb(2,\"mat-icon\"),core.Sc(3,\"done_all\"),core.Yb(),core.Zb(4,\"span\"),core.Sc(5),core.mc(6,\"translate\"),core.Yb(),core.Yb(),core.Zb(7,\"button\",29),core.hc(\"click\",(function(){return core.Ic(_r34),core.lc().deselectAll()})),core.Zb(8,\"mat-icon\"),core.Sc(9,\"clear\"),core.Yb(),core.Zb(10,\"span\"),core.Sc(11),core.mc(12,\"translate\"),core.Yb(),core.Yb(),core.Ub(13,\"mat-divider\"),core.Qc(14,AssignmentListComponent_div_29_button_14_Template,6,4,\"button\",30),core.Ub(15,\"mat-divider\"),core.Qc(16,AssignmentListComponent_div_29_button_16_Template,6,4,\"button\",31),core.Yb()}if(2&rf){const ctx_r8=core.lc();core.Gb(5),core.Tc(core.nc(6,5,\"Select all\")),core.Gb(2),core.tc(\"disabled\",!ctx_r8.selectedRows.length),core.Gb(4),core.Tc(core.nc(12,7,\"Deselect all\")),core.Gb(3),core.tc(\"osPerms\",\"assignment.can_manage\"),core.Gb(2),core.tc(\"osPerms\",\"assignment.can_manage\")}}let assignment_list_component_AssignmentListComponent=(()=>{class AssignmentListComponent extends base_list_view.a{constructor(titleService,storage,translate,matSnackBar,repo,promptService,filterService,sortService,pdfService,route,router,operator,vp){super(titleService,translate,matSnackBar,storage),this.translate=translate,this.repo=repo,this.promptService=promptService,this.filterService=filterService,this.sortService=sortService,this.pdfService=pdfService,this.route=route,this.router=router,this.operator=operator,this.vp=vp,this.phaseOptions=view_assignment.a,this.tableColumnDefinition=[{prop:\"title\",width:\"auto\"},{prop:\"phase\",width:\"20%\",minWidth:180},{prop:\"candidates\",width:this.singleButtonWidth}],this.filterProps=[\"title\",\"candidates\",\"assignment_related_users\",\"tags\",\"candidateAmount\"],this.canMultiSelect=!0}get canManageAssignments(){return this.operator.hasPerms(operator_service.b.assignmentsCanManage)}ngOnInit(){super.setTitle(\"Elections\")}onPlusButton(){this.router.navigate([\"./new\"],{relativeTo:this.route})}getColumnsHiddenInMobile(){const hiddenInMobile=[\"phase\",\"candidates\"];return this.operator.hasPerms(operator_service.b.agendaCanSeeListOfSpeakers,operator_service.b.coreCanManageProjector)||hiddenInMobile.push(\"menu\"),hiddenInMobile}downloadAssignmentButton(assignments){this.pdfService.exportMultipleAssignments(assignments||this.repo.getViewModelList())}deleteSelected(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to delete all selected elections?\");if(yield this.promptService.open(title))for(const assignment of this.selectedRows)yield this.repo.delete(assignment)}))}}return AssignmentListComponent.ɵfac=function(t){return new(t||AssignmentListComponent)(core.Tb(platform_browser.d),core.Tb(storage_service.a),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(assignment_repository_service.a),core.Tb(prompt_service.a),core.Tb(assignment_filter_list_service_AssignmentFilterListService),core.Tb(assignment_sort_list_service_AssignmentSortListService),core.Tb(assignment_pdf_export_service_AssignmentPdfExportService),core.Tb(fesm2015_router.a),core.Tb(fesm2015_router.f),core.Tb(operator_service.a),core.Tb(viewport_service.a))},AssignmentListComponent.ɵcmp=core.Nb({type:AssignmentListComponent,selectors:[[\"os-assignment-list\"]],features:[core.Db],decls:30,vars:24,consts:[[3,\"hasMainButton\",\"multiSelectMode\",\"mainEvent\"],[1,\"title-slot\"],[1,\"menu-slot\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"matMenuTriggerFor\"],[1,\"central-info-slot\"],[\"mat-icon-button\",\"\",3,\"click\"],[\"listStorageKey\",\"assignments\",3,\"listObservableProvider\",\"filterService\",\"sortService\",\"columns\",\"filterProps\",\"multiSelect\",\"hiddenInMobile\",\"selectedRows\",\"selectedRowsChange\",\"dataSourceChange\"],[\"class\",\"cell-slot fill\",4,\"pblNgridCellDef\"],[\"class\",\"cell-slot fill mat-chip-wrapper\",4,\"pblNgridCellDef\"],[\"singleItemMenu\",\"matMenu\"],[\"matMenuContent\",\"\"],[\"assignmentMenu\",\"matMenu\"],[4,\"ngIf\"],[1,\"cell-slot\",\"fill\"],[\"class\",\"detail-link\",3,\"routerLink\",4,\"ngIf\"],[1,\"innerTable\"],[1,\"title-line\",\"ellipsis-overflow\"],[\"class\",\"ellipsis-overflow\",4,\"ngIf\"],[1,\"detail-link\",3,\"routerLink\"],[1,\"ellipsis-overflow\"],[\"color\",\"primary\",\"selected\",\"\"],[1,\"cell-slot\",\"fill\",\"mat-chip-wrapper\"],[\"color\",\"accent\",\"selected\",\"\",3,\"matTooltip\"],[\"mat-icon-button\",\"\",3,\"disabled\",\"matMenuTriggerFor\",\"matMenuTriggerData\",\"click\"],[3,\"object\",\"menuItem\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"osPerms\"],[\"mat-menu-item\",\"\",3,\"click\"],[4,\"osPerms\"],[\"mat-menu-item\",\"\",\"routerLink\",\"/settings/elections\"],[\"mat-menu-item\",\"\",3,\"disabled\",\"click\"],[\"mat-menu-item\",\"\",3,\"disabled\",\"click\",4,\"osPerms\"],[\"mat-menu-item\",\"\",\"class\",\"red-warning-text\",3,\"disabled\",\"click\",4,\"osPerms\"],[\"mat-menu-item\",\"\",1,\"red-warning-text\",3,\"disabled\",\"click\"]],template:function(rf,ctx){if(1&rf&&(core.Zb(0,\"os-head-bar\",0),core.hc(\"mainEvent\",(function(){return ctx.onPlusButton()})),core.Zb(1,\"div\",1),core.Zb(2,\"h2\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb(),core.Zb(5,\"div\",2),core.Zb(6,\"button\",3),core.Zb(7,\"mat-icon\"),core.Sc(8,\"more_vert\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(9,\"div\",4),core.Zb(10,\"button\",5),core.hc(\"click\",(function(){return ctx.toggleMultiSelect()})),core.Zb(11,\"mat-icon\"),core.Sc(12,\"arrow_back\"),core.Yb(),core.Yb(),core.Zb(13,\"span\"),core.Sc(14),core.Yb(),core.Zb(15,\"span\"),core.Sc(16),core.mc(17,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(18,\"os-list-view-table\",6),core.hc(\"selectedRowsChange\",(function($event){return ctx.selectedRows=$event}))(\"dataSourceChange\",(function($event){return ctx.onDataSourceChange($event)})),core.Qc(19,AssignmentListComponent_div_19_Template,6,3,\"div\",7),core.Qc(20,AssignmentListComponent_div_20_Template,5,3,\"div\",8),core.Qc(21,AssignmentListComponent_div_21_Template,5,4,\"div\",7),core.Qc(22,AssignmentListComponent_div_22_Template,4,5,\"div\",7),core.Yb(),core.Zb(23,\"mat-menu\",null,9),core.Qc(25,AssignmentListComponent_ng_template_25_Template,2,4,\"ng-template\",10),core.Yb(),core.Zb(26,\"mat-menu\",null,11),core.Qc(28,AssignmentListComponent_div_28_Template,9,5,\"div\",12),core.Qc(29,AssignmentListComponent_div_29_Template,17,9,\"div\",12),core.Yb()),2&rf){const _r6=core.Ec(27);core.tc(\"hasMainButton\",ctx.canManageAssignments)(\"multiSelectMode\",ctx.isMultiSelect),core.Gb(3),core.Tc(core.nc(4,20,\"Elections\")),core.Gb(3),core.tc(\"matMenuTriggerFor\",_r6),core.Gb(8),core.Uc(\"\",ctx.selectedRows.length,\" \"),core.Gb(2),core.Tc(core.nc(17,22,\"selected\")),core.Gb(2),core.tc(\"listObservableProvider\",ctx.repo)(\"filterService\",ctx.filterService)(\"sortService\",ctx.sortService)(\"columns\",ctx.tableColumnDefinition)(\"filterProps\",ctx.filterProps)(\"multiSelect\",ctx.isMultiSelect)(\"hiddenInMobile\",ctx.getColumnsHiddenInMobile())(\"selectedRows\",ctx.selectedRows),core.Gb(1),core.tc(\"pblNgridCellDef\",\"title\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"phase\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"candidates\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"menu\"),core.Gb(6),core.tc(\"ngIf\",!ctx.isMultiSelect),core.Gb(1),core.tc(\"ngIf\",ctx.isMultiSelect)}},directives:[head_bar_component.a,fesm2015_button.b,menu.e,icon.a,list_view_table_component.a,pebula_ngrid.c,menu.f,menu.b,common.t,fesm2015_router.i,chips.d,chips.a,tooltip.c,projector_button_component.a,speaker_button_component.a,perms_directive.a,menu.c,divider.a,fesm2015_router.g],pipes:[ngx_translate_core.j],styles:[\".title-line[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.title-line[_ngcontent-%COMP%]   .icon-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line[_ngcontent-%COMP%]   .favorite-star[_ngcontent-%COMP%]{padding-right:3px}.mat-table[_ngcontent-%COMP%]{width:100%}.mat-table[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{display:none}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{z-index:2}.mat-table[_ngcontent-%COMP%]   .mat-table-sticky[_ngcontent-%COMP%]{z-index:3!important}.mat-chip-wrapper[_ngcontent-%COMP%]   .mat-standard-chip[_ngcontent-%COMP%]{height:auto}\"],changeDetection:0}),AssignmentListComponent})();var assignment_vote_repository_service=__webpack_require__(\"TZkb\"),group_repository_service=__webpack_require__(\"R+Vs\"),base_poll_detail_component=__webpack_require__(\"g4jF\"),charts_component=__webpack_require__(\"iCsr\");function AssignmentPollDetailComponent_h2_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"h2\"),core.Sc(1),core.Yb()),2&rf){const ctx_r0=core.lc();core.Gb(1),core.Tc(ctx_r0.poll.title)}}function AssignmentPollDetailComponent_div_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",11),core.Zb(1,\"button\",12),core.Zb(2,\"mat-icon\"),core.Sc(3,\"more_vert\"),core.Yb(),core.Yb(),core.Yb()),2&rf){core.lc();const _r4=core.Ec(9);core.Gb(1),core.tc(\"matMenuTriggerFor\",_r4)}}function AssignmentPollDetailComponent_ng_template_6_div_0_span_4_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const ctx_r11=core.lc(3);core.Gb(1),core.Uc(\" \",core.nc(2,1,ctx_r11.poll.typeVerbose),\" · \")}}function AssignmentPollDetailComponent_ng_template_6_div_0_div_8_os_charts_3_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"os-charts\",20),core.mc(1,\"async\")),2&rf){const ctx_r13=core.lc(4);core.tc(\"labels\",ctx_r13.candidatesLabels)(\"data\",core.nc(1,2,ctx_r13.chartDataSubject))}}function AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const col_r21=ctx.col;core.Gb(1),core.Uc(\" \",core.nc(2,1,col_r21.label),\" \")}}function AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const col_r22=ctx.col;core.Gb(1),core.Uc(\" \",core.nc(2,1,col_r22.label),\" \")}}function AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_3_div_1_div_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.Yb()),2&rf){const vote_r23=core.lc(2).row;core.Gb(1),core.Uc(\" \",vote_r23.user.getLevelAndNumber(),\" \")}}function AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_3_div_1_div_4_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const vote_r23=core.lc(2).row;core.Gb(1),core.Vc(\" \",core.nc(2,2,\"Vote weight\"),\": \",vote_r23.user.vote_weight,\" \")}}function AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_3_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.Zb(2,\"div\",26),core.Qc(3,AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_3_div_1_div_3_Template,2,1,\"div\",2),core.Qc(4,AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_3_div_1_div_4_Template,3,4,\"div\",2),core.Yb(),core.Yb()),2&rf){const vote_r23=core.lc().row,ctx_r24=core.lc(6);core.Gb(1),core.Uc(\" \",vote_r23.user.getShortName(),\" \"),core.Gb(2),core.tc(\"ngIf\",vote_r23.user.getLevelAndNumber()),core.Gb(1),core.tc(\"ngIf\",ctx_r24.isVoteWeightActive)}}function AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_3_div_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"Anonymous\"),\" \"))}function AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_3_div_1_Template,5,3,\"div\",2),core.Qc(2,AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_3_div_2_Template,3,3,\"div\",2),core.Yb()),2&rf){const vote_r23=ctx.row;core.Gb(1),core.tc(\"ngIf\",vote_r23.user),core.Gb(1),core.tc(\"ngIf\",!vote_r23.user)}}function AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_4_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",28),core.Sc(1),core.Yb()),2&rf){const candidate_r33=ctx.$implicit;core.Gb(1),core.Tc(candidate_r33)}}function AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_4_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Qc(1,AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_4_div_1_Template,2,1,\"div\",27),core.Yb()),2&rf){const vote_r31=ctx.row;core.Gb(1),core.tc(\"ngForOf\",vote_r31.votes)}}function AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"os-list-view-table\",23),core.Qc(1,AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_1_Template,3,3,\"div\",24),core.Qc(2,AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_2_Template,3,3,\"div\",24),core.Qc(3,AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_3_Template,3,2,\"div\",25),core.Qc(4,AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_div_4_Template,2,1,\"div\",25),core.Yb()),2&rf){const ctx_r15=core.lc(5);core.tc(\"listObservable\",ctx_r15.votesDataObservable)(\"columns\",ctx_r15.columnDefinitionSingleVotes)(\"filterProps\",ctx_r15.filterProps)(\"allowProjector\",!1)(\"fullScreen\",!1)(\"vScrollFixed\",-1)(\"showListOfSpeakers\",!1)(\"showMenu\",!1),core.Gb(1),core.tc(\"pblNgridHeaderCellDef\",\"user\"),core.Gb(1),core.tc(\"pblNgridHeaderCellDef\",\"votes\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"user\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"votes\")}}function AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_div_5_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\"),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Gb(1),core.Uc(\" \",core.nc(2,1,\"The individual votes were anonymized.\"),\" \"))}function AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",21),core.Zb(1,\"h3\"),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Qc(4,AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_os_list_view_table_4_Template,5,12,\"os-list-view-table\",22),core.Qc(5,AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_div_5_Template,3,3,\"div\",2),core.Yb()),2&rf){const ctx_r14=core.lc(4);core.Gb(2),core.Tc(core.nc(3,3,\"Single votes\")),core.Gb(2),core.tc(\"ngIf\",ctx_r14.votesDataObservable),core.Gb(1),core.tc(\"ngIf\",!ctx_r14.votesDataObservable)}}function AssignmentPollDetailComponent_ng_template_6_div_0_div_8_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",15),core.Ub(1,\"os-assignment-poll-detail-content\",16),core.Zb(2,\"div\",17),core.Qc(3,AssignmentPollDetailComponent_ng_template_6_div_0_div_8_os_charts_3_Template,2,4,\"os-charts\",18),core.Yb(),core.Qc(4,AssignmentPollDetailComponent_ng_template_6_div_0_div_8_div_4_Template,6,5,\"div\",19),core.Yb()),2&rf){const ctx_r12=core.lc(3);core.Gb(1),core.tc(\"poll\",ctx_r12.poll),core.Gb(2),core.tc(\"ngIf\",ctx_r12.chartDataSubject.value),core.Gb(1),core.tc(\"ngIf\",\"named\"===ctx_r12.poll.type)}}function AssignmentPollDetailComponent_ng_template_6_div_0_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\"),core.Zb(1,\"h1\"),core.Sc(2),core.Yb(),core.Zb(3,\"div\"),core.Qc(4,AssignmentPollDetailComponent_ng_template_6_div_0_span_4_Template,3,3,\"span\",2),core.Zb(5,\"span\"),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Yb(),core.Qc(8,AssignmentPollDetailComponent_ng_template_6_div_0_div_8_Template,5,3,\"div\",14),core.Yb()),2&rf){const ctx_r9=core.lc(2);core.Gb(2),core.Tc(ctx_r9.poll.title),core.Gb(2),core.tc(\"ngIf\",\"analog\"!==ctx_r9.poll.type),core.Gb(2),core.Uc(\" \",core.nc(7,4,ctx_r9.poll.stateVerbose),\" \"),core.Gb(2),core.tc(\"ngIf\",ctx_r9.poll&&ctx_r9.poll.stateHasVotes)}}function AssignmentPollDetailComponent_ng_template_6_div_1_small_1_span_3_span_3_Template(rf,ctx){1&rf&&(core.Zb(0,\"span\"),core.Sc(1,\", \"),core.Yb())}function AssignmentPollDetailComponent_ng_template_6_div_1_small_1_span_3_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"span\"),core.Sc(1),core.mc(2,\"translate\"),core.Qc(3,AssignmentPollDetailComponent_ng_template_6_div_1_small_1_span_3_span_3_Template,2,0,\"span\",2),core.Yb()),2&rf){const group_r37=ctx.$implicit,i_r38=ctx.index,ctx_r36=core.lc(4);core.Gb(1),core.Uc(\" \",core.nc(2,2,group_r37.getTitle()),\"\"),core.Gb(2),core.tc(\"ngIf\",i_r38<ctx_r36.poll.groups.length-1)}}function AssignmentPollDetailComponent_ng_template_6_div_1_small_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"small\"),core.Sc(1),core.mc(2,\"translate\"),core.Qc(3,AssignmentPollDetailComponent_ng_template_6_div_1_small_1_span_3_Template,4,4,\"span\",30),core.Yb()),2&rf){const ctx_r34=core.lc(3);core.Gb(1),core.Uc(\" \",core.nc(2,2,\"Groups\"),\": \"),core.Gb(2),core.tc(\"ngForOf\",ctx_r34.poll.groups)}}function AssignmentPollDetailComponent_ng_template_6_div_1_small_2_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"small\"),core.Sc(1),core.mc(2,\"translate\"),core.mc(3,\"translate\"),core.Yb()),2&rf){const ctx_r35=core.lc(3);core.Gb(1),core.Vc(\" \",core.nc(2,2,\"100% base\"),\": \",core.nc(3,4,ctx_r35.poll.percentBaseVerbose),\" \")}}function AssignmentPollDetailComponent_ng_template_6_div_1_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",29),core.Qc(1,AssignmentPollDetailComponent_ng_template_6_div_1_small_1_Template,4,4,\"small\",2),core.Qc(2,AssignmentPollDetailComponent_ng_template_6_div_1_small_2_Template,4,6,\"small\",2),core.Yb()),2&rf){const ctx_r10=core.lc(2);core.Gb(1),core.tc(\"ngIf\",ctx_r10.poll.groups&&ctx_r10.poll.type&&\"analog\"!==ctx_r10.poll.type),core.Gb(1),core.tc(\"ngIf\",ctx_r10.poll.onehundred_percent_base)}}function AssignmentPollDetailComponent_ng_template_6_Template(rf,ctx){if(1&rf&&(core.Qc(0,AssignmentPollDetailComponent_ng_template_6_div_0_Template,9,6,\"div\",2),core.Qc(1,AssignmentPollDetailComponent_ng_template_6_div_1_Template,3,2,\"div\",13)),2&rf){const ctx_r3=core.lc();core.tc(\"ngIf\",ctx_r3.isReady),core.Gb(1),core.tc(\"ngIf\",ctx_r3.poll)}}function AssignmentPollDetailComponent_os_projector_button_10_Template(rf,ctx){if(1&rf&&core.Ub(0,\"os-projector-button\",31),2&rf){const ctx_r5=core.lc();core.tc(\"menuItem\",!0)(\"object\",ctx_r5.poll)}}function AssignmentPollDetailComponent_button_11_Template(rf,ctx){if(1&rf){const _r41=core.ac();core.Zb(0,\"button\",32),core.hc(\"click\",(function(){core.Ic(_r41);const ctx_r40=core.lc();return ctx_r40.openDialog(ctx_r40.poll)})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"edit\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Edit\")))}function AssignmentPollDetailComponent_button_12_Template(rf,ctx){if(1&rf){const _r43=core.ac();core.Zb(0,\"button\",32),core.hc(\"click\",(function(){return core.Ic(_r43),core.lc().pseudoanonymizePoll()})),core.Zb(1,\"mat-icon\"),core.Sc(2,\"warning\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Anonymize votes\")))}function AssignmentPollDetailComponent_button_14_Template(rf,ctx){if(1&rf){const _r45=core.ac();core.Zb(0,\"button\",32),core.hc(\"click\",(function(){return core.Ic(_r45),core.lc().deletePoll()})),core.Zb(1,\"mat-icon\",33),core.Sc(2,\"delete\"),core.Yb(),core.Zb(3,\"span\"),core.Sc(4),core.mc(5,\"translate\"),core.Yb(),core.Yb()}2&rf&&(core.Gb(4),core.Tc(core.nc(5,1,\"Delete\")))}const routes=[{path:\"\",component:assignment_list_component_AssignmentListComponent,pathMatch:\"full\"},{path:\"new\",component:assignment_detail_component_AssignmentDetailComponent,data:{basePerm:operator_service.b.assignmentsCanManage}},{path:\":id\",component:assignment_detail_component_AssignmentDetailComponent,data:{basePerm:operator_service.b.assignmentsCanSee}},{path:\"polls\",children:[{path:\":id\",component:(()=>{class AssignmentPollDetailComponent extends base_poll_detail_component.a{constructor(title,translate,matSnackbar,repo,route,groupRepo,prompt,pollDialog,configService,pollService,votesRepo,operator,router){super(title,translate,matSnackbar,repo,route,groupRepo,prompt,pollDialog,pollService,votesRepo),this.pollService=pollService,this.operator=operator,this.router=router,this.filterProps=[\"user.getFullName\"],this.isReady=!1,this.candidatesLabels=[],configService.get(\"users_activate_vote_weight\").subscribe(active=>this.isVoteWeightActive=active)}createVotesData(){const votes={};let isPseudoanonymized=!0;for(const option of this.poll.options)for(const vote of option.votes){const userId=vote.user_id;userId&&(isPseudoanonymized=!1,votes[userId]||(votes[userId]={user:vote.user,votes:[]}),vote.weight>0&&votes[userId].votes.push(this.poll.isMethodY?\"Y\"===vote.value?option.user.getFullName():this.voteValueToLabel(vote.value):`${option.user.getShortName()}: ${this.voteValueToLabel(vote.value)}`))}if(!isPseudoanonymized)for(const user of this.poll.voted)votes[user.id]||(votes[user.id]={user:user,votes:[this.translate.instant(\"empty vote\")]});this.setVotesData(Object.values(votes)),this.candidatesLabels=this.pollService.getChartLabels(this.poll),this.columnDefinitionSingleVotes=[{prop:\"user\",label:\"Participant\",width:\"40%\",minWidth:300},{prop:\"votes\",label:\"Votes\",width:\"60%\",minWidth:300}],this.isReady=!0}voteValueToLabel(vote){if(\"Y\"===vote)return this.translate.instant(\"Yes\");if(\"N\"===vote)return this.translate.instant(\"No\");if(\"A\"===vote)return this.translate.instant(\"Abstain\");throw new Error(\"voteValueToLabel received illegal arguments: \"+vote)}hasPerms(){return this.operator.hasPerms(operator_service.b.assignmentsCanManage)}onDeleted(){this.router.navigate([\"assignments\",this.poll.assignment_id])}}return AssignmentPollDetailComponent.ɵfac=function(t){return new(t||AssignmentPollDetailComponent)(core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a),core.Tb(assignment_poll_repository_service.a),core.Tb(fesm2015_router.a),core.Tb(group_repository_service.a),core.Tb(prompt_service.a),core.Tb(assignment_poll_dialog_service_AssignmentPollDialogService),core.Tb(config_service.a),core.Tb(assignment_poll_service.a),core.Tb(assignment_vote_repository_service.a),core.Tb(operator_service.a),core.Tb(fesm2015_router.f))},AssignmentPollDetailComponent.ɵcmp=core.Nb({type:AssignmentPollDetailComponent,selectors:[[\"os-assignment-poll-detail\"]],features:[core.Db],decls:15,vars:10,consts:[[3,\"goBack\",\"nav\"],[1,\"title-slot\"],[4,\"ngIf\"],[\"class\",\"menu-slot\",4,\"osPerms\"],[1,\"os-card\",\"spacer-bottom-60\"],[3,\"ngTemplateOutlet\"],[\"viewTemplate\",\"\"],[\"pollDetailMenu\",\"matMenu\"],[3,\"menuItem\",\"object\",4,\"osPerms\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"osPerms\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"osPerms\",\"osPermsAnd\"],[1,\"menu-slot\"],[\"type\",\"button\",\"mat-icon-button\",\"\",3,\"matMenuTriggerFor\"],[\"class\",\"assignment-poll-meta\",4,\"ngIf\"],[\"class\",\"assignment-result-wrapper\",4,\"ngIf\"],[1,\"assignment-result-wrapper\"],[3,\"poll\"],[1,\"chart-wrapper\"],[\"class\",\"assignment-result-chart\",3,\"labels\",\"data\",4,\"ngIf\"],[\"class\",\"named-result-table\",4,\"ngIf\"],[1,\"assignment-result-chart\",3,\"labels\",\"data\"],[1,\"named-result-table\"],[\"class\",\"single-votes-table\",\"listStorageKey\",\"assignment-poll-vote\",3,\"listObservable\",\"columns\",\"filterProps\",\"allowProjector\",\"fullScreen\",\"vScrollFixed\",\"showListOfSpeakers\",\"showMenu\",4,\"ngIf\"],[\"listStorageKey\",\"assignment-poll-vote\",1,\"single-votes-table\",3,\"listObservable\",\"columns\",\"filterProps\",\"allowProjector\",\"fullScreen\",\"vScrollFixed\",\"showListOfSpeakers\",\"showMenu\"],[4,\"pblNgridHeaderCellDef\"],[4,\"pblNgridCellDef\"],[1,\"user-subtitle\"],[\"class\",\"single-vote-result\",4,\"ngFor\",\"ngForOf\"],[1,\"single-vote-result\"],[1,\"assignment-poll-meta\"],[4,\"ngFor\",\"ngForOf\"],[3,\"menuItem\",\"object\"],[\"mat-menu-item\",\"\",3,\"click\"],[\"color\",\"warn\"]],template:function(rf,ctx){if(1&rf&&(core.Zb(0,\"os-head-bar\",0),core.Zb(1,\"div\",1),core.Qc(2,AssignmentPollDetailComponent_h2_2_Template,2,1,\"h2\",2),core.Yb(),core.Qc(3,AssignmentPollDetailComponent_div_3_Template,4,1,\"div\",3),core.Yb(),core.Zb(4,\"mat-card\",4),core.Vb(5,5),core.Yb(),core.Qc(6,AssignmentPollDetailComponent_ng_template_6_Template,2,2,\"ng-template\",null,6,core.Rc),core.Zb(8,\"mat-menu\",null,7),core.Qc(10,AssignmentPollDetailComponent_os_projector_button_10_Template,1,2,\"os-projector-button\",8),core.Qc(11,AssignmentPollDetailComponent_button_11_Template,6,3,\"button\",9),core.Qc(12,AssignmentPollDetailComponent_button_12_Template,6,3,\"button\",10),core.Ub(13,\"mat-divider\"),core.Qc(14,AssignmentPollDetailComponent_button_14_Template,6,3,\"button\",9),core.Yb()),2&rf){const _r2=core.Ec(7);core.tc(\"goBack\",!0)(\"nav\",!1),core.Gb(2),core.tc(\"ngIf\",!!ctx.poll),core.Gb(1),core.tc(\"osPerms\",\"assignments.can_manage\"),core.Gb(2),core.tc(\"ngTemplateOutlet\",_r2),core.Gb(5),core.tc(\"osPerms\",\"core.can_manage_projector\"),core.Gb(1),core.tc(\"osPerms\",\"assignments.can_manage\"),core.Gb(1),core.tc(\"osPerms\",\"assignments.can_manage\")(\"osPermsAnd\",ctx.poll&&\"named\"===ctx.poll.type),core.Gb(2),core.tc(\"osPerms\",\"assignments.can_manage\")}},directives:[head_bar_component.a,common.t,perms_directive.a,card.a,common.A,menu.f,divider.a,fesm2015_button.b,menu.e,icon.a,assignment_poll_detail_content_component.a,charts_component.a,list_view_table_component.a,pebula_ngrid.h,pebula_ngrid.c,common.s,projector_button_component.a,menu.c],pipes:[ngx_translate_core.j,common.b],styles:['.assignment-result-wrapper .chart-wrapper{margin-top:2em}.assignment-result-wrapper .named-result-table .mat-form-field{font-size:14px;width:100%}.assignment-result-wrapper .named-result-table .single-votes-table{display:block;height:500px}.assignment-result-wrapper .named-result-table .single-votes-table .list-view-frame{height:100%}.assignment-result-wrapper .named-result-table .single-votes-table .single-vote-result+.single-vote-result{margin-top:1em}.assignment-result-wrapper .named-result-table .vote-field{text-align:center;width:100%;padding-right:12px}.assignment-poll-meta{display:grid;text-align:right;padding-top:20px}.openslides-theme .pbl-ngrid-no-data{top:10%}.openslides-theme .pbl-ngrid-header-cell:first-child{overflow:visible}.openslides-theme .pbl-ngrid-header-cell:first-child:after{content:\"\";display:block;position:absolute;top:0;right:-1px;height:100%}'],encapsulation:2}),AssignmentPollDetailComponent})()}]}];let assignments_routing_module_AssignmentsRoutingModule=(()=>{class AssignmentsRoutingModule{}return AssignmentsRoutingModule.ɵmod=core.Rb({type:AssignmentsRoutingModule}),AssignmentsRoutingModule.ɵinj=core.Qb({factory:function(t){return new(t||AssignmentsRoutingModule)},imports:[[fesm2015_router.j.forChild(routes)],fesm2015_router.j]}),AssignmentsRoutingModule})();var polls_module=__webpack_require__(\"bVYn\"),shared_module=__webpack_require__(\"PCNd\");let assignments_module_AssignmentsModule=(()=>{class AssignmentsModule{}return AssignmentsModule.ɵmod=core.Rb({type:AssignmentsModule}),AssignmentsModule.ɵinj=core.Qb({factory:function(t){return new(t||AssignmentsModule)},imports:[[common.c,assignments_routing_module_AssignmentsRoutingModule,shared_module.a,polls_module.PollsModule]]}),AssignmentsModule})()},bVYn:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"PollsModule\",(function(){return polls_module_PollsModule}));var common=__webpack_require__(\"ofXK\"),router=__webpack_require__(\"tyNb\"),storage_service=__webpack_require__(\"AqIO\"),voting_service=__webpack_require__(\"M0z7\"),base_list_view=__webpack_require__(\"wL0i\"),openslides_status_service=__webpack_require__(\"D/ll\"),base_filter_list_service=__webpack_require__(\"+8Rz\"),base_poll=__webpack_require__(\"qnZ9\"),core=__webpack_require__(\"fXoL\"),ngx_translate_core=__webpack_require__(\"sYmb\");let poll_filter_list_service_PollFilterListService=(()=>{class PollFilterListService extends base_filter_list_service.a{constructor(store,OSStatus,translate){super(store,OSStatus),this.translate=translate,this.storageKey=\"PollList\"}preFilter(viewPoll){return viewPoll.filter(poll=>!poll.isAnalog)}getFilterDefinitions(){return[{property:\"state\",label:this.translate.instant(\"State\"),options:[{condition:base_poll.e.Created,label:this.translate.instant(\"created\")},{condition:base_poll.e.Started,label:this.translate.instant(\"started\")},{condition:base_poll.e.Finished,label:this.translate.instant(\"finished (unpublished)\")},{condition:base_poll.e.Published,label:this.translate.instant(\"published\")}]},{property:\"hasVote\",label:this.translate.instant(\"Votings\"),options:[{condition:!1,label:this.translate.instant(\"Voting is currently in progress.\")},{condition:!0,label:this.translate.instant(\"You have already voted.\")}]}]}}return PollFilterListService.ɵfac=function(t){return new(t||PollFilterListService)(core.dc(storage_service.a),core.dc(openslides_status_service.a),core.dc(ngx_translate_core.k))},PollFilterListService.ɵprov=core.Pb({token:PollFilterListService,factory:PollFilterListService.ɵfac,providedIn:\"root\"}),PollFilterListService})();var poll_list_observable_service=__webpack_require__(\"PoOO\"),platform_browser=__webpack_require__(\"jhN1\"),snack_bar=__webpack_require__(\"dNgK\"),head_bar_component=__webpack_require__(\"mksl\"),list_view_table_component=__webpack_require__(\"0Obk\"),pebula_ngrid=__webpack_require__(\"dRZP\"),icon=__webpack_require__(\"NFeN\"),tooltip=__webpack_require__(\"Qu3c\");function PollListComponent_div_5_a_1_Template(rf,ctx){if(1&rf&&core.Ub(0,\"a\",5),2&rf){const poll_r4=core.lc().row;core.tc(\"routerLink\",poll_r4.parentLink)}}function PollListComponent_div_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",3),core.Qc(1,PollListComponent_div_5_a_1_Template,1,1,\"a\",4),core.Zb(2,\"span\"),core.Sc(3),core.Yb(),core.Yb()),2&rf){const poll_r4=ctx.row,ctx_r0=core.lc();core.Gb(1),core.tc(\"ngIf\",!ctx_r0.isMultiSelect),core.Gb(2),core.Tc(poll_r4.title)}}function PollListComponent_div_6_a_1_Template(rf,ctx){if(1&rf&&core.Ub(0,\"a\",5),2&rf){const poll_r8=core.lc().row;core.tc(\"routerLink\",poll_r8.parentLink)}}function PollListComponent_div_6_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",3),core.Qc(1,PollListComponent_div_6_a_1_Template,1,1,\"a\",4),core.Zb(2,\"span\"),core.Sc(3),core.Yb(),core.Yb()),2&rf){const poll_r8=ctx.row,ctx_r1=core.lc();core.Gb(1),core.tc(\"ngIf\",!ctx_r1.isMultiSelect),core.Gb(2),core.Tc(poll_r8.getContentObject().getListTitle())}}function PollListComponent_div_7_a_1_Template(rf,ctx){if(1&rf&&core.Ub(0,\"a\",5),2&rf){const poll_r11=core.lc().row;core.tc(\"routerLink\",poll_r11.parentLink)}}function PollListComponent_div_7_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",3),core.Qc(1,PollListComponent_div_7_a_1_Template,1,1,\"a\",4),core.Zb(2,\"span\"),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Yb()),2&rf){const poll_r11=ctx.row,ctx_r2=core.lc();core.Gb(1),core.tc(\"ngIf\",!ctx_r2.isMultiSelect),core.Gb(2),core.Tc(core.nc(4,2,poll_r11.stateVerbose))}}function PollListComponent_div_8_mat_icon_1_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-icon\",8),core.mc(1,\"translate\"),core.Sc(2,\" check_circle \"),core.Yb()),2&rf&&core.uc(\"matTooltip\",core.nc(1,1,\"You have already voted.\"))}function PollListComponent_div_8_mat_icon_2_Template(rf,ctx){1&rf&&(core.Zb(0,\"mat-icon\",9),core.mc(1,\"translate\"),core.Sc(2,\" warning \"),core.Yb()),2&rf&&core.uc(\"matTooltip\",core.nc(1,1,\"Voting is currently in progress.\"))}function PollListComponent_div_8_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",3),core.Qc(1,PollListComponent_div_8_mat_icon_1_Template,3,3,\"mat-icon\",6),core.Qc(2,PollListComponent_div_8_mat_icon_2_Template,3,3,\"mat-icon\",7),core.Yb()),2&rf){const poll_r14=ctx.row;core.Gb(1),core.tc(\"ngIf\",poll_r14.hasVote),core.Gb(1),core.tc(\"ngIf\",!poll_r14.hasVote&&null!==poll_r14.hasVote)}}const routes=[{path:\"\",component:(()=>{class PollListComponent extends base_list_view.a{constructor(polls,filterService,votingService,storage,title,translate,snackbar){super(title,translate,snackbar,storage),this.polls=polls,this.filterService=filterService,this.votingService=votingService,this.storage=storage,this.tableColumnDefinition=[{prop:\"title\",width:\"auto\"},{prop:\"classType\",width:\"auto\"},{prop:\"state\",width:\"auto\"},{prop:\"votability\",width:\"25px\"}],this.filterProps=[\"title\",\"state\"],super.setTitle(\"List of electronic votes\")}}return PollListComponent.ɵfac=function(t){return new(t||PollListComponent)(core.Tb(poll_list_observable_service.a),core.Tb(poll_filter_list_service_PollFilterListService),core.Tb(voting_service.b),core.Tb(storage_service.a),core.Tb(platform_browser.d),core.Tb(ngx_translate_core.k),core.Tb(snack_bar.a))},PollListComponent.ɵcmp=core.Nb({type:PollListComponent,selectors:[[\"os-poll-list\"]],features:[core.Db],decls:9,vars:12,consts:[[1,\"title-slot\"],[\"listStorageKey\",\"polls\",3,\"listObservableProvider\",\"vScrollFixed\",\"columns\",\"filterProps\",\"filterService\"],[\"class\",\"cell-slot fill\",4,\"pblNgridCellDef\"],[1,\"cell-slot\",\"fill\"],[\"class\",\"detail-link\",3,\"routerLink\",4,\"ngIf\"],[1,\"detail-link\",3,\"routerLink\"],[\"color\",\"accent\",3,\"matTooltip\",4,\"ngIf\"],[\"color\",\"warn\",3,\"matTooltip\",4,\"ngIf\"],[\"color\",\"accent\",3,\"matTooltip\"],[\"color\",\"warn\",3,\"matTooltip\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"os-head-bar\"),core.Zb(1,\"div\",0),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Yb(),core.Zb(4,\"os-list-view-table\",1),core.Qc(5,PollListComponent_div_5_Template,4,2,\"div\",2),core.Qc(6,PollListComponent_div_6_Template,4,2,\"div\",2),core.Qc(7,PollListComponent_div_7_Template,5,4,\"div\",2),core.Qc(8,PollListComponent_div_8_Template,3,2,\"div\",2),core.Yb()),2&rf&&(core.Gb(2),core.Tc(core.nc(3,10,\"List of electronic votes\")),core.Gb(2),core.tc(\"listObservableProvider\",ctx.polls)(\"vScrollFixed\",64)(\"columns\",ctx.tableColumnDefinition)(\"filterProps\",ctx.filterProps)(\"filterService\",ctx.filterService),core.Gb(1),core.tc(\"pblNgridCellDef\",\"title\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"classType\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"state\"),core.Gb(1),core.tc(\"pblNgridCellDef\",\"votability\"))},directives:[head_bar_component.a,list_view_table_component.a,pebula_ngrid.c,common.t,router.i,icon.a,tooltip.c],pipes:[ngx_translate_core.j],styles:[\"\"]}),PollListComponent})(),pathMatch:\"full\"}];let polls_routing_module_PollsRoutingModule=(()=>{class PollsRoutingModule{}return PollsRoutingModule.ɵmod=core.Rb({type:PollsRoutingModule}),PollsRoutingModule.ɵinj=core.Qb({factory:function(t){return new(t||PollsRoutingModule)},imports:[[router.j.forChild(routes)],router.j]}),PollsRoutingModule})();var shared_module=__webpack_require__(\"PCNd\");let polls_module_PollsModule=(()=>{class PollsModule{}return PollsModule.ɵmod=core.Rb({type:PollsModule}),PollsModule.ɵinj=core.Qb({factory:function(t){return new(t||PollsModule)},imports:[[common.c,polls_routing_module_PollsRoutingModule,shared_module.a]]}),PollsModule})()},g4jF:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return BasePollDetailComponent}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mrSG\"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"2Vo4\"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"Cfvw\"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"pLZG\"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"lJxs\"),app_core_promises_deferred__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(\"g96W\"),app_site_base_base_view__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(\"mV3u\"),_angular_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(\"fXoL\");let BasePollDetailComponent=(()=>{class BasePollDetailComponent extends app_site_base_base_view__WEBPACK_IMPORTED_MODULE_6__.a{constructor(title,translate,matSnackbar,repo,route,groupRepo,promptService,pollDialog,pollService,votesRepo){super(title,translate,matSnackbar),this.translate=translate,this.repo=repo,this.route=route,this.groupRepo=groupRepo,this.promptService=promptService,this.pollDialog=pollDialog,this.pollService=pollService,this.votesRepo=votesRepo,this.userGroups=[],this.groupObservable=null,this.voteOptionStyle={Y:{css:\"yes\",icon:\"thumb_up\"},N:{css:\"no\",icon:\"thumb_down\"},A:{css:\"abstain\",icon:\"trip_origin\"}},this.poll=null,this.labels=[],this.chartDataSubject=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(null),this.optionsLoaded=new app_core_promises_deferred__WEBPACK_IMPORTED_MODULE_5__.a,this.setup()}setup(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){yield this.optionsLoaded,this.votesRepo.getViewModelListObservable().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(()=>this.poll&&this.canSeeVotes),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(votes=>votes.filter(vote=>vote.option.poll_id===this.poll.id)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(votes=>!!votes.length)).subscribe(()=>{this.createVotesData()})}))}ngOnInit(){this.findComponentById(),this.groupObservable=this.groupRepo.getViewModelListObservable(),this.subscriptions.push(this.groupRepo.getViewModelListObservable().subscribe(groups=>this.userGroups=groups))}deletePoll(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to delete this vote?\");(yield this.promptService.open(title))&&this.repo.delete(this.poll).then(()=>this.onDeleted(),this.raiseError)}))}pseudoanonymizePoll(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){const title=this.translate.instant(\"Are you sure you want to anonymize all votes? This cannot be undone.\");(yield this.promptService.open(title))&&this.repo.pseudoanonymize(this.poll).catch(this.raiseError)}))}openDialog(viewPoll){this.pollDialog.openDialog(viewPoll)}onStateChanged(){}get canSeeVotes(){return this.hasPerms&&this.poll.isFinished||this.poll.isPublished}setVotesData(data){this.votesDataObservable=data.every(voteDate=>!voteDate.user)?null:Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.a)([data])}initChartData(){this.chartDataSubject.next(this.pollService.generateChartData(this.poll))}findComponentById(){const params=this.route.snapshot.params;params&&params.id&&this.subscriptions.push(this.repo.getViewModelObservable(params.id).subscribe(poll=>{poll&&(this.poll=poll,this.createVotesData(),this.initChartData(),this.optionsLoaded.resolve())}))}}return BasePollDetailComponent.ɵfac=function(t){_angular_core__WEBPACK_IMPORTED_MODULE_7__.gc()},BasePollDetailComponent.ɵdir=_angular_core__WEBPACK_IMPORTED_MODULE_7__.Ob({type:BasePollDetailComponent,features:[_angular_core__WEBPACK_IMPORTED_MODULE_7__.Db]}),BasePollDetailComponent})()},wL0i:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return BaseListViewComponent}));var _base_view__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mV3u\");class BaseListViewComponent extends _base_view__WEBPACK_IMPORTED_MODULE_0__.a{constructor(titleService,translate,matSnackBar,storage){super(titleService,translate,matSnackBar),this.storage=storage,this.canMultiSelect=!1,this._multiSelectMode=!1,this.singleButtonWidth=\"40px\",this.badgeButtonWidth=\"45px\",this.selectedRows=[]}onDataSourceChange(newDataSource){this.dataSource=newDataSource}toggleMultiSelect(){!this.canMultiSelect||this.isMultiSelect?(this._multiSelectMode=!1,this.deselectAll()):this._multiSelectMode=!0}selectAll(){this.dataSource.selection.select(...this.dataSource.filteredData)}deselectAll(){this.dataSource&&this.dataSource.selection.clear()}get isMultiSelect(){return this._multiSelectMode}}}}]);","extractedComments":[]}