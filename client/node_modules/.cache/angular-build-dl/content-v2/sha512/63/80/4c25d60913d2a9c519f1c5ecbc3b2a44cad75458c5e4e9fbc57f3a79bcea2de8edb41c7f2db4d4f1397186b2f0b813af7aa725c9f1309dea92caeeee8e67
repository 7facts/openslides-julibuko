(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"0bMg":function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));class n{static validation(...e){return t=>e.map(e=>t.get(e)).every(e=>e&&""===e.value||!e)?{noOneSet:!0}:null}}},"5NaA":function(e,t,o){"use strict";o.d(t,"a",(function(){return Z}));var n=o("3Pt+"),a=o("R+Vs"),s=o("+KbT"),i=o("owL4"),l=o("HRp2"),r=o("qnZ9"),c=o("Izkr"),p=o("aOHa"),b=o("mV3u"),h=o("8fOK"),u=o("fXoL"),d=o("jhN1"),m=o("sYmb"),g=o("dNgK"),f=o("0IaG"),y=o("kmnG"),v=o("qFsG"),V=o("ofXK"),C=o("d3UM"),k=o("FKr1"),O=o("oqD5"),x=o("bSwM");function P(e,t){if(1&e&&(u.Zb(0,"mat-option",13),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&e){const e=t.$implicit;u.tc("value",e.key),u.Gb(1),u.Uc(" ",u.nc(2,2,e.value)," ")}}function G(e,t){if(1&e){const e=u.ac();u.Zb(0,"mat-hint",14),u.hc("click",(function(){return u.Ic(e),u.lc(3).openVotingWarning()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}2&e&&(u.Gb(1),u.Uc(" ",u.nc(2,1,"Not suitable for formal secret voting!"),""))}function _(e,t){if(1&e&&(u.Zb(0,"mat-form-field",9),u.Zb(1,"mat-select",10),u.mc(2,"translate"),u.Qc(3,P,3,4,"mat-option",11),u.mc(4,"keyvalue"),u.Yb(),u.Zb(5,"mat-error"),u.Sc(6),u.mc(7,"translate"),u.Yb(),u.Qc(8,G,3,3,"mat-hint",12),u.Yb()),2&e){const e=u.lc(2);u.Gb(1),u.tc("placeholder",u.nc(2,4,e.PollPropertyVerbose.type)),u.Gb(2),u.tc("ngForOf",u.nc(4,6,e.pollTypes)),u.Gb(3),u.Tc(u.nc(7,8,"This field is required.")),u.Gb(2),u.tc("ngIf",e.showNonNominalWarning)}}function F(e,t){if(1&e&&(u.Zb(0,"mat-form-field"),u.Ub(1,"os-search-value-selector",15),u.mc(2,"translate"),u.Yb()),2&e){const e=u.lc(2);u.Gb(1),u.tc("multiple",!0)("showChips",!1)("includeNone",!1)("placeholder",u.nc(2,5,e.PollPropertyVerbose.groups))("inputListValues",e.groupObservable)}}function N(e,t){if(1&e&&(u.Zb(0,"mat-option",13),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&e){const e=t.$implicit;u.tc("value",e.key),u.Gb(1),u.Uc(" ",u.nc(2,2,e.value)," ")}}function Y(e,t){if(1&e&&(u.Zb(0,"mat-form-field"),u.Zb(1,"mat-select",16),u.mc(2,"translate"),u.Qc(3,N,3,4,"mat-option",11),u.mc(4,"keyvalue"),u.Yb(),u.Zb(5,"mat-error"),u.Sc(6),u.mc(7,"translate"),u.Yb(),u.Yb()),2&e){const e=u.lc(2);u.Gb(1),u.tc("placeholder",u.nc(2,3,e.PollPropertyVerbose.pollmethod)),u.Gb(2),u.tc("ngForOf",u.oc(4,5,e.pollMethods,e.keepEntryOrder)),u.Gb(3),u.Tc(u.nc(7,8,"This field is required."))}}function T(e,t){if(1&e&&(u.Xb(0),u.Qc(1,_,9,10,"mat-form-field",8),u.Qc(2,F,3,7,"mat-form-field",5),u.Qc(3,Y,8,10,"mat-form-field",5),u.Wb()),2&e){const e=u.lc();u.Gb(1),u.tc("ngIf",e.isEVotingEnabled),u.Gb(1),u.tc("ngIf",e.contentForm.get("type").value&&"analog"!==e.contentForm.get("type").value),u.Gb(1),u.tc("ngIf",e.pollMethods)}}function w(e,t){if(1&e&&(u.Xb(0),u.Zb(1,"mat-option",13),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Wb()),2&e){const e=t.$implicit;u.Gb(1),u.tc("value",e.key),u.Gb(1),u.Tc(u.nc(3,2,e.value))}}function S(e,t){if(1&e&&(u.Xb(0),u.Zb(1,"mat-form-field"),u.Ub(2,"input",17),u.mc(3,"translate"),u.Yb(),u.Zb(4,"mat-checkbox",18),u.Sc(5),u.mc(6,"translate"),u.Yb(),u.Zb(7,"mat-checkbox",19),u.Sc(8),u.mc(9,"translate"),u.Yb(),u.Wb()),2&e){const e=u.lc();u.Gb(2),u.uc("placeholder",u.nc(3,3,e.PollPropertyVerbose.votes_amount)),u.Gb(3),u.Tc(u.nc(6,5,e.PollPropertyVerbose.global_no)),u.Gb(3),u.Tc(u.nc(9,7,e.PollPropertyVerbose.global_abstain))}}let Z=(()=>{class e extends b.a{constructor(e,t,o,n,a,s,i){super(e,t,o),this.translate=t,this.fb=n,this.groupRepo=a,this.configService=s,this.dialog=i,this.PollType=r.f,this.PollPropertyVerbose=h.d,this.pollTypes=h.e,this.majorityMethods=h.a,this.groupObservable=null,this.pollValues=[],this.publishImmediately=!0,this.showNonNominalWarning=!1,this.initContentForm()}get isEVotingEnabled(){return!!this.pollService&&this.pollService.isElectronicVotingEnabled}ngOnInit(){this.groupObservable=this.groupRepo.getViewModelListObservableWithoutDefaultGroup(),this.data&&(this.data.state&&this.disablePollType(),this.data instanceof p.c&&(this.data.assignment&&!this.data.votes_amount&&(this.data.votes_amount=this.data.assignment.open_posts),this.data.pollmethod||(this.data.pollmethod=this.configService.instant("assignment_poll_method"))),Object.keys(this.contentForm.controls).forEach(e=>{this.data[e]&&this.contentForm.get(e).patchValue(this.data[e])})),this.updatePollValues(this.contentForm.value),this.updatePercentBases(this.contentForm.get("pollmethod").value),this.subscriptions.push(this.contentForm.valueChanges.subscribe(e=>{e&&this.updatePollValues(e)}),this.contentForm.get("pollmethod").valueChanges.subscribe(e=>{e&&(this.updatePercentBases(e),this.setVotesAmountCtrl())}),this.contentForm.get("type").valueChanges.subscribe(()=>{this.setVotesAmountCtrl()}))}disablePollType(){this.contentForm.get("type").disable()}updatePercentBases(e){if(e){let t=[];e===l.b.YN?t=[r.c.YNA,l.c.Votes]:e===l.b.YNA?t=[l.c.Votes]:e===l.b.Votes&&(t=[r.c.YN,r.c.YNA]);const o={};for(const[e,a]of Object.entries(this.percentBases))t.includes(e)||(o[e]=a);const n=this.contentForm.get("onehundred_percent_base");n.setValue(this.getNormedPercentBase(n.value,e)),this.validPercentBases=o}}getNormedPercentBase(e,t){return t!==l.b.YN||e!==l.c.YNA&&e!==l.c.Votes?t===l.b.YNA&&e===l.c.Votes?l.c.YNA:t!==l.b.Votes||e!==l.c.YN&&e!==l.c.YNA?e:l.c.Votes:l.c.YN}setVotesAmountCtrl(){this.showNonNominalWarning=this.contentForm.get("type").value===r.f.Pseudoanonymous}getValues(){return Object.assign(Object.assign({},this.data),this.contentForm.value)}updatePollValues(e){this.data&&(this.pollValues=[[this.pollService.getVerboseNameForKey("type"),this.pollService.getVerboseNameForValue("type",e.type)]],this.data.pollClassType===h.c.Assignment&&this.pollValues.push([this.pollService.getVerboseNameForKey("pollmethod"),this.pollService.getVerboseNameForValue("pollmethod",e.pollmethod)]),"analog"!==e.type&&this.pollValues.push([this.pollService.getVerboseNameForKey("groups"),e&&e.groups_id&&e.groups_id.length?this.groupRepo.getNameForIds(...e.groups_id):"---"]),"votes"===e.pollmethod&&(this.pollValues.push([this.pollService.getVerboseNameForKey("votes_amount"),e.votes_amount]),this.pollValues.push([this.pollService.getVerboseNameForKey("global_no"),e.global_no]),this.pollValues.push([this.pollService.getVerboseNameForKey("global_abstain"),e.global_abstain])))}initContentForm(){this.contentForm=this.fb.group({title:["",n.G.required],type:["",n.G.required],pollmethod:["",n.G.required],onehundred_percent_base:["",n.G.required],majority_method:["",n.G.required],votes_amount:[1,[n.G.required,n.G.min(1)]],groups_id:[],global_no:[!1],global_abstain:[!1]})}openVotingWarning(){this.dialog.open(i.a,c.a)}keepEntryOrder(){return 0}}return e.\u0275fac=function(t){return new(t||e)(u.Tb(d.d),u.Tb(m.k),u.Tb(g.a),u.Tb(n.f),u.Tb(a.a),u.Tb(s.a),u.Tb(f.b))},e.\u0275cmp=u.Nb({type:e,selectors:[["os-poll-form"]],inputs:{pollMethods:"pollMethods",percentBases:"percentBases",data:"data",pollService:"pollService"},features:[u.Db],decls:14,vars:14,consts:[[1,"os-form-card-mobile"],[3,"formGroup"],[1,"poll-preview-title"],["matInput","","required","","formControlName","title",3,"placeholder"],[1,"poll-preview-meta-info-form",3,"formGroup"],[4,"ngIf"],["formControlName","onehundred_percent_base","required","",3,"placeholder"],[4,"ngFor","ngForOf"],["class","pollType",4,"ngIf"],[1,"pollType"],["formControlName","type","required","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"value"],[3,"click"],["formControlName","groups_id",3,"multiple","showChips","includeNone","placeholder","inputListValues"],["formControlName","pollmethod","required","",3,"placeholder"],["type","number","matInput","","formControlName","votes_amount","min","1","required","",3,"placeholder"],["formControlName","global_no"],["formControlName","global_abstain"]],template:function(e,t){1&e&&(u.Zb(0,"div",0),u.Zb(1,"form",1),u.Zb(2,"mat-form-field"),u.Zb(3,"h2",2),u.Ub(4,"input",3),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(6,"form",4),u.Qc(7,T,4,3,"ng-container",5),u.Zb(8,"mat-form-field"),u.Zb(9,"mat-select",6),u.mc(10,"translate"),u.Qc(11,w,4,4,"ng-container",7),u.mc(12,"keyvalue"),u.Yb(),u.Yb(),u.Qc(13,S,10,9,"ng-container",5),u.Yb(),u.Yb()),2&e&&(u.Gb(1),u.tc("formGroup",t.contentForm),u.Gb(3),u.tc("placeholder",u.nc(5,7,"Title")),u.Gb(2),u.tc("formGroup",t.contentForm),u.Gb(1),u.tc("ngIf",!t.data||!t.data.state||t.data.isCreated),u.Gb(2),u.uc("placeholder",u.nc(10,9,t.PollPropertyVerbose.onehundred_percent_base)),u.Gb(2),u.tc("ngForOf",u.oc(12,11,t.validPercentBases,t.keepEntryOrder)),u.Gb(2),u.tc("ngIf","votes"===t.contentForm.get("pollmethod").value&&(!t.data||!t.data.state||t.data.isCreated)))},directives:[n.I,n.t,n.k,y.c,v.b,n.c,n.D,n.s,n.i,V.t,C.a,V.s,y.b,k.n,y.f,O.a,n.y,x.a],pipes:[m.j,V.l],styles:[".poll-preview-title[_ngcontent-%COMP%]{margin:0}.pollType[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%]{color:red;cursor:pointer}.poll-preview-meta-info[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;margin:10px 0}.poll-preview-meta-info[_ngcontent-%COMP%]   .short-description[_ngcontent-%COMP%]{-ms-flex:1;flex:1;padding:0 5px;display:inline-block}.poll-preview-meta-info[_ngcontent-%COMP%]   .short-description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.poll-preview-meta-info[_ngcontent-%COMP%]   .short-description-label[_ngcontent-%COMP%]{font-size:75%}.poll-preview-meta-info-form[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap}.poll-preview-meta-info-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-ms-flex:1;flex:1;margin:0 4px}"]}),e})()},acT5:function(e,t,o){"use strict";o.d(t,"a",(function(){return m}));var n=o("fXoL"),a=o("3Pt+"),s=o("mV3u"),i=o("jhN1"),l=o("sYmb"),r=o("dNgK"),c=o("kmnG"),p=o("qFsG"),b=o("ofXK"),h=o("bSwM");function u(e,t){if(1&e){const e=n.ac();n.Zb(0,"mat-checkbox",4),n.hc("change",(function(t){return n.Ic(e),n.lc().checkboxStateChanged(t.checked)})),n.Sc(1),n.Yb()}if(2&e){const e=n.lc();n.tc("name","checkbox")("ngModel",e.isChecked),n.Gb(1),n.Uc(" ",e.checkboxLabel," ")}}function d(e,t){1&e&&n.Ub(0,"div",5)}let m=(()=>{class e extends s.a{constructor(e,t,o,n){super(e,t,o),this.translate=t,this.fb=n,this.inputType="text",this.isChecked=!1,this.propagateChange=e=>{},this.initForm()}ngOnInit(){this.subscriptions.push(this.contentForm.valueChanges.subscribe(e=>{e&&this.sendValue(e)}))}checkboxStateChanged(e){this.isChecked=e,e?this.contentForm.disable({emitEvent:!1}):this.contentForm.enable({emitEvent:!1}),this.sendValue()}writeValue(e){(e||"number"==typeof e)&&(e===this.checkboxValue?this.checkboxStateChanged(!0):this.contentForm.patchValue(e))}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}setDisabledState(e){}initForm(){this.contentForm=this.fb.control("")}sendValue(e){this.propagateChange(this.isChecked?this.checkboxValue:e)}}return e.\u0275fac=function(t){return new(t||e)(n.Tb(i.d),n.Tb(l.k),n.Tb(r.a),n.Tb(a.f))},e.\u0275cmp=n.Nb({type:e,selectors:[["os-check-input"]],inputs:{inputType:"inputType",placeholder:"placeholder",checkboxValue:"checkboxValue",checkboxLabel:"checkboxLabel"},features:[n.Fb([{provide:a.q,multi:!0,useExisting:Object(n.Y)(()=>e)}]),n.Db],decls:5,vars:6,consts:[[1,"check-input--container"],["matInput","",1,"check-input--input",3,"type","formControl","placeholder","min"],["tabindex","-1",3,"name","ngModel","change",4,"ngIf"],["class","placeholder",4,"ngIf"],["tabindex","-1",3,"name","ngModel","change"],[1,"placeholder"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"mat-form-field"),n.Ub(2,"input",1),n.Yb(),n.Qc(3,u,2,3,"mat-checkbox",2),n.Qc(4,d,1,0,"div",3),n.Yb()),2&e&&(n.Gb(2),n.tc("type",t.inputType)("formControl",t.contentForm)("placeholder",t.placeholder)("min",0),n.Gb(1),n.tc("ngIf",t.checkboxLabel),n.Gb(1),n.tc("ngIf",!t.checkboxLabel))},directives:[c.c,p.b,a.c,a.s,a.h,b.t,h.a,a.v],styles:[".check-input--container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between}.check-input--container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-ms-flex:1;flex:1;padding:0 5px}"]}),e})()},b1ae:function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var n=o("qnZ9"),a=o("0bMg"),s=o("mV3u");class i extends s.a{constructor(e,t,o,n){super(e,t,o),this.translate=t,this.dialogRef=n,this.addKeyListener()}addKeyListener(){this.dialogRef&&this.dialogRef.keydownEvents().subscribe(e=>{"Enter"===e.key&&e.shiftKey&&this.submitPoll(),"Escape"===e.key&&this.dialogRef.close()})}submitPoll(){const e=Object.assign(Object.assign({},this.pollForm.getValues()),{votes:this.getVoteData(),publish_immediately:this.publishImmediately});this.dialogRef.close(e)}publishStateChanged(e){this.dialogVoteForm.setValidators(e?a.a.validation(...Object.keys(this.dialogVoteForm.controls)):null)}getVoteData(){if(!this.isVoteDataEmpty(this.dialogVoteForm.value))return this.replaceEmptyValues(this.dialogVoteForm.value)}isVoteDataEmpty(e){return Object.values(e).every(e=>!e||"object"==typeof e&&this.isVoteDataEmpty(e))}replaceEmptyValues(e,t=!1){const o={};for(const a of Object.keys(e))o[a]="object"==typeof e[a]&&e[a]?this.replaceEmptyValues(e[a],t):t?e[a]===n.h?null:e[a]:e[a]?e[a]:n.h;return o}undoReplaceEmptyValues(e){return this.replaceEmptyValues(e,!0)}}},iCsr:function(e,t,o){"use strict";o.d(t,"a",(function(){return b}));var n=o("mV3u"),a=o("fXoL"),s=o("jhN1"),i=o("sYmb"),l=o("dNgK"),r=o("ofXK"),c=o("LPYB");function p(e,t){if(1&e&&a.Ub(0,"canvas",2),2&e){const e=a.lc();a.tc("datasets",e.isCircle?null:e.chartData)("data",e.isCircle?e.chartData:null)("colors",e.circleColors)("labels",e.labels)("options",e.chartOptions)("chartType",e.type)("legend",e.legend)}}let b=(()=>{class e extends n.a{constructor(e,t,o){super(e,t,o),this.type="horizontalBar",this.legend=!1}set data(e){this.progressInputData(e)}get chartOptions(){return this.isCircle?{responsive:!0,maintainAspectRatio:!1,tooltips:{enabled:!1},legend:{position:"left"}}:{responsive:!0,maintainAspectRatio:!1,tooltips:{enabled:!1},scales:{xAxes:[{gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0,stepSize:1},stacked:!0}],yAxes:[{gridLines:{drawBorder:!1,drawOnChartArea:!1,drawTicks:!1},ticks:{mirror:!0,labelOffset:-20},stacked:!0}]}}}get isCircle(){return"pie"===this.type||"doughnut"===this.type}calcBarChartHeight(){if(!this.isCircle)return 120+60*this.labels.length+"px"}progressInputData(e){this.isCircle?(this.chartData=e.flatMap(e=>e.data),this.circleColors=[{backgroundColor:e.map(e=>e.backgroundColor).filter(e=>!!e),hoverBackgroundColor:e.map(e=>e.hoverBackgroundColor).filter(e=>!!e)}]):this.chartData=e,this.labels||(this.labels=e.map(e=>e.label))}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(s.d),a.Tb(i.k),a.Tb(l.a))},e.\u0275cmp=a.Nb({type:e,selectors:[["os-charts"]],inputs:{type:"type",labels:"labels",legend:"legend",data:"data"},features:[a.Db],decls:2,vars:3,consts:[[1,"charts-wrapper"],["class","chart-js-canvas","baseChart","",3,"datasets","data","colors","labels","options","chartType","legend",4,"ngIf"],["baseChart","",1,"chart-js-canvas",3,"datasets","data","colors","labels","options","chartType","legend"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Qc(1,p,1,7,"canvas",1),a.Yb()),2&e&&(a.Pc("height",t.calcBarChartHeight()),a.Gb(1),a.tc("ngIf",t.chartData&&t.chartData.length))},directives:[r.t,c.a],styles:[".charts-wrapper[_ngcontent-%COMP%]{position:relative;display:block;height:100%;margin:auto}"],changeDetection:0}),e})()},owL4:function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));var n=o("fXoL"),a=o("0IaG"),s=o("bTqV"),i=o("sYmb");let l=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Nb({type:e,selectors:[["os-voting-privacy-warning"]],decls:13,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["type","button","mat-button","",3,"mat-dialog-close"]],template:function(e,t){1&e&&(n.Zb(0,"h1",0),n.Zb(1,"span"),n.Sc(2),n.mc(3,"translate"),n.Yb(),n.Yb(),n.Zb(4,"div",1),n.Zb(5,"span"),n.Sc(6),n.mc(7,"translate"),n.Yb(),n.Yb(),n.Zb(8,"div",2),n.Zb(9,"button",3),n.Zb(10,"span"),n.Sc(11),n.mc(12,"translate"),n.Yb(),n.Yb(),n.Yb()),2&e&&(n.Gb(2),n.Tc(n.nc(3,4,"Secret voting can not be guaranteed")),n.Gb(4),n.Uc(" ",n.nc(7,6,"During non-nominal voting OpenSlides does NOT store the individual user ID of the voter. This in no way means that a non-nominal vote is completely anonymous and secure. The votes cannot track their individual votes after the data has been submitted. The validity of the data cannot always be guaranteed.")," "),n.Gb(3),n.tc("mat-dialog-close",null),n.Gb(2),n.Tc(n.nc(12,8,"I know the risk")))},directives:[a.i,a.f,a.c,s.b,a.d],pipes:[i.j],styles:[""]}),e})()}}]);