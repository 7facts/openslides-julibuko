function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){c=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw a}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=_superPropBase(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(t);if(e){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[21,36],{"6Ehv":function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var o=n("InfO"),i=n("+KbT"),a=n("+az0"),r=n("fXoL"),c=n("3Xi6"),l=n("ofXK"),s=n("3Pt+"),b=n("bSwM"),u=n("kmnG"),m=n("d3UM"),f=n("FKr1"),d=n("oqD5"),p=n("sYmb");function h(t,e){if(1&t&&(r.Zb(0,"mat-option",7),r.Zb(1,"span"),r.Sc(2),r.mc(3,"translate"),r.Yb(),r.Yb()),2&t){var n=e.$implicit;r.tc("value",n.key),r.Gb(2),r.Tc(r.nc(3,2,n.name))}}function g(t,e){if(1&t&&(r.Zb(0,"div",2),r.Zb(1,"mat-form-field"),r.Ub(2,"os-search-value-selector",8),r.mc(3,"translate"),r.Yb(),r.Yb()),2&t){var n=r.lc(4);r.tc("formGroup",n.form),r.Gb(2),r.uc("placeholder",r.nc(3,5,"Parent agenda item")),r.tc("multiple",!1)("includeNone",!0)("inputListValues",n.itemObserver)}}function v(t,e){if(1&t&&(r.Xb(0),r.Zb(1,"div"),r.Zb(2,"mat-form-field",2),r.Zb(3,"mat-select",4),r.mc(4,"translate"),r.Qc(5,h,4,4,"mat-option",5),r.Yb(),r.Yb(),r.Yb(),r.Qc(6,g,4,7,"div",6),r.Wb()),2&t){var n=r.lc(3);r.Gb(2),r.tc("formGroup",n.form),r.Gb(1),r.uc("placeholder",r.nc(4,4,"Agenda visibility")),r.Gb(2),r.tc("ngForOf",n.ItemVisibilityChoices),r.Gb(1),r.tc("ngIf",n.itemObserver.value.length>0)}}function k(t,e){if(1&t&&(r.Xb(0),r.Zb(1,"div",2),r.Zb(2,"p"),r.Zb(3,"mat-checkbox",3),r.Zb(4,"span"),r.Sc(5),r.mc(6,"translate"),r.Yb(),r.Yb(),r.Yb(),r.Yb(),r.Qc(7,v,7,6,"ng-container",1),r.Wb()),2&t){var n=r.lc(2);r.Gb(1),r.tc("formGroup",n.form),r.Gb(4),r.Tc(r.nc(6,3,"Add to agenda")),r.Gb(2),r.tc("ngIf",!!n.checkbox.value)}}function y(t,e){if(1&t&&(r.Xb(0),r.Qc(1,k,8,5,"ng-container",1),r.Wb()),2&t){var n=r.lc();r.Gb(1),r.tc("ngIf",n.showForm)}}var _=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.configService=e,this.itemRepo=n,this.showForm=!1,this.ItemVisibilityChoices=a.b}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.checkbox=this.form.controls.agenda_create,this.configService.get("agenda_item_creation").subscribe((function(e){if("always"===e)t.showForm=!0,t.checkbox.disable(),t.form.patchValue({agenda_create:!0});else if("never"===e)t.showForm=!1,t.checkbox.disable(),t.form.patchValue({agenda_create:!1});else{var n="default_yes"===e;t.showForm=!0,t.checkbox.enable(),t.form.patchValue({agenda_create:n})}})),this.configService.get("agenda_new_items_default_visibility").subscribe((function(e){t.form.get("agenda_type").setValue(+e)})),this.itemObserver=this.itemRepo.getViewModelListBehaviorSubject()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Tb(i.a),r.Tb(o.a))},t.\u0275cmp=r.Nb({type:t,selectors:[["os-agenda-content-object-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[[4,"osPerms"],[4,"ngIf"],[3,"formGroup"],["formControlName","agenda_create"],["formControlName","agenda_type",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"formGroup",4,"ngIf"],[3,"value"],["formControlName","agenda_parent_id",3,"multiple","includeNone","placeholder","inputListValues"]],template:function(t,e){1&t&&r.Qc(0,y,2,1,"ng-container",0),2&t&&r.tc("osPerms","agenda.can_manage")},directives:[c.a,l.t,s.t,s.k,b.a,s.s,s.i,u.c,m.a,l.s,f.n,d.a],pipes:[p.j],styles:[""]}),t}()},F48D:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n("mrSG"),i=n("LBBb"),a=n("fXoL"),r=n("0IaG"),c=function(){var t=function(){function t(e){_classCallCheck(this,t),this.dialog=e}return _createClass(t,[{key:"open",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.dialog.open(i.a,{width:"250px",data:{title:t,content:e}}).afterClosed().toPromise());case 1:case"end":return n.stop()}}),n,this)})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.dc(r.b))},t.\u0275prov=a.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},FWGL:function(t,e,n){"use strict";n.r(e),n.d(e,"MotionBlockModule",(function(){return Ut}));var o,i=n("ofXK"),a=n("PCNd"),r=n("tyNb"),c=n("mrSG"),l=n("3Pt+"),s=n("OwvW"),b=n("AqIO"),u=n("InfO"),m=n("D5Qf"),f=n("dOok"),d=n("+KbT"),p=n("F48D"),h=n("KL36"),g=n("Izkr"),v=n("wL0i"),k=n("D/ll"),y=n("iTQr"),_=n("+B0n"),w=n("s3dr"),S=n("lv9T"),C=n("Q5D0"),I=n("fXoL"),O=n("sYmb"),Y=((o=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,i,a,r,c,l,s,b,u){return _classCallCheck(this,n),e.call(this,t,o,i,a,r,c,l,s,b,u)}return _createClass(n,[{key:"preFilter",value:function(t){var e=this;return t.filter((function(t){return t.motion_block_id===e._blockId}))}},{key:"blockId",set:function(t){this._blockId=t}}]),n}(C.a)).\u0275fac=function(t){return new(t||o)(I.dc(b.a),I.dc(k.a),I.dc(y.a),I.dc(m.a),I.dc(_.a),I.dc(S.a),I.dc(w.a),I.dc(O.k),I.dc(s.a),I.dc(d.a))},o.\u0275prov=I.Pb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),T=n("jhN1"),Z=n("dNgK"),G=n("0IaG"),M=n("mksl"),F=n("bTqV"),P=n("STbY"),R=n("NFeN"),D=n("0Obk"),x=n("dRZP"),B=n("40uZ"),A=n("3Xi6"),Q=n("vYAO"),j=n("A5z7"),E=n("Qu3c"),N=n("Tp2j"),L=n("f0Cb"),W=n("kmnG"),U=n("qFsG"),z=n("IZUe"),K=n("bSwM"),V=["blockEditForm"],q=["editDialog"];function H(t,e){if(1&t&&(I.Zb(0,"os-icon-container",16),I.mc(1,"translate"),I.Zb(2,"os-icon-container",17),I.mc(3,"translate"),I.Zb(4,"h2"),I.Sc(5),I.Yb(),I.Yb(),I.Yb()),2&t){var n=I.lc();I.tc("noWrap",!0)("showIcon",n.block.isFinished)("iconTooltip",I.nc(1,7,"Finished")),I.Gb(2),I.tc("noWrap",!0)("showIcon",n.block.internal)("iconTooltip",I.nc(3,9,"Internal")),I.Gb(3),I.Tc(n.block.title)}}function X(t,e){if(1&t){var n=I.ac();I.Zb(0,"button",20),I.hc("click",(function(){return I.Ic(n),I.lc(2).onFollowRecButton()})),I.Zb(1,"os-icon-container",21),I.Zb(2,"span"),I.Sc(3),I.mc(4,"translate"),I.Yb(),I.Yb(),I.Yb()}if(2&t){var o=I.lc(2);I.tc("disabled",o.isFollowingProhibited()),I.Gb(3),I.Tc(I.nc(4,2,"Follow recommendations for all motions"))}}var J=function(){return["motions.can_manage","motions.can_manage_metadata"]};function $(t,e){1&t&&(I.Zb(0,"div",18),I.Qc(1,X,5,4,"button",19),I.Yb()),2&t&&(I.Gb(1),I.tc("osPerms",I.yc(1,J)))}var tt=function(){return{back:"true"}};function et(t,e){if(1&t&&I.Ub(0,"a",31),2&t){var n=I.lc().row;I.tc("routerLink",n.getDetailStateURL())("state",I.yc(2,tt))}}function nt(t,e){1&t&&(I.Zb(0,"span",32),I.Zb(1,"mat-icon",33),I.Sc(2,"star"),I.Yb(),I.Yb())}function ot(t,e){1&t&&(I.Zb(0,"span",34),I.Zb(1,"mat-icon"),I.Sc(2,"attach_file"),I.Yb(),I.Yb())}function it(t,e){if(1&t&&(I.Zb(0,"span"),I.Sc(1),I.Zb(2,"span"),I.Sc(3,"\xb7"),I.Yb(),I.Yb()),2&t){var n=I.lc().row;I.Gb(1),I.Uc(" ",n.identifier," ")}}function at(t,e){if(1&t&&(I.Zb(0,"span"),I.Zb(1,"span"),I.Sc(2),I.mc(3,"translate"),I.Yb(),I.Sc(4),I.Yb()),2&t){var n=I.lc().row;I.Gb(2),I.Tc(I.nc(3,2,"by")),I.Gb(2),I.Uc(" ",n.submitters," ")}}function rt(t,e){1&t&&(I.Zb(0,"span"),I.Sc(1," \xb7 "),I.Yb())}function ct(t,e){if(1&t&&(I.Zb(0,"span"),I.Qc(1,rt,2,0,"span",11),I.Zb(2,"span"),I.Sc(3),I.mc(4,"translate"),I.Yb(),I.Sc(5),I.Yb()),2&t){var n=I.lc().row;I.Gb(1),I.tc("ngIf",n.submitters.length),I.Gb(2),I.Tc(I.nc(4,3,"Sequential number")),I.Gb(2),I.Uc(" ",n.id," ")}}function lt(t,e){if(1&t&&(I.Zb(0,"mat-basic-chip",35),I.Sc(1),I.Yb()),2&t){var n=I.lc().row,o=I.lc();I.tc("ngClass",n.stateCssColor)("disabled",!0),I.Gb(1),I.Uc(" ",o.getStateLabel(n)," ")}}function st(t,e){if(1&t&&(I.Zb(0,"div",22),I.Qc(1,et,1,3,"a",23),I.Zb(2,"div",24),I.Zb(3,"div",25),I.Qc(4,nt,3,0,"span",26),I.Qc(5,ot,3,0,"span",27),I.Zb(6,"span"),I.Qc(7,it,4,1,"span",11),I.Sc(8),I.Yb(),I.Yb(),I.Zb(9,"div",28),I.Qc(10,at,5,4,"span",11),I.Qc(11,ct,6,5,"span",11),I.Yb(),I.Zb(12,"div",29),I.Qc(13,lt,2,3,"mat-basic-chip",30),I.Yb(),I.Yb(),I.Yb()),2&t){var n=e.row,o=I.lc();I.Gb(1),I.tc("ngIf",!o.isMultiSelect),I.Gb(3),I.tc("ngIf",n.star),I.Gb(1),I.tc("ngIf",n.hasAttachments()),I.Gb(2),I.tc("ngIf",n.identifier),I.Gb(1),I.Uc(" ",n.title," "),I.Gb(2),I.tc("ngIf",n.submitters.length),I.Gb(1),I.tc("ngIf",o.showSequential),I.Gb(2),I.tc("ngIf",n.state)}}function bt(t,e){if(1&t&&(I.Zb(0,"mat-basic-chip",37),I.Sc(1),I.Yb()),2&t){var n=I.lc().row,o=I.lc();I.Gb(1),I.Uc(" ",o.getRecommendationLabel(n)," ")}}function ut(t,e){if(1&t&&(I.Zb(0,"div",22),I.Qc(1,bt,2,1,"mat-basic-chip",36),I.Yb()),2&t){var n=e.row;I.Gb(1),I.tc("ngIf",!!n.recommendation)}}function mt(t,e){if(1&t){var n=I.ac();I.Zb(0,"div",22),I.Zb(1,"button",38),I.hc("click",(function(){I.Ic(n);var t=e.row;return I.lc().onRemoveMotionButton(t)})),I.mc(2,"translate"),I.Zb(3,"mat-icon"),I.Sc(4,"close"),I.Yb(),I.Yb(),I.Yb()}2&t&&(I.Gb(1),I.uc("matTooltip",I.nc(2,1,"Remove from motion block")))}var ft=function(t){return{motion:t}};function dt(t,e){if(1&t){var n=I.ac();I.Zb(0,"div",22),I.Zb(1,"button",39),I.hc("click",(function(t){return I.Ic(n),t.stopPropagation()})),I.Zb(2,"mat-icon"),I.Sc(3,"more_vert"),I.Yb(),I.Yb(),I.Yb()}if(2&t){var o=e.row,i=I.lc(),a=I.Ec(14);I.Gb(1),I.tc("disabled",i.isMultiSelect)("matMenuTriggerFor",a)("matMenuTriggerData",I.zc(3,ft,o))}}function pt(t,e){if(1&t){var n=I.ac();I.Ub(0,"os-projector-button",40),I.Ub(1,"os-speaker-button",40),I.Zb(2,"button",41),I.hc("click",(function(){I.Ic(n);var t=e.motion;return I.lc().onRemoveMotionButton(t)})),I.Zb(3,"mat-icon"),I.Sc(4,"close"),I.Yb(),I.Zb(5,"span"),I.Sc(6),I.mc(7,"translate"),I.Yb(),I.Yb()}if(2&t){var o=e.motion;I.tc("object",o)("menuItem",!0),I.Gb(1),I.tc("object",o)("menuItem",!0),I.Gb(5),I.Tc(I.nc(7,5,"Remove from motion block"))}}function ht(t,e){if(1&t){var n=I.ac();I.Zb(0,"button",43),I.hc("click",(function(){return I.Ic(n),I.lc(2).onFollowRecButton()})),I.Zb(1,"mat-icon"),I.Sc(2,"done_all"),I.Yb(),I.Zb(3,"span"),I.Sc(4),I.mc(5,"translate"),I.Yb(),I.Yb()}if(2&t){var o=I.lc(2);I.tc("disabled",o.isFollowingProhibited()),I.Gb(4),I.Tc(I.nc(5,2,"Follow recommendations for all motions"))}}function gt(t,e){1&t&&(I.Zb(0,"div"),I.Qc(1,ht,6,4,"button",42),I.Yb()),2&t&&(I.Gb(1),I.tc("osPerms",I.yc(1,J)))}function vt(t,e){if(1&t&&I.Ub(0,"os-projector-button",40),2&t){var n=I.lc();I.tc("object",n.block)("menuItem",!0)}}function kt(t,e){if(1&t){var n=I.ac();I.Zb(0,"button",45),I.hc("click",(function(){return I.Ic(n),I.lc(2).addToAgenda()})),I.Zb(1,"mat-icon"),I.Sc(2,"add"),I.Yb(),I.Zb(3,"span"),I.Sc(4),I.mc(5,"translate"),I.Yb(),I.Yb()}2&t&&(I.Gb(4),I.Tc(I.nc(5,1,"Add to agenda")))}function yt(t,e){if(1&t){var n=I.ac();I.Zb(0,"button",45),I.hc("click",(function(){return I.Ic(n),I.lc(2).removeFromAgenda()})),I.Zb(1,"mat-icon"),I.Sc(2,"remove"),I.Yb(),I.Zb(3,"span"),I.Sc(4),I.mc(5,"translate"),I.Yb(),I.Yb()}2&t&&(I.Gb(4),I.Tc(I.nc(5,1,"Remove from agenda")))}function _t(t,e){if(1&t&&(I.Zb(0,"div"),I.Qc(1,kt,6,3,"button",44),I.Qc(2,yt,6,3,"button",44),I.Yb()),2&t){var n=I.lc();I.Gb(1),I.tc("ngIf",n.block&&!n.block.item),I.Gb(1),I.tc("ngIf",n.block&&n.block.item)}}function wt(t,e){if(1&t){var n=I.ac();I.Zb(0,"div"),I.Zb(1,"button",45),I.hc("click",(function(){return I.Ic(n),I.lc().toggleEditMode()})),I.Zb(2,"mat-icon"),I.Sc(3,"edit"),I.Yb(),I.Zb(4,"span"),I.Sc(5),I.mc(6,"translate"),I.Yb(),I.Yb(),I.Ub(7,"mat-divider"),I.Zb(8,"button",41),I.hc("click",(function(){return I.Ic(n),I.lc().onDeleteBlockButton()})),I.Zb(9,"mat-icon"),I.Sc(10,"delete"),I.Yb(),I.Zb(11,"span"),I.Sc(12),I.mc(13,"translate"),I.Yb(),I.Yb(),I.Yb()}2&t&&(I.Gb(5),I.Tc(I.nc(6,2,"Edit")),I.Gb(7),I.Tc(I.nc(13,4,"Delete")))}function St(t,e){if(1&t){var n=I.ac();I.Zb(0,"h1",46),I.Zb(1,"span"),I.Sc(2),I.mc(3,"translate"),I.Yb(),I.Yb(),I.Zb(4,"div",47),I.Zb(5,"form",48),I.hc("ngSubmit",(function(){return I.Ic(n),I.lc().saveBlock()}))("keydown",(function(t){return I.Ic(n),I.lc().onKeyDown(t)})),I.Zb(6,"mat-form-field"),I.Ub(7,"input",49),I.mc(8,"translate"),I.Yb(),I.Zb(9,"mat-checkbox",50),I.Sc(10,"Internal"),I.Yb(),I.Yb(),I.Yb(),I.Zb(11,"div",51),I.Zb(12,"button",52),I.hc("click",(function(){return I.Ic(n),I.lc().saveBlock()})),I.Zb(13,"span"),I.Sc(14),I.mc(15,"translate"),I.Yb(),I.Yb(),I.Zb(16,"button",53),I.Zb(17,"span"),I.Sc(18),I.mc(19,"translate"),I.Yb(),I.Yb(),I.Yb()}if(2&t){var o=I.lc();I.Gb(2),I.Vc("",I.nc(3,8,"Edit details for")," ",o.block.title,""),I.Gb(3),I.tc("formGroup",o.blockEditForm),I.Gb(2),I.uc("placeholder",I.nc(8,10,"Title")),I.Gb(5),I.tc("disabled",!o.blockEditForm.valid),I.Gb(2),I.Tc(I.nc(15,12,"Save")),I.Gb(2),I.tc("mat-dialog-close",null),I.Gb(2),I.Tc(I.nc(19,14,"Cancel"))}}var Ct,It,Ot=function(){return["remove"]},Yt=((Ct=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,i,a,r,c,l,b,u,m,f,d,p,h,g){var v;return _classCallCheck(this,n),(v=e.call(this,t,o,i,p)).translate=o,v.configService=a,v.route=r,v.router=c,v.repo=l,v.motionRepo=b,v.promptService=u,v.fb=m,v.dialog=f,v.itemRepo=d,v.filterService=h,v.vp=g,v.filterProps=["submitters","title","identifier"],v.tableColumnDefinition=[{prop:"title",width:"auto"},{prop:"recommendation",label:v.translate.instant("Recommendation"),width:"30%",minWidth:60},{prop:"remove",label:"",width:"40px"}],v.restrictedColumns=[{columnName:"remove",permission:s.b.motionsCanManage}],v.blockId=parseInt(v.route.snapshot.params.id,10),v.filterService.blockId=v.blockId,v}return _createClass(n,[{key:"ngOnInit",value:function(){var t=this;this.subscriptions.push(this.repo.getViewModelObservable(this.blockId).subscribe((function(e){e&&(_get(_getPrototypeOf(n.prototype),"setTitle",t).call(t,"".concat(t.translate.instant("Motion block")," - ").concat(e.getTitle())),t.block=e)}))),this.configService.get("motions_show_sequential_numbers").subscribe((function(e){return t.showSequential=e})),window.comp=this}},{key:"onFollowRecButton",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.translate.instant("Are you sure you want to override the state of all motions of this motion block?"),n=this.block.title,t.next=3,this.promptService.open(e,n);case 3:if(t.t0=t.sent,!t.t0){t.next=6;break}this.repo.followRecommendation(this.block);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"onDeleteBlockButton",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.translate.instant("Are you sure you want to delete this motion block?"),n=this.block.title,t.next=3,this.promptService.open(e,n);case 3:if(t.t0=t.sent,!t.t0){t.next=8;break}return t.next=7,this.repo.delete(this.block);case 7:this.router.navigate(["../"],{relativeTo:this.route});case 8:case"end":return t.stop()}}),t,this)})))}},{key:"onRemoveMotionButton",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.translate.instant("Are you sure you want to remove this motion from motion block?"),o=t.getTitle(),e.next=3,this.promptService.open(n,o);case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.repo.removeMotionFromBlock(t);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"onKeyDown",value:function(t){"Escape"===t.key&&this.dialogRef.close()}},{key:"isFollowingProhibited",value:function(){return!(!this.dataSource||!this.dataSource.source)&&this.dataSource.source.every((function(t){return t.isInFinalState()||!t.recommendation_id}))}},{key:"saveBlock",value:function(){var t=this;this.repo.update(this.blockEditForm.value,this.block).then((function(){return t.dialogRef.close()})).catch(this.raiseError)}},{key:"toggleEditMode",value:function(){var t=this;this.blockEditForm=this.fb.group({title:[this.block.title,l.G.required],internal:[this.block.internal]}),this.dialogRef=this.dialog.open(this.editDialog,g.a),this.dialogRef.keydownEvents().subscribe((function(e){"Enter"===e.key&&e.shiftKey&&t.saveBlock()}))}},{key:"getRecommendationLabel",value:function(t){return this.motionRepo.getExtendedRecommendationLabel(t)}},{key:"getStateLabel",value:function(t){return this.motionRepo.getExtendedStateLabel(t)}},{key:"addToAgenda",value:function(){this.itemRepo.addItemToAgenda(this.block).catch(this.raiseError)}},{key:"removeFromAgenda",value:function(){this.itemRepo.removeFromAgenda(this.block.item).catch(this.raiseError)}}]),n}(v.a)).\u0275fac=function(t){return new(t||Ct)(I.Tb(T.d),I.Tb(O.k),I.Tb(Z.a),I.Tb(d.a),I.Tb(r.a),I.Tb(r.f),I.Tb(m.a),I.Tb(f.a),I.Tb(p.a),I.Tb(l.f),I.Tb(G.b),I.Tb(u.a),I.Tb(b.a),I.Tb(Y),I.Tb(h.a))},Ct.\u0275cmp=I.Nb({type:Ct,selectors:[["os-motion-block-detail"]],viewQuery:function(t,e){var n;1&t&&(I.Oc(V,!0),I.Oc(q,!0)),2&t&&(I.Dc(n=I.ic())&&(e.blockEditForm=n.first),I.Dc(n=I.ic())&&(e.editDialog=n.first))},features:[I.Db],decls:25,vars:22,consts:[[3,"nav"],[1,"title-slot"],["icon","check","size","large",3,"noWrap","showIcon","iconTooltip",4,"ngIf"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],["class","extra-controls-slot",4,"ngIf"],[3,"listObservableProvider","filterService","columns","restricted","filterProps","hiddenInMobile","dataSourceChange"],["class","cell-slot fill",4,"pblNgridCellDef"],["singleItemMenu","matMenu"],["matMenuContent",""],["motionBlockMenu","matMenu"],[4,"ngIf"],[3,"menuItem","object"],[3,"object","menuItem",4,"ngIf"],[4,"osPerms"],["editDialog",""],["icon","check","size","large",3,"noWrap","showIcon","iconTooltip"],["icon","lock","size","large",3,"noWrap","showIcon","iconTooltip"],[1,"extra-controls-slot"],["mat-button","",3,"disabled","click",4,"osPerms"],["mat-button","",3,"disabled","click"],["icon","done_all"],[1,"cell-slot","fill"],["class","detail-link",3,"routerLink","state",4,"ngIf"],[1,"column-title","innerTable"],[1,"title-line","ellipsis-overflow"],["class","favorite-star",4,"ngIf"],["class","icon-prefix",4,"ngIf"],[1,"submitters-line","ellipsis-overflow"],[1,"ellipsis-overflow","white"],[3,"ngClass","disabled",4,"ngIf"],[1,"detail-link",3,"routerLink","state"],[1,"favorite-star"],["inline",""],[1,"icon-prefix"],[3,"ngClass","disabled"],["disableRipple","","class","bluegrey",4,"ngIf"],["disableRipple","",1,"bluegrey"],["type","button","mat-icon-button","","color","warn",3,"matTooltip","click"],["mat-icon-button","",3,"disabled","matMenuTriggerFor","matMenuTriggerData","click"],[3,"object","menuItem"],["mat-menu-item","",1,"red-warning-text",3,"click"],["mat-menu-item","",3,"disabled","click",4,"osPerms"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-dialog-title",""],["mat-dialog-content","",1,"os-form-card-mobile"],[1,"edit-form",3,"formGroup","ngSubmit","keydown"],["matInput","","osAutofocus","","formControlName","title","required","",3,"placeholder"],["formControlName","internal"],["mat-dialog-actions",""],["type","submit","mat-button","","color","accent",3,"disabled","click"],["type","button","mat-button","",3,"mat-dialog-close"]],template:function(t,e){if(1&t&&(I.Zb(0,"os-head-bar",0),I.Zb(1,"div",1),I.Qc(2,H,6,11,"os-icon-container",2),I.Yb(),I.Zb(3,"div",3),I.Zb(4,"button",4),I.Zb(5,"mat-icon"),I.Sc(6,"more_vert"),I.Yb(),I.Yb(),I.Yb(),I.Qc(7,$,2,2,"div",5),I.Yb(),I.Zb(8,"os-list-view-table",6),I.hc("dataSourceChange",(function(t){return e.onDataSourceChange(t)})),I.Qc(9,st,14,8,"div",7),I.Qc(10,ut,2,1,"div",7),I.Qc(11,mt,5,3,"div",7),I.Qc(12,dt,4,5,"div",7),I.Yb(),I.Zb(13,"mat-menu",null,8),I.Qc(15,pt,8,7,"ng-template",9),I.Yb(),I.Zb(16,"mat-menu",null,10),I.Qc(18,gt,2,2,"div",11),I.Ub(19,"os-speaker-button",12),I.Qc(20,vt,1,2,"os-projector-button",13),I.Qc(21,_t,3,2,"div",14),I.Qc(22,wt,14,6,"div",14),I.Yb(),I.Qc(23,St,20,16,"ng-template",null,15,I.Rc)),2&t){var n=I.Ec(17);I.tc("nav",!1),I.Gb(2),I.tc("ngIf",e.block),I.Gb(2),I.tc("matMenuTriggerFor",n),I.Gb(3),I.tc("ngIf",!e.vp.isMobile),I.Gb(1),I.tc("listObservableProvider",e.motionRepo)("filterService",e.filterService)("columns",e.tableColumnDefinition)("restricted",e.restrictedColumns)("filterProps",e.filterProps)("hiddenInMobile",I.yc(20,Ot)),I.Gb(1),I.tc("pblNgridCellDef","title"),I.Gb(1),I.tc("pblNgridCellDef","recommendation"),I.Gb(1),I.tc("pblNgridCellDef","remove"),I.Gb(1),I.tc("pblNgridCellDef","menu"),I.Gb(6),I.tc("ngIf",e.vp.isMobile),I.Gb(1),I.tc("menuItem",!0)("object",e.block),I.Gb(1),I.tc("ngIf",e.block),I.Gb(1),I.tc("osPerms","agenda.can_manage"),I.Gb(1),I.tc("osPerms",I.yc(21,J))}},directives:[M.a,i.t,F.b,P.e,R.a,D.a,x.c,P.f,P.b,B.a,A.a,Q.a,r.i,j.a,i.q,E.c,N.a,P.c,L.a,G.i,G.f,l.I,l.t,l.k,W.c,U.b,l.c,z.a,l.s,l.i,l.D,K.a,G.c,G.d],pipes:[O.j],styles:[".title-line[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.title-line[_ngcontent-%COMP%]   .icon-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line[_ngcontent-%COMP%]   .favorite-star[_ngcontent-%COMP%]{padding-right:3px}.mat-table[_ngcontent-%COMP%]{width:100%}.mat-table[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{display:none}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{z-index:2}.mat-table[_ngcontent-%COMP%]   .mat-table-sticky[_ngcontent-%COMP%]{z-index:3!important}.submitters-line[_ngcontent-%COMP%]{font-size:90%}.edit-form[_ngcontent-%COMP%]{overflow:hidden}"]}),Ct),Tt=n("A6Ob"),Zt=((It=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,i){var a;return _classCallCheck(this,n),(a=e.call(this,t,o,i)).storageKey="MotionBlockList",a.MotionBlockSortOptions=[{property:"title"},{property:"motions",label:"Amount of motions",sortFn:function(t,e,n){return n?t.motions.length-e.motions.length:e.motions.length-t.motions.length}}],a}return _createClass(n,[{key:"getSortOptions",value:function(){return this.MotionBlockSortOptions}},{key:"getDefaultDefinition",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{sortProperty:"title",sortAscending:!0});case 1:case"end":return t.stop()}}),t)})))}}]),n}(Tt.a)).\u0275fac=function(t){return new(t||It)(I.dc(O.k),I.dc(b.a),I.dc(k.a))},It.\u0275prov=I.Pb({token:It,factory:It.\u0275fac,providedIn:"root"}),It),Gt=n("6Ehv"),Mt=["newMotionBlockDialog"];function Ft(t,e){if(1&t&&I.Ub(0,"a",13),2&t){var n=I.lc().row;I.tc("routerLink",n.id)}}function Pt(t,e){if(1&t&&(I.Zb(0,"div",7),I.Qc(1,Ft,1,1,"a",8),I.Zb(2,"div",9),I.Zb(3,"os-icon-container",10),I.mc(4,"translate"),I.Zb(5,"os-icon-container",11),I.mc(6,"translate"),I.Zb(7,"div",12),I.Sc(8),I.Yb(),I.Yb(),I.Yb(),I.Yb(),I.Yb()),2&t){var n=e.value,o=e.row,i=I.lc();I.Gb(1),I.tc("ngIf",!i.isMultiSelect),I.Gb(2),I.tc("noWrap",!0)("icon",o.isFinished?"check":o.internal?"lock":null)("iconTooltip",o.isFinished?"Finished":o.internal?"Internal":I.nc(4,8,"")),I.Gb(2),I.tc("noWrap",!0)("showIcon",o.isFinished&&o.internal)("iconTooltip",I.nc(6,10,"Internal")),I.Gb(3),I.Uc(" ",n," ")}}function Rt(t,e){if(1&t&&(I.Zb(0,"div",7),I.Zb(1,"span",14),I.mc(2,"translate"),I.Sc(3),I.Yb(),I.Yb()),2&t){var n=e.row;I.Gb(1),I.uc("matTooltip",I.nc(2,2,"Motions")),I.Gb(2),I.Tc(n.motions.length)}}var Dt=function(t){return{block:t}};function xt(t,e){if(1&t){var n=I.ac();I.Zb(0,"div",7),I.Zb(1,"button",15),I.hc("click",(function(t){return I.Ic(n),t.stopPropagation()})),I.Zb(2,"mat-icon"),I.Sc(3,"more_vert"),I.Yb(),I.Yb(),I.Yb()}if(2&t){var o=e.row,i=I.lc(),a=I.Ec(10);I.Gb(1),I.tc("disabled",i.isMultiSelect)("matMenuTriggerFor",a)("matMenuTriggerData",I.zc(3,Dt,o))}}function Bt(t,e){if(1&t&&(I.Ub(0,"os-projector-button",16),I.Ub(1,"os-speaker-button",16)),2&t){var n=e.block;I.tc("object",n)("menuItem",!0),I.Gb(1),I.tc("object",n)("menuItem",!0)}}function At(t,e){1&t&&(I.Zb(0,"mat-error"),I.Sc(1),I.mc(2,"translate"),I.Yb()),2&t&&(I.Gb(1),I.Uc(" ",I.nc(2,1,"A title is required")," "))}function Qt(t,e){if(1&t){var n=I.ac();I.Zb(0,"h1",17),I.Zb(1,"span"),I.Sc(2),I.mc(3,"translate"),I.Yb(),I.Yb(),I.Zb(4,"form",18),I.hc("keydown",(function(t){return I.Ic(n),I.lc().onKeyDown(t)})),I.Zb(5,"div",19),I.Zb(6,"mat-form-field"),I.Ub(7,"input",20),I.mc(8,"translate"),I.Qc(9,At,3,3,"mat-error",21),I.Yb(),I.Zb(10,"p"),I.Zb(11,"mat-checkbox",22),I.Zb(12,"span"),I.Sc(13),I.mc(14,"translate"),I.Yb(),I.Yb(),I.Yb(),I.Ub(15,"os-agenda-content-object-form",23),I.Yb(),I.Yb(),I.Zb(16,"div",24),I.Zb(17,"button",25),I.Zb(18,"span"),I.Sc(19),I.mc(20,"translate"),I.Yb(),I.Yb(),I.Zb(21,"button",26),I.Zb(22,"span"),I.Sc(23),I.mc(24,"translate"),I.Yb(),I.Yb(),I.Yb()}if(2&t){var o=I.lc();I.Gb(2),I.Tc(I.nc(3,11,"New motion block")),I.Gb(2),I.tc("formGroup",o.createBlockForm),I.Gb(3),I.uc("placeholder",I.nc(8,13,"Title")),I.Gb(2),I.tc("ngIf",o.createBlockForm.get("title").hasError("required")),I.Gb(4),I.Tc(I.nc(14,15,"Internal")),I.Gb(2),I.tc("form",o.createBlockForm),I.Gb(2),I.tc("disabled",!o.createBlockForm.valid)("mat-dialog-close",!0),I.Gb(2),I.Tc(I.nc(20,17,"Save")),I.Gb(2),I.tc("mat-dialog-close",!1),I.Gb(2),I.Tc(I.nc(24,19,"Cancel"))}}var jt,Et,Nt,Lt=[{path:"",component:(jt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,i,a,r,c,s,b,u,m){var f;return _classCallCheck(this,n),(f=e.call(this,t,o,i,a)).repo=r,f.formBuilder=c,f.itemRepo=s,f.operator=b,f.dialog=u,f.sortService=m,f.filterProps=["title"],f.tableColumnDefinition=[{prop:"title",label:f.translate.instant("Title"),width:"auto"},{prop:"amount",label:f.translate.instant("Motions"),width:"40px"}],f.createBlockForm=f.formBuilder.group({title:["",l.G.required],agenda_create:[""],agenda_parent_id:[],agenda_type:[""],internal:[!1]}),f}return _createClass(n,[{key:"ngOnInit",value:function(){_get(_getPrototypeOf(n.prototype),"setTitle",this).call(this,"Motion blocks"),this.items=this.itemRepo.getViewModelListBehaviorSubject()}},{key:"resetForm",value:function(){this.createBlockForm.reset(),this.createBlockForm.get("agenda_type").setValue(this.defaultVisibility)}},{key:"onPlusButton",value:function(){var t=this;this.resetForm(),this.dialogRef=this.dialog.open(this.newMotionBlockDialog,g.a),this.dialogRef.afterClosed().subscribe((function(e){e&&t.save()}))}},{key:"save",value:function(){if(this.createBlockForm.valid){var t=this.createBlockForm.value;t.agenda_parent_id||delete t.agenda_parent_id,this.repo.create(t).catch(this.raiseError),this.resetForm()}}},{key:"onKeyDown",value:function(t){"Enter"===t.key&&t.shiftKey&&(this.save(),this.dialogRef.close()),"Escape"===t.key&&(this.resetForm(),this.dialogRef.close())}},{key:"canEdit",get:function(){return this.operator.hasPerms(s.b.motionsCanManage,s.b.motionsCanManageMetadata)}}]),n}(v.a),jt.\u0275fac=function(t){return new(t||jt)(I.Tb(T.d),I.Tb(O.k),I.Tb(Z.a),I.Tb(b.a),I.Tb(m.a),I.Tb(l.f),I.Tb(u.a),I.Tb(s.a),I.Tb(G.b),I.Tb(Zt))},jt.\u0275cmp=I.Nb({type:jt,selectors:[["os-motion-block-list"]],viewQuery:function(t,e){var n;1&t&&I.Oc(Mt,!0),2&t&&I.Dc(n=I.ic())&&(e.newMotionBlockDialog=n.first)},features:[I.Db],decls:14,vars:16,consts:[["prevUrl","../..",3,"nav","hasMainButton","mainEvent"],[1,"title-slot"],["listStorageKey","motionBlock",3,"vScrollFixed","listObservableProvider","showFilterBar","columns","sortService","multiSelect","selectedRows","filterProps","selectedRowsChange","dataSourceChange"],["class","cell-slot fill",4,"pblNgridCellDef"],["singleItemMenu","matMenu"],["matMenuContent",""],["newMotionBlockDialog",""],[1,"cell-slot","fill"],["class","detail-link",3,"routerLink",4,"ngIf"],[1,"innerTable"],["size","large",3,"noWrap","icon","iconTooltip"],["icon","lock","size","large",3,"noWrap","showIcon","iconTooltip"],[1,"ellipsis-overflow"],[1,"detail-link",3,"routerLink"],[1,"os-amount-chip",3,"matTooltip"],["mat-icon-button","",3,"disabled","matMenuTriggerFor","matMenuTriggerData","click"],[3,"object","menuItem"],["mat-dialog-title",""],[3,"formGroup","keydown"],["mat-dialog-content",""],["formControlName","title","matInput","","required","",3,"placeholder"],[4,"ngIf"],["formControlName","internal"],[3,"form"],["mat-dialog-actions",""],["mat-button","",3,"disabled","mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(I.Zb(0,"os-head-bar",0),I.hc("mainEvent",(function(){return e.onPlusButton()})),I.Zb(1,"div",1),I.Zb(2,"h2"),I.Sc(3),I.mc(4,"translate"),I.Yb(),I.Yb(),I.Yb(),I.Zb(5,"os-list-view-table",2),I.hc("selectedRowsChange",(function(t){return e.selectedRows=t}))("dataSourceChange",(function(t){return e.onDataSourceChange(t)})),I.Qc(6,Pt,9,12,"div",3),I.Qc(7,Rt,4,4,"div",3),I.Qc(8,xt,4,5,"div",3),I.Yb(),I.Zb(9,"mat-menu",null,4),I.Qc(11,Bt,2,4,"ng-template",5),I.Yb(),I.Qc(12,Qt,25,21,"ng-template",null,6,I.Rc)),2&t&&(I.tc("nav",!1)("hasMainButton",e.canEdit),I.Gb(3),I.Tc(I.nc(4,14,"Motion blocks")),I.Gb(2),I.tc("vScrollFixed",64)("listObservableProvider",e.repo)("showFilterBar",!0)("columns",e.tableColumnDefinition)("sortService",e.sortService)("multiSelect",e.isMultiSelect)("selectedRows",e.selectedRows)("filterProps",e.filterProps),I.Gb(1),I.tc("pblNgridCellDef","title"),I.Gb(1),I.tc("pblNgridCellDef","amount"),I.Gb(1),I.tc("pblNgridCellDef","menu"))},directives:[M.a,D.a,x.c,P.f,P.b,i.t,Q.a,r.i,E.c,F.b,P.e,R.a,N.a,B.a,G.i,l.I,l.t,l.k,G.f,W.c,l.c,U.b,l.s,l.i,l.D,K.a,Gt.a,G.c,G.d,W.b],pipes:[O.j],styles:[".title-line{font-weight:500;font-size:16px}.title-line .icon-prefix .mat-icon{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line .favorite-star{padding-right:3px}.mat-table{width:100%}.mat-table .mat-header-row .mat-column-anchor{display:none}.mat-table .mat-row{position:relative}.mat-table .mat-row .mat-column-anchor{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table .mat-row .mat-column-anchor a{display:block;height:100%;width:100%}.mat-table .mat-cell{position:relative}.mat-table .mat-cell .fill{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table .mat-cell .fill *{margin-top:auto;margin-bottom:auto}.mat-table .mat-cell>*{z-index:2}.mat-table .mat-table-sticky{z-index:3!important}.mat-dialog-container .mat-dialog-title{margin:0}.mat-dialog-container .mat-form-field{width:100%}"],encapsulation:2}),jt),pathMatch:"full"},{path:":id",component:Yt}],Wt=((Nt=function t(){_classCallCheck(this,t)}).\u0275mod=I.Rb({type:Nt}),Nt.\u0275inj=I.Qb({factory:function(t){return new(t||Nt)},imports:[[r.j.forChild(Lt)],r.j]}),Nt),Ut=((Et=function t(){_classCallCheck(this,t)}).\u0275mod=I.Rb({type:Et}),Et.\u0275inj=I.Qb({factory:function(t){return new(t||Et)},imports:[[i.c,Wt,a.a]]}),Et)},LBBb:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n("0IaG"),i=n("fXoL"),a=n("ofXK"),r=n("bTqV"),c=n("sYmb");function l(t,e){if(1&t&&(i.Zb(0,"div"),i.Zb(1,"h2",1),i.Sc(2),i.Yb(),i.Ub(3,"mat-dialog-content",2),i.Zb(4,"mat-dialog-actions"),i.Zb(5,"button",3),i.Sc(6),i.mc(7,"translate"),i.Yb(),i.Zb(8,"button",4),i.Sc(9),i.mc(10,"translate"),i.Yb(),i.Yb(),i.Yb()),2&t){var n=i.lc();i.Gb(2),i.Tc(n.data.title),i.Gb(1),i.tc("innerHTML",n.data.content,i.Jc),i.Gb(2),i.tc("mat-dialog-close",!0),i.Gb(1),i.Tc(i.nc(7,6,"Yes")),i.Gb(2),i.tc("mat-dialog-close",!1),i.Gb(1),i.Tc(i.nc(10,8,"Cancel"))}}var s=function(){var t=function t(e,n){_classCallCheck(this,t),this.dialogRef=e,this.data=n};return t.\u0275fac=function(e){return new(e||t)(i.Tb(o.h),i.Tb(o.a))},t.\u0275cmp=i.Nb({type:t,selectors:[["os-prompt-dialog"]],decls:1,vars:1,consts:[[4,"ngIf"],["mat-dialog-title",""],[3,"innerHTML"],["mat-button","","color","warn",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&i.Qc(0,l,11,10,"div",0),2&t&&i.tc("ngIf",e.data)},directives:[a.t,o.i,o.f,o.c,r.b,o.d],pipes:[c.j],encapsulation:2}),t}()},Q5D0:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var o=n("D/ll"),i=n("OwvW"),a=n("AqIO"),r=n("iTQr"),c=n("D5Qf"),l=n("+B0n"),s=n("s3dr"),b=n("lv9T"),u=n("+8Rz"),m=n("+KbT"),f=n("gtli"),d=n("3Y4h"),p=n("fXoL"),h=n("sYmb"),g=function(){var t=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,i,a,r,c,l,s,b,u){var m;return _classCallCheck(this,n),(m=e.call(this,t,o)).workflowRepo=l,m.translate=s,m.operator=b,m.config=u,m.storageKey="MotionList",m.enabledWorkflows={statuteEnabled:!1,statute:null,motion:null},m.stateFilterOptions={property:"state_id",label:"State",options:[]},m.categoryFilterOptions={property:"category_id",label:"Category",options:[]},m.motionBlockFilterOptions={property:"motion_block_id",label:"Motion block",options:[]},m.motionCommentFilterOptions={property:"commentSectionIds",label:"Comment",options:[]},m.recommendationFilterOptions={property:"recommendation_id",label:"Recommendation",options:[]},m.tagFilterOptions={property:"tags_id",label:"Tags",options:[]},m.hasSpeakerOptions={property:"hasSpeakers",label:"Speakers",options:[{condition:!0,label:m.translate.instant("Has speakers")},{condition:!1,label:m.translate.instant("Has no speakers")}]},m.AmendmentFilterOption={property:"amendmentType",label:"Amendment",options:[{condition:d.a.Amendment,label:m.translate.instant("Is amendment")},{condition:d.a.Parent,label:m.translate.instant("Has amendments")},{condition:d.a.Lead,label:m.translate.instant("Is no amendment and has no amendments")}]},m.personalNoteFilterOptions=[{property:"star",label:m.translate.instant("Favorites"),options:[{condition:!0,label:m.translate.instant("Is favorite")},{condition:!1,label:m.translate.instant("Is not favorite")}]},{property:"hasNotes",label:m.translate.instant("Personal notes"),options:[{condition:!0,label:m.translate.instant("Has notes")},{condition:!1,label:m.translate.instant("Does not have notes")}]}],m.getWorkflowConfig(),m.getShowAmendmentConfig(),m.updateFilterForRepo(i,m.categoryFilterOptions,m.translate.instant("No category set")),m.updateFilterForRepo(a,m.motionBlockFilterOptions,m.translate.instant("No motion block set")),m.updateFilterForRepo(r,m.motionCommentFilterOptions,m.translate.instant("No comment")),m.updateFilterForRepo(c,m.tagFilterOptions,m.translate.instant("No tags")),m.subscribeWorkflows(),m.operator.getUserObservable().subscribe((function(){m.setFilterDefinitions()})),m}return _createClass(n,[{key:"preFilter",value:function(t){if(!this.showAmendmentsInMainTable)return t.filter((function(t){return!t.parent_id}))}},{key:"getShowAmendmentConfig",value:function(){var t=this;this.config.get("motions_amendments_main_table").subscribe((function(e){t.showAmendmentsInMainTable=e}))}},{key:"getWorkflowConfig",value:function(){var t=this;this.config.get("motions_statute_amendments_workflow").subscribe((function(e){t.enabledWorkflows.statute=+e})),this.config.get("motions_workflow").subscribe((function(e){t.enabledWorkflows.motion=+e})),this.config.get("motions_statutes_enabled").subscribe((function(e){t.enabledWorkflows.statuteEnabled=e}))}},{key:"getFilterDefinitions",value:function(){var t=[this.stateFilterOptions,this.categoryFilterOptions,this.motionBlockFilterOptions,this.recommendationFilterOptions,this.motionCommentFilterOptions,this.tagFilterOptions];return this.operator.hasPerms(i.b.agendaCanSeeListOfSpeakers)&&t.push(this.hasSpeakerOptions),this.showAmendmentsInMainTable&&t.push(this.AmendmentFilterOption),this.operator.isAnonymous||(t=t.concat(this.personalNoteFilterOptions)),t}},{key:"subscribeWorkflows",value:function(){var t=this;this.workflowRepo.getViewModelListObservable().subscribe((function(e){if(e&&e.length){var n,o=[],i=[],a=[],r=[],c=_createForOfIteratorHelper(e);try{for(c.s();!(n=c.n()).done;){var l=n.value;if(t.isWorkflowEnabled(l.id)){o.push({name:l.name,filter:[]}),i.push({name:l.name,filter:[]});var s,b=_createForOfIteratorHelper(l.states);try{for(b.s();!(s=b.n()).done;){var u,m=s.value,d=m.restriction.filter((function(t){return t!==f.b.motionsIsSubmitter}));d.length&&!(u=t.operator).hasPerms.apply(u,_toConsumableArray(d))||(m.isFinalState?a.push(m.id):r.push(m.id),o[o.length-1].filter.push({condition:m.id,label:m.name}),m.recommendation_label&&i[o.length-1].filter.push({condition:m.id,label:m.recommendation_label}))}}catch(S){b.e(S)}finally{b.f()}}}}catch(S){c.e(S)}finally{c.f()}if(o&&o.length){var p=[];p.push({label:"Done",condition:a}),p.push({label:t.translate.instant("Undone"),condition:r}),p.push("-");var h,g=_createForOfIteratorHelper(o);try{for(g.s();!(h=g.n()).done;){var v=h.value;p.push(v.name),p=p.concat(v.filter)}}catch(S){g.e(S)}finally{g.f()}t.stateFilterOptions.options=p}if(i&&i.length){var k,y=[],_=_createForOfIteratorHelper(i);try{for(_.s();!(k=_.n()).done;){var w=k.value;y.push(w.name),y=y.concat(w.filter)}}catch(S){_.e(S)}finally{_.f()}y.push("-"),y.push({label:t.translate.instant("No recommendation"),condition:null}),t.recommendationFilterOptions.options=y}t.setFilterDefinitions()}}))}},{key:"isWorkflowEnabled",value:function(t){return t===this.enabledWorkflows.motion||this.enabledWorkflows.statuteEnabled&&t===this.enabledWorkflows.statute}}]),n}(u.a);return t.\u0275fac=function(e){return new(e||t)(p.dc(a.a),p.dc(o.a),p.dc(r.a),p.dc(c.a),p.dc(l.a),p.dc(b.a),p.dc(s.a),p.dc(h.k),p.dc(i.a),p.dc(m.a))},t.\u0275prov=p.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},wL0i:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,i,a){var r;return _classCallCheck(this,n),(r=e.call(this,t,o,i)).storage=a,r.canMultiSelect=!1,r._multiSelectMode=!1,r.singleButtonWidth="40px",r.badgeButtonWidth="45px",r.selectedRows=[],r}return _createClass(n,[{key:"onDataSourceChange",value:function(t){this.dataSource=t}},{key:"toggleMultiSelect",value:function(){!this.canMultiSelect||this.isMultiSelect?(this._multiSelectMode=!1,this.deselectAll()):this._multiSelectMode=!0}},{key:"selectAll",value:function(){var t;(t=this.dataSource.selection).select.apply(t,_toConsumableArray(this.dataSource.filteredData))}},{key:"deselectAll",value:function(){this.dataSource&&this.dataSource.selection.clear()}},{key:"isMultiSelect",get:function(){return this._multiSelectMode}}]),n}(n("mV3u").a)}}]);