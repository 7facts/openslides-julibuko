function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=_superPropBase(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(t);if(e){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(c){i=!0,s=c}finally{try{r||null==o.return||o.return()}finally{if(i)throw s}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{"6fpL":function(t,e,n){"use strict";n.r(e),n.d(e,"OsCommonModule",(function(){return dt}));var r,i,s=n("ofXK"),a=n("tyNb"),o=n("OwvW"),c=n("fXoL"),u=n("mksl"),l=n("Wp6s"),b=n("sYmb"),f=((r=function(){function t(e){_classCallCheck(this,t),this.route=e}return _createClass(t,[{key:"ngOnInit",value:function(){this.route.queryParams.subscribe((function(t){t&&t.error&&console.error("".concat(t.error,'! Required: "').concat(t.msg,'"'))}))}}]),t}()).\u0275fac=function(t){return new(t||r)(c.Tb(a.a))},r.\u0275cmp=c.Nb({type:r,selectors:[["os-error"]],decls:9,vars:6,consts:[[1,"title-slot"],[1,"os-card"]],template:function(t,e){1&t&&(c.Zb(0,"os-head-bar"),c.Zb(1,"div",0),c.Zb(2,"h2"),c.Sc(3),c.mc(4,"translate"),c.Yb(),c.Yb(),c.Yb(),c.Zb(5,"mat-card",1),c.Zb(6,"h1"),c.Sc(7),c.mc(8,"translate"),c.Yb(),c.Yb()),2&t&&(c.Gb(3),c.Tc(c.nc(4,2,"Error")),c.Gb(4),c.Tc(c.nc(8,4,"You do not have the required permission to see that page!")))},directives:[u.a,l.a],pipes:[b.j],styles:[""]}),r),p=n("xTJg"),d=n("qWJO"),h=n("BOLD"),v=n("YZ1K"),g=n("mV3u"),m=n("jhN1"),y=n("dNgK"),k=n("try9"),_=n("bTqV"),S=n("3Xi6"),T=n("3UWI"),C=n("2Vo4"),O=n("ZDbo"),E=n("i7i4"),w=((i=function(){function t(e,n){_classCallCheck(this,t),this.countUserService=e,this.userRepo=n,this.runningCounts={}}return _createClass(t,[{key:"countUsers",value:function(){var t,e,n,r=this;return t=_slicedToArray(this.countUserService.countUsers(),2),e=t[0],n=t[1],this.runningCounts[e]=new C.a({activeUserHandles:0,activeUsers:{},groups:{}}),n.subscribe((function(t){var n=t.userId?t.userId:0,i=r.runningCounts[e].getValue(),s=r.userRepo.getViewModel(n);i.activeUserHandles++,i.activeUsers[n]||(i.activeUsers[n]=0),i.activeUsers[n]++,(s?s.groups:[]).forEach((function(t){i.groups[t.id]||(i.groups[t.id]={name:t.name,users:{},userHandleCount:0}),i.groups[t.id].userHandleCount++,i.groups[t.id].users[n]=i.activeUsers[n]})),r.runningCounts[e].next(i)})),[e,this.runningCounts[e].asObservable()]}},{key:"stopCounting",value:function(t){this.runningCounts[t]&&(this.runningCounts[t].complete(),delete this.runningCounts[t])}}]),t}()).\u0275fac=function(t){return new(t||i)(c.dc(E.a),c.dc(O.a))},i.\u0275prov=c.Pb({token:i,factory:i.\u0275fac,providedIn:"root"}),i);function Y(t,e){if(1&t){var n=c.ac();c.Zb(0,"button",2),c.hc("click",(function(){return c.Ic(n),c.lc().countUsers()})),c.Sc(1),c.mc(2,"translate"),c.Yb()}2&t&&(c.Gb(1),c.Uc(" ",c.nc(2,1,"Count active users"),"\n"))}function Z(t,e){if(1&t){var n=c.ac();c.Zb(0,"button",2),c.hc("click",(function(){return c.Ic(n),c.lc().stopCounting()})),c.Sc(1),c.mc(2,"translate"),c.Yb()}2&t&&(c.Gb(1),c.Uc(" ",c.nc(2,1,"Stop counting"),"\n"))}function I(t,e){if(1&t&&(c.Zb(0,"li"),c.Zb(1,"strong"),c.Sc(2),c.Yb(),c.Sc(3),c.mc(4,"translate"),c.mc(5,"translate"),c.Yb()),2&t){var n=e.$implicit,r=c.lc(2);c.Gb(2),c.Uc("",r.stats.groups[n].name,":"),c.Gb(1),c.Xc(" ",r.userInGroupIds(n).length," ",c.nc(4,5,"active users")," (",r.stats.groups[n].userHandleCount," ",c.nc(5,7,"connections"),") ")}}function G(t,e){if(1&t&&(c.Zb(0,"div"),c.Zb(1,"p"),c.Sc(2),c.mc(3,"translate"),c.mc(4,"translate"),c.Yb(),c.Sc(5),c.mc(6,"translate"),c.Zb(7,"ul"),c.Qc(8,I,6,9,"li",3),c.Yb(),c.Yb()),2&t){var n=c.lc();c.Gb(2),c.Xc(" ",n.userIds().length," ",c.nc(3,6,"active users")," (",n.stats.activeUserHandles," ",c.nc(4,8,"connections"),") "),c.Gb(3),c.Uc(" ",c.nc(6,10,"Groups"),": "),c.Gb(3),c.tc("ngForOf",n.groupIds())}}var P,U=((P=function(){function t(e){_classCallCheck(this,t),this.countUsersStatisticService=e,this.token=null,this.stats=null}return _createClass(t,[{key:"countUsers",value:function(){var t,e=this;this.token||(t=_slicedToArray(this.countUsersStatisticService.countUsers(),2),this.token=t[0],t[1].pipe(Object(T.a)(100)).subscribe((function(t){e.stats=t})))}},{key:"stopCounting",value:function(){this.token&&(this.countUsersStatisticService.stopCounting(this.token),this.token=null,this.stats=null)}},{key:"userIds",value:function(){return Object.keys(this.stats.activeUsers).map((function(t){return+t}))}},{key:"groupIds",value:function(){return Object.keys(this.stats.groups).map((function(t){return+t}))}},{key:"userInGroupIds",value:function(t){return Object.keys(this.stats.groups[t].users).map((function(t){return+t}))}},{key:"ngOnDestroy",value:function(){this.stopCounting()}}]),t}()).\u0275fac=function(t){return new(t||P)(c.Tb(w))},P.\u0275cmp=c.Nb({type:P,selectors:[["os-count-users"]],decls:3,vars:3,consts:[["type","button","mat-stroked-button","",3,"click",4,"ngIf"],[4,"ngIf"],["type","button","mat-stroked-button","",3,"click"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(c.Qc(0,Y,3,3,"button",0),c.Qc(1,Z,3,3,"button",0),c.Qc(2,G,9,12,"div",1)),2&t&&(c.tc("ngIf",!e.token),c.Gb(1),c.tc("ngIf",e.token),c.Gb(1),c.tc("ngIf",e.stats))},directives:[s.t,_.b,s.s],pipes:[b.j],encapsulation:2}),P),R=n("3Y/2"),j=n("2aHC"),D=n("0Obk"),q=n("dRZP");function M(t,e){if(1&t){var n=c.ac();c.Zb(0,"button",2),c.hc("click",(function(){return c.Ic(n),c.lc().changeViewOfStatistics()})),c.Sc(1),c.mc(2,"translate"),c.Yb()}2&t&&(c.Gb(1),c.Uc(" ",c.nc(2,1,"Count completed requests to speak"),"\n"))}function N(t,e){if(1&t){var n=c.ac();c.Zb(0,"button",2),c.hc("click",(function(){return c.Ic(n),c.lc().changeViewOfStatistics()})),c.Sc(1),c.mc(2,"translate"),c.Yb()}2&t&&(c.Gb(1),c.Uc(" ",c.nc(2,1,"Stop counting"),"\n"))}function B(t,e){if(1&t&&(c.Zb(0,"div"),c.Sc(1),c.mc(2,"translate"),c.Yb()),2&t){var n=e.col;c.Gb(1),c.Uc(" ",c.nc(2,1,n.label)," ")}}function A(t,e){if(1&t&&(c.Zb(0,"div"),c.Sc(1),c.mc(2,"translate"),c.Yb()),2&t){var n=e.row;c.Gb(1),c.Uc(" ",c.nc(2,1,n.structureLevel)," ")}}function x(t,e){if(1&t&&(c.Zb(0,"div"),c.Sc(1),c.Yb()),2&t){var n=e.row,r=c.lc(2);c.Gb(1),c.Uc(" ",r.parseDuration(n.speakingTime)," ")}}function L(t,e){if(1&t&&(c.Zb(0,"div"),c.Sc(1),c.Yb()),2&t){var n=e.row;c.Gb(1),c.Uc(" ",n.finishedSpeakers.length," ")}}function F(t,e){if(1&t&&(c.Xb(0),c.Zb(1,"table",3),c.Zb(2,"tr"),c.Zb(3,"td"),c.Sc(4),c.mc(5,"translate"),c.Yb(),c.Zb(6,"td"),c.Sc(7),c.Yb(),c.Yb(),c.Zb(8,"tr"),c.Zb(9,"td"),c.Sc(10),c.mc(11,"translate"),c.Yb(),c.Zb(12,"td"),c.Sc(13),c.Yb(),c.Yb(),c.Zb(14,"tr"),c.Zb(15,"td"),c.Sc(16),c.mc(17,"translate"),c.Yb(),c.Zb(18,"td"),c.Sc(19),c.Yb(),c.Yb(),c.Yb(),c.Zb(20,"os-list-view-table",4),c.Qc(21,B,3,3,"div",5),c.Qc(22,A,3,3,"div",6),c.Qc(23,x,2,1,"div",6),c.Qc(24,L,2,1,"div",6),c.Yb(),c.Wb()),2&t){var n=c.lc();c.Gb(4),c.Tc(c.nc(5,17,"Number of all requests to speak")),c.Gb(3),c.Tc(n.numberOfWordRequests),c.Gb(3),c.Tc(c.nc(11,19,"Unique speakers")),c.Gb(3),c.Tc(n.numberOfUniqueSpeakers),c.Gb(3),c.Tc(c.nc(17,21,"Duration of all requests to speak")),c.Gb(3),c.Tc(n.totalDuration),c.Gb(1),c.tc("listObservable",n.statisticsByStructureLevelObservable)("columns",n.columnDefinition)("filterProps",n.filterProps)("vScrollFixed",45)("allowProjector",!1)("fullScreen",!1)("showListOfSpeakers",!1),c.Gb(1),c.tc("pblNgridHeaderCellDef","*"),c.Gb(1),c.tc("pblNgridCellDef","structureLevel"),c.Gb(1),c.tc("pblNgridCellDef","durationOfWordRequests"),c.Gb(1),c.tc("pblNgridCellDef","numberOfWordRequests")}}var W,H=((W=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,s,a){var o;return _classCallCheck(this,n),(o=e.call(this,t,r,i)).translate=r,o.losRepo=s,o.durationService=a,o.columnDefinition=[{prop:"structureLevel",width:"auto",label:"Structure level"},{prop:"durationOfWordRequests",width:"auto",label:o.translate.instant("Duration of requests to speak")},{prop:"numberOfWordRequests",width:"auto",label:o.translate.instant("Number of requests to speak")}],o.filterProps=["structureLevel"],o.speakingTimeAsNumber=0,o.uniqueSpeakers=[],o._numberOfWordRequests=0,o.statisticIsOpen=!1,o.relationSpeakingTimeStructureLevelSubject=new C.a([]),o}return _createClass(n,[{key:"changeViewOfStatistics",value:function(){this.statisticIsOpen=!this.statisticIsOpen,this.statisticIsOpen?this.startSubscription():this.cleanSubjects()}},{key:"pushNextState",value:function(){var t=this.losRepo.getSpeakingTimeStructureLevelRelation();t.sort((function(t,e){return e.finishedSpeakers.length-t.finishedSpeakers.length}));var e,n=_createForOfIteratorHelper(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.speakingTimeAsNumber+=r.speakingTime,this._numberOfWordRequests+=r.finishedSpeakers.length}}catch(i){n.e(i)}finally{n.f()}this.relationSpeakingTimeStructureLevelSubject.next(t),this.uniqueSpeakers=this.losRepo.getAllFirstContributions()}},{key:"parseDuration",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?this.durationService.durationToStringWithHours(t):this.durationService.durationToString(t,"m")}},{key:"startSubscription",value:function(){var t=this;this.subscriptions.push(this.losRepo.getViewModelListObservable().subscribe((function(){t.reset(),t.pushNextState()})))}},{key:"reset",value:function(){this._numberOfWordRequests=0,this.speakingTimeAsNumber=0}},{key:"totalDuration",get:function(){return this.parseDuration(this.speakingTimeAsNumber,!0)}},{key:"numberOfUniqueSpeakers",get:function(){return this.uniqueSpeakers.length}},{key:"numberOfWordRequests",get:function(){return this._numberOfWordRequests}},{key:"statisticsByStructureLevelObservable",get:function(){return this.relationSpeakingTimeStructureLevelSubject.asObservable()}},{key:"openedStatistics",get:function(){return this.statisticIsOpen}}]),n}(g.a)).\u0275fac=function(t){return new(t||W)(c.Tb(m.d),c.Tb(b.k),c.Tb(y.a),c.Tb(R.a),c.Tb(j.a))},W.\u0275cmp=c.Nb({type:W,selectors:[["os-user-statistics"]],features:[c.Db],decls:3,vars:3,consts:[["mat-stroked-button","",3,"click",4,"ngIf"],[4,"ngIf"],["mat-stroked-button","",3,"click"],[1,"user-statistics-table"],[1,"user-statistics-table--virtual-scroll",3,"listObservable","columns","filterProps","vScrollFixed","allowProjector","fullScreen","showListOfSpeakers"],[4,"pblNgridHeaderCellDef"],[4,"pblNgridCellDef"]],template:function(t,e){1&t&&(c.Qc(0,M,3,3,"button",0),c.Qc(1,N,3,3,"button",0),c.Qc(2,F,25,23,"ng-container",1)),2&t&&(c.tc("ngIf",!e.openedStatistics),c.Gb(1),c.tc("ngIf",e.openedStatistics),c.Gb(1),c.tc("ngIf",e.openedStatistics))},directives:[s.t,_.b,D.a,q.h,q.c],pipes:[b.j],styles:[".user-statistics-table{width:100%;margin:16px auto}.user-statistics-table,.user-statistics-table td,.user-statistics-table th{border-collapse:collapse;border-bottom-width:1px;border-bottom-style:solid}.user-statistics-table td,.user-statistics-table th{padding:8px 8px 8px 24px;text-align:left}.user-statistics-table--virtual-scroll{display:block;height:500px}.user-statistics-table--virtual-scroll .list-view-frame{height:100%}"],encapsulation:2,changeDetection:0}),W);function Q(t,e){if(1&t){var n=c.ac();c.Zb(0,"mat-card",3),c.Zb(1,"div"),c.Zb(2,"button",4),c.hc("click",(function(){return c.Ic(n),c.lc().printDS()})),c.Zb(3,"span"),c.Sc(4,"Print DS"),c.Yb(),c.Yb(),c.Yb(),c.Zb(5,"div"),c.Zb(6,"button",4),c.hc("click",(function(){return c.Ic(n),c.lc().getThisComponent()})),c.Zb(7,"span"),c.Sc(8,"Get this component"),c.Yb(),c.Yb(),c.Yb(),c.Yb()}}function V(t,e){1&t&&(c.Zb(0,"mat-card",7),c.Zb(1,"h2"),c.Sc(2),c.mc(3,"translate"),c.Yb(),c.Zb(4,"div"),c.Zb(5,"h3"),c.Sc(6),c.mc(7,"translate"),c.Yb(),c.Ub(8,"os-count-users"),c.Yb(),c.Zb(9,"div"),c.Zb(10,"h3"),c.Sc(11),c.mc(12,"translate"),c.Yb(),c.Ub(13,"os-user-statistics"),c.Yb(),c.Yb()),2&t&&(c.Gb(2),c.Tc(c.nc(3,3,"Statistics")),c.Gb(4),c.Tc(c.nc(7,5,"Active users")),c.Gb(5),c.Tc(c.nc(12,7,"Requests to speak")))}var X,J,K=((X=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,s,a,o,c,u){var l;return _classCallCheck(this,n),(l=e.call(this,t,r,i)).translate=r,l.openSlidesService=s,l.update=a,l.configRepo=o,l.operator=c,l.DS=u,l.isEditing=!1,l.legalNotice="",l.showDevTools=!1,l}return _createClass(n,[{key:"ngOnInit",value:function(){_get(_getPrototypeOf(n.prototype),"setTitle",this).call(this,this.translate.instant("Legal notice"))}},{key:"resetCache",value:function(){this.openSlidesService.reset()}},{key:"checkForUpdate",value:function(){this.update.checkForUpdate()}},{key:"saveChanges",value:function(){var t=this;this.configRepo.bulkUpdate([{key:"general_event_legal_notice",value:this.legalNotice}]).then((function(){return t.isEditing=!t.isEditing}),this.raiseError)}},{key:"canManage",value:function(){return this.operator.hasPerms(o.b.coreCanManageConfig)}},{key:"printDS",value:function(){this.DS.print()}},{key:"getThisComponent",value:function(){console.log(this)}}]),n}(g.a)).\u0275fac=function(t){return new(t||X)(c.Tb(m.d),c.Tb(b.k),c.Tb(y.a),c.Tb(d.a),c.Tb(v.a),c.Tb(h.a),c.Tb(o.a),c.Tb(p.a))},X.\u0275cmp=c.Nb({type:X,selectors:[["os-legal-notice"]],features:[c.Db],decls:25,vars:24,consts:[[3,"nav","goBack","editMode","hasMainButton","mainButtonIcon","mainActionTooltip","cancelEditEvent","mainEvent","saveEvent"],[1,"title-slot"],[3,"canBeEdited","isEditing","update"],[1,"os-card"],["type","button","mat-button","",3,"click"],["class","os-card",4,"ngIf"],["class","os-card spacer-bottom-60",4,"osPerms"],[1,"os-card","spacer-bottom-60"]],template:function(t,e){1&t&&(c.Zb(0,"os-head-bar",0),c.hc("cancelEditEvent",(function(){return e.isEditing=!e.isEditing}))("mainEvent",(function(){return e.isEditing=!e.isEditing}))("saveEvent",(function(){return e.saveChanges()})),c.mc(1,"translate"),c.Zb(2,"div",1),c.Zb(3,"h2"),c.Sc(4),c.mc(5,"translate"),c.Yb(),c.Yb(),c.Yb(),c.Zb(6,"os-legal-notice-content",2),c.hc("update",(function(t){return e.legalNotice=t})),c.Yb(),c.Zb(7,"mat-card",3),c.Zb(8,"div"),c.Zb(9,"button",4),c.hc("click",(function(){return e.resetCache()})),c.Zb(10,"span"),c.Sc(11),c.mc(12,"translate"),c.Yb(),c.Yb(),c.Yb(),c.Zb(13,"div"),c.Zb(14,"button",4),c.hc("click",(function(){return e.checkForUpdate()})),c.Zb(15,"span"),c.Sc(16),c.mc(17,"translate"),c.Yb(),c.Yb(),c.Yb(),c.Zb(18,"div"),c.Zb(19,"button",4),c.hc("click",(function(){return e.showDevTools=!e.showDevTools})),c.Zb(20,"span"),c.Sc(21),c.mc(22,"translate"),c.Yb(),c.Yb(),c.Yb(),c.Qc(23,Q,9,0,"mat-card",5),c.Yb(),c.Qc(24,V,14,9,"mat-card",6)),2&t&&(c.tc("nav",!1)("goBack",!0)("editMode",e.isEditing)("hasMainButton",e.canManage())("mainButtonIcon","edit")("mainActionTooltip",c.nc(1,14,"Edit")),c.Gb(4),c.Tc(c.nc(5,16,"Legal notice")),c.Gb(2),c.tc("canBeEdited",!0)("isEditing",e.isEditing),c.Gb(5),c.Tc(c.nc(12,18,"Reset cache")),c.Gb(5),c.Tc(c.nc(17,20,"Check for updates")),c.Gb(5),c.Tc(c.nc(22,22,"Show devtools")),c.Gb(2),c.tc("ngIf",e.showDevTools),c.Gb(1),c.tc("osPerms","users.can_manage"))},directives:[u.a,k.a,l.a,_.b,s.t,S.a,U,H],pipes:[b.j],encapsulation:2}),X),z=n("ij0B"),$=((J=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,s,a){var o;return _classCallCheck(this,n),(o=e.call(this,t,r,i)).translate=r,o.configRepo=s,o.operator=a,o.isEditing=!1,o.privacyProlicy="",o}return _createClass(n,[{key:"ngOnInit",value:function(){_get(_getPrototypeOf(n.prototype),"setTitle",this).call(this,this.translate.instant("Privacy policy"))}},{key:"saveChanges",value:function(){var t=this;this.configRepo.bulkUpdate([{key:"general_event_privacy_policy",value:this.privacyProlicy}]).then((function(){return t.isEditing=!t.isEditing}),this.raiseError)}},{key:"canManage",value:function(){return this.operator.hasPerms(o.b.coreCanManageConfig)}}]),n}(g.a)).\u0275fac=function(t){return new(t||J)(c.Tb(m.d),c.Tb(b.k),c.Tb(y.a),c.Tb(h.a),c.Tb(o.a))},J.\u0275cmp=c.Nb({type:J,selectors:[["os-privacy-policy"]],features:[c.Db],decls:7,vars:13,consts:[[3,"nav","goBack","editMode","hasMainButton","mainButtonIcon","mainActionTooltip","cancelEditEvent","mainEvent","saveEvent"],[1,"title-slot"],[3,"canBeEdited","isEditing","update"]],template:function(t,e){1&t&&(c.Zb(0,"os-head-bar",0),c.hc("cancelEditEvent",(function(){return e.isEditing=!e.isEditing}))("mainEvent",(function(){return e.isEditing=!e.isEditing}))("saveEvent",(function(){return e.saveChanges()})),c.mc(1,"translate"),c.Zb(2,"div",1),c.Zb(3,"h2"),c.Sc(4),c.mc(5,"translate"),c.Yb(),c.Yb(),c.Yb(),c.Zb(6,"os-privacy-policy-content",2),c.hc("update",(function(t){return e.privacyProlicy=t})),c.Yb()),2&t&&(c.tc("nav",!1)("goBack",!0)("editMode",e.isEditing)("hasMainButton",e.canManage())("mainButtonIcon","edit")("mainActionTooltip",c.nc(1,9,"Edit")),c.Gb(4),c.Tc(c.nc(5,11,"Privacy Policy")),c.Gb(2),c.tc("canBeEdited",!0)("isEditing",e.isEditing))},directives:[u.a,z.a],pipes:[b.j],styles:[""]}),J),tt=n("3Pt+"),et=n("+KbT"),nt=n("kmnG"),rt=n("qFsG"),it=n("fB2i"),st=n("7jBc");function at(t,e){if(1&t&&(c.Xb(0),c.Zb(1,"div",4),c.Zb(2,"h1"),c.Sc(3),c.mc(4,"translate"),c.Yb(),c.Ub(5,"div",5),c.mc(6,"trust"),c.Yb(),c.Wb()),2&t){var n=c.lc();c.Gb(3),c.Tc(c.nc(4,2,n.startContent.general_event_welcome_title)),c.Gb(2),c.tc("innerHTML",c.oc(6,4,n.startContent.general_event_welcome_text,"html"),c.Jc)}}function ot(t,e){if(1&t&&(c.Xb(0),c.Zb(1,"form",6),c.Zb(2,"mat-form-field"),c.Ub(3,"input",7),c.mc(4,"translate"),c.Zb(5,"mat-error"),c.Sc(6),c.mc(7,"translate"),c.Yb(),c.Yb(),c.Ub(8,"editor",8),c.Yb(),c.Wb()),2&t){var n=c.lc();c.Gb(1),c.tc("formGroup",n.startForm),c.Gb(2),c.uc("placeholder",c.nc(4,4,"Front page title")),c.Gb(3),c.Tc(c.nc(7,6,"The title is required")),c.Gb(2),c.tc("init",n.tinyMceSettings)}}var ct,ut,lt,bt=[{path:"",component:(ct=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,s,a,o,c){var u;return _classCallCheck(this,n),(u=e.call(this,t,r,i)).configService=s,u.configRepo=a,u.fb=o,u.operator=c,u.isEditing=!1,u.startContent={general_event_welcome_title:"",general_event_welcome_text:""},u.startForm=u.fb.group({general_event_welcome_title:["",tt.G.required],general_event_welcome_text:""}),u}return _createClass(n,[{key:"ngOnInit",value:function(){var t=this;_get(_getPrototypeOf(n.prototype),"setTitle",this).call(this,"Home"),this.configService.get("general_event_welcome_title").subscribe((function(e){return t.startContent.general_event_welcome_title=e})),this.configService.get("general_event_welcome_text").subscribe((function(e){t.startContent.general_event_welcome_text=t.translate.instant(e)}))}},{key:"editStartPage",value:function(){var t=this;Object.keys(this.startForm.controls).forEach((function(e){t.startForm.patchValue(_defineProperty({},e,t.startContent[e]))})),this.isEditing=!0}},{key:"saveChanges",value:function(){var t=this;this.configRepo.bulkUpdate(Object.keys(this.startForm.controls).map((function(e){return{key:e,value:t.startForm.value[e]}}))).then((function(){return t.isEditing=!t.isEditing}),this.raiseError)}},{key:"canManage",value:function(){return this.operator.hasPerms(o.b.coreCanManageConfig)}}]),n}(g.a),ct.\u0275fac=function(t){return new(t||ct)(c.Tb(m.d),c.Tb(b.k),c.Tb(y.a),c.Tb(et.a),c.Tb(h.a),c.Tb(tt.f),c.Tb(o.a))},ct.\u0275cmp=c.Nb({type:ct,selectors:[["os-start"]],features:[c.Db],decls:8,vars:10,consts:[[3,"hasMainButton","editMode","mainButtonIcon","isSaveButtonEnabled","mainEvent","saveEvent","cancelEditEvent"],[1,"title-slot"],[1,"spacer-bottom-60",3,"ngClass"],[4,"ngIf"],[1,"app-content"],[3,"innerHTML"],[3,"formGroup"],["matInput","","formControlName","general_event_welcome_title","required","",3,"placeholder"],["formControlName","general_event_welcome_text",3,"init"]],template:function(t,e){1&t&&(c.Zb(0,"os-head-bar",0),c.hc("mainEvent",(function(){return e.editStartPage()}))("saveEvent",(function(){return e.saveChanges()}))("cancelEditEvent",(function(){return e.isEditing=!e.isEditing})),c.Zb(1,"div",1),c.Zb(2,"h2"),c.Sc(3),c.mc(4,"translate"),c.Yb(),c.Yb(),c.Yb(),c.Zb(5,"mat-card",2),c.Qc(6,at,7,7,"ng-container",3),c.Qc(7,ot,9,8,"ng-container",3),c.Yb()),2&t&&(c.tc("hasMainButton",e.canManage())("editMode",e.isEditing)("mainButtonIcon","edit")("isSaveButtonEnabled",e.startForm.valid),c.Gb(3),c.Tc(c.nc(4,8,"Home")),c.Gb(2),c.tc("ngClass",e.isEditing?"os-form-card":"os-card"),c.Gb(1),c.tc("ngIf",!e.isEditing),c.Gb(1),c.tc("ngIf",e.isEditing))},directives:[u.a,l.a,s.q,s.t,tt.I,tt.t,tt.k,nt.c,rt.b,tt.c,tt.s,tt.i,tt.D,nt.b,it.a],pipes:[b.j,st.a],styles:[".app-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}"]}),ct),pathMatch:"full",data:{basePerm:o.b.coreCanSeeFrontpage}},{path:"legalnotice",component:K},{path:"privacypolicy",component:$},{path:"error",component:f}],ft=((ut=function t(){_classCallCheck(this,t)}).\u0275mod=c.Rb({type:ut}),ut.\u0275inj=c.Qb({factory:function(t){return new(t||ut)},imports:[[a.j.forChild(bt)],a.j]}),ut),pt=n("PCNd"),dt=((lt=function t(){_classCallCheck(this,t)}).\u0275mod=c.Rb({type:lt}),lt.\u0275inj=c.Qb({factory:function(t){return new(t||lt)},imports:[[s.c,ft,pt.a]]}),lt)}}]);