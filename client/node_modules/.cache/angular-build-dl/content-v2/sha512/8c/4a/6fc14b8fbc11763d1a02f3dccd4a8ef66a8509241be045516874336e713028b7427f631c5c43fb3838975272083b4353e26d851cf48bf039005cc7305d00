(window.webpackJsonp=window.webpackJsonp||[]).push([[9,38],{"76GY":function(t,e,o){"use strict";o.d(e,"a",(function(){return v}));var n=o("ykax"),c=o("fXoL"),l=o("ofXK"),i=o("vYAO"),a=o("iCsr"),s=o("sYmb"),r=o("j7f2"),b=o("6ako"),u=o("QUb3");function p(t,e){if(1&t&&(c.Zb(0,"os-icon-container",9),c.Sc(1),c.mc(2,"translate"),c.mc(3,"pollKeyVerbose"),c.Yb()),2&t){const t=c.lc().$implicit,e=c.lc(2);c.tc("icon",t.value[0].icon)("size",e.iconSize),c.Gb(1),c.Uc(" ",c.nc(2,3,c.nc(3,5,t.votingOption))," ")}}function d(t,e){if(1&t&&(c.Zb(0,"span"),c.Sc(1),c.mc(2,"translate"),c.mc(3,"pollKeyVerbose"),c.Yb()),2&t){const t=c.lc().$implicit;c.Gb(1),c.Uc(" ",c.nc(2,1,c.nc(3,3,t.votingOption))," ")}}function f(t,e){if(1&t&&(c.Zb(0,"span"),c.Sc(1),c.mc(2,"pollPercentBase"),c.Yb()),2&t){const t=c.lc().$implicit,e=c.lc(2);c.Gb(1),c.Uc(" ",c.oc(2,1,t.value[0].amount,e.poll)," ")}}function m(t,e){if(1&t&&(c.Zb(0,"tr"),c.Zb(1,"td"),c.Qc(2,p,4,7,"os-icon-container",6),c.Qc(3,d,4,5,"span",7),c.Yb(),c.Zb(4,"td",8),c.Qc(5,f,3,4,"span",7),c.Yb(),c.Zb(6,"td",8),c.Sc(7),c.mc(8,"parsePollNumber"),c.Yb(),c.Yb()),2&t){const t=e.$implicit;c.Ib(t.votingOption),c.Gb(2),c.tc("ngIf",t.value[0].icon),c.Gb(1),c.tc("ngIf",!t.value[0].icon),c.Gb(2),c.tc("ngIf",t.value[0].showPercent),c.Gb(2),c.Uc(" ",c.nc(8,6,t.value[0].amount)," ")}}function h(t,e){if(1&t&&(c.Zb(0,"div",10),c.Ub(1,"os-charts",11),c.mc(2,"async"),c.Yb()),2&t){const t=c.lc(2);c.Gb(1),c.tc("data",c.nc(2,1,t.chartData))}}function g(t,e){if(1&t&&(c.Zb(0,"div",1),c.Zb(1,"table",2),c.Zb(2,"tbody"),c.Zb(3,"tr"),c.Ub(4,"th"),c.Zb(5,"th",3),c.Sc(6),c.mc(7,"translate"),c.Yb(),c.Yb(),c.Qc(8,m,9,8,"tr",4),c.Yb(),c.Yb(),c.Qc(9,h,3,3,"div",5),c.Yb()),2&t){const t=c.lc();c.Gb(6),c.Tc(c.nc(7,3,"Votes")),c.Gb(2),c.tc("ngForOf",t.getTableData()),c.Gb(1),c.tc("ngIf",t.showChart)}}let v=(()=>{class t{constructor(t){this.motionPollService=t,this.iconSize="large"}get hasVotes(){return this.poll&&!!this.poll.options}ngOnInit(){}getTableData(){return this.motionPollService.generateTableData(this.poll)}get showChart(){return this.motionPollService.showChart(this.poll)&&this.chartData&&!!this.chartData.value}}return t.\u0275fac=function(e){return new(e||t)(c.Tb(n.a))},t.\u0275cmp=c.Nb({type:t,selectors:[["os-motion-poll-detail-content"]],inputs:{poll:"poll",chartData:"chartData",iconSize:"iconSize"},decls:1,vars:1,consts:[["class","result-wrapper",4,"ngIf"],[1,"result-wrapper"],[1,"result-table"],["colspan","2"],[3,"class",4,"ngFor","ngForOf"],["class","doughnut-chart",4,"ngIf"],[3,"icon","size",4,"ngIf"],[4,"ngIf"],[1,"result-cell-definition"],[3,"icon","size"],[1,"doughnut-chart"],["type","doughnut",3,"data"]],template:function(t,e){1&t&&c.Qc(0,g,10,5,"div",0),2&t&&c.tc("ngIf",e.hasVotes)},directives:[l.t,l.s,i.a,a.a],pipes:[s.j,r.a,b.a,u.a,l.b],styles:[".yes[_ngcontent-%COMP%]{color:#4caf50}.no[_ngcontent-%COMP%]{color:#cc6c5b}.abstain[_ngcontent-%COMP%]{color:#a6a6a6}.voted-yes[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.voted-no[_ngcontent-%COMP%]{background-color:#cc6c5b;color:#fff}.voted-abstain[_ngcontent-%COMP%]{background-color:#a6a6a6;color:#fff}.start-poll-button[_ngcontent-%COMP%]{color:#4caf50}.stop-poll-button[_ngcontent-%COMP%]{color:#ff5252}.publish-poll-button[_ngcontent-%COMP%]{color:#e6b100}.result-wrapper[_ngcontent-%COMP%]{display:grid;grid-gap:2em;margin:2em;grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:right;font-weight:400}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:48px;border-bottom:none!important}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .result-cell-definition[_ngcontent-%COMP%]{text-align:right}.result-wrapper[_ngcontent-%COMP%]   .doughnut-chart[_ngcontent-%COMP%]{display:block}"]}),t})()},DNKu:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var n=o("mrSG"),c=o("TG9O"),l=o("qnZ9"),i=o("Izkr"),a=o("fXoL"),s=o("0IaG");let r=(()=>{class t{constructor(t,e){this.dialog=t,this.mapper=e}openDialog(t){return Object(n.a)(this,void 0,void 0,(function*(){const e=this.dialog.open(this.dialogComponent,Object.assign({data:t},i.c)),o=yield e.afterClosed().toPromise();if(o){const e=this.mapper.getRepository(t.collectionString);if(t.poll){let n=o;t.state!==l.e.Created&&(n={title:o.title,onehundred_percent_base:o.onehundred_percent_base,majority_method:o.majority_method,description:o.description},t.type===l.f.Analog&&(n=Object.assign(Object.assign({},n),{votes:o.votes,publish_immediately:o.publish_immediately}))),yield e.patch(n,t)}else yield e.create(o)}}))}}return t.\u0275fac=function(e){return new(e||t)(a.dc(s.b),a.dc(c.a))},t.\u0275prov=a.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},SHqy:function(t,e,o){"use strict";o.d(e,"a",(function(){return s}));var n=o("TG9O"),c=o("DNKu"),l=o("cMzF"),i=o("fXoL"),a=o("0IaG");let s=(()=>{class t extends c.a{constructor(t,e){super(t,e),this.dialogComponent=l.a}}return t.\u0275fac=function(e){return new(e||t)(i.dc(a.b),i.dc(n.a))},t.\u0275prov=i.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},bVYn:function(t,e,o){"use strict";o.r(e),o.d(e,"PollsModule",(function(){return _}));var n=o("ofXK"),c=o("tyNb"),l=o("AqIO"),i=o("M0z7"),a=o("wL0i"),s=o("D/ll"),r=o("+8Rz"),b=o("qnZ9"),u=o("fXoL"),p=o("sYmb");let d=(()=>{class t extends r.a{constructor(t,e,o){super(t,e),this.translate=o,this.storageKey="PollList"}preFilter(t){return t.filter(t=>!t.isAnalog)}getFilterDefinitions(){return[{property:"state",label:this.translate.instant("State"),options:[{condition:b.e.Created,label:this.translate.instant("created")},{condition:b.e.Started,label:this.translate.instant("started")},{condition:b.e.Finished,label:this.translate.instant("finished (unpublished)")},{condition:b.e.Published,label:this.translate.instant("published")}]},{property:"hasVote",label:this.translate.instant("Votings"),options:[{condition:!1,label:this.translate.instant("Voting is currently in progress.")},{condition:!0,label:this.translate.instant("You have already voted.")}]}]}}return t.\u0275fac=function(e){return new(e||t)(u.dc(l.a),u.dc(s.a),u.dc(p.k))},t.\u0275prov=u.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=o("PoOO"),m=o("jhN1"),h=o("dNgK"),g=o("mksl"),v=o("0Obk"),S=o("dRZP"),y=o("NFeN"),G=o("Qu3c");function Y(t,e){if(1&t&&u.Ub(0,"a",5),2&t){const t=u.lc().row;u.tc("routerLink",t.parentLink)}}function P(t,e){if(1&t&&(u.Zb(0,"div",3),u.Qc(1,Y,1,1,"a",4),u.Zb(2,"span"),u.Sc(3),u.Yb(),u.Yb()),2&t){const t=e.row,o=u.lc();u.Gb(1),u.tc("ngIf",!o.isMultiSelect),u.Gb(2),u.Tc(t.title)}}function Z(t,e){if(1&t&&u.Ub(0,"a",5),2&t){const t=u.lc().row;u.tc("routerLink",t.parentLink)}}function w(t,e){if(1&t&&(u.Zb(0,"div",3),u.Qc(1,Z,1,1,"a",4),u.Zb(2,"span"),u.Sc(3),u.Yb(),u.Yb()),2&t){const t=e.row,o=u.lc();u.Gb(1),u.tc("ngIf",!o.isMultiSelect),u.Gb(2),u.Tc(t.getContentObject().getListTitle())}}function T(t,e){if(1&t&&u.Ub(0,"a",5),2&t){const t=u.lc().row;u.tc("routerLink",t.parentLink)}}function D(t,e){if(1&t&&(u.Zb(0,"div",3),u.Qc(1,T,1,1,"a",4),u.Zb(2,"span"),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb()),2&t){const t=e.row,o=u.lc();u.Gb(1),u.tc("ngIf",!o.isMultiSelect),u.Gb(2),u.Tc(u.nc(4,2,t.stateVerbose))}}function O(t,e){1&t&&(u.Zb(0,"mat-icon",8),u.mc(1,"translate"),u.Sc(2," check_circle "),u.Yb()),2&t&&u.uc("matTooltip",u.nc(1,1,"You have already voted."))}function C(t,e){1&t&&(u.Zb(0,"mat-icon",9),u.mc(1,"translate"),u.Sc(2," warning "),u.Yb()),2&t&&u.uc("matTooltip",u.nc(1,1,"Voting is currently in progress."))}function k(t,e){if(1&t&&(u.Zb(0,"div",3),u.Qc(1,O,3,3,"mat-icon",6),u.Qc(2,C,3,3,"mat-icon",7),u.Yb()),2&t){const t=e.row;u.Gb(1),u.tc("ngIf",t.hasVote),u.Gb(1),u.tc("ngIf",!t.hasVote&&null!==t.hasVote)}}const V=[{path:"",component:(()=>{class t extends a.a{constructor(t,e,o,n,c,l,i){super(c,l,i,n),this.polls=t,this.filterService=e,this.votingService=o,this.storage=n,this.tableColumnDefinition=[{prop:"title",width:"auto"},{prop:"classType",width:"auto"},{prop:"state",width:"auto"},{prop:"votability",width:"25px"}],this.filterProps=["title","state"],super.setTitle("List of electronic votes")}}return t.\u0275fac=function(e){return new(e||t)(u.Tb(f.a),u.Tb(d),u.Tb(i.b),u.Tb(l.a),u.Tb(m.d),u.Tb(p.k),u.Tb(h.a))},t.\u0275cmp=u.Nb({type:t,selectors:[["os-poll-list"]],features:[u.Db],decls:9,vars:12,consts:[[1,"title-slot"],["listStorageKey","polls",3,"listObservableProvider","vScrollFixed","columns","filterProps","filterService"],["class","cell-slot fill",4,"pblNgridCellDef"],[1,"cell-slot","fill"],["class","detail-link",3,"routerLink",4,"ngIf"],[1,"detail-link",3,"routerLink"],["color","accent",3,"matTooltip",4,"ngIf"],["color","warn",3,"matTooltip",4,"ngIf"],["color","accent",3,"matTooltip"],["color","warn",3,"matTooltip"]],template:function(t,e){1&t&&(u.Zb(0,"os-head-bar"),u.Zb(1,"div",0),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Yb(),u.Zb(4,"os-list-view-table",1),u.Qc(5,P,4,2,"div",2),u.Qc(6,w,4,2,"div",2),u.Qc(7,D,5,4,"div",2),u.Qc(8,k,3,2,"div",2),u.Yb()),2&t&&(u.Gb(2),u.Tc(u.nc(3,10,"List of electronic votes")),u.Gb(2),u.tc("listObservableProvider",e.polls)("vScrollFixed",64)("columns",e.tableColumnDefinition)("filterProps",e.filterProps)("filterService",e.filterService),u.Gb(1),u.tc("pblNgridCellDef","title"),u.Gb(1),u.tc("pblNgridCellDef","classType"),u.Gb(1),u.tc("pblNgridCellDef","state"),u.Gb(1),u.tc("pblNgridCellDef","votability"))},directives:[g.a,v.a,S.c,n.t,c.i,y.a,G.c],pipes:[p.j],styles:[""]}),t})(),pathMatch:"full"}];let I=(()=>{class t{}return t.\u0275mod=u.Rb({type:t}),t.\u0275inj=u.Qb({factory:function(e){return new(e||t)},imports:[[c.j.forChild(V)],c.j]}),t})();var M=o("PCNd");let _=(()=>{class t{}return t.\u0275mod=u.Rb({type:t}),t.\u0275inj=u.Qb({factory:function(e){return new(e||t)},imports:[[n.c,I,M.a]]}),t})()},cMzF:function(t,e,o){"use strict";o.d(e,"a",(function(){return P}));var n=o("3Pt+"),c=o("0IaG"),l=o("qnZ9"),i=o("ykax"),a=o("b1ae"),s=o("5NaA"),r=o("8fOK"),b=o("fXoL"),u=o("jhN1"),p=o("sYmb"),d=o("dNgK"),f=o("ofXK"),m=o("bTqV"),h=o("acT5"),g=o("bSwM"),v=o("kmnG");const S=["pollForm"];function y(t,e){1&t&&(b.Zb(0,"mat-error"),b.Sc(1),b.mc(2,"translate"),b.Yb()),2&t&&(b.Gb(1),b.Uc(" ",b.nc(2,1,"Error in form field."),""))}function G(t,e){if(1&t){const t=b.ac();b.Zb(0,"div"),b.Zb(1,"mat-checkbox",14),b.hc("ngModelChange",(function(e){return b.Ic(t),b.lc(2).publishImmediately=e}))("change",(function(e){return b.Ic(t),b.lc(2).publishStateChanged(e.checked)})),b.Zb(2,"span"),b.Sc(3),b.mc(4,"translate"),b.Yb(),b.Yb(),b.Qc(5,y,3,3,"mat-error",2),b.Yb()}if(2&t){const t=b.lc(2);b.Gb(1),b.tc("ngModel",t.publishImmediately),b.Gb(2),b.Tc(b.nc(4,3,"Publish immediately")),b.Gb(2),b.tc("ngIf",!t.dialogVoteForm.valid)}}function Y(t,e){if(1&t&&(b.Xb(0),b.Zb(1,"div",6),b.Zb(2,"form",7),b.Ub(3,"os-check-input",8),b.mc(4,"translate"),b.mc(5,"translate"),b.Ub(6,"os-check-input",9),b.mc(7,"translate"),b.mc(8,"translate"),b.Ub(9,"os-check-input",10),b.mc(10,"translate"),b.mc(11,"translate"),b.Ub(12,"os-check-input",11),b.mc(13,"translate"),b.Ub(14,"os-check-input",12),b.mc(15,"translate"),b.Ub(16,"os-check-input",13),b.mc(17,"translate"),b.Yb(),b.Yb(),b.Qc(18,G,6,5,"div",2),b.Wb()),2&t){const t=b.lc();b.Gb(2),b.tc("formGroup",t.dialogVoteForm),b.Gb(1),b.tc("placeholder",b.nc(4,14,"Yes"))("checkboxValue",-1)("checkboxLabel",b.nc(5,16,"majority")),b.Gb(3),b.tc("placeholder",b.nc(7,18,"No"))("checkboxValue",-1)("checkboxLabel",b.nc(8,20,"majority")),b.Gb(3),b.tc("placeholder",b.nc(10,22,"Abstain"))("checkboxValue",-1)("checkboxLabel",b.nc(11,24,"majority")),b.Gb(3),b.tc("placeholder",b.nc(13,26,"Valid votes")),b.Gb(2),b.tc("placeholder",b.nc(15,28,"Invalid votes")),b.Gb(2),b.tc("placeholder",b.nc(17,30,"Total votes cast")),b.Gb(2),b.tc("ngIf",!t.pollData.isPublished)}}let P=(()=>{class t extends a.a{constructor(t,e,o,n,c,l,i){super(t,e,o,c),this.motionPollService=n,this.dialogRef=c,this.formBuilder=l,this.pollData=i,this.PercentBaseVerbose=r.b}ngOnInit(){this.createDialog()}updateDialogVoteForm(t){if(this.dialogVoteForm){const e=this.undoReplaceEmptyValues({Y:t.options[0].yes,N:t.options[0].no,A:t.options[0].abstain,votesvalid:t.votesvalid,votesinvalid:t.votesinvalid,votescast:t.votescast});this.dialogVoteForm.setValue(e)}}createDialog(){this.dialogVoteForm=this.formBuilder.group({Y:["",[n.G.min(l.b)]],N:["",[n.G.min(l.b)]],A:["",[n.G.min(l.b)]],votesvalid:["",[n.G.min(l.b)]],votesinvalid:["",[n.G.min(l.b)]],votescast:["",[n.G.min(l.b)]]}),this.pollData&&this.pollData.poll&&this.updateDialogVoteForm(this.pollData)}}return t.\u0275fac=function(e){return new(e||t)(b.Tb(u.d),b.Tb(p.k),b.Tb(d.a),b.Tb(i.a),b.Tb(c.h),b.Tb(n.f),b.Tb(c.a))},t.\u0275cmp=b.Nb({type:t,selectors:[["os-motion-poll-dialog"]],viewQuery:function(t,e){var o;1&t&&b.Zc(S,!0),2&t&&b.Dc(o=b.ic())&&(e.pollForm=o.first)},features:[b.Db],decls:12,vars:12,consts:[[3,"data","pollService","percentBases"],["pollForm",""],[4,"ngIf"],["mat-dialog-actions",""],["mat-button","",3,"disabled","click"],["mat-button","",3,"mat-dialog-close"],["mat-dialog-content","",1,"os-form-card-mobile"],[3,"formGroup"],["inputType","number","formControlName","Y",3,"placeholder","checkboxValue","checkboxLabel"],["inputType","number","formControlName","N",3,"placeholder","checkboxValue","checkboxLabel"],["inputType","number","formControlName","A",3,"placeholder","checkboxValue","checkboxLabel"],["inputType","number","formControlName","votesvalid",3,"placeholder"],["inputType","number","formControlName","votesinvalid",3,"placeholder"],["inputType","number","formControlName","votescast",3,"placeholder"],[3,"ngModel","ngModelChange","change"]],template:function(t,e){if(1&t&&(b.Ub(0,"os-poll-form",0,1),b.Qc(2,Y,19,32,"ng-container",2),b.Zb(3,"div",3),b.Zb(4,"button",4),b.hc("click",(function(){return e.submitPoll()})),b.Zb(5,"span"),b.Sc(6),b.mc(7,"translate"),b.Yb(),b.Yb(),b.Zb(8,"button",5),b.Zb(9,"span"),b.Sc(10),b.mc(11,"translate"),b.Yb(),b.Yb(),b.Yb()),2&t){const t=b.Ec(1);b.tc("data",e.pollData)("pollService",e.motionPollService)("percentBases",e.PercentBaseVerbose),b.Gb(2),b.tc("ngIf","analog"===t.contentForm.get("type").value),b.Gb(2),b.tc("disabled",t.contentForm.invalid||e.dialogVoteForm.invalid),b.Gb(2),b.Tc(b.nc(7,8,"Save")),b.Gb(2),b.tc("mat-dialog-close",!1),b.Gb(2),b.Tc(b.nc(11,10,"Cancel"))}},directives:[s.a,f.t,c.c,m.b,c.d,c.f,n.I,n.t,n.k,h.a,n.s,n.i,g.a,n.v,v.b],pipes:[p.j],styles:[""]}),t})()},g4jF:function(t,e,o){"use strict";o.d(e,"a",(function(){return u}));var n=o("mrSG"),c=o("2Vo4"),l=o("Cfvw"),i=o("pLZG"),a=o("lJxs"),s=o("g96W"),r=o("mV3u"),b=o("fXoL");let u=(()=>{class t extends r.a{constructor(t,e,o,n,l,i,a,r,b,u){super(t,e,o),this.translate=e,this.repo=n,this.route=l,this.groupRepo=i,this.promptService=a,this.pollDialog=r,this.pollService=b,this.votesRepo=u,this.userGroups=[],this.groupObservable=null,this.voteOptionStyle={Y:{css:"yes",icon:"thumb_up"},N:{css:"no",icon:"thumb_down"},A:{css:"abstain",icon:"trip_origin"}},this.poll=null,this.labels=[],this.chartDataSubject=new c.a(null),this.optionsLoaded=new s.a,this.setup()}setup(){return Object(n.a)(this,void 0,void 0,(function*(){yield this.optionsLoaded,this.votesRepo.getViewModelListObservable().pipe(Object(i.a)(()=>this.poll&&this.canSeeVotes),Object(a.a)(t=>t.filter(t=>t.option.poll_id===this.poll.id)),Object(i.a)(t=>!!t.length)).subscribe(()=>{this.createVotesData()})}))}ngOnInit(){this.findComponentById(),this.groupObservable=this.groupRepo.getViewModelListObservable(),this.subscriptions.push(this.groupRepo.getViewModelListObservable().subscribe(t=>this.userGroups=t))}deletePoll(){return Object(n.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Are you sure you want to delete this vote?");(yield this.promptService.open(t))&&this.repo.delete(this.poll).then(()=>this.onDeleted(),this.raiseError)}))}pseudoanonymizePoll(){return Object(n.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Are you sure you want to anonymize all votes? This cannot be undone.");(yield this.promptService.open(t))&&this.repo.pseudoanonymize(this.poll).catch(this.raiseError)}))}openDialog(t){this.pollDialog.openDialog(t)}onStateChanged(){}get canSeeVotes(){return this.hasPerms&&this.poll.isFinished||this.poll.isPublished}setVotesData(t){this.votesDataObservable=t.every(t=>!t.user)?null:Object(l.a)([t])}initChartData(){this.chartDataSubject.next(this.pollService.generateChartData(this.poll))}findComponentById(){const t=this.route.snapshot.params;t&&t.id&&this.subscriptions.push(this.repo.getViewModelObservable(t.id).subscribe(t=>{t&&(this.poll=t,this.createVotesData(),this.initChartData(),this.optionsLoaded.resolve())}))}}return t.\u0275fac=function(t){b.gc()},t.\u0275dir=b.Ob({type:t,features:[b.Db]}),t})()},tSYa:function(t,e,o){"use strict";o.r(e),o.d(e,"MotionPollModule",(function(){return ct}));var n=o("ofXK"),c=o("PCNd"),l=o("bVYn"),i=o("tyNb"),a=o("OwvW"),s=o("acQf"),r=o("chQs"),b=o("R+Vs"),u=o("+KbT"),p=o("F48D"),d=o("SHqy"),f=o("ykax"),m=o("g4jF"),h=o("fXoL"),g=o("jhN1"),v=o("sYmb"),S=o("dNgK"),y=o("mksl"),G=o("3Xi6"),Y=o("Wp6s"),P=o("STbY"),Z=o("f0Cb"),w=o("bTqV"),T=o("NFeN"),D=o("76GY"),O=o("0Obk"),C=o("dRZP"),k=o("Tp2j");function V(t,e){if(1&t&&(h.Zb(0,"h2"),h.Sc(1),h.mc(2,"translate"),h.Yb()),2&t){const t=h.lc();h.Gb(1),h.Vc("",h.nc(2,2,"Motion")," ",t.poll.motion.identifierOrTitle,"")}}function I(t,e){if(1&t&&(h.Zb(0,"div",11),h.Zb(1,"button",12),h.Zb(2,"mat-icon"),h.Sc(3,"more_vert"),h.Yb(),h.Yb(),h.Yb()),2&t){h.lc();const t=h.Ec(9);h.Gb(1),h.tc("matMenuTriggerFor",t)}}function M(t,e){if(1&t&&(h.Zb(0,"span"),h.Sc(1),h.mc(2,"translate"),h.Yb()),2&t){const t=h.lc(3);h.Gb(1),h.Uc(" ",h.nc(2,1,t.poll.typeVerbose)," \xb7 ")}}function _(t,e){1&t&&(h.Zb(0,"p"),h.Sc(1),h.mc(2,"translate"),h.Yb()),2&t&&(h.Gb(1),h.Tc(h.nc(2,1,"No results yet.")))}function Q(t,e){if(1&t&&(h.Zb(0,"div"),h.Sc(1),h.mc(2,"translate"),h.Yb()),2&t){const t=e.col;h.Gb(1),h.Uc(" ",h.nc(2,1,t.label)," ")}}function N(t,e){if(1&t&&(h.Zb(0,"div"),h.Sc(1),h.Yb()),2&t){const t=h.lc(2).row;h.Gb(1),h.Uc(" ",t.user.getLevelAndNumber()," ")}}function j(t,e){if(1&t&&(h.Zb(0,"div"),h.Sc(1),h.mc(2,"translate"),h.Yb()),2&t){const t=h.lc(2).row;h.Gb(1),h.Vc(" ",h.nc(2,2,"Vote weight"),": ",t.user.vote_weight," ")}}function x(t,e){if(1&t&&(h.Zb(0,"div"),h.Sc(1),h.Zb(2,"div",22),h.Qc(3,N,2,1,"div",2),h.Qc(4,j,3,4,"div",2),h.Yb(),h.Yb()),2&t){const t=h.lc().row,e=h.lc(6);h.Gb(1),h.Uc(" ",t.user.getShortName()," "),h.Gb(2),h.tc("ngIf",t.user.getLevelAndNumber()),h.Gb(1),h.tc("ngIf",e.isVoteWeightActive)}}function F(t,e){1&t&&(h.Zb(0,"div"),h.Sc(1),h.mc(2,"translate"),h.Yb()),2&t&&(h.Gb(1),h.Tc(h.nc(2,1,"Anonymous")))}function L(t,e){if(1&t&&(h.Zb(0,"div"),h.Qc(1,x,5,3,"div",2),h.Qc(2,F,3,3,"div",2),h.Yb()),2&t){const t=e.row;h.Gb(1),h.tc("ngIf",t.user),h.Gb(1),h.tc("ngIf",!t.user)}}function U(t,e){if(1&t&&(h.Zb(0,"div",23),h.Zb(1,"div",24),h.Zb(2,"mat-icon"),h.Sc(3),h.Yb(),h.Yb(),h.Zb(4,"div"),h.Sc(5),h.mc(6,"translate"),h.Yb(),h.Yb()),2&t){const t=e.row,o=h.lc(6);h.Gb(1),h.tc("ngClass",o.voteOptionStyle[t.value].css),h.Gb(2),h.Tc(o.voteOptionStyle[t.value].icon),h.Gb(2),h.Tc(h.nc(6,3,t.valueVerbose))}}function A(t,e){if(1&t&&(h.Zb(0,"os-list-view-table",18),h.Qc(1,Q,3,3,"div",19),h.Qc(2,L,3,2,"div",20),h.Qc(3,U,7,5,"div",21),h.Yb()),2&t){const t=h.lc(5);h.tc("listObservable",t.votesDataObservable)("columns",t.columnDefinition)("filterProps",t.filterProps)("allowProjector",!1)("fullScreen",!0)("vScrollFixed",-1),h.Gb(1),h.tc("pblNgridHeaderCellDef","*"),h.Gb(1),h.tc("pblNgridCellDef","user"),h.Gb(1),h.tc("pblNgridCellDef","vote")}}function z(t,e){1&t&&(h.Zb(0,"div"),h.Sc(1),h.mc(2,"translate"),h.Yb()),2&t&&(h.Gb(1),h.Uc(" ",h.nc(2,1,"The individual votes were anonymized.")," "))}function R(t,e){if(1&t&&(h.Zb(0,"div",16),h.Zb(1,"h2"),h.Sc(2),h.mc(3,"translate"),h.Yb(),h.Qc(4,A,4,9,"os-list-view-table",17),h.Qc(5,z,3,3,"div",2),h.Yb()),2&t){const t=h.lc(4);h.Gb(2),h.Tc(h.nc(3,3,"Single votes")),h.Gb(2),h.tc("ngIf",t.votesDataObservable),h.Gb(1),h.tc("ngIf",!t.votesDataObservable)}}function K(t,e){if(1&t&&(h.Zb(0,"div"),h.Ub(1,"os-motion-poll-detail-content",14),h.Qc(2,R,6,5,"div",15),h.Yb()),2&t){const t=h.lc(3);h.Gb(1),h.tc("poll",t.poll)("chartData",t.chartDataSubject),h.Gb(1),h.tc("ngIf","named"===t.poll.type)}}function B(t,e){1&t&&(h.Zb(0,"span"),h.Sc(1,", "),h.Yb())}function X(t,e){if(1&t&&(h.Zb(0,"span"),h.Sc(1),h.mc(2,"translate"),h.Qc(3,B,2,0,"span",2),h.Yb()),2&t){const t=e.$implicit,o=e.index,n=h.lc(4);h.Gb(1),h.Uc(" ",h.nc(2,2,t.getTitle()),""),h.Gb(2),h.tc("ngIf",o<n.poll.groups.length-1)}}function q(t,e){if(1&t&&(h.Zb(0,"small"),h.Sc(1),h.mc(2,"translate"),h.Qc(3,X,4,4,"span",25),h.Yb()),2&t){const t=h.lc(3);h.Gb(1),h.Uc(" ",h.nc(2,2,"Groups"),": "),h.Gb(2),h.tc("ngForOf",t.poll.groups)}}function W(t,e){if(1&t&&(h.Xb(0),h.Zb(1,"h1"),h.Sc(2),h.mc(3,"translate"),h.Yb(),h.Zb(4,"div"),h.Qc(5,M,3,3,"span",2),h.Zb(6,"span"),h.Sc(7),h.mc(8,"translate"),h.Yb(),h.Yb(),h.Qc(9,_,3,3,"p",2),h.Qc(10,K,3,3,"div",2),h.Zb(11,"div",13),h.Qc(12,q,4,4,"small",2),h.Zb(13,"small"),h.Sc(14),h.mc(15,"translate"),h.mc(16,"translate"),h.Yb(),h.Yb(),h.Wb()),2&t){const t=h.lc(2);h.Gb(2),h.Tc(h.nc(3,8,t.poll.title)),h.Gb(3),h.tc("ngIf","analog"!==t.poll.type),h.Gb(2),h.Uc(" ",h.nc(8,10,t.poll.stateVerbose)," "),h.Gb(2),h.tc("ngIf",!t.poll.hasVotes||!t.poll.stateHasVotes),h.Gb(1),h.tc("ngIf",t.poll.stateHasVotes&&(t.hasPerms()||t.poll.isPublished)),h.Gb(2),h.tc("ngIf",t.poll.groups&&t.poll.type&&"analog"!==t.poll.type),h.Gb(2),h.Vc("",h.nc(15,12,"100% base"),": ",h.nc(16,14,t.poll.percentBaseVerbose),"")}}function E(t,e){if(1&t&&h.Qc(0,W,17,16,"ng-container",2),2&t){const t=h.lc();h.tc("ngIf",t.poll)}}function H(t,e){if(1&t&&h.Ub(0,"os-projector-button",26),2&t){const t=h.lc();h.tc("menuItem",!0)("object",t.poll)}}function $(t,e){if(1&t){const t=h.ac();h.Zb(0,"button",27),h.hc("click",(function(){h.Ic(t);const e=h.lc();return e.openDialog(e.poll)})),h.Zb(1,"mat-icon"),h.Sc(2,"edit"),h.Yb(),h.Zb(3,"span"),h.Sc(4),h.mc(5,"translate"),h.Yb(),h.Yb()}2&t&&(h.Gb(4),h.Tc(h.nc(5,1,"Edit")))}function J(t,e){if(1&t){const t=h.ac();h.Zb(0,"button",27),h.hc("click",(function(){return h.Ic(t),h.lc().pseudoanonymizePoll()})),h.Zb(1,"mat-icon"),h.Sc(2,"warning"),h.Yb(),h.Zb(3,"span"),h.Sc(4),h.mc(5,"translate"),h.Yb(),h.Yb()}2&t&&(h.Gb(4),h.Tc(h.nc(5,1,"Anonymize votes")))}function tt(t,e){if(1&t){const t=h.ac();h.Zb(0,"button",27),h.hc("click",(function(){return h.Ic(t),h.lc().deletePoll()})),h.Zb(1,"mat-icon",28),h.Sc(2,"delete"),h.Yb(),h.Zb(3,"span"),h.Sc(4),h.mc(5,"translate"),h.Yb(),h.Yb()}2&t&&(h.Gb(4),h.Tc(h.nc(5,1,"Delete")))}let et=(()=>{class t extends m.a{constructor(t,e,o,n,c,l,i,a,s,r,b,u,p){super(t,e,o,n,c,l,i,a,s,r),this.operator=u,this.router=p,this.columnDefinition=[{prop:"user",width:"auto",label:"Participant"},{prop:"vote",width:"auto",label:"Vote"}],this.filterProps=["user.getFullName","valueVerbose"],b.get("users_activate_vote_weight").subscribe(t=>this.isVoteWeightActive=t)}createVotesData(){this.setVotesData(this.poll.options[0].votes)}openDialog(){this.pollDialog.openDialog(this.poll)}onDeleted(){this.router.navigate(["motions",this.poll.motion_id])}hasPerms(){return this.operator.hasPerms(a.b.motionsCanManagePolls)}}return t.\u0275fac=function(e){return new(e||t)(h.Tb(g.d),h.Tb(v.k),h.Tb(S.a),h.Tb(s.a),h.Tb(i.a),h.Tb(b.a),h.Tb(p.a),h.Tb(d.a),h.Tb(f.a),h.Tb(r.a),h.Tb(u.a),h.Tb(a.a),h.Tb(i.f))},t.\u0275cmp=h.Nb({type:t,selectors:[["os-motion-poll-detail"]],features:[h.Db],decls:15,vars:10,consts:[[3,"goBack","nav"],[1,"title-slot"],[4,"ngIf"],["class","menu-slot",4,"osPerms"],[1,"os-card","spacer-bottom-60"],[3,"ngTemplateOutlet"],["viewTemplate",""],["pollDetailMenu","matMenu"],[3,"menuItem","object",4,"osPerms"],["mat-menu-item","",3,"click",4,"osPerms"],["mat-menu-item","",3,"click",4,"osPerms","osPermsAnd"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],[1,"poll-content"],[3,"poll","chartData"],["class","named-result-table",4,"ngIf"],[1,"named-result-table"],["class","single-votes-table","listStorageKey","motion-poll-vote",3,"listObservable","columns","filterProps","allowProjector","fullScreen","vScrollFixed",4,"ngIf"],["listStorageKey","motion-poll-vote",1,"single-votes-table",3,"listObservable","columns","filterProps","allowProjector","fullScreen","vScrollFixed"],[4,"pblNgridHeaderCellDef"],[4,"pblNgridCellDef"],["class","vote-cell",4,"pblNgridCellDef"],[1,"user-subtitle"],[1,"vote-cell"],[1,"vote-cell-icon-container",3,"ngClass"],[4,"ngFor","ngForOf"],[3,"menuItem","object"],["mat-menu-item","",3,"click"],["color","warn"]],template:function(t,e){if(1&t&&(h.Zb(0,"os-head-bar",0),h.Zb(1,"div",1),h.Qc(2,V,3,4,"h2",2),h.Yb(),h.Qc(3,I,4,1,"div",3),h.Yb(),h.Zb(4,"mat-card",4),h.Vb(5,5),h.Yb(),h.Qc(6,E,1,1,"ng-template",null,6,h.Rc),h.Zb(8,"mat-menu",null,7),h.Qc(10,H,1,2,"os-projector-button",8),h.Qc(11,$,6,3,"button",9),h.Qc(12,J,6,3,"button",10),h.Ub(13,"mat-divider"),h.Qc(14,tt,6,3,"button",9),h.Yb()),2&t){const t=h.Ec(7);h.tc("goBack",!0)("nav",!1),h.Gb(2),h.tc("ngIf",e.poll),h.Gb(1),h.tc("osPerms","motions.can_manage_polls"),h.Gb(2),h.tc("ngTemplateOutlet",t),h.Gb(5),h.tc("osPerms","core.can_manage_projector"),h.Gb(1),h.tc("osPerms","motions.can_manage_polls"),h.Gb(1),h.tc("osPerms","motions.can_manage_polls")("osPermsAnd",e.poll&&"named"===e.poll.type),h.Gb(2),h.tc("osPerms","motions.can_manage_polls")}},directives:[y.a,n.t,G.a,Y.a,n.A,P.f,Z.a,w.b,P.e,T.a,D.a,O.a,C.h,C.c,n.q,n.s,k.a,P.c],pipes:[v.j],styles:[".yes{color:#4caf50}.no{color:#cc6c5b}.abstain{color:#a6a6a6}.voted-yes{background-color:#4caf50;color:#fff}.voted-no{background-color:#cc6c5b;color:#fff}.voted-abstain{background-color:#a6a6a6;color:#fff}.start-poll-button{color:#4caf50}.stop-poll-button{color:#ff5252}.publish-poll-button{color:#e6b100}.poll-content{text-align:right;display:grid;padding-top:20px}.named-result-table{grid-area:names}.named-result-table .mat-form-field{font-size:14px;width:100%}.named-result-table .vote-cell,.named-result-table .vote-cell .vote-cell-icon-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.named-result-table .vote-cell .vote-cell-icon-container{margin-right:7px}.single-votes-table{display:block;height:500px}.single-votes-table .list-view-frame{height:100%}.openslides-theme .pbl-ngrid-no-data{top:10%}"],encapsulation:2,changeDetection:0}),t})();const ot=[{path:"new",component:et},{path:":id",component:et}];let nt=(()=>{class t{}return t.\u0275mod=h.Rb({type:t}),t.\u0275inj=h.Qb({factory:function(e){return new(e||t)},imports:[[i.j.forChild(ot)],i.j]}),t})(),ct=(()=>{class t{}return t.\u0275mod=h.Rb({type:t}),t.\u0275inj=h.Qb({factory:function(e){return new(e||t)},imports:[[n.c,c.a,nt,l.PollsModule]]}),t})()},wL0i:function(t,e,o){"use strict";o.d(e,"a",(function(){return c}));var n=o("mV3u");class c extends n.a{constructor(t,e,o,n){super(t,e,o),this.storage=n,this.canMultiSelect=!1,this._multiSelectMode=!1,this.singleButtonWidth="40px",this.badgeButtonWidth="45px",this.selectedRows=[]}onDataSourceChange(t){this.dataSource=t}toggleMultiSelect(){!this.canMultiSelect||this.isMultiSelect?(this._multiSelectMode=!1,this.deselectAll()):this._multiSelectMode=!0}selectAll(){this.dataSource.selection.select(...this.dataSource.filteredData)}deselectAll(){this.dataSource&&this.dataSource.selection.clear()}get isMultiSelect(){return this._multiSelectMode}}}}]);