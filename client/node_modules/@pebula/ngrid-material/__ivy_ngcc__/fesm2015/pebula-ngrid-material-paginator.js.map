{"version":3,"file":"pebula-ngrid-material-paginator.js","sources":["ng:/@pebula/ngrid-material/paginator/lib/table-paginator.component.ts","ng:/@pebula/ngrid-material/paginator/lib/table-paginator.module.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  ChangeDetectorRef,\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  Optional,\n  ViewEncapsulation\n} from '@angular/core';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { MatPaginatorIntl } from '@angular/material/paginator';\n\nimport { UnRx } from '@pebula/utils';\nimport { PblPagingPaginator, PblPaginatorChangeEvent, PblNgridComponent } from '@pebula/ngrid';\n\nconst DEFAULT_PAGE_SIZE_OPTIONS = [5, 10, 20, 50, 100];\n\n@Component({\n  selector: 'pbl-ngrid-paginator',\n  templateUrl: './table-paginator.component.html',\n  styleUrls: ['./table-paginator.component.scss'],\n  host: {\n    'class': 'mat-paginator',\n  },\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None\n})\n@UnRx()\nexport class PblPaginatorComponent {\n  pages: number[] = [];\n  pageSizes: number[] = DEFAULT_PAGE_SIZE_OPTIONS.slice();\n\n  @Input() get pageSizeOptions(): number[] { return this._pageSizeOptions; }\n  set pageSizeOptions(value: number[]) {\n    this._pageSizeOptions = value;\n    this.pageSizes = (value || DEFAULT_PAGE_SIZE_OPTIONS).slice();\n    this.updatePageSizes();\n  }\n\n  @Input() get paginator(): PblPagingPaginator { return this._paginator; }\n  set paginator(value: PblPagingPaginator) {\n    if (this._paginator === value) {\n      return;\n    }\n    if (this._paginator) {\n      UnRx.kill(this, this._paginator);\n    }\n    this._paginator = value;\n    if (value) {\n      // pagination.onChange is BehaviorSubject so handlePageChange will trigger\n      value.onChange\n        .pipe(UnRx(this, value))\n        .subscribe( event => this.handlePageChange(event) );\n      this.updatePageSizes();\n    }\n  }\n\n  @Input() table: PblNgridComponent<any>;\n\n  @Input() get hidePageSize(): boolean { return this._hidePageSize; }\n  set hidePageSize(value: boolean) { this._hidePageSize = coerceBooleanProperty(value); }\n\n  @Input() get hideRangeSelect(): boolean { return this._hideRangeSelect; }\n  set hideRangeSelect(value: boolean) { this._hideRangeSelect = coerceBooleanProperty(value); }\n\n  private _pageSizeOptions: number[];\n  private _paginator: PblPagingPaginator;\n  private _hidePageSize = false;\n  private _hideRangeSelect = false;\n\n  constructor(@Optional() table: PblNgridComponent<any>,\n              public _intl: MatPaginatorIntl,\n              private cdr: ChangeDetectorRef) {\n    if (table) {\n      this.table = table;\n    }\n    _intl.changes\n      .pipe(UnRx(this))\n      .subscribe(() => this.cdr.markForCheck());\n  }\n\n  private updatePageSizes(): void {\n    if (this.paginator && this.pageSizes.indexOf(this.paginator.perPage) === -1) {\n      this.pageSizes.push(this.paginator.perPage);\n    }\n    this.pageSizes.sort((a, b) => a - b);\n  }\n\n  private handlePageChange(event: PblPaginatorChangeEvent): void {\n    if (this.pages.length !== this.paginator.totalPages) {\n      const pages = this.pages = [];\n      for (let i = 1, len = this.paginator.totalPages+1; i<len; i++) { pages.push(i); }\n    }\n    // this is required here to prevent `ExpressionChangedAfterItHasBeenCheckedError` when the component has or wrapped\n    // by an ngIf\n    this.cdr.detectChanges();\n    this.cdr.markForCheck();\n  }\n}\n","import { NgModule, ComponentFactoryResolver, Injector } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatPaginator, MatPaginatorModule } from '@angular/material/paginator';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatButtonModule } from '@angular/material/button';\n\nimport { PblNgridModule } from '@pebula/ngrid';\nimport { PblPaginatorComponent } from './table-paginator.component';\n// TODO: Remove MatPaginatorModule and the initial code in the constructor\n// set the styles in the SCSS.\n\n@NgModule({\n  imports: [ CommonModule, MatPaginatorModule, MatSelectModule, MatTooltipModule, MatButtonModule, PblNgridModule ],\n  declarations: [ PblPaginatorComponent ],\n  exports: [ PblPaginatorComponent ],\n  // TODO: remove when ViewEngine is no longer supported by angular (V11 ???)\n  entryComponents: [ PblPaginatorComponent, MatPaginator ]\n})\nexport class PblNgridPaginatorModule {\n  constructor(cf: ComponentFactoryResolver, injector: Injector) {\n    // this is a workaround to ensure CSS from mat slider is loaded, otherwise it is omitted.\n    cf.resolveComponentFactory(MatPaginator).create(injector);\n  }\n}\n"]}