/**
 * @fileoverview added by tsickle
 * Generated from: lib/grid/meta-rows/meta-row-container.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { __decorate, __metadata, __values } from "tslib";
import { Subject } from 'rxjs';
import { Component, Input, ElementRef } from '@angular/core';
import { UnRx } from '@pebula/utils';
import { PblNgridMetaRowService } from './meta-row.service';
var PblNgridMetaRowContainerComponent = /** @class */ (function () {
    function PblNgridMetaRowContainerComponent(metaRows, elRef) {
        var _this = this;
        this.metaRows = metaRows;
        this._width$ = new Subject();
        this._totalColumnWidth = 0;
        this.element = elRef.nativeElement;
        metaRows.sync.pipe(UnRx(this)).subscribe((/**
         * @return {?}
         */
        function () { return _this.syncRowDefinitions(); }));
        this.metaRows.extApi.events
            .pipe(UnRx(this))
            .subscribe((/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            if (event.kind === 'onResizeRow') {
                _this.updateWidths();
            }
        }));
        this.metaRows.extApi.grid.columnApi.totalColumnWidthChange
            .pipe(UnRx(this))
            .subscribe((/**
         * @param {?} width
         * @return {?}
         */
        function (width) {
            _this._totalColumnWidth = width;
            _this.updateWidths();
        }));
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    PblNgridMetaRowContainerComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        var _this = this;
        if ('type' in changes) {
            /** @type {?} */
            var scrollContainerElement_1 = this.element;
            scrollContainerElement_1.scrollLeft = this.metaRows.extApi.grid.viewport.measureScrollOffset('start');
            if (changes.type.isFirstChange) {
                this.metaRows.hzScroll
                    .pipe(UnRx(this))
                    .subscribe((/**
                 * @param {?} offset
                 * @return {?}
                 */
                function (offset) { return scrollContainerElement_1.scrollLeft = offset; }));
                this.metaRows.extApi.cdkTable.onRenderRows
                    .pipe(UnRx(this))
                    .subscribe((/**
                 * @return {?}
                 */
                function () { _this.updateWidths(); }));
            }
        }
    };
    /**
     * @return {?}
     */
    PblNgridMetaRowContainerComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this._width$.complete();
    };
    /**
     * @private
     * @return {?}
     */
    PblNgridMetaRowContainerComponent.prototype.updateWidths = /**
     * @private
     * @return {?}
     */
    function () {
        this._innerWidth = this.metaRows.extApi.grid.viewport.innerWidth;
        this._minWidth = this.metaRows.extApi.cdkTable.minWidth;
        this._width = Math.max(this._innerWidth, this._minWidth);
        this._width$.next(Math.max(this._innerWidth, this._totalColumnWidth));
    };
    /**
     * @private
     * @return {?}
     */
    PblNgridMetaRowContainerComponent.prototype.syncRowDefinitions = /**
     * @private
     * @return {?}
     */
    function () {
        var e_1, _a;
        /** @type {?} */
        var isHeader = this.type === 'header';
        /** @type {?} */
        var section = isHeader ? this.metaRows.header : this.metaRows.footer;
        /** @type {?} */
        var widthContainer = this.element.firstElementChild;
        /** @type {?} */
        var container = widthContainer.nextElementSibling;
        if (isHeader) {
            widthContainer.appendChild(this.metaRows.gridWidthRow.el);
        }
        try {
            for (var _b = __values(section.fixed), _c = _b.next(); !_c.done; _c = _b.next()) {
                var def = _c.value;
                container.appendChild(def.el);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
    };
    PblNgridMetaRowContainerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'div[pbl-ngrid-fixed-meta-row-container]',
                    template: "<div class=\"pbl-cdk-table\" [style.width.px]=\"_width\"></div><div class=\"pbl-cdk-table\" [style.width.px]=\"_width$ | async\"></div>",
                    host: {
                        // tslint:disable-line:use-host-property-decorator
                        style: 'flex: 0 0 auto; overflow: hidden;',
                        '[style.width.px]': '_innerWidth',
                    }
                }] }
    ];
    /** @nocollapse */
    PblNgridMetaRowContainerComponent.ctorParameters = function () { return [
        { type: PblNgridMetaRowService },
        { type: ElementRef }
    ]; };
    PblNgridMetaRowContainerComponent.propDecorators = {
        type: [{ type: Input, args: ['pbl-ngrid-fixed-meta-row-container',] }]
    };
    PblNgridMetaRowContainerComponent = __decorate([
        UnRx(),
        __metadata("design:paramtypes", [PblNgridMetaRowService, ElementRef])
    ], PblNgridMetaRowContainerComponent);
    return PblNgridMetaRowContainerComponent;
}());
export { PblNgridMetaRowContainerComponent };
if (false) {
    /** @type {?} */
    PblNgridMetaRowContainerComponent.prototype.type;
    /**
     * The inner width of the grid, the viewport width of a row.
     * The width of the grid minus scroll bar.
     * @type {?}
     */
    PblNgridMetaRowContainerComponent.prototype._innerWidth;
    /** @type {?} */
    PblNgridMetaRowContainerComponent.prototype._minWidth;
    /** @type {?} */
    PblNgridMetaRowContainerComponent.prototype._width;
    /** @type {?} */
    PblNgridMetaRowContainerComponent.prototype._width$;
    /**
     * @type {?}
     * @private
     */
    PblNgridMetaRowContainerComponent.prototype._totalColumnWidth;
    /**
     * @type {?}
     * @private
     */
    PblNgridMetaRowContainerComponent.prototype.element;
    /** @type {?} */
    PblNgridMetaRowContainerComponent.prototype.metaRows;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWV0YS1yb3ctY29udGFpbmVyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHBlYnVsYS9uZ3JpZC8iLCJzb3VyY2VzIjpbImxpYi9ncmlkL21ldGEtcm93cy9tZXRhLXJvdy1jb250YWluZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQXVDLE1BQU0sZUFBZSxDQUFDO0FBQ2xHLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFckMsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sb0JBQW9CLENBQUM7O0lBMkIxRCwyQ0FBNEIsUUFBZ0MsRUFBRSxLQUE4QjtRQUE1RixpQkFnQkM7UUFoQjJCLGFBQVEsR0FBUixRQUFRLENBQXdCO1FBTG5ELFlBQU8sR0FBRyxJQUFJLE9BQU8sRUFBVSxDQUFDO1FBRWpDLHNCQUFpQixHQUFXLENBQUMsQ0FBQztRQUlwQyxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUM7UUFDbkMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsU0FBUzs7O1FBQUUsY0FBTSxPQUFBLEtBQUksQ0FBQyxrQkFBa0IsRUFBRSxFQUF6QixDQUF5QixFQUFFLENBQUM7UUFDNUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsTUFBTTthQUN4QixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ2hCLFNBQVM7Ozs7UUFBRSxVQUFBLEtBQUs7WUFDZixJQUFJLEtBQUssQ0FBQyxJQUFJLEtBQUssYUFBYSxFQUFFO2dCQUNoQyxLQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7YUFDckI7UUFDSCxDQUFDLEVBQUMsQ0FBQztRQUNMLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsc0JBQXNCO2FBQ3ZELElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDaEIsU0FBUzs7OztRQUFFLFVBQUEsS0FBSztZQUNmLEtBQUksQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUM7WUFDL0IsS0FBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3RCLENBQUMsRUFBQyxDQUFDO0lBQ1AsQ0FBQzs7Ozs7SUFFRCx1REFBVzs7OztJQUFYLFVBQVksT0FBc0I7UUFBbEMsaUJBZUM7UUFkQyxJQUFJLE1BQU0sSUFBSSxPQUFPLEVBQUU7O2dCQUNmLHdCQUFzQixHQUFHLElBQUksQ0FBQyxPQUFPO1lBQzNDLHdCQUFzQixDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRXBHLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUU7Z0JBQzlCLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUTtxQkFDbkIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztxQkFDaEIsU0FBUzs7OztnQkFBRSxVQUFBLE1BQU0sSUFBSSxPQUFBLHdCQUFzQixDQUFDLFVBQVUsR0FBRyxNQUFNLEVBQTFDLENBQTBDLEVBQUUsQ0FBQztnQkFFckUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFlBQVk7cUJBQ3ZDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7cUJBQ2hCLFNBQVM7OztnQkFBRSxjQUFRLEtBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQSxDQUFDLENBQUMsRUFBQyxDQUFDO2FBQzlDO1NBQ0Y7SUFDSCxDQUFDOzs7O0lBRUQsdURBQVc7OztJQUFYO1FBQ0UsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUMxQixDQUFDOzs7OztJQUVPLHdEQUFZOzs7O0lBQXBCO1FBQ0UsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQztRQUNqRSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUM7UUFDeEQsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3pELElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFBO0lBQ3ZFLENBQUM7Ozs7O0lBRU8sOERBQWtCOzs7O0lBQTFCOzs7WUFDUSxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksS0FBSyxRQUFROztZQUNqQyxPQUFPLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNOztZQUVoRSxjQUFjLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUI7O1lBQy9DLFNBQVMsR0FBRyxjQUFjLENBQUMsa0JBQWtCO1FBRW5ELElBQUksUUFBUSxFQUFFO1lBQ1osY0FBYyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUMzRDs7WUFFRCxLQUFrQixJQUFBLEtBQUEsU0FBQSxPQUFPLENBQUMsS0FBSyxDQUFBLGdCQUFBLDRCQUFFO2dCQUE1QixJQUFNLEdBQUcsV0FBQTtnQkFDWixTQUFTLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQzthQUMvQjs7Ozs7Ozs7O0lBQ0gsQ0FBQzs7Z0JBckZGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUseUNBQXlDO29CQUNuRCxRQUFRLEVBQUUseUlBQWlJO29CQUMzSSxJQUFJLEVBQUU7O3dCQUNKLEtBQUssRUFBRSxtQ0FBbUM7d0JBQzFDLGtCQUFrQixFQUFFLGFBQWE7cUJBQ2xDO2lCQUNGOzs7O2dCQVRRLHNCQUFzQjtnQkFISixVQUFVOzs7dUJBZ0JsQyxLQUFLLFNBQUMsb0NBQW9DOztJQUZoQyxpQ0FBaUM7UUFEN0MsSUFBSSxFQUFFO3lDQWlCaUMsc0JBQXNCLEVBQVMsVUFBVTtPQWhCcEUsaUNBQWlDLENBNkU3QztJQUFELHdDQUFDO0NBQUEsSUFBQTtTQTdFWSxpQ0FBaUM7OztJQUU1QyxpREFBdUU7Ozs7OztJQU12RSx3REFBb0I7O0lBQ3BCLHNEQUFrQjs7SUFDbEIsbURBQWU7O0lBQ2Ysb0RBQXlDOzs7OztJQUV6Qyw4REFBc0M7Ozs7O0lBQ3RDLG9EQUE2Qjs7SUFFakIscURBQWdEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgRWxlbWVudFJlZiwgT25EZXN0cm95LCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFVuUnggfSBmcm9tICdAcGVidWxhL3V0aWxzJztcblxuaW1wb3J0IHsgUGJsTmdyaWRNZXRhUm93U2VydmljZSB9IGZyb20gJy4vbWV0YS1yb3cuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2RpdltwYmwtbmdyaWQtZml4ZWQtbWV0YS1yb3ctY29udGFpbmVyXScsXG4gIHRlbXBsYXRlOiBgPGRpdiBjbGFzcz1cInBibC1jZGstdGFibGVcIiBbc3R5bGUud2lkdGgucHhdPVwiX3dpZHRoXCI+PC9kaXY+PGRpdiBjbGFzcz1cInBibC1jZGstdGFibGVcIiBbc3R5bGUud2lkdGgucHhdPVwiX3dpZHRoJCB8IGFzeW5jXCI+PC9kaXY+YCxcbiAgaG9zdDogeyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOnVzZS1ob3N0LXByb3BlcnR5LWRlY29yYXRvclxuICAgIHN0eWxlOiAnZmxleDogMCAwIGF1dG87IG92ZXJmbG93OiBoaWRkZW47JyxcbiAgICAnW3N0eWxlLndpZHRoLnB4XSc6ICdfaW5uZXJXaWR0aCcsXG4gIH0sXG59KVxuQFVuUngoKVxuZXhwb3J0IGNsYXNzIFBibE5ncmlkTWV0YVJvd0NvbnRhaW5lckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcblxuICBASW5wdXQoJ3BibC1uZ3JpZC1maXhlZC1tZXRhLXJvdy1jb250YWluZXInKSB0eXBlOiAnaGVhZGVyJyB8ICdmb290ZXInO1xuXG4gIC8qKlxuICAgKiBUaGUgaW5uZXIgd2lkdGggb2YgdGhlIGdyaWQsIHRoZSB2aWV3cG9ydCB3aWR0aCBvZiBhIHJvdy5cbiAgICogVGhlIHdpZHRoIG9mIHRoZSBncmlkIG1pbnVzIHNjcm9sbCBiYXIuXG4gICAqL1xuICBfaW5uZXJXaWR0aDogbnVtYmVyO1xuICBfbWluV2lkdGg6IG51bWJlcjtcbiAgX3dpZHRoOiBudW1iZXI7XG4gIHJlYWRvbmx5IF93aWR0aCQgPSBuZXcgU3ViamVjdDxudW1iZXI+KCk7XG5cbiAgcHJpdmF0ZSBfdG90YWxDb2x1bW5XaWR0aDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBlbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgbWV0YVJvd3M6IFBibE5ncmlkTWV0YVJvd1NlcnZpY2UsIGVsUmVmOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50Pikge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsUmVmLm5hdGl2ZUVsZW1lbnQ7XG4gICAgbWV0YVJvd3Muc3luYy5waXBlKFVuUngodGhpcykpLnN1YnNjcmliZSggKCkgPT4gdGhpcy5zeW5jUm93RGVmaW5pdGlvbnMoKSApO1xuICAgIHRoaXMubWV0YVJvd3MuZXh0QXBpLmV2ZW50c1xuICAgICAgLnBpcGUoVW5SeCh0aGlzKSlcbiAgICAgIC5zdWJzY3JpYmUoIGV2ZW50ID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmtpbmQgPT09ICdvblJlc2l6ZVJvdycpIHtcbiAgICAgICAgICB0aGlzLnVwZGF0ZVdpZHRocygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB0aGlzLm1ldGFSb3dzLmV4dEFwaS5ncmlkLmNvbHVtbkFwaS50b3RhbENvbHVtbldpZHRoQ2hhbmdlXG4gICAgICAucGlwZShVblJ4KHRoaXMpKVxuICAgICAgLnN1YnNjcmliZSggd2lkdGggPT4ge1xuICAgICAgICB0aGlzLl90b3RhbENvbHVtbldpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMudXBkYXRlV2lkdGhzKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcbiAgICBpZiAoJ3R5cGUnIGluIGNoYW5nZXMpIHtcbiAgICAgIGNvbnN0IHNjcm9sbENvbnRhaW5lckVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICBzY3JvbGxDb250YWluZXJFbGVtZW50LnNjcm9sbExlZnQgPSB0aGlzLm1ldGFSb3dzLmV4dEFwaS5ncmlkLnZpZXdwb3J0Lm1lYXN1cmVTY3JvbGxPZmZzZXQoJ3N0YXJ0Jyk7XG5cbiAgICAgIGlmIChjaGFuZ2VzLnR5cGUuaXNGaXJzdENoYW5nZSkge1xuICAgICAgICB0aGlzLm1ldGFSb3dzLmh6U2Nyb2xsXG4gICAgICAgICAgLnBpcGUoVW5SeCh0aGlzKSlcbiAgICAgICAgICAuc3Vic2NyaWJlKCBvZmZzZXQgPT4gc2Nyb2xsQ29udGFpbmVyRWxlbWVudC5zY3JvbGxMZWZ0ID0gb2Zmc2V0ICk7XG5cbiAgICAgICAgdGhpcy5tZXRhUm93cy5leHRBcGkuY2RrVGFibGUub25SZW5kZXJSb3dzXG4gICAgICAgICAgLnBpcGUoVW5SeCh0aGlzKSlcbiAgICAgICAgICAuc3Vic2NyaWJlKCAoKSA9PiB7IHRoaXMudXBkYXRlV2lkdGhzKCkgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5fd2lkdGgkLmNvbXBsZXRlKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVdpZHRocygpOiB2b2lkIHtcbiAgICB0aGlzLl9pbm5lcldpZHRoID0gdGhpcy5tZXRhUm93cy5leHRBcGkuZ3JpZC52aWV3cG9ydC5pbm5lcldpZHRoO1xuICAgIHRoaXMuX21pbldpZHRoID0gdGhpcy5tZXRhUm93cy5leHRBcGkuY2RrVGFibGUubWluV2lkdGg7XG4gICAgdGhpcy5fd2lkdGggPSBNYXRoLm1heCh0aGlzLl9pbm5lcldpZHRoLCB0aGlzLl9taW5XaWR0aCk7XG4gICAgdGhpcy5fd2lkdGgkLm5leHQoTWF0aC5tYXgodGhpcy5faW5uZXJXaWR0aCwgdGhpcy5fdG90YWxDb2x1bW5XaWR0aCkpXG4gIH1cblxuICBwcml2YXRlIHN5bmNSb3dEZWZpbml0aW9ucygpOiB2b2lkIHtcbiAgICBjb25zdCBpc0hlYWRlciA9IHRoaXMudHlwZSA9PT0gJ2hlYWRlcic7XG4gICAgY29uc3Qgc2VjdGlvbiA9IGlzSGVhZGVyID8gdGhpcy5tZXRhUm93cy5oZWFkZXIgOiB0aGlzLm1ldGFSb3dzLmZvb3RlcjtcblxuICAgIGNvbnN0IHdpZHRoQ29udGFpbmVyID0gdGhpcy5lbGVtZW50LmZpcnN0RWxlbWVudENoaWxkO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHdpZHRoQ29udGFpbmVyLm5leHRFbGVtZW50U2libGluZztcblxuICAgIGlmIChpc0hlYWRlcikge1xuICAgICAgd2lkdGhDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5tZXRhUm93cy5ncmlkV2lkdGhSb3cuZWwpO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgZGVmIG9mIHNlY3Rpb24uZml4ZWQpIHtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkZWYuZWwpO1xuICAgIH1cbiAgfVxufVxuIl19