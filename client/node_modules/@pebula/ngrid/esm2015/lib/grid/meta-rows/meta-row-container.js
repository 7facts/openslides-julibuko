/**
 * @fileoverview added by tsickle
 * Generated from: lib/grid/meta-rows/meta-row-container.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { __decorate, __metadata } from "tslib";
import { Subject } from 'rxjs';
import { Component, Input, ElementRef } from '@angular/core';
import { UnRx } from '@pebula/utils';
import { PblNgridMetaRowService } from './meta-row.service';
let PblNgridMetaRowContainerComponent = class PblNgridMetaRowContainerComponent {
    /**
     * @param {?} metaRows
     * @param {?} elRef
     */
    constructor(metaRows, elRef) {
        this.metaRows = metaRows;
        this._width$ = new Subject();
        this._totalColumnWidth = 0;
        this.element = elRef.nativeElement;
        metaRows.sync.pipe(UnRx(this)).subscribe((/**
         * @return {?}
         */
        () => this.syncRowDefinitions()));
        this.metaRows.extApi.events
            .pipe(UnRx(this))
            .subscribe((/**
         * @param {?} event
         * @return {?}
         */
        event => {
            if (event.kind === 'onResizeRow') {
                this.updateWidths();
            }
        }));
        this.metaRows.extApi.grid.columnApi.totalColumnWidthChange
            .pipe(UnRx(this))
            .subscribe((/**
         * @param {?} width
         * @return {?}
         */
        width => {
            this._totalColumnWidth = width;
            this.updateWidths();
        }));
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if ('type' in changes) {
            /** @type {?} */
            const scrollContainerElement = this.element;
            scrollContainerElement.scrollLeft = this.metaRows.extApi.grid.viewport.measureScrollOffset('start');
            if (changes.type.isFirstChange) {
                this.metaRows.hzScroll
                    .pipe(UnRx(this))
                    .subscribe((/**
                 * @param {?} offset
                 * @return {?}
                 */
                offset => scrollContainerElement.scrollLeft = offset));
                this.metaRows.extApi.cdkTable.onRenderRows
                    .pipe(UnRx(this))
                    .subscribe((/**
                 * @return {?}
                 */
                () => { this.updateWidths(); }));
            }
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this._width$.complete();
    }
    /**
     * @private
     * @return {?}
     */
    updateWidths() {
        this._innerWidth = this.metaRows.extApi.grid.viewport.innerWidth;
        this._minWidth = this.metaRows.extApi.cdkTable.minWidth;
        this._width = Math.max(this._innerWidth, this._minWidth);
        this._width$.next(Math.max(this._innerWidth, this._totalColumnWidth));
    }
    /**
     * @private
     * @return {?}
     */
    syncRowDefinitions() {
        /** @type {?} */
        const isHeader = this.type === 'header';
        /** @type {?} */
        const section = isHeader ? this.metaRows.header : this.metaRows.footer;
        /** @type {?} */
        const widthContainer = this.element.firstElementChild;
        /** @type {?} */
        const container = widthContainer.nextElementSibling;
        if (isHeader) {
            widthContainer.appendChild(this.metaRows.gridWidthRow.el);
        }
        for (const def of section.fixed) {
            container.appendChild(def.el);
        }
    }
};
PblNgridMetaRowContainerComponent.decorators = [
    { type: Component, args: [{
                selector: 'div[pbl-ngrid-fixed-meta-row-container]',
                template: `<div class="pbl-cdk-table" [style.width.px]="_width"></div><div class="pbl-cdk-table" [style.width.px]="_width$ | async"></div>`,
                host: {
                    // tslint:disable-line:use-host-property-decorator
                    style: 'flex: 0 0 auto; overflow: hidden;',
                    '[style.width.px]': '_innerWidth',
                }
            }] }
];
/** @nocollapse */
PblNgridMetaRowContainerComponent.ctorParameters = () => [
    { type: PblNgridMetaRowService },
    { type: ElementRef }
];
PblNgridMetaRowContainerComponent.propDecorators = {
    type: [{ type: Input, args: ['pbl-ngrid-fixed-meta-row-container',] }]
};
PblNgridMetaRowContainerComponent = __decorate([
    UnRx(),
    __metadata("design:paramtypes", [PblNgridMetaRowService, ElementRef])
], PblNgridMetaRowContainerComponent);
export { PblNgridMetaRowContainerComponent };
if (false) {
    /** @type {?} */
    PblNgridMetaRowContainerComponent.prototype.type;
    /**
     * The inner width of the grid, the viewport width of a row.
     * The width of the grid minus scroll bar.
     * @type {?}
     */
    PblNgridMetaRowContainerComponent.prototype._innerWidth;
    /** @type {?} */
    PblNgridMetaRowContainerComponent.prototype._minWidth;
    /** @type {?} */
    PblNgridMetaRowContainerComponent.prototype._width;
    /** @type {?} */
    PblNgridMetaRowContainerComponent.prototype._width$;
    /**
     * @type {?}
     * @private
     */
    PblNgridMetaRowContainerComponent.prototype._totalColumnWidth;
    /**
     * @type {?}
     * @private
     */
    PblNgridMetaRowContainerComponent.prototype.element;
    /** @type {?} */
    PblNgridMetaRowContainerComponent.prototype.metaRows;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWV0YS1yb3ctY29udGFpbmVyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHBlYnVsYS9uZ3JpZC8iLCJzb3VyY2VzIjpbImxpYi9ncmlkL21ldGEtcm93cy9tZXRhLXJvdy1jb250YWluZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQXVDLE1BQU0sZUFBZSxDQUFDO0FBQ2xHLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFckMsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sb0JBQW9CLENBQUM7SUFXL0MsaUNBQWlDLFNBQWpDLGlDQUFpQzs7Ozs7SUFnQjVDLFlBQTRCLFFBQWdDLEVBQUUsS0FBOEI7UUFBaEUsYUFBUSxHQUFSLFFBQVEsQ0FBd0I7UUFMbkQsWUFBTyxHQUFHLElBQUksT0FBTyxFQUFVLENBQUM7UUFFakMsc0JBQWlCLEdBQVcsQ0FBQyxDQUFDO1FBSXBDLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDLGFBQWEsQ0FBQztRQUNuQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTOzs7UUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsRUFBRSxDQUFDO1FBQzVFLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLE1BQU07YUFDeEIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUNoQixTQUFTOzs7O1FBQUUsS0FBSyxDQUFDLEVBQUU7WUFDbEIsSUFBSSxLQUFLLENBQUMsSUFBSSxLQUFLLGFBQWEsRUFBRTtnQkFDaEMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO2FBQ3JCO1FBQ0gsQ0FBQyxFQUFDLENBQUM7UUFDTCxJQUFJLENB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Q0osS0FBSyxFQUFFLG1DQUFtQztvQkFDMUMsa0JBQWtCLEVBQUUsYUFBYTtpQkFDbEM7YUFDRjs7OztZQVRRLHNCQUFzQjtZQUhKLFVBQVU7OzttQkFnQmxDLEtBQUssU0FBQyxvQ0FBb0M7O0FBRmhDLGlDQUFpQztJQUQ3QyxJQUFJLEVBQUU7cUNBaUJpQyxzQkFBc0IsRUFBUyxVQUFVO0dBaEJwRSxpQ0FBaUMsQ0E2RTdDO1NBN0VZLGlDQUFpQzs7O0lBRTVDLGlEQUF1RTs7Ozs7O0lBTXZFLHdEQUFvQjs7SUFDcEIsc0RBQWtCOztJQUNsQixtREFBZTs7SUFDZixvREFBeUM7Ozs7O0lBRXpDLDhEQUFzQzs7Ozs7SUFDdEMsb0RBQTZCOztJQUVqQixxREFBZ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBFbGVtZW50UmVmLCBPbkRlc3Ryb3ksIE9uQ2hhbmdlcywgU2ltcGxlQ2hhbmdlcyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVW5SeCB9IGZyb20gJ0BwZWJ1bGEvdXRpbHMnO1xuXG5pbXBvcnQgeyBQYmxOZ3JpZE1ldGFSb3dTZXJ2aWNlIH0gZnJvbSAnLi9tZXRhLXJvdy5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnZGl2W3BibC1uZ3JpZC1maXhlZC1tZXRhLXJvdy1jb250YWluZXJdJyxcbiAgdGVtcGxhdGU6IGA8ZGl2IGNsYXNzPVwicGJsLWNkay10YWJsZVwiIFtzdHlsZS53aWR0aC5weF09XCJfd2lkdGhcIj48L2Rpdj48ZGl2IGNsYXNzPVwicGJsLWNkay10YWJsZVwiIFtzdHlsZS53aWR0aC5weF09XCJfd2lkdGgkIHwgYXN5bmNcIj48L2Rpdj5gLFxuICBob3N0OiB7IC8vIHRzbGludDpkaXNhYmxlLWxpbmU6dXNlLWhvc3QtcHJvcGVydHktZGVjb3JhdG9yXG4gICAgc3R5bGU6ICdmbGV4OiAwIDAgYXV0bzsgb3ZlcmZsb3c6IGhpZGRlbjsnLFxuICAgICdbc3R5bGUud2lkdGgucHhdJzogJ19pbm5lcldpZHRoJyxcbiAgfSxcbn0pXG5AVW5SeCgpXG5leHBvcnQgY2xhc3MgUGJsTmdyaWRNZXRhUm93Q29udGFpbmVyQ29tcG9uZW50IGltcGxlbWVudHMgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xuXG4gIEBJbnB1dCgncGJsLW5ncmlkLWZpeGVkLW1ldGEtcm93LWNvbnRhaW5lcicpIHR5cGU6ICdoZWFkZXInIHwgJ2Zvb3Rlcic7XG5cbiAgLyoqXG4gICAqIFRoZSBpbm5lciB3aWR0aCBvZiB0aGUgZ3JpZCwgdGhlIHZpZXdwb3J0IHdpZHRoIG9mIGEgcm93LlxuICAgKiBUaGUgd2lkdGggb2YgdGhlIGdyaWQgbWludXMgc2Nyb2xsIGJhci5cbiAgICovXG4gIF9pbm5lcldpZHRoOiBudW1iZXI7XG4gIF9taW5XaWR0aDogbnVtYmVyO1xuICBfd2lkdGg6IG51bWJlcjtcbiAgcmVhZG9ubHkgX3dpZHRoJCA9IG5ldyBTdWJqZWN0PG51bWJlcj4oKTtcblxuICBwcml2YXRlIF90b3RhbENvbHVtbldpZHRoOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBtZXRhUm93czogUGJsTmdyaWRNZXRhUm93U2VydmljZSwgZWxSZWY6IEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+KSB7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxSZWYubmF0aXZlRWxlbWVudDtcbiAgICBtZXRhUm93cy5zeW5jLnBpcGUoVW5SeCh0aGlzKSkuc3Vic2NyaWJlKCAoKSA9PiB0aGlzLnN5bmNSb3dEZWZpbml0aW9ucygpICk7XG4gICAgdGhpcy5tZXRhUm93cy5leHRBcGkuZXZlbnRzXG4gICAgICAucGlwZShVblJ4KHRoaXMpKVxuICAgICAgLnN1YnNjcmliZSggZXZlbnQgPT4ge1xuICAgICAgICBpZiAoZXZlbnQua2luZCA9PT0gJ29uUmVzaXplUm93Jykge1xuICAgICAgICAgIHRoaXMudXBkYXRlV2lkdGhzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIHRoaXMubWV0YVJvd3MuZXh0QXBpLmdyaWQuY29sdW1uQXBpLnRvdGFsQ29sdW1uV2lkdGhDaGFuZ2VcbiAgICAgIC5waXBlKFVuUngodGhpcykpXG4gICAgICAuc3Vic2NyaWJlKCB3aWR0aCA9PiB7XG4gICAgICAgIHRoaXMuX3RvdGFsQ29sdW1uV2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy51cGRhdGVXaWR0aHMoKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgIGlmICgndHlwZScgaW4gY2hhbmdlcykge1xuICAgICAgY29uc3Qgc2Nyb2xsQ29udGFpbmVyRWxlbWVudCA9IHRoaXMuZWxlbWVudDtcbiAgICAgIHNjcm9sbENvbnRhaW5lckVsZW1lbnQuc2Nyb2xsTGVmdCA9IHRoaXMubWV0YVJvd3MuZXh0QXBpLmdyaWQudmlld3BvcnQubWVhc3VyZVNjcm9sbE9mZnNldCgnc3RhcnQnKTtcblxuICAgICAgaWYgKGNoYW5nZXMudHlwZS5pc0ZpcnN0Q2hhbmdlKSB7XG4gICAgICAgIHRoaXMubWV0YVJvd3MuaHpTY3JvbGxcbiAgICAgICAgICAucGlwZShVblJ4KHRoaXMpKVxuICAgICAgICAgIC5zdWJzY3JpYmUoIG9mZnNldCA9PiBzY3JvbGxDb250YWluZXJFbGVtZW50LnNjcm9sbExlZnQgPSBvZmZzZXQgKTtcblxuICAgICAgICB0aGlzLm1ldGFSb3dzLmV4dEFwaS5jZGtUYWJsZS5vblJlbmRlclJvd3NcbiAgICAgICAgICAucGlwZShVblJ4KHRoaXMpKVxuICAgICAgICAgIC5zdWJzY3JpYmUoICgpID0+IHsgdGhpcy51cGRhdGVXaWR0aHMoKSB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLl93aWR0aCQuY29tcGxldGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlV2lkdGhzKCk6IHZvaWQge1xuICAgIHRoaXMuX2lubmVyV2lkdGggPSB0aGlzLm1ldGFSb3dzLmV4dEFwaS5ncmlkLnZpZXdwb3J0LmlubmVyV2lkdGg7XG4gICAgdGhpcy5fbWluV2lkdGggPSB0aGlzLm1ldGFSb3dzLmV4dEFwaS5jZGtUYWJsZS5taW5XaWR0aDtcbiAgICB0aGlzLl93aWR0aCA9IE1hdGgubWF4KHRoaXMuX2lubmVyV2lkdGgsIHRoaXMuX21pbldpZHRoKTtcbiAgICB0aGlzLl93aWR0aCQubmV4dChNYXRoLm1heCh0aGlzLl9pbm5lcldpZHRoLCB0aGlzLl90b3RhbENvbHVtbldpZHRoKSlcbiAgfVxuXG4gIHByaXZhdGUgc3luY1Jvd0RlZmluaXRpb25zKCk6IHZvaWQge1xuICAgIGNvbnN0IGlzSGVhZGVyID0gdGhpcy50eXBlID09PSAnaGVhZGVyJztcbiAgICBjb25zdCBzZWN0aW9uID0gaXNIZWFkZXIgPyB0aGlzLm1ldGFSb3dzLmhlYWRlciA6IHRoaXMubWV0YVJvd3MuZm9vdGVyO1xuXG4gICAgY29uc3Qgd2lkdGhDb250YWluZXIgPSB0aGlzLmVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgY29uc3QgY29udGFpbmVyID0gd2lkdGhDb250YWluZXIubmV4dEVsZW1lbnRTaWJsaW5nO1xuXG4gICAgaWYgKGlzSGVhZGVyKSB7XG4gICAgICB3aWR0aENvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLm1ldGFSb3dzLmdyaWRXaWR0aFJvdy5lbCk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBkZWYgb2Ygc2VjdGlvbi5maXhlZCkge1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRlZi5lbCk7XG4gICAgfVxuICB9XG59XG4iXX0=