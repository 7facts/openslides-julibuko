(window.webpackJsonp=window.webpackJsonp||[]).push([[33,36],{F48D:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var c=n("mrSG"),i=n("LBBb"),o=n("fXoL"),a=n("0IaG");let l=(()=>{class t{constructor(t){this.dialog=t}open(t,e=""){return Object(c.a)(this,void 0,void 0,(function*(){return this.dialog.open(i.a,{width:"250px",data:{title:t,content:e}}).afterClosed().toPromise()}))}}return t.\u0275fac=function(e){return new(e||t)(o.dc(a.b))},t.\u0275prov=o.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},LBBb:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var c=n("0IaG"),i=n("fXoL"),o=n("ofXK"),a=n("bTqV"),l=n("sYmb");function s(t,e){if(1&t&&(i.Zb(0,"div"),i.Zb(1,"h2",1),i.Sc(2),i.Yb(),i.Ub(3,"mat-dialog-content",2),i.Zb(4,"mat-dialog-actions"),i.Zb(5,"button",3),i.Sc(6),i.mc(7,"translate"),i.Yb(),i.Zb(8,"button",4),i.Sc(9),i.mc(10,"translate"),i.Yb(),i.Yb(),i.Yb()),2&t){const t=i.lc();i.Gb(2),i.Tc(t.data.title),i.Gb(1),i.tc("innerHTML",t.data.content,i.Jc),i.Gb(2),i.tc("mat-dialog-close",!0),i.Gb(1),i.Tc(i.nc(7,6,"Yes")),i.Gb(2),i.tc("mat-dialog-close",!1),i.Gb(1),i.Tc(i.nc(10,8,"Cancel"))}}let r=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}}return t.\u0275fac=function(e){return new(e||t)(i.Tb(c.h),i.Tb(c.a))},t.\u0275cmp=i.Nb({type:t,selectors:[["os-prompt-dialog"]],decls:1,vars:1,consts:[[4,"ngIf"],["mat-dialog-title",""],[3,"innerHTML"],["mat-button","","color","warn",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&i.Qc(0,s,11,10,"div",0),2&t&&i.tc("ngIf",e.data)},directives:[o.t,c.i,c.f,c.c,a.b,c.d],pipes:[l.j],encapsulation:2}),t})()},moyA:function(t,e,n){"use strict";n.r(e),n.d(e,"MotionWorkflowModule",(function(){return yt}));var c=n("ofXK"),i=n("PCNd"),o=n("tyNb"),a=n("+0xr"),l=n("lJxs"),s=n("ZvXm"),r=n("s3dr"),b=n("F48D"),m=n("gtli"),u=n("Izkr"),d=n("mV3u"),f=n("fXoL"),g=n("jhN1"),p=n("sYmb"),h=n("dNgK"),w=n("0IaG"),v=n("mksl"),k=n("bTqV"),M=n("NFeN"),C=n("STbY"),Y=n("bSwM"),Z=n("A5z7"),S=n("kmnG"),_=n("qFsG"),G=n("3Pt+"),O=n("IZUe");const P=["workflowDialog"];function D(t,e){if(1&t&&(f.Zb(0,"h2"),f.Sc(1),f.mc(2,"translate"),f.Yb()),2&t){const t=f.lc();f.Gb(1),f.Uc(" ",f.nc(2,1,t.workflow.name)," ")}}function y(t,e){1&t&&(f.Zb(0,"th",20),f.Sc(1),f.mc(2,"translate"),f.Yb()),2&t&&(f.Gb(1),f.Tc(f.nc(2,1,"Permissions")))}function T(t,e){if(1&t&&(f.Zb(0,"td",21),f.Zb(1,"div",22),f.Sc(2),f.mc(3,"translate"),f.Yb(),f.Yb()),2&t){const t=e.$implicit;f.Gb(2),f.Uc(" ",f.nc(3,1,t.name)," ")}}function I(t,e){if(1&t){const t=f.ac();f.Zb(0,"th",25),f.hc("click",(function(){f.Ic(t);const e=f.lc().$implicit;return f.lc(2).onClickStateName(e)})),f.Zb(1,"div",26),f.Zb(2,"div",27),f.Sc(3),f.mc(4,"translate"),f.Yb(),f.Yb(),f.Yb()}if(2&t){const t=f.lc().$implicit;f.Gb(3),f.Uc(" ",f.nc(4,1,t.name)," ")}}function x(t,e){if(1&t){const t=f.ac();f.Zb(0,"div",27),f.Zb(1,"mat-checkbox",29),f.hc("change",(function(e){f.Ic(t);const n=f.lc().$implicit,c=f.lc().$implicit;return f.lc(2).onToggleStatePerm(c,n.selector,e)})),f.Yb(),f.Yb()}if(2&t){const t=f.lc().$implicit,e=f.lc().$implicit;f.Gb(1),f.tc("checked",e[t.selector])}}function Q(t,e){if(1&t){const t=f.ac();f.Zb(0,"div"),f.Zb(1,"div",27),f.Sc(2),f.mc(3,"translate"),f.Yb(),f.Zb(4,"div",30),f.hc("click",(function(){f.Ic(t);const e=f.lc().$implicit,n=f.lc().$implicit;return f.lc(2).onClickInputPerm(e,n)})),f.Yb(),f.Yb()}if(2&t){const t=f.lc().$implicit,e=f.lc().$implicit;f.Gb(2),f.Uc(" ",f.nc(3,1,e[t.selector])||"\u2013"," ")}}const R=function(t){return{state:t}};function E(t,e){if(1&t&&(f.Zb(0,"div",27),f.Zb(1,"mat-basic-chip",31),f.Sc(2),f.mc(3,"translate"),f.Yb(),f.Yb()),2&t){const t=f.lc().$implicit,e=f.lc().$implicit;f.lc(2);const n=f.Ec(11);f.Gb(1),f.tc("matMenuTriggerFor",n)("matMenuTriggerData",f.zc(7,R,e))("disableRipple",!0)("ngClass",e[t.selector]),f.Gb(1),f.Uc(" ",f.nc(3,5,e[t.selector])," ")}}function $(t,e){1&t&&(f.Zb(0,"div"),f.Sc(1," - "),f.Yb())}function F(t,e){1&t&&(f.Zb(0,"span"),f.Sc(1,",\xa0"),f.Yb())}function N(t,e){if(1&t&&(f.Zb(0,"div"),f.Sc(1),f.mc(2,"translate"),f.Qc(3,F,2,0,"span",2),f.Yb()),2&t){const t=e.$implicit,n=e.last;f.Gb(1),f.Uc(" ",f.nc(2,2,t.name),""),f.Gb(2),f.tc("ngIf",!n)}}function L(t,e){if(1&t&&(f.Zb(0,"div"),f.Qc(1,N,4,4,"div",33),f.Yb()),2&t){const t=f.lc(3).$implicit;f.Gb(1),f.tc("ngForOf",t.next_states)}}function B(t,e){if(1&t&&(f.Zb(0,"div"),f.Zb(1,"div",27),f.Qc(2,$,2,0,"div",2),f.Qc(3,L,2,1,"div",2),f.Yb(),f.Ub(4,"div",32),f.Yb()),2&t){const t=f.lc(2).$implicit;f.lc(2);const e=f.Ec(14);f.Gb(2),f.tc("ngIf",!t.next_states.length),f.Gb(1),f.tc("ngIf",t.next_states.length),f.Gb(1),f.tc("matMenuTriggerFor",e)("matMenuTriggerData",f.zc(4,R,t))}}function A(t,e){if(1&t&&(f.Zb(0,"div"),f.Zb(1,"div",27),f.Sc(2),f.mc(3,"translate"),f.Yb(),f.Ub(4,"div",32),f.Yb()),2&t){const t=f.lc(2).$implicit,e=f.lc(2),n=f.Ec(20);f.Gb(2),f.Uc(" ",f.nc(3,3,e.getMergeAmendmentLabel(t.merge_amendment_into_final))," "),f.Gb(2),f.tc("matMenuTriggerFor",n)("matMenuTriggerData",f.zc(5,R,t))}}function U(t,e){1&t&&(f.Zb(0,"div"),f.Sc(1," - "),f.Yb())}function W(t,e){1&t&&(f.Zb(0,"span"),f.Sc(1,",\xa0"),f.Yb())}function j(t,e){if(1&t&&(f.Zb(0,"div"),f.Sc(1),f.mc(2,"translate"),f.Qc(3,W,2,0,"span",2),f.Yb()),2&t){const t=e.$implicit,n=e.last,c=f.lc(6);f.Gb(1),f.Uc(" ",f.nc(2,2,c.getRestrictionLabel(t))," "),f.Gb(2),f.tc("ngIf",!n)}}function z(t,e){if(1&t&&(f.Zb(0,"div"),f.Qc(1,j,4,4,"div",33),f.Yb()),2&t){const t=f.lc(3).$implicit;f.Gb(1),f.tc("ngForOf",t.restriction)}}function X(t,e){if(1&t&&(f.Zb(0,"div"),f.Zb(1,"div",27),f.Qc(2,U,2,0,"div",2),f.Qc(3,z,2,1,"div",2),f.Yb(),f.Ub(4,"div",32),f.Yb()),2&t){const t=f.lc(2).$implicit;f.lc(2);const e=f.Ec(17);f.Gb(2),f.tc("ngIf",!t.restriction.length),f.Gb(1),f.tc("ngIf",t.restriction.length),f.Gb(1),f.tc("matMenuTriggerFor",e)("matMenuTriggerData",f.zc(4,R,t))}}function q(t,e){if(1&t&&(f.Zb(0,"td",21),f.Qc(1,x,2,1,"div",28),f.Qc(2,Q,5,3,"div",2),f.Qc(3,E,4,9,"div",28),f.Qc(4,B,5,6,"div",2),f.Qc(5,A,5,7,"div",2),f.Qc(6,X,5,6,"div",2),f.Yb()),2&t){const t=e.$implicit;f.Gb(1),f.tc("ngIf","check"===t.type),f.Gb(1),f.tc("ngIf","input"===t.type),f.Gb(1),f.tc("ngIf","color"===t.type),f.Gb(1),f.tc("ngIf","state"===t.type),f.Gb(1),f.tc("ngIf","amendment"===t.type),f.Gb(1),f.tc("ngIf","restriction"===t.type)}}function H(t,e){if(1&t&&(f.Xb(0,23),f.Qc(1,I,5,3,"th",24),f.Qc(2,q,7,6,"td",16),f.Wb()),2&t){const t=e.$implicit,n=f.lc(2);f.tc("matColumnDef",n.getColumnDef(t))}}function V(t,e){1&t&&f.Ub(0,"tr",34)}function J(t,e){1&t&&f.Ub(0,"tr",35)}function K(t,e){if(1&t&&(f.Zb(0,"div"),f.Zb(1,"div",11),f.Zb(2,"strong"),f.Zb(3,"span"),f.Sc(4),f.mc(5,"translate"),f.Yb(),f.Sc(6,": "),f.Zb(7,"span"),f.Sc(8),f.mc(9,"translate"),f.Yb(),f.Yb(),f.Yb(),f.Zb(10,"div",12),f.Zb(11,"table",13),f.Xb(12,14),f.Qc(13,y,3,3,"th",15),f.Qc(14,T,4,3,"td",16),f.Wb(),f.Qc(15,H,3,1,"ng-container",17),f.Qc(16,V,1,0,"tr",18),f.Qc(17,J,1,0,"tr",19),f.Yb(),f.Yb(),f.Yb()),2&t){const t=f.lc();f.Gb(4),f.Tc(f.nc(5,7,"First state")),f.Gb(4),f.Tc(f.nc(9,9,t.workflow.first_state.name)),f.Gb(3),f.tc("dataSource",t.getTableDataSource()),f.Gb(4),f.tc("ngForOf",t.workflow.states)("ngForTrackBy",t.trackByIndex),f.Gb(1),f.tc("matHeaderRowDef",t.headerRowDef),f.Gb(1),f.tc("matRowDefColumns",t.headerRowDef)}}const tt=function(){return{action:"delete"}};function et(t,e){1&t&&(f.Zb(0,"button",43),f.Zb(1,"span"),f.Sc(2),f.mc(3,"translate"),f.Yb(),f.Yb()),2&t&&(f.tc("mat-dialog-close",f.yc(4,tt)),f.Gb(2),f.Tc(f.nc(3,2,"Delete")))}const nt=function(t){return{action:"update",value:t}};function ct(t,e){if(1&t){const t=f.ac();f.Zb(0,"h1",36),f.Zb(1,"span"),f.Sc(2),f.mc(3,"translate"),f.Yb(),f.Yb(),f.Zb(4,"div",37),f.Zb(5,"p"),f.Sc(6),f.mc(7,"translate"),f.Yb(),f.Zb(8,"mat-form-field"),f.Zb(9,"input",38),f.hc("ngModelChange",(function(e){return f.Ic(t),f.lc().dialogData.value=e})),f.Yb(),f.Yb(),f.Yb(),f.Zb(10,"div",39),f.Zb(11,"button",40),f.Zb(12,"span"),f.Sc(13),f.mc(14,"translate"),f.Yb(),f.Yb(),f.Zb(15,"button",41),f.Zb(16,"span"),f.Sc(17),f.mc(18,"translate"),f.Yb(),f.Yb(),f.Qc(19,et,4,5,"button",42),f.Yb()}if(2&t){const t=f.lc();f.Gb(2),f.Tc(f.nc(3,9,t.dialogData.title)),f.Gb(4),f.Tc(f.nc(7,11,t.dialogData.description)),f.Gb(3),f.tc("ngModel",t.dialogData.value),f.Gb(2),f.tc("disabled",""===t.dialogData.value&&!t.dialogData.allowEmpty)("mat-dialog-close",f.zc(17,nt,t.dialogData.value)),f.Gb(2),f.Tc(f.nc(14,13,"Save")),f.Gb(2),f.tc("mat-dialog-close",null),f.Gb(2),f.Tc(f.nc(18,15,"Cancel")),f.Gb(2),f.tc("ngIf",t.dialogData.deletable)}}function it(t,e){1&t&&(f.Zb(0,"mat-icon"),f.Sc(1,"check"),f.Yb())}function ot(t,e){if(1&t){const t=f.ac();f.Zb(0,"button",45),f.hc("click",(function(){f.Ic(t);const n=e.$implicit,c=f.lc().state;return f.lc().onSelectColor(c,n)})),f.Qc(1,it,2,0,"mat-icon",2),f.Zb(2,"span"),f.Sc(3),f.mc(4,"translate"),f.Yb(),f.Yb()}if(2&t){const t=e.$implicit,n=f.lc().state;f.Gb(1),f.tc("ngIf",t===n.css_class),f.Gb(2),f.Tc(f.nc(4,2,t))}}function at(t,e){if(1&t&&f.Qc(0,ot,5,4,"button",44),2&t){const t=f.lc();f.tc("ngForOf",t.labelColors)}}function lt(t,e){1&t&&(f.Zb(0,"mat-icon"),f.Sc(1,"check"),f.Yb())}function st(t,e){if(1&t){const t=f.ac();f.Zb(0,"button",45),f.hc("click",(function(){f.Ic(t);const e=f.lc().$implicit,n=f.lc().state;return f.lc().onSetNextState(e,n)})),f.Qc(1,lt,2,0,"mat-icon",2),f.Zb(2,"span"),f.Sc(3),f.mc(4,"translate"),f.Yb(),f.Yb()}if(2&t){const t=f.lc().$implicit,e=f.lc().state;f.Gb(1),f.tc("ngIf",e.next_states_id.includes(t.id)),f.Gb(2),f.Tc(f.nc(4,2,t.name))}}function rt(t,e){if(1&t&&(f.Zb(0,"div"),f.Qc(1,st,5,4,"button",46),f.Yb()),2&t){const t=e.$implicit,n=f.lc().state;f.Gb(1),f.tc("ngIf",t.name!==n.name)}}function bt(t,e){if(1&t&&f.Qc(0,rt,2,1,"div",33),2&t){const t=f.lc();f.tc("ngForOf",t.workflow.states)}}function mt(t,e){1&t&&(f.Zb(0,"mat-icon"),f.Sc(1,"check"),f.Yb())}function ut(t,e){if(1&t){const t=f.ac();f.Zb(0,"button",45),f.hc("click",(function(){f.Ic(t);const n=e.$implicit,c=f.lc().state;return f.lc().onSetRestriction(n.key,c)})),f.Qc(1,mt,2,0,"mat-icon",2),f.Zb(2,"span"),f.Sc(3),f.mc(4,"translate"),f.Yb(),f.Yb()}if(2&t){const t=e.$implicit,n=f.lc().state;f.Gb(1),f.tc("ngIf",n.restriction.includes(t.key)),f.Gb(2),f.Tc(f.nc(4,2,t.label))}}function dt(t,e){if(1&t&&f.Qc(0,ut,5,4,"button",44),2&t){const t=f.lc();f.tc("ngForOf",t.restrictions)}}function ft(t,e){1&t&&(f.Zb(0,"mat-icon"),f.Sc(1,"check"),f.Yb())}function gt(t,e){if(1&t){const t=f.ac();f.Zb(0,"div"),f.Zb(1,"button",45),f.hc("click",(function(){f.Ic(t);const n=e.$implicit,c=f.lc().state;return f.lc().setMergeAmendment(n.merge,c)})),f.Qc(2,ft,2,0,"mat-icon",2),f.Zb(3,"span"),f.Sc(4),f.mc(5,"translate"),f.Yb(),f.Yb(),f.Yb()}if(2&t){const t=e.$implicit,n=f.lc().state;f.Gb(2),f.tc("ngIf",t.merge===n.merge_amendment_into_final),f.Gb(2),f.Tc(f.nc(5,2,t.label))}}function pt(t,e){if(1&t&&f.Qc(0,gt,6,4,"div",33),2&t){const t=f.lc();f.tc("ngForOf",t.amendmentIntoFinal)}}let ht=(()=>{class t extends d.a{constructor(t,e,n,c,i,o,a,l,s){super(t,e,n),this.translate=e,this.promptService=c,this.dialog=i,this.workflowRepo=o,this.stateRepo=a,this.route=l,this.cd=s,this.headerRowDef=[],this.labelColors=["grey","red","green","lightblue","yellow"],this.statePermissionsList=[{name:"Recommendation label",selector:"recommendation_label",type:"input"},{name:"Allow support",selector:"allow_support",type:"check"},{name:"Allow create poll",selector:"allow_create_poll",type:"check"},{name:"Allow submitter edit",selector:"allow_submitter_edit",type:"check"},{name:"Do not set identifier",selector:"dont_set_identifier",type:"check"},{name:"Show state extension field",selector:"show_state_extension_field",type:"check"},{name:"Show recommendation extension field",selector:"show_recommendation_extension_field",type:"check"},{name:"Show amendment in parent motion",selector:"merge_amendment_into_final",type:"amendment"},{name:"Restrictions",selector:"restriction",type:"restriction"},{name:"Label color",selector:"css_class",type:"color"},{name:"Next states",selector:"next_states_id",type:"state"}],this.restrictions=[{key:m.b.motionsCanManage,label:"Can manage motions"},{key:m.b.motionsCanSeeInternal,label:"Can see motions in internal state"},{key:m.b.motionsCanManageMetadata,label:"Can manage motion metadata"},{key:m.b.motionsIsSubmitter,label:"Submitters"}],this.amendmentIntoFinal=[{merge:m.a.NO,label:"No"},{merge:m.a.UNDEFINED,label:"-"},{merge:m.a.YES,label:"Yes"}]}ngOnInit(){const t=parseInt(this.route.snapshot.paramMap.get("id"),10);this.subscriptions.push(this.workflowRepo.getViewModelObservable(t).subscribe(t=>{t&&(this.workflow=t,this.updateRowDef(),this.cd.markForCheck())}),this.stateRepo.getViewModelListObservable().pipe(Object(l.a)(t=>t.filter(t=>this.workflow.states_id.includes(t.id)))).subscribe(t=>{t&&this.cd.markForCheck()}))}onClickStateName(t){this.openEditDialog(t.name,"Rename state","",!0).subscribe(e=>{if(e)if(this.cd.detectChanges(),"update"===e.action)this.stateRepo.update({name:e.value},t).then(()=>{},this.raiseError);else if("delete"===e.action){const e=this.translate.instant("Delete")+` ${t.name}?`;this.promptService.open("Are you sure",e).then(e=>{e&&this.stateRepo.delete(t).then(()=>{},this.raiseError)})}})}onNewStateButton(){this.openEditDialog("",this.translate.instant("New state"),this.translate.instant("Name")).subscribe(t=>{if(t&&"update"===t.action){const e=new m.c({name:t.value,workflow_id:this.workflow.id});this.stateRepo.create(e).then(()=>{},this.raiseError)}})}onEditWorkflowButton(){this.openEditDialog(this.workflow.name,"Edit name","Please enter a new workflow name:").subscribe(t=>{t&&"update"===t.action&&this.workflowRepo.update({name:t.value},this.workflow).then(()=>{},this.raiseError)})}onClickInputPerm(t,e){this.openEditDialog(e[t.selector],"Edit",t.name,!1,!0).subscribe(n=>{""===n.value&&(n.value=null),n&&"update"===n.action&&this.stateRepo.update({[t.selector]:n.value},e).then(()=>{},this.raiseError)})}onToggleStatePerm(t,e,n){this.stateRepo.update({[e]:n.checked},t).then(()=>{},this.raiseError)}onSelectColor(t,e){this.stateRepo.update({css_class:e},t).then(()=>{},this.raiseError)}onSetNextState(t,e){const n=e.next_states_id.map(t=>t),c=n.findIndex(e=>e===t.id);c<0?n.push(t.id):n.splice(c,1),this.stateRepo.update({next_states_id:n},e).then(()=>{},this.raiseError)}onSetRestriction(t,e){const n=e.restriction.map(t=>t),c=n.findIndex(e=>e===t);c<0?n.push(t):n.splice(c,1),this.stateRepo.update({restriction:n},e).then(()=>{},this.raiseError)}getRestrictionLabel(t){const e=this.restrictions.find(e=>e.key===t);return e?e.label:""}setMergeAmendment(t,e){this.stateRepo.update({merge_amendment_into_final:t},e).then(()=>{},this.raiseError)}openEditDialog(t,e,n,c,i){return this.dialogData={title:e||"",description:n||"",value:t,deletable:c,allowEmpty:i},this.dialog.open(this.workflowDialog,u.a).afterClosed()}getMergeAmendmentLabel(t){return this.amendmentIntoFinal.find(e=>e.merge===t).label}getTableDataSource(){const t=new a.o;return t.data=this.statePermissionsList,t}updateRowDef(){this.headerRowDef=["perm"],this.workflow&&this.workflow.states.forEach(t=>{this.headerRowDef.push(this.getColumnDef(t))})}getColumnDef(t){return`${t.name}${t.id}`}trackElement(t){return t}}return t.\u0275fac=function(e){return new(e||t)(f.Tb(g.d),f.Tb(p.k),f.Tb(h.a),f.Tb(b.a),f.Tb(w.b),f.Tb(r.a),f.Tb(s.a),f.Tb(o.a),f.Tb(f.h))},t.\u0275cmp=f.Nb({type:t,selectors:[["os-workflow-detail"]],viewQuery:function(t,e){var n;1&t&&f.Oc(P,!0),2&t&&f.Dc(n=f.ic())&&(e.workflowDialog=n.first)},features:[f.Db],decls:22,vars:4,consts:[[3,"nav","hasMainButton","mainEvent"],[1,"title-slot"],[4,"ngIf"],[1,"extra-controls-slot"],["mat-icon-button","",3,"click"],["workflowDialog",""],["matMenuContent",""],["colorMenu","matMenu"],["nextStatesMenu","matMenu"],["restrictionMenu","matMenu"],["mergeAmendmentMenu","matMenu"],[1,"title-line"],[1,"scrollable-matrix"],["mat-table","",3,"dataSource"],["matColumnDef","perm","sticky",""],["mat-header-cell","","class","group-head-table-cell",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"group-head-table-cell"],["mat-cell",""],[1,"permission-name"],[3,"matColumnDef"],["mat-header-cell","",3,"click",4,"matHeaderCellDef"],["mat-header-cell","",3,"click"],[1,"clickable-cell","stretch-to-fill-parent"],[1,"inner-table"],["class","inner-table",4,"ngIf"],[3,"checked","change"],[1,"clickable-cell","stretch-to-fill-parent",3,"click"],[3,"matMenuTriggerFor","matMenuTriggerData","disableRipple","ngClass"],[1,"clickable-cell","stretch-to-fill-parent",3,"matMenuTriggerFor","matMenuTriggerData"],[4,"ngFor","ngForOf"],["mat-header-row",""],["mat-row",""],["mat-dialog-title",""],["mat-dialog-content","",1,"os-form-card-mobile"],["matInput","","osAutofocus","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["type","submit","mat-button","","color","accent",3,"disabled","mat-dialog-close"],["type","button","mat-button","",3,"mat-dialog-close"],["type","button","mat-button","","color","warn",3,"mat-dialog-close",4,"ngIf"],["type","button","mat-button","","color","warn",3,"mat-dialog-close"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"]],template:function(t,e){1&t&&(f.Zb(0,"os-head-bar",0),f.hc("mainEvent",(function(){return e.onNewStateButton()})),f.Zb(1,"div",1),f.Qc(2,D,3,3,"h2",2),f.Yb(),f.Zb(3,"div",3),f.Zb(4,"button",4),f.hc("click",(function(){return e.onEditWorkflowButton()})),f.Zb(5,"mat-icon"),f.Sc(6,"edit"),f.Yb(),f.Yb(),f.Yb(),f.Yb(),f.Qc(7,K,18,11,"div",2),f.Qc(8,ct,20,19,"ng-template",null,5,f.Rc),f.Zb(10,"mat-menu",6,7),f.Qc(12,at,1,1,"ng-template",6),f.Yb(),f.Zb(13,"mat-menu",6,8),f.Qc(15,bt,1,1,"ng-template",6),f.Yb(),f.Zb(16,"mat-menu",6,9),f.Qc(18,dt,1,1,"ng-template",6),f.Yb(),f.Zb(19,"mat-menu",6,10),f.Qc(21,pt,1,1,"ng-template",6),f.Yb()),2&t&&(f.tc("nav",!1)("hasMainButton",!0),f.Gb(2),f.tc("ngIf",e.workflow),f.Gb(5),f.tc("ngIf",e.workflow))},directives:[v.a,c.t,k.b,M.a,C.f,C.b,a.n,a.c,a.i,a.b,c.s,a.k,a.m,a.h,a.a,Y.a,Z.a,C.e,c.q,a.j,a.l,w.i,w.f,S.c,_.b,G.c,O.a,G.s,G.v,w.c,w.d,C.c],pipes:[p.j],styles:[".title-line[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.title-line[_ngcontent-%COMP%]   .icon-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line[_ngcontent-%COMP%]   .favorite-star[_ngcontent-%COMP%]{padding-right:3px}.mat-table[_ngcontent-%COMP%]{width:100%}.mat-table[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{display:none}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{z-index:2}.mat-table[_ngcontent-%COMP%]   .mat-table-sticky[_ngcontent-%COMP%]{z-index:3!important}.title-line[_ngcontent-%COMP%]{margin:20px 25px}table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{min-width:200px;position:relative}table[_ngcontent-%COMP%]   .clickable-cell[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;cursor:pointer}table[_ngcontent-%COMP%]   .clickable-cell[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.025)}table[_ngcontent-%COMP%]   .inner-table[_ngcontent-%COMP%]{text-align:center;-ms-flex-align:center;align-items:center;margin:auto;overflow:hidden;padding:0 10px}table[_ngcontent-%COMP%]   .mat-column-perm[_ngcontent-%COMP%]{min-width:150px}table[_ngcontent-%COMP%]   .mat-column-perm[_ngcontent-%COMP%]   .permission-name[_ngcontent-%COMP%]{margin-right:10px}.mat-chip[_ngcontent-%COMP%]:hover{cursor:pointer}.scrollable-matrix[_ngcontent-%COMP%]{overflow-y:scroll;overflow-x:auto;height:calc(100vh - 128px)}"],changeDetection:0}),t})();var wt=n("mrSG"),vt=n("AqIO"),kt=n("hsNs"),Mt=n("wL0i"),Ct=n("0Obk"),Yt=n("dRZP");function Zt(t,e){if(1&t&&f.Ub(0,"a",7),2&t){const t=f.lc().row;f.tc("routerLink",t.id)}}function St(t,e){if(1&t&&(f.Zb(0,"div",5),f.Qc(1,Zt,1,1,"a",6),f.Zb(2,"div"),f.Sc(3),f.mc(4,"translate"),f.Yb(),f.Yb()),2&t){const t=e.value,n=f.lc();f.Gb(1),f.tc("ngIf",!n.isMultiSelect),f.Gb(2),f.Tc(f.nc(4,2,t))}}function _t(t,e){if(1&t){const t=f.ac();f.Zb(0,"div",5),f.Zb(1,"button",8),f.hc("click",(function(){f.Ic(t);const n=e.row;return f.lc().onDeleteWorkflow(n)})),f.Zb(2,"mat-icon",9),f.Sc(3,"delete"),f.Yb(),f.Yb(),f.Yb()}}function Gt(t,e){if(1&t){const t=f.ac();f.Zb(0,"h1",10),f.Zb(1,"span"),f.Sc(2),f.mc(3,"translate"),f.Yb(),f.Yb(),f.Zb(4,"div",11),f.Zb(5,"p"),f.Sc(6),f.mc(7,"translate"),f.Yb(),f.Zb(8,"mat-form-field"),f.Zb(9,"input",12),f.hc("ngModelChange",(function(e){return f.Ic(t),f.lc().newWorkflowTitle=e})),f.Yb(),f.Yb(),f.Yb(),f.Zb(10,"div",13),f.Zb(11,"button",14),f.Zb(12,"span"),f.Sc(13),f.mc(14,"translate"),f.Yb(),f.Yb(),f.Zb(15,"button",15),f.Zb(16,"span"),f.Sc(17),f.mc(18,"translate"),f.Yb(),f.Yb(),f.Yb()}if(2&t){const t=f.lc();f.Gb(2),f.Tc(f.nc(3,8,"New workflow")),f.Gb(4),f.Tc(f.nc(7,10,"Please enter a name for the new workflow:")),f.Gb(3),f.tc("ngModel",t.newWorkflowTitle),f.Gb(2),f.tc("disabled",""===t.newWorkflowTitle)("mat-dialog-close",t.newWorkflowTitle),f.Gb(2),f.Tc(f.nc(14,12,"Save")),f.Gb(2),f.tc("mat-dialog-close",null),f.Gb(2),f.Tc(f.nc(18,14,"Cancel"))}}const Ot=function(){return["menu"]},Pt=[{path:"",component:(()=>{class t extends Mt.a{constructor(t,e,n,c,i,o,a){super(t,e,n,c),this.translate=e,this.dialog=i,this.workflowRepo=o,this.promptService=a,this.tableColumnDefinition=[{prop:"name",width:"auto"},{prop:"delete"}],this.filterProps=["name","states"]}ngOnInit(){super.setTitle("Workflows")}onNewButton(t){this.newWorkflowTitle="",this.dialog.open(t,u.a).afterClosed().subscribe(t=>{t&&this.workflowRepo.create(new kt.a({name:t})).then(()=>{},this.raiseError)})}onDeleteWorkflow(t){return Object(wt.a)(this,void 0,void 0,(function*(){const e=this.translate.instant("Are you sure you want to delete this workflow?"),n=t.getTitle();(yield this.promptService.open(e,n))&&this.workflowRepo.delete(t).then(()=>{},this.raiseError)}))}}return t.\u0275fac=function(e){return new(e||t)(f.Tb(g.d),f.Tb(p.k),f.Tb(h.a),f.Tb(vt.a),f.Tb(w.b),f.Tb(r.a),f.Tb(b.a))},t.\u0275cmp=f.Nb({type:t,selectors:[["os-workflow-list"]],features:[f.Db],decls:10,vars:14,consts:[["prevUrl","../..",3,"nav","hasMainButton","mainEvent"],[1,"title-slot"],["listStorageKey","workflow",3,"listObservableProvider","columns","allowProjector","hiddenInMobile","showListOfSpeakers","filterProps","dataSourceChange"],["class","cell-slot fill",4,"pblNgridCellDef"],["newWorkflowDialog",""],[1,"cell-slot","fill"],["class","detail-link",3,"routerLink",4,"ngIf"],[1,"detail-link",3,"routerLink"],["type","button","mat-icon-button","",3,"click"],["color","warn"],["mat-dialog-title",""],["mat-dialog-content",""],["matInput","","osAutofocus","","required","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["type","submit","mat-button","","color","accent",3,"disabled","mat-dialog-close"],["type","button","mat-button","",3,"mat-dialog-close"]],template:function(t,e){if(1&t){const t=f.ac();f.Zb(0,"os-head-bar",0),f.hc("mainEvent",(function(){f.Ic(t);const n=f.Ec(9);return e.onNewButton(n)})),f.Zb(1,"div",1),f.Zb(2,"h2"),f.Sc(3),f.mc(4,"translate"),f.Yb(),f.Yb(),f.Yb(),f.Zb(5,"os-list-view-table",2),f.hc("dataSourceChange",(function(t){return e.onDataSourceChange(t)})),f.Qc(6,St,5,4,"div",3),f.Qc(7,_t,4,0,"div",3),f.Yb(),f.Qc(8,Gt,19,16,"ng-template",null,4,f.Rc)}2&t&&(f.tc("nav",!1)("hasMainButton",!0),f.Gb(3),f.Tc(f.nc(4,11,"Workflows")),f.Gb(2),f.tc("listObservableProvider",e.workflowRepo)("columns",e.tableColumnDefinition)("allowProjector",!1)("hiddenInMobile",f.yc(13,Ot))("showListOfSpeakers",!1)("filterProps",e.filterProps),f.Gb(1),f.tc("pblNgridCellDef","name"),f.Gb(1),f.tc("pblNgridCellDef","delete"))},directives:[v.a,Ct.a,Yt.c,c.t,o.i,k.b,M.a,w.i,w.f,S.c,_.b,G.c,O.a,G.D,G.s,G.v,w.c,w.d],pipes:[p.j],styles:[""]}),t})(),pathMatch:"full"},{path:":id",component:ht}];let Dt=(()=>{class t{}return t.\u0275mod=f.Rb({type:t}),t.\u0275inj=f.Qb({factory:function(e){return new(e||t)},imports:[[o.j.forChild(Pt)],o.j]}),t})(),yt=(()=>{class t{}return t.\u0275mod=f.Rb({type:t}),t.\u0275inj=f.Qb({factory:function(e){return new(e||t)},imports:[[c.c,Dt,i.a]]}),t})()},wL0i:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var c=n("mV3u");class i extends c.a{constructor(t,e,n,c){super(t,e,n),this.storage=c,this.canMultiSelect=!1,this._multiSelectMode=!1,this.singleButtonWidth="40px",this.badgeButtonWidth="45px",this.selectedRows=[]}onDataSourceChange(t){this.dataSource=t}toggleMultiSelect(){!this.canMultiSelect||this.isMultiSelect?(this._multiSelectMode=!1,this.deselectAll()):this._multiSelectMode=!0}selectAll(){this.dataSource.selection.select(...this.dataSource.filteredData)}deselectAll(){this.dataSource&&this.dataSource.selection.clear()}get isMultiSelect(){return this._multiSelectMode}}}}]);