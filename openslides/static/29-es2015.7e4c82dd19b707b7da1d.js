(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"0bMg":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));class c{static validation(...t){return e=>t.map(t=>e.get(t)).every(t=>t&&""===t.value||!t)?{noOneSet:!0}:null}}},"EGJ/":function(t,e,n){"use strict";n.r(e),n.d(e,"UsersModule",(function(){return Cc}));var c=n("ofXK"),a=n("PCNd"),s=n("tyNb"),i=n("OwvW"),o=n("mrSG"),r=n("3Pt+"),l=n("+0xr"),b=n("R+Vs"),u=n("F48D"),m=n("Izkr"),d=n("mV3u"),p=n("fXoL"),h=n("jhN1"),f=n("sYmb"),g=n("dNgK"),v=n("0IaG"),w=n("mksl"),G=n("Wp6s"),S=n("7EHt"),Y=n("bSwM"),Z=n("kmnG"),_=n("qFsG"),P=n("IZUe"),C=n("bTqV");const I=["groupForm"],T=["groupEditDialog"];function y(t,e){1&t&&(p.Zb(0,"mat-header-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Permissions")))}function M(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t){const t=e.$implicit;p.Gb(1),p.Uc(" ",p.nc(2,1,t.display_name)," ")}}function k(t,e){if(1&t){const t=p.ac();p.Zb(0,"mat-header-cell",17),p.hc("click",(function(){p.Ic(t);const e=p.lc().$implicit;return p.lc(2).selectGroup(e)})),p.Zb(1,"div",18),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Yb()}if(2&t){const t=p.lc().$implicit;p.Gb(2),p.Uc(" ",p.nc(3,1,t.name)," ")}}function x(t,e){if(1&t){const t=p.ac();p.Zb(0,"mat-checkbox",21),p.hc("change",(function(){p.Ic(t);const e=p.lc().$implicit,n=p.lc().$implicit;return p.lc(2).togglePerm(n,e.value)})),p.Yb()}if(2&t){const t=p.lc().$implicit,e=p.lc().$implicit;p.tc("checked",e.hasPermission(t.value))}}function D(t,e){1&t&&p.Ub(0,"mat-checkbox",22),2&t&&p.tc("checked",!0)("disabled",!0)}function O(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Zb(1,"div",18),p.Qc(2,x,1,1,"mat-checkbox",19),p.Qc(3,D,1,2,"mat-checkbox",20),p.Yb(),p.Yb()),2&t){const t=p.lc().$implicit;p.Gb(2),p.tc("ngIf",2!==t.id),p.Gb(1),p.tc("ngIf",2===t.id)}}function E(t,e){if(1&t&&(p.Zb(0,"div"),p.Xb(1,15),p.Qc(2,k,4,3,"mat-header-cell",16),p.Qc(3,O,4,2,"mat-cell",11),p.Wb(),p.Yb()),2&t){const t=e.$implicit;p.Gb(1),p.tc("matColumnDef",t.name)}}function U(t,e){1&t&&p.Ub(0,"mat-header-row")}function Q(t,e){1&t&&p.Ub(0,"mat-row")}function F(t,e){if(1&t&&(p.Zb(0,"mat-accordion"),p.Zb(1,"mat-expansion-panel",6),p.Zb(2,"mat-expansion-panel-header"),p.Zb(3,"mat-panel-title"),p.Sc(4),p.mc(5,"translate"),p.Yb(),p.Yb(),p.Zb(6,"div",7),p.Zb(7,"table",8),p.Xb(8,9),p.Qc(9,y,3,3,"mat-header-cell",10),p.Qc(10,M,3,3,"mat-cell",11),p.Wb(),p.Qc(11,E,4,1,"div",12),p.Qc(12,U,1,0,"mat-header-row",13),p.Qc(13,Q,1,0,"mat-row",14),p.Yb(),p.Yb(),p.Yb(),p.Yb()),2&t){const t=e.$implicit,n=p.lc();p.Gb(1),p.tc("expanded",!0),p.Gb(3),p.Uc(" ",p.nc(5,7,t.name)," "),p.Gb(3),p.tc("dataSource",n.getTableDataSource(t.permissions)),p.Gb(4),p.tc("ngForOf",n.groups)("ngForTrackBy",n.trackByIndex),p.Gb(1),p.tc("matHeaderRowDef",n.headerRowDef),p.Gb(1),p.tc("matRowDefColumns",n.headerRowDef)}}function A(t,e){1&t&&(p.Zb(0,"mat-error"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Required")))}function R(t,e){if(1&t){const t=p.ac();p.Zb(0,"button",32),p.hc("click",(function(){return p.Ic(t),p.lc(2).deleteSelectedGroup()})),p.Zb(1,"span"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Yb()}if(2&t){const t=p.lc(2);p.tc("disabled",!t.canDeleteGroup(t.selectedGroup)),p.Gb(2),p.Tc(p.nc(3,2,"Delete"))}}function N(t,e){if(1&t){const t=p.ac();p.Zb(0,"h1",23),p.Zb(1,"span"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Yb(),p.Zb(4,"div",24),p.Zb(5,"form",25),p.hc("keydown",(function(e){return p.Ic(t),p.lc().keyDownFunction(e)})),p.Zb(6,"mat-form-field"),p.Ub(7,"input",26),p.mc(8,"translate"),p.Qc(9,A,3,3,"mat-error",27),p.Yb(),p.Yb(),p.Yb(),p.Zb(10,"div",28),p.Zb(11,"button",29),p.hc("click",(function(){p.Ic(t);const e=p.lc();return e.saveGroup(e.groupForm.value)})),p.Zb(12,"span"),p.Sc(13),p.mc(14,"translate"),p.Yb(),p.Yb(),p.Zb(15,"button",30),p.hc("click",(function(){return p.Ic(t),p.lc().cancelEditing()})),p.Zb(16,"span"),p.Sc(17),p.mc(18,"translate"),p.Yb(),p.Yb(),p.Qc(19,R,4,4,"button",31),p.Yb()}if(2&t){const t=p.lc();p.Gb(2),p.Tc(p.nc(3,8,"New group name")),p.Gb(3),p.tc("formGroup",t.groupForm),p.Gb(2),p.uc("placeholder",p.nc(8,10,"New group name")),p.Gb(2),p.tc("ngIf",!t.groupForm.valid),p.Gb(2),p.tc("disabled",!t.groupForm.valid),p.Gb(2),p.Tc(p.nc(14,12,"Save")),p.Gb(4),p.Tc(p.nc(18,14,"Cancel")),p.Gb(2),p.tc("ngIf",t.selectedGroup)}}let V=(()=>{class t extends d.a{constructor(t,e,n,c,a,s,i){super(t,e,n),this.translate=e,this.dialog=c,this.repo=a,this.promptService=s,this.fb=i,this.headerRowDef=[],this.newGroup=!1,this.editGroup=!1}get appPermissions(){return this.repo.appPermissions}setEditMode(t,e=!0){this.editGroup=t,this.newGroup=e,this.groupForm=this.fb.group({name:[this.selectedGroup?this.selectedGroup.name:"",r.G.required]}),this.dialogRef=this.dialog.open(this.groupEditDialog,m.a),this.dialogRef.keydownEvents().subscribe(t=>{"Enter"===t.key&&t.shiftKey&&this.groupForm.valid&&this.saveGroup(this.groupForm.value)})}saveGroup(t){this.editGroup&&this.newGroup?this.repo.create(t).then(()=>this.cancelEditing(),this.raiseError):this.editGroup&&!this.newGroup&&this.repo.update(t,this.selectedGroup).then(()=>this.cancelEditing(),this.raiseError)}selectGroup(t){this.selectedGroup=t,this.setEditMode(!0,!1)}deleteSelectedGroup(){return Object(o.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Are you sure you want to delete this group?"),e=this.translate.instant(this.selectedGroup.name);(yield this.promptService.open(t,e))&&this.repo.delete(this.selectedGroup).then(()=>this.cancelEditing(),this.raiseError)}))}cancelEditing(){this.dialogRef.close(),this.newGroup=!1,this.editGroup=!1,this.selectedGroup=null}canDeleteGroup(t){return 1!==t.id&&2!==t.id}togglePerm(t,e){this.repo.togglePerm(t,e)}updateRowDef(){this.headerRowDef=["perm"],this.groups.forEach(t=>{this.headerRowDef.push(""+t.name)})}trackGroupArray(t){return t.id}getTableDataSource(t){const e=new l.o;return e.data=t,e}isProtected(t){return 1===t.id||2===t.id}keyDownFunction(t){"Escape"===t.key&&(this.newGroup=!1)}ngOnInit(){super.setTitle("Groups"),this.repo.getViewModelListObservable().subscribe(t=>{t&&(this.groups=t,this.updateRowDef())})}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(h.d),p.Tb(f.k),p.Tb(g.a),p.Tb(v.b),p.Tb(b.a),p.Tb(u.a),p.Tb(r.f))},t.\u0275cmp=p.Nb({type:t,selectors:[["os-group-list"]],viewQuery:function(t,e){var n;1&t&&(p.Oc(I,!0),p.Oc(T,!0)),2&t&&(p.Dc(n=p.ic())&&(e.groupForm=n.first),p.Dc(n=p.ic())&&(e.groupEditDialog=n.first))},features:[p.Db],decls:13,vars:9,consts:[[3,"hasMainButton","nav","mainEvent"],[1,"title-slot"],[1,"spacer-bottom-60"],[1,"hint-text"],[4,"ngFor","ngForOf"],["groupEditDialog",""],[1,"mat-elevation-z0",3,"expanded"],[1,"scrollable-perm-matrix"],["mat-table","",3,"dataSource"],["matColumnDef","perm","sticky",""],[4,"matHeaderCellDef"],[4,"matCellDef"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["class","group-head-table-cell",3,"click",4,"matHeaderCellDef"],[1,"group-head-table-cell",3,"click"],[1,"inner-table"],[3,"checked","change",4,"ngIf"],[3,"checked","disabled",4,"ngIf"],[3,"checked","change"],[3,"checked","disabled"],["mat-dialog-title",""],["mat-dialog-content","",1,"os-form-card-mobile"],[1,"edit-form",3,"formGroup","keydown"],["type","text","matInput","","osAutofocus","","required","","formControlName","name",3,"placeholder"],[4,"ngIf"],["mat-dialog-actions",""],["type","submit","mat-button","","color","accent",3,"disabled","click"],["type","button","mat-button","",3,"click"],["type","button","mat-button","","color","warn",3,"disabled","click",4,"ngIf"],["type","button","mat-button","","color","warn",3,"disabled","click"]],template:function(t,e){1&t&&(p.Zb(0,"os-head-bar",0),p.hc("mainEvent",(function(){return e.setEditMode(!e.editGroup)})),p.Zb(1,"div",1),p.Zb(2,"h2"),p.Sc(3),p.mc(4,"translate"),p.Yb(),p.Yb(),p.Yb(),p.Zb(5,"mat-card",2),p.Zb(6,"div",3),p.Zb(7,"span"),p.Sc(8),p.mc(9,"translate"),p.Yb(),p.Yb(),p.Qc(10,F,14,9,"mat-accordion",4),p.Yb(),p.Qc(11,N,20,16,"ng-template",null,5,p.Rc)),2&t&&(p.tc("hasMainButton",!0)("nav",!1),p.Gb(3),p.Tc(p.nc(4,5,"Groups")),p.Gb(5),p.Tc(p.nc(9,7,"All your changes are saved immediately.")),p.Gb(2),p.tc("ngForOf",e.appPermissions))},directives:[w.a,G.a,c.s,S.a,S.c,S.g,S.h,l.n,l.c,l.i,l.b,l.k,l.m,l.h,l.a,c.t,Y.a,l.j,l.l,v.i,v.f,r.I,r.t,r.k,Z.c,_.b,r.c,P.a,r.D,r.s,r.i,v.c,C.b,Z.b],pipes:[f.j],styles:[".title-line[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.title-line[_ngcontent-%COMP%]   .icon-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line[_ngcontent-%COMP%]   .favorite-star[_ngcontent-%COMP%]{padding-right:3px}.mat-table[_ngcontent-%COMP%]{width:100%}.mat-table[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{display:none}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{z-index:2}.mat-table[_ngcontent-%COMP%]   .mat-table-sticky[_ngcontent-%COMP%]{z-index:3!important}table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{min-width:80px}table[_ngcontent-%COMP%]   .mat-column-perm[_ngcontent-%COMP%]{min-width:130px}table[_ngcontent-%COMP%]   .inner-table[_ngcontent-%COMP%]{width:100%;text-align:center}table[_ngcontent-%COMP%]   .group-head-table-cell[_ngcontent-%COMP%]{cursor:pointer}.hint-text[_ngcontent-%COMP%]{padding-top:1em;padding-left:25px}.new-group-forrm[_ngcontent-%COMP%]{text-align:center;padding-top:10px;background-color:#fff}.new-group-forrm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.scrollable-perm-matrix[_ngcontent-%COMP%]{overflow:auto}"]}),t})();var L=n("ZDbo"),B=n("NFeN"),j=n("Qu3c");function W(t,e){1&t&&(p.Zb(0,"div"),p.Zb(1,"span"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Yb()),2&t&&(p.Gb(2),p.Tc(p.nc(3,1,"You are not supposed to be here...")))}function $(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"h1"),p.Zb(2,"span"),p.Sc(3),p.mc(4,"translate"),p.Yb(),p.Sc(5),p.Yb(),p.Zb(6,"mat-icon"),p.Sc(7,"warning"),p.Yb(),p.Sc(8," \xa0"),p.Zb(9,"span"),p.Sc(10),p.mc(11,"translate"),p.Yb(),p.Yb()),2&t){const t=p.lc(2);p.Gb(3),p.Tc(p.nc(4,3,"Change password for")),p.Gb(2),p.Uc(" ",t.user.full_name," "),p.Gb(5),p.Tc(p.nc(11,5,"You override the personally set password!"))}}function H(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"span"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Sc(4),p.Ub(5,"br"),p.Zb(6,"span"),p.Sc(7),p.mc(8,"translate"),p.Yb(),p.Sc(9),p.Yb()),2&t){const t=p.lc(2);p.Gb(2),p.Tc(p.nc(3,4,"Initial password")),p.Gb(2),p.Uc(": ",t.user.default_password,""),p.Gb(3),p.Tc(p.nc(8,6,"Username")),p.Gb(2),p.Uc(": ",t.user.username," ")}}function q(t,e){if(1&t){const t=p.ac();p.Zb(0,"div"),p.Qc(1,$,12,7,"div",3),p.Ub(2,"br"),p.Zb(3,"form",4),p.hc("keydown",(function(e){return p.Ic(t),p.lc().onKeyDown(e)})),p.Zb(4,"mat-form-field"),p.Ub(5,"input",5),p.mc(6,"translate"),p.Zb(7,"mat-icon",6),p.hc("click",(function(){p.Ic(t);const e=p.lc();return e.hidePassword=!e.hidePassword})),p.mc(8,"translate"),p.mc(9,"translate"),p.Sc(10),p.Yb(),p.Zb(11,"mat-icon",7),p.hc("click",(function(){return p.Ic(t),p.lc().generatePassword()})),p.mc(12,"translate"),p.Sc(13," settings "),p.Yb(),p.Yb(),p.Yb(),p.Ub(14,"br"),p.Qc(15,H,10,8,"div",3),p.Yb()}if(2&t){const t=p.lc();p.Gb(1),p.tc("ngIf",t.user),p.Gb(2),p.tc("formGroup",t.adminPasswordForm),p.Gb(2),p.uc("placeholder",p.nc(6,8,"New password")),p.tc("type",t.hidePassword?"password":"text"),p.Gb(2),p.uc("matTooltip",t.hidePassword?p.nc(8,10,"Show password"):p.nc(9,12,"Hide password")),p.Gb(3),p.Uc(" ",t.hidePassword?"visibility":"visibility_off"," "),p.Gb(1),p.uc("matTooltip",p.nc(12,14,"Generate password")),p.Gb(4),p.tc("ngIf",t.user)}}function X(t,e){if(1&t){const t=p.ac();p.Zb(0,"div"),p.Zb(1,"form",4),p.hc("keydown",(function(e){return p.Ic(t),p.lc().onKeyDown(e)})),p.Zb(2,"mat-form-field"),p.Ub(3,"input",8),p.mc(4,"translate"),p.Zb(5,"mat-icon",9),p.hc("click",(function(){p.Ic(t);const e=p.lc();return e.hideOldPassword=!e.hideOldPassword})),p.Sc(6),p.Yb(),p.Yb(),p.Ub(7,"br"),p.Zb(8,"mat-form-field"),p.Ub(9,"input",10),p.mc(10,"translate"),p.Zb(11,"mat-icon",9),p.hc("click",(function(){p.Ic(t);const e=p.lc();return e.hidePassword=!e.hidePassword})),p.Sc(12),p.Yb(),p.Yb(),p.Ub(13,"br"),p.Zb(14,"mat-form-field"),p.Ub(15,"input",11),p.mc(16,"translate"),p.Yb(),p.Yb(),p.Yb()}if(2&t){const t=p.lc();p.Gb(1),p.tc("formGroup",t.userPasswordForm),p.Gb(2),p.uc("placeholder",p.nc(4,9,"Old password")),p.tc("type",t.hideOldPassword?"password":"text"),p.Gb(3),p.Uc(" ",t.hideOldPassword?"visibility":"visibility_off"," "),p.Gb(3),p.uc("placeholder",p.nc(10,11,"New password")),p.tc("type",t.hidePassword?"password":"text"),p.Gb(3),p.Uc(" ",t.hidePassword?"visibility":"visibility_off"," "),p.Gb(3),p.uc("placeholder",p.nc(16,13,"Confirm new password")),p.tc("type",t.hidePassword?"password":"text")}}let z=(()=>{class t extends d.a{constructor(t,e,n,c,a,s,i,o){super(t,e,n),this.translate=e,this.route=c,this.router=a,this.repo=s,this.operator=i,this.formBuilder=o,this.hidePassword=!0,this.hideOldPassword=!0}ngOnInit(){super.setTitle(this.translate.instant("Change password")),this.route.params.subscribe(t=>{t.id&&(this.urlUserId=+t.id,this.repo.getViewModelObservable(this.urlUserId).subscribe(()=>{this.updateUser()})),this.updateUser()}),this.operator.getUserObservable().subscribe(()=>{this.updateUser()}),this.adminPasswordForm=this.formBuilder.group({newPassword:["",r.G.required]}),this.userPasswordForm=this.formBuilder.group({newPassword1:["",r.G.required],newPassword2:["",r.G.required],oldPassword:["",r.G.required]})}updateUser(){this.ownPage=!this.urlUserId||this.operator.user.id===this.urlUserId,this.user=this.ownPage?this.operator.viewUser:this.repo.getViewModel(this.urlUserId),this.canManage=this.operator.hasPerms(i.b.usersCanManage)}goBack(){this.router.navigate(this.ownPage?["./"]:["./users/"+this.user.id])}save(){return Object(o.a)(this,void 0,void 0,(function*(){try{if(this.canManage&&!this.ownPage){if(!this.adminPasswordForm.valid)return;const t=this.adminPasswordForm.value.newPassword;yield this.repo.resetPassword(this.user,t),this.router.navigate(["./users/"+this.user.id])}else if(this.ownPage){if(!this.userPasswordForm.valid)return;const t=this.userPasswordForm.value.oldPassword,e=this.userPasswordForm.value.newPassword1;e!==this.userPasswordForm.value.newPassword2?this.raiseError(this.translate.instant("Error: The new passwords do not match.")):(yield this.repo.setNewPassword(t,e),this.router.navigate(["./"]))}}catch(t){this.raiseError(t)}}))}onKeyDown(t){"Enter"===t.key&&t.shiftKey&&this.save()}generatePassword(){const t=this.repo.getRandomPassword();this.adminPasswordForm.patchValue({newPassword:t}),this.userPasswordForm.patchValue({newPassword1:t,newPassword2:t}),this.hidePassword=!1}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(h.d),p.Tb(f.k),p.Tb(g.a),p.Tb(s.a),p.Tb(s.f),p.Tb(L.a),p.Tb(i.a),p.Tb(r.f))},t.\u0275cmp=p.Nb({type:t,selectors:[["os-password"]],features:[p.Db],decls:10,vars:9,consts:[[3,"hasMainButton","nav","editMode","mainEvent","saveEvent"],[1,"title-slot"],[1,"os-card"],[4,"ngIf"],[3,"formGroup","keydown"],["matInput","","formControlName","newPassword","required","",3,"type","placeholder"],["matSuffix","","mat-icon-button","",1,"pointer",3,"matTooltip","click"],["matSuffix","","mat-icon-button","",1,"pointer","spacer-left-10",3,"matTooltip","click"],["matInput","","formControlName","oldPassword","required","",3,"type","placeholder"],["mat-button","","matSuffix","","mat-icon-button","",3,"click"],["matInput","","formControlName","newPassword1","required","",3,"type","placeholder"],["matInput","","formControlName","newPassword2","required","",3,"type","placeholder"]],template:function(t,e){1&t&&(p.Zb(0,"os-head-bar",0),p.hc("mainEvent",(function(){return e.goBack()}))("saveEvent",(function(){return e.save()})),p.Sc(1,"a "),p.Zb(2,"div",1),p.Zb(3,"h2"),p.Sc(4),p.mc(5,"translate"),p.Yb(),p.Yb(),p.Yb(),p.Zb(6,"mat-card",2),p.Qc(7,W,4,3,"div",3),p.Qc(8,q,16,16,"div",3),p.Qc(9,X,17,15,"div",3),p.Yb()),2&t&&(p.tc("hasMainButton",!0)("nav",!1)("editMode",!0),p.Gb(4),p.Tc(p.nc(5,7,"Change password")),p.Gb(3),p.tc("ngIf",!e.canManage&&!e.ownPage),p.Gb(1),p.tc("ngIf",e.canManage&&!e.ownPage),p.Gb(1),p.tc("ngIf",e.ownPage))},directives:[w.a,G.a,c.t,r.I,r.t,r.k,Z.c,_.b,r.c,r.s,r.i,r.D,B.a,Z.j,j.c],pipes:[f.j],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();var K=n("+KbT");function J(t,e){if(1&t&&(p.Zb(0,"mat-card",8),p.Zb(1,"span"),p.Sc(2),p.Yb(),p.Zb(3,"span"),p.Sc(4),p.mc(5,"translate"),p.Yb(),p.Sc(6,": "),p.Zb(7,"span"),p.Sc(8),p.mc(9,"translate"),p.mc(10,"translate"),p.Yb(),p.Yb()),2&t){const t=p.lc(2);p.tc("ngClass",t.lastChangedUser.is_present?"success":"warning"),p.Gb(2),p.Uc("",t.lastChangedUser.full_name,"\xa0"),p.Gb(2),p.Tc(p.nc(5,4,"is now")),p.Gb(4),p.Uc("\xa0",t.lastChangedUser.is_present?p.nc(9,6,"present"):p.nc(10,8,"absent"),"")}}function tt(t,e){if(1&t&&(p.Zb(0,"mat-card",9),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t){const t=p.lc(2);p.Gb(1),p.Tc(p.nc(2,1,t.errorMsg))}}function et(t,e){if(1&t){const t=p.ac();p.Zb(0,"mat-card"),p.Zb(1,"p"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Zb(4,"mat-form-field",3),p.Zb(5,"input",4),p.hc("keyup",(function(e){return p.Ic(t),p.lc().onKeyUp(e)})),p.mc(6,"translate"),p.Yb(),p.Yb(),p.Zb(7,"button",5),p.hc("click",(function(){return p.Ic(t),p.lc().changePresence()})),p.Sc(8),p.mc(9,"translate"),p.Yb(),p.Qc(10,J,11,10,"mat-card",6),p.Qc(11,tt,3,3,"mat-card",7),p.Yb()}if(2&t){const t=p.lc();p.Gb(2),p.Tc(p.nc(3,7,"Check in or check out participants based on their participant numbers:")),p.Gb(2),p.tc("formGroup",t.userForm),p.Gb(1),p.uc("placeholder",p.nc(6,9,"Enter participant number")),p.tc("formControl",t.userForm.get("number")),p.Gb(3),p.Tc(p.nc(9,11,"Change presence")),p.Gb(2),p.tc("ngIf",t.lastChangedUser),p.Gb(1),p.tc("ngIf",t.errorMsg)}}let nt=(()=>{class t{constructor(t,e,n,c,a){this.userRepo=t,this.formBuilder=e,this.operator=n,this.translate=c,this._userSubscription=null,a.get("users_enable_presence_view").subscribe(t=>this._enabledInConfig=t)}get permission(){return this.operator.hasPerms(i.b.usersCanManage)&&this._enabledInConfig}ngOnInit(){this.userForm=this.formBuilder.group({number:""})}changePresence(){return Object(o.a)(this,void 0,void 0,(function*(){const t=this.userForm.get("number").value,e=this.userRepo.getUsersByNumber(t);this.userForm.reset(),1===e.length?(yield this.userRepo.update({is_present:!e[0].is_present},e[0]),this.subscribeUser(e[0].id)):e.length?e.length>1&&(this.clearSubscription(),this.errorMsg=this.translate.instant("Participant number is not unique")):(this.clearSubscription(),this.errorMsg=this.translate.instant("Participant cannot be found"))}))}subscribeUser(t){this.clearSubscription(),this.errorMsg=null,this._userSubscription=this.userRepo.getViewModelObservable(t).subscribe(t=>this.lastChangedUser=t)}clearSubscription(){this._userSubscription&&this._userSubscription.unsubscribe(),this.lastChangedUser=null}onKeyUp(t){"Enter"===t.key&&this.changePresence()}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(L.a),p.Tb(r.f),p.Tb(i.a),p.Tb(f.k),p.Tb(K.a))},t.\u0275cmp=p.Nb({type:t,selectors:[["os-presence-detail"]],decls:6,vars:6,consts:[[3,"hasMainButton","nav"],[1,"title-slot"],[4,"ngIf"],[3,"formGroup"],["osAutofocus","","matInput","",3,"formControl","placeholder","keyup"],["mat-button","",3,"click"],[3,"ngClass",4,"ngIf"],["class","error",4,"ngIf"],[3,"ngClass"],[1,"error"]],template:function(t,e){1&t&&(p.Zb(0,"os-head-bar",0),p.Zb(1,"div",1),p.Zb(2,"h2"),p.Sc(3),p.mc(4,"translate"),p.Yb(),p.Yb(),p.Yb(),p.Qc(5,et,12,13,"mat-card",2)),2&t&&(p.tc("hasMainButton",!1)("nav",!1),p.Gb(3),p.Tc(p.nc(4,4,"Presence")),p.Gb(2),p.tc("ngIf",e.permission))},directives:[w.a,c.t,G.a,Z.c,r.t,r.k,_.b,r.c,P.a,r.s,r.h,C.b,c.q],pipes:[f.j],encapsulation:2}),t})();var ct=n("2Vo4"),at=n("rUOn"),st=n("XXEH"),it=n("0bMg"),ot=n("lq69"),rt=n("a9GI");let lt=(()=>{class t{constructor(t,e){this.translate=t,this.configService=e}userAccessToDocDef(t){const e=[{text:t.short_name,style:"userDataTitle"}];return t.structure_level&&e.push({text:t.structure_level,style:"userDataHeading"}),[e,this.createAccessDataContent(t),this.createWelcomeText()]}createUserListDocDef(t){return[{text:this.translate.instant("List of participants"),style:"title"},this.createUserList(t)]}createAccessDataContent(t){return{columns:[this.createWifiAccessContent(),this.createUserAccessContent(t)],margin:[0,20]}}createWifiAccessContent(){const t=[{text:this.translate.instant("WLAN access data"),style:"userDataHeading"},{text:this.translate.instant("WLAN name (SSID)")+":",style:"userDataTopic"},{text:this.configService.instant("users_pdf_wlan_ssid")||"-",style:"userDataValue"},{text:this.translate.instant("WLAN password")+":",style:"userDataTopic"},{text:this.configService.instant("users_pdf_wlan_password")||"-",style:"userDataValue"},{text:this.translate.instant("WLAN encryption")+":",style:"userDataTopic"},{text:this.configService.instant("users_pdf_wlan_encryption")||"-",style:"userDataValue"},{text:"\n"}];if(this.configService.instant("users_pdf_wlan_ssid")&&this.configService.instant("users_pdf_wlan_encryption")){const e="WIFI:S:"+this.configService.instant("users_pdf_wlan_ssid")+";T:"+this.configService.instant("users_pdf_wlan_encryption")+";P:"+this.configService.instant("users_pdf_wlan_password")+";;";t.push({qr:e,fit:120,margin:[0,0,0,8]},{text:this.translate.instant("Scan this QR code to connect to WLAN."),style:"small"})}return t}createUserAccessContent(t){const e=[{text:this.translate.instant("OpenSlides access data"),style:"userDataHeading"},{text:this.translate.instant("Username")+":",style:"userDataTopic"},{text:t.username,style:"userDataValue"},{text:this.translate.instant("Initial password")+":",style:"userDataTopic"},{text:t.default_password,style:"userDataValue"},{text:"URL:",style:"userDataTopic"},{text:this.configService.instant("users_pdf_url")||"-",link:this.configService.instant("users_pdf_url"),style:"userDataValue"},{text:"\n"}];return this.configService.instant("users_pdf_url")&&e.push({qr:this.configService.instant("users_pdf_url"),fit:120,margin:[0,0,0,8]},{text:this.translate.instant("Scan this QR code to open URL."),style:"small"}),e}createWelcomeText(){const t=this.configService.instant("users_pdf_welcometitle"),e=this.configService.instant("users_pdf_welcometext");return[{text:this.translate.instant(t),style:"userDataHeading"},{text:this.translate.instant(e),style:"userDataTopic"}]}createUserList(t){return{table:{widths:["auto","*","auto"],headerRows:1,body:[[{text:"#",style:"tableHeader"},{text:this.translate.instant("Name"),style:"tableHeader"},{text:this.translate.instant("Groups"),style:"tableHeader"}]].concat(this.getListUsers(t))},layout:"switchColorTableLayout"}}getListUsers(t){const e=[];let n=1;return t.forEach(t=>{const c=t.groups.map(t=>this.translate.instant(t.name));e.push([{text:""+n},{text:t.full_name},{text:c.join(", ")}]),n+=1}),e}}return t.\u0275fac=function(e){return new(e||t)(p.dc(f.k),p.dc(K.a))},t.\u0275prov=p.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),bt=(()=>{class t{constructor(t,e,n){this.translate=t,this.userPdfService=e,this.pdfDocumentService=n}exportSingleUserAccessPDF(t){const e=this.userPdfService.userAccessToDocDef(t),n=`${this.translate.instant("Access-data")} ${t.short_name}`;this.pdfDocumentService.download(e,n,{title:n})}exportMultipleUserAccessPDF(t){const e=[];t.forEach(t=>{e.push(this.userPdfService.userAccessToDocDef(t)),e.push({text:"",pageBreak:"after"})});const n=this.translate.instant("Access-data");this.pdfDocumentService.download(e,n,{title:n})}exportUserList(t){const e=this.translate.instant("List of participants"),n={title:e};this.pdfDocumentService.download(this.userPdfService.createUserListDocDef(t),e,n)}}return t.\u0275fac=function(e){return new(e||t)(p.dc(f.k),p.dc(lt),p.dc(rt.b))},t.\u0275prov=p.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ut=n("STbY"),mt=n("f0Cb"),dt=n("oqD5"),pt=n("d3UM"),ht=n("FKr1"),ft=n("fB2i"),gt=n("3Xi6"),vt=n("7jBc");function wt(t,e){1&t&&(p.Zb(0,"span"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"New participant")))}function Gt(t,e){if(1&t&&(p.Zb(0,"span"),p.Sc(1),p.Yb()),2&t){const t=p.lc();p.Gb(1),p.Tc(t.user.full_name)}}function St(t,e){if(1&t&&(p.Zb(0,"button",11),p.Zb(1,"mat-icon"),p.Sc(2,"more_vert"),p.Yb(),p.Yb()),2&t){p.lc();const t=p.Ec(8);p.tc("matMenuTriggerFor",t)}}function Yt(t,e){if(1&t){const t=p.ac();p.Zb(0,"button",12),p.hc("click",(function(){return p.Ic(t),p.lc().changePassword()})),p.Zb(1,"mat-icon"),p.Sc(2,"security"),p.Yb(),p.Zb(3,"span"),p.Sc(4),p.mc(5,"translate"),p.Yb(),p.Yb()}2&t&&(p.Gb(4),p.Tc(p.nc(5,1,"Change password")))}function Zt(t,e){if(1&t){const t=p.ac();p.Zb(0,"button",12),p.hc("click",(function(){return p.Ic(t),p.lc().sendInvitationEmail()})),p.Zb(1,"mat-icon"),p.Sc(2,"mail"),p.Yb(),p.Zb(3,"span"),p.Sc(4),p.mc(5,"translate"),p.Yb(),p.Yb()}2&t&&(p.Gb(4),p.Tc(p.nc(5,1,"Send invitation email")))}function _t(t,e){if(1&t){const t=p.ac();p.Zb(0,"button",12),p.hc("click",(function(){return p.Ic(t),p.lc().onDownloadPdf()})),p.Zb(1,"mat-icon"),p.Sc(2,"picture_as_pdf"),p.Yb(),p.Zb(3,"span"),p.Sc(4),p.mc(5,"translate"),p.Yb(),p.Yb()}2&t&&(p.Gb(4),p.Tc(p.nc(5,1,"PDF")))}function Pt(t,e){if(1&t){const t=p.ac();p.Zb(0,"div"),p.Ub(1,"mat-divider"),p.Zb(2,"button",13),p.hc("click",(function(){return p.Ic(t),p.lc().deleteUserButton()})),p.Zb(3,"mat-icon"),p.Sc(4,"delete"),p.Yb(),p.Zb(5,"span"),p.Sc(6),p.mc(7,"translate"),p.Yb(),p.Yb(),p.Yb()}2&t&&(p.Gb(6),p.Tc(p.nc(7,1,"Delete")))}function Ct(t,e){1&t&&p.Vb(0)}function It(t,e){if(1&t&&(p.Zb(0,"mat-card",14),p.Qc(1,Ct,1,0,"ng-container",15),p.Yb()),2&t){const t=p.lc(),e=p.Ec(16),n=p.Ec(18);p.tc("ngClass",t.editUser?"os-form-card":"os-card"),p.Gb(1),p.tc("ngIf",t.editUser)("ngIfThen",e)("ngIfElse",n)}}function Tt(t,e){1&t&&(p.Zb(0,"div"),p.Zb(1,"mat-form-field",25),p.Ub(2,"input",26),p.mc(3,"translate"),p.Yb(),p.Zb(4,"mat-form-field",27),p.Ub(5,"input",28),p.mc(6,"translate"),p.Yb(),p.Zb(7,"mat-form-field",29),p.Ub(8,"input",30),p.mc(9,"translate"),p.Yb(),p.Yb()),2&t&&(p.Gb(2),p.uc("placeholder",p.nc(3,3,"Title")),p.Gb(3),p.uc("placeholder",p.nc(6,5,"Given name")),p.Gb(3),p.uc("placeholder",p.nc(9,7,"Surname")))}function yt(t,e){1&t&&(p.Zb(0,"mat-error"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Uc(" ",p.nc(2,1,"Please enter a valid email address")," "))}function Mt(t,e){if(1&t&&(p.Zb(0,"mat-option",37),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t){const t=e.$implicit;p.tc("value",t),p.Gb(1),p.Tc(p.nc(2,2,t))}}function kt(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"mat-form-field",31),p.Ub(2,"input",32),p.mc(3,"translate"),p.Qc(4,yt,3,3,"mat-error",2),p.Yb(),p.Zb(5,"mat-form-field",33),p.Zb(6,"mat-select",34),p.mc(7,"translate"),p.Zb(8,"mat-option",35),p.Sc(9,"-"),p.Yb(),p.Qc(10,Mt,3,4,"mat-option",36),p.Yb(),p.Yb(),p.Yb()),2&t){const t=p.lc(2);p.Gb(2),p.uc("placeholder",p.nc(3,4,"Email")),p.Gb(2),p.tc("ngIf",t.personalInfoForm.get("email").hasError("email")),p.Gb(2),p.uc("placeholder",p.nc(7,6,"Gender")),p.Gb(4),p.tc("ngForOf",t.genderList)}}function xt(t,e){1&t&&(p.Zb(0,"mat-form-field",38),p.Ub(1,"input",39),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.uc("placeholder",p.nc(2,1,"Vote weight")))}function Dt(t,e){if(1&t){const t=p.ac();p.Zb(0,"div"),p.Zb(1,"mat-form-field"),p.Ub(2,"input",40),p.mc(3,"translate"),p.Zb(4,"mat-hint",41),p.Sc(5,"Generate"),p.Yb(),p.Zb(6,"button",42),p.hc("click",(function(){return p.Ic(t),p.lc(2).generatePassword()})),p.Zb(7,"mat-icon"),p.Sc(8,"sync_problem"),p.Yb(),p.Yb(),p.Yb(),p.Yb()}if(2&t){const t=p.lc(2);p.Gb(2),p.uc("placeholder",p.nc(3,2,"Initial password")),p.Gb(4),p.tc("disabled",!t.newUser)}}function Ot(t,e){if(1&t&&(p.Zb(0,"div",43),p.Zb(1,"h4"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Ub(4,"editor",44),p.Yb()),2&t){const t=p.lc(2);p.Gb(2),p.Tc(p.nc(3,2,"About me")),p.Gb(2),p.tc("init",t.tinyMceSettings)}}function Et(t,e){1&t&&(p.Zb(0,"div"),p.Zb(1,"mat-form-field"),p.Ub(2,"input",45),p.mc(3,"translate"),p.Yb(),p.Yb()),2&t&&(p.Gb(2),p.uc("placeholder",p.nc(3,1,"Username")))}function Ut(t,e){1&t&&(p.Zb(0,"div"),p.Zb(1,"mat-form-field"),p.Ub(2,"input",46),p.mc(3,"translate"),p.Zb(4,"mat-hint"),p.Sc(5),p.mc(6,"translate"),p.Yb(),p.Yb(),p.Yb()),2&t&&(p.Gb(2),p.uc("placeholder",p.nc(3,2,"Comment")),p.Gb(3),p.Tc(p.nc(6,4,"Only for internal notes.")))}function Qt(t,e){1&t&&(p.Zb(0,"mat-checkbox",51),p.mc(1,"translate"),p.Zb(2,"span"),p.Sc(3),p.mc(4,"translate"),p.Yb(),p.Yb()),2&t&&(p.uc("matTooltip",p.nc(1,2,"Designates whether this user should be treated as active. Unselect this instead of deleting the account.")),p.Gb(3),p.Tc(p.nc(4,4,"Is active")))}function Ft(t,e){1&t&&(p.Zb(0,"div",47),p.Zb(1,"mat-checkbox",48),p.mc(2,"translate"),p.Zb(3,"span"),p.Sc(4),p.mc(5,"translate"),p.Yb(),p.Yb(),p.Qc(6,Qt,5,6,"mat-checkbox",49),p.Zb(7,"mat-checkbox",50),p.mc(8,"translate"),p.Zb(9,"span"),p.Sc(10),p.mc(11,"translate"),p.Yb(),p.Yb(),p.Yb()),2&t&&(p.Gb(1),p.uc("matTooltip",p.nc(2,5,"Designates whether this user is in the room.")),p.Gb(3),p.Tc(p.nc(5,7,"Is present")),p.Gb(2),p.tc("osPerms","users.can_see_extra_data"),p.Gb(1),p.uc("matTooltip",p.nc(8,9,"Designates whether this user should be treated as a committee.")),p.Gb(3),p.Tc(p.nc(11,11,"Is a committee")))}const At=function(t,e){return{form37:t,form70:e}},Rt=function(t,e,n){return{distance:t,form37:e,form25:n}};function Nt(t,e){if(1&t){const t=p.ac();p.Zb(0,"form",16),p.hc("keydown",(function(e){return p.Ic(t),p.lc().onKeyDown(e)})),p.Qc(1,Tt,10,9,"div",2),p.Qc(2,kt,11,8,"div",2),p.Zb(3,"div"),p.Zb(4,"mat-form-field",17),p.Ub(5,"input",18),p.mc(6,"translate"),p.Yb(),p.Zb(7,"mat-form-field",19),p.Ub(8,"input",20),p.mc(9,"translate"),p.Yb(),p.Qc(10,xt,3,3,"mat-form-field",21),p.Yb(),p.Zb(11,"div"),p.Zb(12,"mat-form-field"),p.Ub(13,"os-search-value-selector",22),p.mc(14,"translate"),p.Yb(),p.Yb(),p.Qc(15,Dt,9,4,"div",2),p.Qc(16,Ot,5,4,"div",23),p.Qc(17,Et,4,3,"div",2),p.Qc(18,Ut,7,6,"div",2),p.Qc(19,Ft,12,13,"div",24),p.Yb()}if(2&t){const t=p.lc();p.tc("formGroup",t.personalInfoForm),p.Gb(1),p.tc("ngIf",t.isAllowed("seeName")),p.Gb(1),p.tc("ngIf",t.isAllowed("seePersonal")),p.Gb(2),p.tc("ngClass",p.Ac(22,At,t.showVoteWeight,!t.showVoteWeight)),p.Gb(1),p.uc("placeholder",p.nc(6,16,"Structure level")),p.Gb(2),p.tc("ngClass",p.Bc(25,Rt,t.showVoteWeight,t.showVoteWeight,!t.showVoteWeight)),p.Gb(1),p.uc("placeholder",p.nc(9,18,"Participant number")),p.Gb(2),p.tc("ngIf",t.showVoteWeight),p.Gb(3),p.uc("placeholder",p.nc(14,20,"Groups")),p.tc("multiple",!0)("inputListValues",t.groups),p.Gb(2),p.tc("ngIf",t.isAllowed("manage")),p.Gb(1),p.tc("ngIf",t.isAllowed("seePersonal")),p.Gb(1),p.tc("ngIf",t.isAllowed("seePersonal")),p.Gb(1),p.tc("ngIf",t.isAllowed("seeExtra")),p.Gb(1),p.tc("ngIf",t.isAllowed("seeExtra"))}}function Vt(t,e){1&t&&(p.Zb(0,"mat-icon",54),p.mc(1,"translate"),p.Sc(2,"check_box"),p.Yb()),2&t&&p.uc("matTooltip",p.nc(1,1,"Is present"))}function Lt(t,e){1&t&&(p.Zb(0,"mat-icon",54),p.mc(1,"translate"),p.Sc(2,"account_balance"),p.Yb()),2&t&&p.uc("matTooltip",p.nc(1,1,"Is committee"))}function Bt(t,e){1&t&&(p.Zb(0,"mat-icon",54),p.mc(1,"translate"),p.Sc(2,"block"),p.Yb()),2&t&&p.uc("matTooltip",p.nc(1,1,"Inactive"))}function jt(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"h4"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Zb(4,"span",52),p.Zb(5,"span"),p.Sc(6),p.Yb(),p.Qc(7,Vt,3,3,"mat-icon",53),p.Qc(8,Lt,3,3,"mat-icon",53),p.Qc(9,Bt,3,3,"mat-icon",53),p.Yb(),p.Yb()),2&t){const t=p.lc(3);p.Gb(2),p.Tc(p.nc(3,5,"Name")),p.Gb(4),p.Tc(t.user.short_name),p.Gb(1),p.tc("ngIf",t.user.is_present&&t.isAllowed("seeName")),p.Gb(1),p.tc("ngIf",t.user.is_committee&&t.isAllowed("seeName")),p.Gb(1),p.tc("ngIf",!t.user.is_active&&t.isAllowed("seeExtra"))}}function Wt(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"h4"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Zb(4,"span"),p.Sc(5),p.Yb(),p.Yb()),2&t){const t=p.lc(4);p.Gb(2),p.Tc(p.nc(3,2,"Email")),p.Gb(3),p.Tc(t.user.email)}}function $t(t,e){if(1&t&&(p.Zb(0,"div"),p.Qc(1,Wt,6,4,"div",2),p.Yb()),2&t){const t=p.lc(3);p.Gb(1),p.tc("ngIf",t.user.email)}}function Ht(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"h4"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Zb(4,"span"),p.Sc(5),p.mc(6,"translate"),p.Yb(),p.Yb()),2&t){const t=p.lc(3);p.Gb(2),p.Tc(p.nc(3,2,"Gender")),p.Gb(3),p.Tc(p.nc(6,4,t.user.gender))}}function qt(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"h4"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Zb(4,"span"),p.Sc(5),p.Yb(),p.Yb()),2&t){const t=p.lc(3);p.Gb(2),p.Tc(p.nc(3,2,"Structure level")),p.Gb(3),p.Tc(t.user.structure_level)}}function Xt(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"h4"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Zb(4,"span"),p.Sc(5),p.Yb(),p.Yb()),2&t){const t=p.lc(3);p.Gb(2),p.Tc(p.nc(3,2,"Participant number")),p.Gb(3),p.Tc(t.user.number)}}function zt(t,e){1&t&&(p.Zb(0,"span"),p.Sc(1,",\xa0"),p.Yb())}function Kt(t,e){if(1&t&&(p.Zb(0,"span"),p.Sc(1),p.mc(2,"translate"),p.Qc(3,zt,2,0,"span",2),p.Yb()),2&t){const t=e.$implicit,n=e.last;p.Gb(1),p.Uc(" ",p.nc(2,2,t.getTitle()),""),p.Gb(2),p.tc("ngIf",!n)}}function Jt(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"h4"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Qc(4,Kt,4,4,"span",55),p.Yb()),2&t){const t=p.lc(3);p.Gb(2),p.Tc(p.nc(3,2,"Groups")),p.Gb(2),p.tc("ngForOf",t.user.groups)}}function te(t,e){1&t&&(p.Zb(0,"div"),p.Zb(1,"h4"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Zb(4,"span"),p.Sc(5),p.mc(6,"translate"),p.Yb(),p.Yb()),2&t&&(p.Gb(2),p.Tc(p.nc(3,2,"Groups")),p.Gb(3),p.Tc(p.nc(6,4,"Default group")))}function ee(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"h4"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Zb(4,"span"),p.Sc(5),p.Yb(),p.Yb()),2&t){const t=p.lc(4);p.Gb(2),p.Tc(p.nc(3,2,"Vote weight")),p.Gb(3),p.Tc(t.user.vote_weight)}}function ne(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"h4"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Zb(4,"span"),p.Sc(5),p.Yb(),p.Yb()),2&t){const t=p.lc(4);p.Gb(2),p.Tc(p.nc(3,2,"Username")),p.Gb(3),p.Tc(t.user.username)}}function ce(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"h4"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Zb(4,"span"),p.Sc(5),p.Yb(),p.Yb()),2&t){const t=p.lc(4);p.Gb(2),p.Tc(p.nc(3,2,"Initial password")),p.Gb(3),p.Tc(t.user.default_password)}}function ae(t,e){if(1&t&&(p.Zb(0,"div"),p.Qc(1,ee,6,4,"div",2),p.Qc(2,ne,6,4,"div",2),p.Qc(3,ce,6,4,"div",2),p.Yb()),2&t){const t=p.lc(3);p.Gb(1),p.tc("ngIf",t.user.vote_weight&&t.showVoteWeight),p.Gb(1),p.tc("ngIf",t.user.username),p.Gb(1),p.tc("ngIf",t.user.default_password)}}function se(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"h4"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Ub(4,"div",56),p.mc(5,"trust"),p.Yb()),2&t){const t=p.lc(4);p.Gb(2),p.Tc(p.nc(3,2,"About me")),p.Gb(2),p.tc("innerHTML",p.oc(5,4,t.user.about_me,"html"),p.Jc)}}function ie(t,e){if(1&t&&(p.Zb(0,"div"),p.Qc(1,se,6,7,"div",2),p.Yb()),2&t){const t=p.lc(3);p.Gb(1),p.tc("ngIf",t.user.about_me)}}function oe(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"h4"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Zb(4,"span"),p.Sc(5),p.Yb(),p.Yb()),2&t){const t=p.lc(4);p.Gb(2),p.Tc(p.nc(3,2,"Comment")),p.Gb(3),p.Tc(t.user.comment)}}function re(t,e){if(1&t&&(p.Zb(0,"div"),p.Qc(1,oe,6,4,"div",2),p.Yb()),2&t){const t=p.lc(3);p.Gb(1),p.tc("ngIf",t.user.comment)}}function le(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"div"),p.Zb(2,"h4"),p.Sc(3),p.mc(4,"translate"),p.Yb(),p.Zb(5,"span"),p.Sc(6),p.Yb(),p.Yb(),p.Yb()),2&t){const t=p.lc(3);p.Gb(3),p.Tc(p.nc(4,2,"Last email sent")),p.Gb(3),p.Tc(t.getEmailSentTime())}}function be(t,e){if(1&t&&(p.Xb(0),p.Qc(1,jt,10,7,"div",2),p.Qc(2,$t,2,1,"div",2),p.Qc(3,Ht,7,6,"div",2),p.Qc(4,qt,6,4,"div",2),p.Qc(5,Xt,6,4,"div",2),p.Qc(6,Jt,5,4,"div",2),p.Qc(7,te,7,6,"div",2),p.Qc(8,ae,4,3,"div",2),p.Qc(9,ie,2,1,"div",2),p.Qc(10,re,2,1,"div",2),p.Qc(11,le,7,4,"div",2),p.Wb()),2&t){const t=p.lc(2);p.Gb(1),p.tc("ngIf",t.isAllowed("seeName")),p.Gb(1),p.tc("ngIf",t.isAllowed("seePersonal")),p.Gb(1),p.tc("ngIf",t.user.gender),p.Gb(1),p.tc("ngIf",t.user.structure_level),p.Gb(1),p.tc("ngIf",t.user.number),p.Gb(1),p.tc("ngIf",t.user.groups&&t.user.groups.length>0),p.Gb(1),p.tc("ngIf",!t.user.groups||0===t.user.groups.length),p.Gb(1),p.tc("ngIf",t.isAllowed("manage")),p.Gb(1),p.tc("ngIf",t.isAllowed("seeName")),p.Gb(1),p.tc("ngIf",t.isAllowed("seeExtra")),p.Gb(1),p.tc("ngIf",t.isAllowed("seePersonal")&&t.user.isLastEmailSend)}}function ue(t,e){if(1&t&&p.Qc(0,be,12,11,"ng-container",2),2&t){const t=p.lc();p.tc("ngIf",t.user)}}let me=(()=>{class t extends d.a{constructor(t,e,n,c,a,s,i,o,r,l,b,u,m,d){super(t,e,n),this.translate=e,this.formBuilder=c,this.route=a,this.router=s,this.repo=i,this.operator=o,this.promptService=r,this.pdfService=l,this.groupRepo=b,this.constantsService=u,this.pollService=m,this.ownPage=!1,this.editUser=!1,this.newUser=!1,this.canManage=!1,this.groups=new ct.a([]),this.genderList=st.c,this.userBackends=null,this.createForm(),this.constantsService.get("UserBackends").subscribe(t=>this.userBackends=t),d.get("users_activate_vote_weight").subscribe(t=>this.isVoteWeightActive=t),this.groupRepo.getViewModelListObservableWithoutDefaultGroup().subscribe(this.groups)}get showVoteWeight(){return this.pollService.isElectronicVotingEnabled&&this.isVoteWeightActive}ngOnInit(){this.route.snapshot.url[0]&&"new"===this.route.snapshot.url[0].path?(super.setTitle("New participant"),this.newUser=!0,this.setEditMode(!0)):this.route.params.subscribe(t=>{this.subscriptions.push(this.repo.getViewModelObservable(+t.id).subscribe(t=>{if(t&&!this.editUser){const e=t.getTitle();super.setTitle(e),this.user=t}})),this.subscriptions.push(this.operator.getUserObservable().subscribe(()=>{this.ownPage=this.operator.user&&this.operator.user.id===+t.id}))})}createForm(){this.personalInfoForm=this.formBuilder.group({username:[""],title:[""],first_name:[""],last_name:[""],gender:[""],structure_level:[""],number:[""],vote_weight:[],about_me:[""],groups_id:[""],is_present:[!0],is_committee:[!1],email:["",r.G.email],last_email_send:[""],comment:[""],is_active:[!0],default_password:[""]},{validators:it.a.validation("username","first_name","last_name")})}isAllowed(t){switch(t){case"delete":return this.operator.hasPerms(i.b.usersCanManage)&&!this.ownPage;case"manage":return this.operator.hasPerms(i.b.usersCanManage);case"seeName":return this.operator.hasPerms(i.b.usersCanSeeName,i.b.usersCanManage)||this.ownPage;case"seeOtherUsers":return this.operator.hasPerms(i.b.usersCanSeeName,i.b.usersCanManage);case"seeExtra":return this.operator.hasPerms(i.b.usersCanSeeExtraData,i.b.usersCanManage);case"seePersonal":return this.operator.hasPerms(i.b.usersCanSeeExtraData,i.b.usersCanManage)||this.ownPage;case"changePersonal":return this.operator.hasPerms(i.b.usersCanManage)||this.ownPage;case"changePassword":return this.ownPage&&this.operator.hasPerms(i.b.usersCanChangePassword)||this.operator.hasPerms(i.b.usersCanManage);default:return!1}}patchFormValues(){const t={};Object.keys(this.personalInfoForm.controls).forEach(e=>{t[e]=this.user[e]}),this.personalInfoForm.patchValue(t)}updateFormControlsAccesibility(){const t=Object.keys(this.personalInfoForm.controls);t.forEach(t=>{this.personalInfoForm.get(t).enable()}),this.isAllowed("manage")||t.forEach(t=>{["username","email","about_me"].includes(t)||this.personalInfoForm.get(t).disable()}),!this.newUser&&this.user.auth_type&&this.userBackends&&this.userBackends[this.user.auth_type]&&this.userBackends[this.user.auth_type].disallowedUpdateKeys.forEach(t=>{this.personalInfoForm.get(t).disable()})}generatePassword(){this.personalInfoForm.patchValue({default_password:this.repo.getRandomPassword()})}onKeyDown(t){"Enter"===t.key&&t.shiftKey&&this.saveUser()}saveUser(){return Object(o.a)(this,void 0,void 0,(function*(){if(this.personalInfoForm.invalid){let t="";if(this.personalInfoForm.errors)t="At least one of username, first name or last name has to be set.";else for(const e in this.personalInfoForm.controls)this.personalInfoForm.get(e).errors&&(t=e+" is incorrect.");this.raiseError(this.translate.instant(t))}else try{this.newUser?(yield this.repo.create(this.personalInfoForm.value),this.router.navigate(["./users/"])):(yield this.repo.update(this.personalInfoForm.value,this.user),this.setEditMode(!1))}catch(t){this.raiseError(t)}}))}setEditMode(t){this.editUser=t,this.updateFormControlsAccesibility(),!this.newUser&&t&&this.patchFormValues(),this.newUser&&!t&&this.router.navigate(["./users/"])}deleteUserButton(){return Object(o.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Are you sure you want to delete this participant?"),e=this.user.full_name;(yield this.promptService.open(t,e))&&this.repo.delete(this.user).then(()=>this.router.navigate(["./users/"]),this.raiseError)}))}changePassword(){this.router.navigate(["./users/password/"+this.user.id])}onDownloadPdf(){this.pdfService.exportSingleUserAccessPDF(this.user)}sendInvitationEmail(){return Object(o.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Sending an invitation email"),e=this.translate.instant("Are you sure you want to send an invitation email to the user?");(yield this.promptService.open(t,e))&&this.repo.bulkSendInvitationEmail([this.user]).then(this.raiseError,this.raiseError)}))}getEmailSentTime(){return this.user.isLastEmailSend?this.repo.lastSentEmailTimeString(this.user):this.translate.instant("No email sent")}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(h.d),p.Tb(f.k),p.Tb(g.a),p.Tb(r.f),p.Tb(s.a),p.Tb(s.f),p.Tb(L.a),p.Tb(i.a),p.Tb(u.a),p.Tb(bt),p.Tb(b.a),p.Tb(at.a),p.Tb(ot.a),p.Tb(K.a))},t.\u0275cmp=p.Nb({type:t,selectors:[["os-user-detail"]],features:[p.Db],decls:19,vars:13,consts:[["mainButtonIcon","edit",3,"hasMainButton","nav","goBack","editMode","isSaveButtonEnabled","mainEvent","saveEvent"],[1,"title-slot"],[4,"ngIf"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["userExtraMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"content-container"],["class","spacer-bottom-60",3,"ngClass",4,"ngIf"],["editView",""],["showView",""],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"red-warning-text",3,"click"],[1,"spacer-bottom-60",3,"ngClass"],[4,"ngIf","ngIfThen","ngIfElse"],[3,"formGroup","keydown"],[1,"distance",3,"ngClass"],["type","text","matInput","","formControlName","structure_level",3,"placeholder"],[3,"ngClass"],["type","text","matInput","","formControlName","number",3,"placeholder"],["class","form16 force-min-with",4,"ngIf"],["formControlName","groups_id",3,"multiple","placeholder","inputListValues"],["class","spacer-bottom-20",4,"ngIf"],["class","spacer-top-20",4,"ngIf"],[1,"form16","distance","force-min-with"],["type","text","matInput","","osAutofocus","","formControlName","title",3,"placeholder"],[1,"form37","distance","force-min-with"],["type","text","matInput","","formControlName","first_name",3,"placeholder"],[1,"form37","force-min-with"],["type","text","matInput","","formControlName","last_name",3,"placeholder"],[1,"form70","distance"],["type","email","matInput","","autocomplete","off","name","email","formControlName","email",3,"placeholder"],[1,"form25","force-min-with"],["formControlName","gender",3,"placeholder"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form16","force-min-with"],["type","number","matInput","","formControlName","vote_weight",3,"placeholder"],["matInput","","autocomplete","off","formControlName","default_password",3,"placeholder"],["align","end"],["type","button","mat-button","","matSuffix","","mat-icon-button","",3,"disabled","click"],[1,"spacer-bottom-20"],["formControlName","about_me",3,"init"],["type","text","matInput","","formControlName","username",3,"placeholder"],["matInput","","formControlName","comment",3,"placeholder"],[1,"spacer-top-20"],["formControlName","is_present",3,"matTooltip"],["formControlName","is_active",3,"matTooltip",4,"osPerms"],["formControlName","is_committee",3,"matTooltip"],["formControlName","is_active",3,"matTooltip"],[1,"state-icons"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(t,e){1&t&&(p.Zb(0,"os-head-bar",0),p.hc("mainEvent",(function(){return e.setEditMode(!e.editUser)}))("saveEvent",(function(){return e.saveUser()})),p.Zb(1,"div",1),p.Zb(2,"h2"),p.Qc(3,wt,3,3,"span",2),p.Qc(4,Gt,2,1,"span",2),p.Yb(),p.Yb(),p.Zb(5,"div",3),p.Qc(6,St,3,1,"button",4),p.Yb(),p.Zb(7,"mat-menu",null,5),p.Qc(9,Yt,6,3,"button",6),p.Qc(10,Zt,6,3,"button",6),p.Qc(11,_t,6,3,"button",6),p.Qc(12,Pt,8,3,"div",2),p.Yb(),p.Yb(),p.Zb(13,"div",7),p.Qc(14,It,2,4,"mat-card",8),p.Yb(),p.Qc(15,Nt,20,29,"ng-template",null,9,p.Rc),p.Qc(17,ue,1,1,"ng-template",null,10,p.Rc)),2&t&&(p.tc("hasMainButton",e.isAllowed("changePersonal"))("nav",!1)("goBack",!e.isAllowed("seeOtherUsers"))("editMode",e.editUser)("isSaveButtonEnabled",e.personalInfoForm.valid),p.Gb(3),p.tc("ngIf",e.newUser),p.Gb(1),p.tc("ngIf",!e.newUser&&e.user),p.Gb(2),p.tc("ngIf",e.isAllowed("changePersonal")&&e.isAllowed("changePassword")),p.Gb(3),p.tc("ngIf",e.isAllowed("changePassword")),p.Gb(1),p.tc("ngIf",e.isAllowed("manage")&&e.user&&e.user.email),p.Gb(1),p.tc("ngIf",e.isAllowed("manage")),p.Gb(1),p.tc("ngIf",e.isAllowed("delete")),p.Gb(2),p.tc("ngIf",e.isAllowed("seeName")))},directives:[w.a,c.t,ut.f,C.b,ut.e,B.a,ut.c,mt.a,G.a,c.q,r.I,r.t,r.k,Z.c,_.b,r.c,r.s,r.i,dt.a,P.a,pt.a,ht.n,c.s,Z.b,r.y,Z.f,Z.j,ft.a,Y.a,j.c,gt.a],pipes:[f.j,vt.a],styles:["@media screen and (min-width:600px){.form70[_ngcontent-%COMP%]{width:70%}.form37[_ngcontent-%COMP%]{width:37%}.form25[_ngcontent-%COMP%]{width:25%}.form16[_ngcontent-%COMP%]{width:16%}}.force-min-width[_ngcontent-%COMP%]{min-width:110px}.distance[_ngcontent-%COMP%]{padding-right:5%}mat-checkbox[_ngcontent-%COMP%]{margin-right:10px}.state-icons[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.state-icons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:5px}"]}),t})();var de=n("1NkQ"),pe=n("gjbj"),he=n("E2rH"),fe=n("T9OK");class ge extends st.b{constructor(){super(...arguments),this.csvGroups=[]}get isValid(){return!!(this.first_name||this.last_name||this.username)}solveGroups(t){let e=0;const n=[];return this.csvGroups.forEach(c=>{if(c.id)return void n.push(c.id);if(!t.length)return void(e+=1);const a=t.find(t=>t.name===c.name);a?(c.id=a.id,n.push(a.id)):e+=1}),this.groups_id=n,e}}var ve=n("P6Fj");let we=(()=>{class t extends he.a{constructor(t,e,n,c,a){super(n,c,a),this.repo=t,this.groupRepo=e,this.headerMap=["title","first_name","last_name","structure_level","number","groups_id","comment","is_active","is_present","is_committee","default_password","email","username","gender","vote_weight"],this.requiredHeaderLength=3,this.errorList={Group:"Group cannot be resolved",Duplicates:"This user already exists",NoName:"Entry has no valid name",DuplicateImport:"Entry cannot be imported twice. This line will be ommitted",ParsingErrors:"Some csv values could not be read correctly.",FailedImport:"Imported user could not be imported.",vote_weight:"The vote weight has too many decimal places (max.: 6)."},this.expectedHeader=this.headerMap}clearData(){this.newGroups=[]}mapData(t){const e=new ge,n=Math.min(this.expectedHeader.length,t.length);let c=!1;for(let i=0;i<n;i++)switch(this.expectedHeader[i]){case"groups_id":e.csvGroups=this.getGroups(t[i]);break;case"is_active":case"is_committee":case"is_present":try{e[this.expectedHeader[i]]=this.toBoolean(t[i])}catch(s){if(s instanceof TypeError){console.log(s),c=!0;continue}}break;case"number":e.number=t[i];break;case"vote_weight":e[this.expectedHeader[i]]=t[i]?t[i]:1;break;default:e[this.expectedHeader[i]]=t[i]}const a=this.userToEntry(e);return c&&this.setError(a,"ParsingErrors"),a}doImport(){return Object(o.a)(this,void 0,void 0,(function*(){this.newGroups=yield this.createNewGroups();const t=[];let e=1;for(const n of this.entries)"new"===n.status&&(n.newEntry.solveGroups(this.newGroups)?(this.setError(n,"Group"),this.updatePreview()):(n.importTrackId=e,e+=1,t.push(n)));for(;t.length;){const e=t.splice(0,100),n=yield this.repo.bulkCreate(e);e.forEach(t=>{t&&n.importedTrackIds.includes(t.importTrackId)?t.status="done":this.setError(t,n.errors[t.importTrackId]?n.errors[t.importTrackId]:"FailedImport")}),this.updatePreview()}}))}getGroups(t){const e=[];if(!t)return[];t.trim();const n=t.split(",");for(const c of n){const t=c.trim();let n=this.groupRepo.getViewModelList().filter(e=>e.name===t);n.length||(n=this.groupRepo.getViewModelList().filter(e=>this.translate.instant(e.name)===t)),n.length?1===n.length&&e.push({name:n[0].name,id:n[0].id}):(this.newGroups.find(e=>e.name===t)||this.newGroups.push({name:t}),e.push({name:t}))}return e}createNewGroups(){return Object(o.a)(this,void 0,void 0,(function*(){const t=[];for(const e of this.newGroups)t.push(this.groupRepo.create(new fe.a({name:e.name})).then(t=>({name:e.name,id:t.id})));return yield Promise.all(t)}))}toBoolean(t){if(t&&"0"!==t&&"false"!==t){if("1"===t||"true"===t)return!0;throw new TypeError("Value cannot be translated into boolean: "+t)}return!1}parseTextArea(t){const e=[];this.clearData(),this.clearPreview(),t.split("\n").forEach(t=>{if(!t.length)return;const n=t.includes(",")?"lastCommaFirst":"firstSpaceLast",c=new ge(this.repo.parseUserString(t,n)),a=this.userToEntry(c);e.push(a)}),this.setParsedEntries(e)}userToEntry(t){const e={newEntry:t,hasDuplicates:!1,status:"new",errors:[]};return t.isValid?(e.hasDuplicates=this.repo.getViewModelList().some(e=>e.full_name===this.repo.getFullName(t)),e.hasDuplicates&&this.setError(e,"Duplicates")):this.setError(e,"NoName"),e}}return t.\u0275fac=function(e){return new(e||t)(p.dc(L.a),p.dc(b.a),p.dc(f.k),p.dc(ve.a),p.dc(g.a))},t.\u0275prov=p.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ge=n("wZkO"),Se=n("ihCf"),Ye=n("Dh3D");function Ze(t,e){if(1&t){const t=p.ac();p.Zb(0,"button",21),p.hc("click",(function(){return p.Ic(t),p.lc().doImport()})),p.Zb(1,"span",22),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Yb()}2&t&&(p.Gb(2),p.Tc(p.nc(3,1,"Import")))}function _e(t,e){1&t&&(p.Zb(0,"span"),p.Sc(1,", "),p.Yb())}function Pe(t,e){if(1&t&&(p.Zb(0,"span"),p.Sc(1),p.mc(2,"translate"),p.Qc(3,_e,2,0,"span",23),p.Yb()),2&t){const t=e.$implicit,n=e.last;p.Gb(1),p.Uc(" ",p.nc(2,2,t),""),p.Gb(2),p.tc("ngIf",!n)}}function Ce(t,e){if(1&t&&(p.Zb(0,"mat-option",24),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t){const t=e.$implicit;p.tc("value",t.value),p.Gb(1),p.Uc(" ",p.nc(2,2,t.label)," ")}}function Ie(t,e){if(1&t&&(p.Zb(0,"mat-option",24),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t){const t=e.$implicit;p.tc("value",t.value),p.Gb(1),p.Uc(" ",p.nc(2,2,t.label)," ")}}function Te(t,e){if(1&t&&(p.Zb(0,"mat-option",24),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t){const t=e.$implicit;p.tc("value",t.value),p.Gb(1),p.Uc(" ",p.nc(2,2,t.label)," ")}}function ye(t,e){if(1&t&&(p.Zb(0,"div"),p.Sc(1," \xa0 "),p.Zb(2,"mat-icon",53),p.Sc(3,"playlist_add"),p.Yb(),p.Zb(4,"span"),p.Sc(5),p.Yb(),p.Zb(6,"span"),p.Sc(7),p.mc(8,"translate"),p.Yb(),p.Yb()),2&t){const t=p.lc(2);p.Gb(5),p.Uc("\xa0",t.newCount,"\xa0"),p.Gb(2),p.Tc(p.nc(8,2,"Participant(s) will be imported."))}}function Me(t,e){if(1&t&&(p.Zb(0,"div",54),p.Sc(1," \xa0 "),p.Zb(2,"mat-icon",53),p.Sc(3,"warning"),p.Yb(),p.Zb(4,"span"),p.Sc(5),p.Yb(),p.Zb(6,"span"),p.Sc(7),p.mc(8,"translate"),p.Yb(),p.Yb()),2&t){const t=p.lc(2);p.Gb(5),p.Uc("\xa0",t.nonImportableCount,"\xa0"),p.Gb(2),p.Tc(p.nc(8,2,"entries will be ommitted."))}}function ke(t,e){if(1&t&&(p.Zb(0,"div",55),p.Sc(1," \xa0 "),p.Zb(2,"mat-icon",53),p.Sc(3,"done"),p.Yb(),p.Zb(4,"span"),p.Sc(5),p.Yb(),p.Zb(6,"span"),p.Sc(7),p.mc(8,"translate"),p.Yb(),p.Yb()),2&t){const t=p.lc(2);p.Gb(5),p.Uc("\xa0",t.doneCount,"\xa0"),p.Gb(2),p.Tc(p.nc(8,2,"Participants have been imported."))}}function xe(t,e){1&t&&(p.Zb(0,"div"),p.Zb(1,"span"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Yb()),2&t&&(p.Gb(2),p.Tc(p.nc(3,1,'After verifiy the preview click on "import" please (see top right).')))}function De(t,e){if(1&t){const t=p.ac();p.Zb(0,"mat-select",56),p.hc("valueChange",(function(e){return p.Ic(t),p.lc(2).shown=e}))("selectionChange",(function(){return p.Ic(t),p.lc(2).setFilter()})),p.Zb(1,"mat-option",57),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Zb(4,"mat-option",58),p.Sc(5),p.mc(6,"translate"),p.Yb(),p.Zb(7,"mat-option",59),p.Sc(8),p.mc(9,"translate"),p.Yb(),p.Yb()}if(2&t){const t=p.lc(2);p.tc("value",t.shown),p.Gb(2),p.Tc(p.nc(3,4,"Show all")),p.Gb(3),p.Tc(p.nc(6,6,"Show errors only")),p.Gb(3),p.Tc(p.nc(9,8,"Show correct entries only"))}}function Oe(t,e){1&t&&p.Ub(0,"mat-header-cell",60)}function Ee(t,e){if(1&t&&(p.Zb(0,"mat-icon",63),p.mc(1,"translate"),p.Sc(2," warning "),p.Yb()),2&t){const t=p.lc(4);p.uc("matTooltip",p.nc(1,1,t.getVerboseError("ParsingErrors")))}}function Ue(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"mat-icon",61),p.mc(2,"translate"),p.Sc(3),p.Yb(),p.Qc(4,Ee,3,3,"mat-icon",62),p.Yb()),2&t){const t=p.lc().$implicit,e=p.lc(2);p.Gb(1),p.wc("matTooltip","",t.errors.length," ",p.nc(2,4,"errors"),""),p.Gb(2),p.Uc(" ",e.getActionIcon(t)," "),p.Gb(1),p.tc("ngIf",e.hasError(t,"ParsingErrors"))}}function Qe(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"mat-icon",64),p.mc(2,"translate"),p.Sc(3),p.Yb(),p.Yb()),2&t){const t=p.lc().$implicit,e=p.lc(2);p.Gb(1),p.uc("matTooltip",p.nc(2,2,"Participant will be imported")),p.Gb(2),p.Uc(" ",e.getActionIcon(t)," ")}}function Fe(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"mat-icon",64),p.mc(2,"translate"),p.Sc(3),p.Yb(),p.Yb()),2&t){const t=p.lc().$implicit,e=p.lc(2);p.Gb(1),p.uc("matTooltip",p.nc(2,2,"Participant has been imported")),p.Gb(2),p.Uc(" ",e.getActionIcon(t)," ")}}function Ae(t,e){if(1&t&&(p.Zb(0,"mat-cell",60),p.Qc(1,Ue,5,6,"div",23),p.Qc(2,Qe,4,4,"div",23),p.Qc(3,Fe,4,4,"div",23),p.Yb()),2&t){const t=e.$implicit;p.Gb(1),p.tc("ngIf","error"===t.status),p.Gb(1),p.tc("ngIf","new"===t.status),p.Gb(1),p.tc("ngIf","done"===t.status)}}function Re(t,e){1&t&&(p.Zb(0,"mat-header-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Title")))}function Ne(t,e){if(1&t&&(p.Zb(0,"span"),p.Zb(1,"mat-icon",65),p.mc(2,"translate"),p.Sc(3," warning "),p.Yb(),p.Sc(4," \xa0 "),p.Yb()),2&t){const t=p.lc().$implicit,e=p.lc(2);p.Gb(1),p.uc("matTooltip",p.nc(2,1,e.nameErrors(t)))}}function Ve(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Qc(1,Ne,5,3,"span",23),p.Sc(2),p.Yb()),2&t){const t=e.$implicit,n=p.lc(2);p.Gb(1),p.tc("ngIf",n.nameErrors(t)),p.Gb(1),p.Uc(" ",t.newEntry.title," ")}}function Le(t,e){1&t&&(p.Zb(0,"mat-header-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Given name")))}function Be(t,e){if(1&t&&(p.Zb(0,"span"),p.Zb(1,"mat-icon",65),p.mc(2,"translate"),p.Sc(3," warning "),p.Yb(),p.Sc(4," \xa0 "),p.Yb()),2&t){const t=p.lc().$implicit,e=p.lc(2);p.Gb(1),p.uc("matTooltip",p.nc(2,1,e.nameErrors(t)))}}function je(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Qc(1,Be,5,3,"span",23),p.Sc(2),p.Yb()),2&t){const t=e.$implicit,n=p.lc(2);p.Gb(1),p.tc("ngIf",n.nameErrors(t)),p.Gb(1),p.Uc(" ",t.newEntry.first_name," ")}}function We(t,e){1&t&&(p.Zb(0,"mat-header-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Surname")))}function $e(t,e){if(1&t&&(p.Zb(0,"span"),p.Zb(1,"mat-icon",65),p.mc(2,"translate"),p.Sc(3," warning "),p.Yb(),p.Sc(4," \xa0 "),p.Yb()),2&t){const t=p.lc().$implicit,e=p.lc(2);p.Gb(1),p.uc("matTooltip",p.nc(2,1,e.nameErrors(t)))}}function He(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Qc(1,$e,5,3,"span",23),p.Sc(2),p.Yb()),2&t){const t=e.$implicit,n=p.lc(2);p.Gb(1),p.tc("ngIf",n.nameErrors(t)),p.Gb(1),p.Uc(" ",t.newEntry.last_name," ")}}function qe(t,e){1&t&&(p.Zb(0,"mat-header-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Structure level")))}function Xe(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Sc(1),p.Yb()),2&t){const t=e.$implicit;p.Gb(1),p.Uc(" ",t.newEntry.structure_level," ")}}function ze(t,e){1&t&&(p.Zb(0,"mat-header-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Participant number")))}function Ke(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Sc(1),p.Yb()),2&t){const t=e.$implicit;p.Gb(1),p.Uc(" ",t.newEntry.number," ")}}function Je(t,e){1&t&&(p.Zb(0,"mat-header-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Groups")))}function tn(t,e){if(1&t&&(p.Zb(0,"span"),p.Zb(1,"mat-icon",63),p.mc(2,"translate"),p.Sc(3," warning "),p.Yb(),p.Yb()),2&t){const t=p.lc(4);p.Gb(1),p.uc("matTooltip",p.nc(2,1,t.getVerboseError("Groups")))}}function en(t,e){1&t&&(p.Zb(0,"mat-icon",67),p.Sc(1,"add"),p.Yb())}function nn(t,e){if(1&t&&(p.Zb(0,"span"),p.Sc(1),p.Qc(2,en,2,0,"mat-icon",66),p.Sc(3," \xa0 "),p.Yb()),2&t){const t=e.$implicit;p.Gb(1),p.Uc(" ",t.name," "),p.Gb(1),p.tc("ngIf",!t.id)}}function cn(t,e){if(1&t&&(p.Zb(0,"div"),p.Qc(1,tn,4,3,"span",23),p.Qc(2,nn,4,2,"span",11),p.Yb()),2&t){const t=p.lc().$implicit,e=p.lc(2);p.Gb(1),p.tc("ngIf",e.hasError(t,"Groups")),p.Gb(1),p.tc("ngForOf",t.newEntry.csvGroups)}}function an(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Qc(1,cn,3,2,"div",23),p.Yb()),2&t){const t=e.$implicit;p.Gb(1),p.tc("ngIf",t.newEntry.csvGroups.length)}}function sn(t,e){1&t&&(p.Zb(0,"mat-header-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Comment")))}function on(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Sc(1),p.Yb()),2&t){const t=e.$implicit;p.Gb(1),p.Uc(" ",t.newEntry.comment," ")}}function rn(t,e){1&t&&(p.Zb(0,"mat-header-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Is active")))}function ln(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Ub(1,"mat-checkbox",68),p.Yb()),2&t){const t=e.$implicit;p.Gb(1),p.tc("checked",t.newEntry.is_active)}}function bn(t,e){1&t&&(p.Zb(0,"mat-header-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Is present")))}function un(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Ub(1,"mat-checkbox",68),p.Yb()),2&t){const t=e.$implicit;p.Gb(1),p.tc("checked",t.newEntry.is_present)}}function mn(t,e){1&t&&(p.Zb(0,"mat-header-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Is committee")))}function dn(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Ub(1,"mat-checkbox",68),p.Yb()),2&t){const t=e.$implicit;p.Gb(1),p.tc("checked",t.newEntry.is_committee)}}function pn(t,e){1&t&&(p.Zb(0,"mat-header-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Initial password")))}function hn(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Sc(1),p.Yb()),2&t){const t=e.$implicit;p.Gb(1),p.Uc(" ",t.newEntry.default_password," ")}}function fn(t,e){1&t&&(p.Zb(0,"mat-header-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Email")))}function gn(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Sc(1),p.Yb()),2&t){const t=e.$implicit;p.Gb(1),p.Uc(" ",t.newEntry.email," ")}}function vn(t,e){1&t&&(p.Zb(0,"mat-header-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Username")))}function wn(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Sc(1),p.Yb()),2&t){const t=e.$implicit;p.Gb(1),p.Uc(" ",t.newEntry.username," ")}}function Gn(t,e){1&t&&(p.Zb(0,"mat-header-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Gender")))}function Sn(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Sc(1),p.Yb()),2&t){const t=e.$implicit;p.Gb(1),p.Uc(" ",t.newEntry.gender," ")}}function Yn(t,e){1&t&&(p.Zb(0,"mat-header-cell"),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t&&(p.Gb(1),p.Tc(p.nc(2,1,"Vote weight")))}function Zn(t,e){if(1&t&&(p.Zb(0,"mat-cell"),p.Sc(1),p.Yb()),2&t){const t=e.$implicit;p.Gb(1),p.Uc(" ",t.newEntry.vote_weight," ")}}function _n(t,e){1&t&&p.Ub(0,"mat-header-row")}function Pn(t,e){if(1&t&&p.Ub(0,"mat-row",69),2&t){const t=e.$implicit,n=p.lc(2);p.tc("ngClass",n.getStateClass(t))}}function Cn(t,e){if(1&t&&(p.Zb(0,"mat-card",4),p.Zb(1,"h3"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Zb(4,"div",25),p.Qc(5,ye,9,4,"div",23),p.Qc(6,Me,9,4,"div",26),p.Qc(7,ke,9,4,"div",27),p.Yb(),p.Qc(8,xe,4,3,"div",23),p.Qc(9,De,10,10,"mat-select",28),p.Zb(10,"div",29),p.Zb(11,"table",30),p.Xb(12,31),p.Qc(13,Oe,1,0,"mat-header-cell",32),p.Qc(14,Ae,4,3,"mat-cell",33),p.Wb(),p.Xb(15,34),p.Qc(16,Re,3,3,"mat-header-cell",35),p.Qc(17,Ve,3,2,"mat-cell",36),p.Wb(),p.Xb(18,37),p.Qc(19,Le,3,3,"mat-header-cell",35),p.Qc(20,je,3,2,"mat-cell",36),p.Wb(),p.Xb(21,38),p.Qc(22,We,3,3,"mat-header-cell",35),p.Qc(23,He,3,2,"mat-cell",36),p.Wb(),p.Xb(24,39),p.Qc(25,qe,3,3,"mat-header-cell",35),p.Qc(26,Xe,2,1,"mat-cell",36),p.Wb(),p.Xb(27,40),p.Qc(28,ze,3,3,"mat-header-cell",35),p.Qc(29,Ke,2,1,"mat-cell",36),p.Wb(),p.Xb(30,41),p.Qc(31,Je,3,3,"mat-header-cell",35),p.Qc(32,an,2,1,"mat-cell",36),p.Wb(),p.Xb(33,42),p.Qc(34,sn,3,3,"mat-header-cell",35),p.Qc(35,on,2,1,"mat-cell",36),p.Wb(),p.Xb(36,43),p.Qc(37,rn,3,3,"mat-header-cell",35),p.Qc(38,ln,2,1,"mat-cell",36),p.Wb(),p.Xb(39,44),p.Qc(40,bn,3,3,"mat-header-cell",35),p.Qc(41,un,2,1,"mat-cell",36),p.Wb(),p.Xb(42,45),p.Qc(43,mn,3,3,"mat-header-cell",35),p.Qc(44,dn,2,1,"mat-cell",36),p.Wb(),p.Xb(45,46),p.Qc(46,pn,3,3,"mat-header-cell",35),p.Qc(47,hn,2,1,"mat-cell",36),p.Wb(),p.Xb(48,47),p.Qc(49,fn,3,3,"mat-header-cell",35),p.Qc(50,gn,2,1,"mat-cell",36),p.Wb(),p.Xb(51,48),p.Qc(52,vn,3,3,"mat-header-cell",35),p.Qc(53,wn,2,1,"mat-cell",36),p.Wb(),p.Xb(54,49),p.Qc(55,Gn,3,3,"mat-header-cell",35),p.Qc(56,Sn,2,1,"mat-cell",36),p.Wb(),p.Xb(57,50),p.Qc(58,Yn,3,3,"mat-header-cell",35),p.Qc(59,Zn,2,1,"mat-cell",36),p.Wb(),p.Qc(60,_n,1,0,"mat-header-row",51),p.Qc(61,Pn,1,1,"mat-row",52),p.Yb(),p.Yb(),p.Yb()),2&t){const t=p.lc();p.Gb(2),p.Tc(p.nc(3,9,"Preview")),p.Gb(3),p.tc("ngIf",t.newCount),p.Gb(1),p.tc("ngIf",t.nonImportableCount),p.Gb(1),p.tc("ngIf",t.doneCount),p.Gb(1),p.tc("ngIf",t.newCount),p.Gb(1),p.tc("ngIf",t.nonImportableCount),p.Gb(2),p.tc("dataSource",t.dataSource),p.Gb(49),p.tc("matHeaderRowDef",t.getColumnDefinition()),p.Gb(1),p.tc("matRowDefColumns",t.getColumnDefinition())}}let In=(()=>{class t extends pe.a{constructor(t,e,n,c,a,s){super(s,t,c,e),this.translate=c,this.exporter=a,this.headerRow=["Title","Given name","Surname","Structure level","Participant number","Groups","Comment","Is active","Is present","Is a committee","Initial password","Email","Username","Gender","Vote weight"],this.textAreaForm=n.group({inputtext:[""]})}downloadCsvExample(){this.exporter.dummyCSVExport(this.headerRow,[["Dr.","Max","Mustermann","Berlin",1234567890,"Delegates, Staff","xyz",1,1,,"initialPassword",null,"mmustermann","m",1],[null,"John","Doe","Washington","75/99/8-2","Committees","This is a comment, without doubt",1,1,null,null,"john.doe@email.com","jdoe","diverse",2],[null,"Julia","Bloggs","London",null,null,null,null,null,null,null,null,"jbloggs","f",1.5],[null,null,"Executive Board",null,null,null,null,null,null,1,null,null,"executive",null,2.5]],this.translate.instant("participants-example")+".csv")}nameErrors(t){for(const e of["NoName","Duplicates","DuplicateImport"])if(this.importer.hasError(t,e))return this.importer.verbose(e);return""}parseTextArea(){this.importer.parseTextArea(this.textAreaForm.get("inputtext").value)}onTabChange(){this.importer.clearPreview()}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(h.d),p.Tb(g.a),p.Tb(r.f),p.Tb(f.k),p.Tb(de.a),p.Tb(we))},t.\u0275cmp=p.Nb({type:t,selectors:[["os-user-import-list"]],features:[p.Db],decls:79,vars:57,consts:[[3,"nav"],[1,"title-slot"],[1,"menu-slot"],["mat-button","",3,"click",4,"ngIf"],[1,"os-form-card","import-table","spacer-bottom-60"],[3,"selectedTabChange"],[3,"label"],[3,"formGroup"],["matInput","","osAutofocus","","formControlName","inputtext","cdkTextareaAutosize","","cdkAutosizeMinRows","3","cdkAutosizeMaxRows","10",3,"placeholder"],["mat-button","","color","accent",3,"click"],[1,"code","red-warning-text"],[4,"ngFor","ngForOf"],[1,"wrapper"],[1,"selection",3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["value","",1,"selection",3,"selectionChange"],["value",'"',1,"selection",3,"selectionChange"],["id","user-import-file-input","type","file","accept","text",1,"hidden-input",3,"change"],["fileInput",""],["mat-button","","color","accent","onclick","document.getElementById('user-import-file-input').click()"],["class","os-form-card import-table spacer-bottom-60",4,"ngIf"],["mat-button","",3,"click"],[1,"upper"],[4,"ngIf"],[3,"value"],[1,"summary"],["class","red-warning-text",4,"ngIf"],["class","green-text",4,"ngIf"],["class","filter-imports",3,"value","valueChange","selectionChange",4,"ngIf"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","status","sticky",""],["class","first-column",4,"matHeaderCellDef"],["class","first-column",4,"matCellDef"],["matColumnDef","title"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","first_name"],["matColumnDef","last_name"],["matColumnDef","structure_level"],["matColumnDef","number"],["matColumnDef","groups_id"],["matColumnDef","comment"],["matColumnDef","is_active"],["matColumnDef","is_present"],["matColumnDef","is_committee"],["matColumnDef","default_password"],["matColumnDef","email"],["matColumnDef","username"],["matColumnDef","gender"],["matColumnDef","vote_weight"],[4,"matHeaderRowDef"],[3,"ngClass",4,"matRowDef","matRowDefColumns"],["inline",""],[1,"red-warning-text"],[1,"green-text"],[1,"filter-imports",3,"value","valueChange","selectionChange"],["value","all"],["value","error"],["value","noerror"],[1,"first-column"],[1,"red-warning-text",3,"matTooltip"],["color","warn",3,"matTooltip",4,"ngIf"],["color","warn",3,"matTooltip"],[3,"matTooltip"],["color","warn","inline","",3,"matTooltip"],["class","newBadge","color","accent","inline","",4,"ngIf"],["color","accent","inline","",1,"newBadge"],["disabled","",3,"checked"],[3,"ngClass"]],template:function(t,e){1&t&&(p.Zb(0,"os-head-bar",0),p.Zb(1,"div",1),p.Zb(2,"h2"),p.Sc(3),p.mc(4,"translate"),p.Yb(),p.Yb(),p.Zb(5,"div",2),p.Qc(6,Ze,4,3,"button",3),p.Yb(),p.Yb(),p.Zb(7,"mat-card",4),p.Zb(8,"mat-tab-group",5),p.hc("selectedTabChange",(function(){return e.onTabChange()})),p.Zb(9,"mat-tab",6),p.mc(10,"translate"),p.Ub(11,"br"),p.Zb(12,"div",7),p.Zb(13,"div"),p.Zb(14,"span"),p.Sc(15),p.mc(16,"translate"),p.Yb(),p.Zb(17,"span"),p.Sc(18),p.mc(19,"translate"),p.Yb(),p.Ub(20,"br"),p.Zb(21,"span"),p.Sc(22),p.mc(23,"translate"),p.Yb(),p.Yb(),p.Zb(24,"mat-form-field"),p.Ub(25,"textarea",8),p.mc(26,"translate"),p.Yb(),p.Yb(),p.Zb(27,"div"),p.Zb(28,"button",9),p.hc("click",(function(){return e.parseTextArea()})),p.Zb(29,"span"),p.Sc(30),p.mc(31,"translate"),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(32,"mat-tab",6),p.mc(33,"translate"),p.Ub(34,"br"),p.Zb(35,"span"),p.Sc(36),p.mc(37,"translate"),p.Yb(),p.Ub(38,"br"),p.Zb(39,"div",10),p.Qc(40,Pe,4,4,"span",11),p.Yb(),p.Zb(41,"ul"),p.Zb(42,"li"),p.Sc(43),p.mc(44,"translate"),p.Yb(),p.Zb(45,"li"),p.Sc(46),p.mc(47,"translate"),p.Yb(),p.Yb(),p.Zb(48,"button",9),p.hc("click",(function(){return e.downloadCsvExample()})),p.Sc(49),p.mc(50,"translate"),p.Yb(),p.Zb(51,"div",12),p.Zb(52,"mat-form-field"),p.Zb(53,"mat-label"),p.Sc(54),p.mc(55,"translate"),p.Yb(),p.Zb(56,"mat-select",13),p.hc("selectionChange",(function(t){return e.selectEncoding(t)})),p.Qc(57,Ce,3,4,"mat-option",14),p.Yb(),p.Yb(),p.Zb(58,"mat-form-field"),p.Zb(59,"mat-label"),p.Sc(60),p.mc(61,"translate"),p.Yb(),p.Zb(62,"mat-select",15),p.hc("selectionChange",(function(t){return e.selectColSep(t)})),p.Qc(63,Ie,3,4,"mat-option",14),p.Yb(),p.Yb(),p.Zb(64,"mat-form-field"),p.Zb(65,"mat-label"),p.Sc(66),p.mc(67,"translate"),p.Yb(),p.Zb(68,"mat-select",16),p.hc("selectionChange",(function(t){return e.selectTextSep(t)})),p.Qc(69,Te,3,4,"mat-option",14),p.Yb(),p.Yb(),p.Yb(),p.Zb(70,"div"),p.Zb(71,"div"),p.Zb(72,"input",17,18),p.hc("change",(function(t){return e.onSelectFile(t)})),p.Yb(),p.Zb(74,"button",19),p.Zb(75,"span"),p.Sc(76),p.mc(77,"translate"),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Qc(78,Cn,62,11,"mat-card",20)),2&t&&(p.tc("nav",!1),p.Gb(3),p.Tc(p.nc(4,25,"Import participants")),p.Gb(3),p.tc("ngIf",e.hasFile&&e.newCount),p.Gb(3),p.uc("label",p.nc(10,27,"Text import")),p.Gb(3),p.tc("formGroup",e.textAreaForm),p.Gb(3),p.Tc(p.nc(16,29,"Copy and paste your participant names in this textbox.")),p.Gb(3),p.Tc(p.nc(19,31,"Keep each person in a single line.")),p.Gb(4),p.Tc(p.nc(23,33,'Comma separated names will be read as "Surname, given name(s)".')),p.Gb(3),p.uc("placeholder",p.nc(26,35,"Insert participants here")),p.Gb(5),p.Tc(p.nc(31,37,"Preview")),p.Gb(2),p.uc("label",p.nc(33,39,"CSV import")),p.Gb(4),p.Uc(" ",p.nc(37,41,"Required comma or semicolon separated values with these column header names in the first row:")," "),p.Gb(4),p.tc("ngForOf",e.headerRow),p.Gb(3),p.Uc(" ",p.nc(44,43,"One of given name, surname and username has to be filled in. All other fields are optional and may be empty.")," "),p.Gb(3),p.Uc(" ",p.nc(47,45,"Additional columns after the required ones may be present and will not affect the import.")," "),p.Gb(3),p.Uc(" ",p.nc(50,47,"Download CSV example file")," "),p.Gb(5),p.Tc(p.nc(55,49,"Encoding of the file")),p.Gb(2),p.tc("value",e.encodings[0].value),p.Gb(1),p.tc("ngForOf",e.encodings),p.Gb(3),p.Tc(p.nc(61,51,"Column separator")),p.Gb(3),p.tc("ngForOf",e.columnSeparators),p.Gb(3),p.Tc(p.nc(67,53,"Text separator")),p.Gb(3),p.tc("ngForOf",e.textSeparators),p.Gb(7),p.Tc(p.nc(77,55,"Select file")),p.Gb(2),p.tc("ngIf",e.hasFile))},directives:[w.a,c.t,G.a,Ge.c,Ge.a,r.t,r.k,Z.c,_.b,r.c,Se.c,P.a,r.s,r.i,C.b,c.s,Z.g,pt.a,ht.n,l.n,Ye.a,l.c,l.i,l.b,l.k,l.m,B.a,l.h,l.a,j.c,Y.a,l.j,l.l,c.q],pipes:[f.j],encapsulation:2}),t})();var Tn=n("4u49"),yn=n("AqIO"),Mn=n("Jc+d"),kn=n("wL0i"),xn=n("D/ll"),Dn=n("+8Rz");let On=(()=>{class t extends Dn.a{constructor(t,e,n,c){super(t,e),this.translate=c,this.storageKey="UserList",this.userGroupFilterOptions={property:"groups_id",label:"Groups",options:[]},this.updateFilterForRepo(n,this.userGroupFilterOptions,this.translate.instant("Default"),t=>1!==t.id)}getFilterDefinitions(){return[{property:"is_present",label:"Presence",options:[{condition:!0,label:this.translate.instant("Is present")},{condition:!1,label:this.translate.instant("Is not present")}]},{property:"is_active",label:this.translate.instant("Active"),options:[{condition:!0,label:"Is active"},{condition:!1,label:this.translate.instant("Is not active")}]},{property:"is_committee",label:this.translate.instant("Committee"),options:[{condition:!0,label:"Is a committee"},{condition:!1,label:this.translate.instant("Is not a committee")}]},{property:"isLastEmailSend",label:this.translate.instant("Last email send"),options:[{condition:!0,label:this.translate.instant("Got an email")},{condition:!1,label:this.translate.instant("Didn't get an email")}]},{property:"isVoteWeightOne",label:this.translate.instant("Vote weight"),options:[{condition:!1,label:this.translate.instant("Has changed vote weight")},{condition:!0,label:this.translate.instant("Has unchanged vote weight")}]}].concat(this.userGroupFilterOptions)}}return t.\u0275fac=function(e){return new(e||t)(p.dc(yn.a),p.dc(xn.a),p.dc(b.a),p.dc(f.k))},t.\u0275prov=p.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var En=n("A6Ob");let Un=(()=>{class t extends En.a{constructor(t,e,n){super(t,e,n),this.storageKey="UserList",this.userSortOptions=[{property:"first_name",label:"Given name"},{property:"last_name",label:"Surname"},{property:"is_present",label:"Presence"},{property:"is_active",label:"Is active"},{property:"is_committee",label:"Is committee"},{property:"number",label:"Participant number"},{property:"structure_level",label:"Structure level"},{property:"vote_weight",label:"Vote weight"},{property:"comment"}]}getSortOptions(){return this.userSortOptions}getDefaultDefinition(){return Object(o.a)(this,void 0,void 0,(function*(){return{sortProperty:"first_name",sortAscending:!0}}))}}return t.\u0275fac=function(e){return new(e||t)(p.dc(f.k),p.dc(yn.a),p.dc(xn.a))},t.\u0275prov=p.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Qn=n("0Obk"),Fn=n("dRZP"),An=n("vYAO"),Rn=n("Tp2j");const Nn=["userInfoDialog"];function Vn(t,e){if(1&t&&p.Ub(0,"a",20),2&t){const t=p.lc().row;p.tc("routerLink",t.id)}}function Ln(t,e){if(1&t&&(p.Zb(0,"div",21),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t){const t=p.lc().row;p.Gb(1),p.Vc(" ",p.nc(2,2,"Vote weight"),": ",t.vote_weight," ")}}function Bn(t,e){1&t&&(p.Zb(0,"mat-icon",22),p.mc(1,"translate"),p.Sc(2," account_balance "),p.Yb()),2&t&&p.uc("matTooltip",p.nc(1,1,"Is committee"))}function jn(t,e){1&t&&(p.Zb(0,"mat-icon",22),p.mc(1,"translate"),p.Sc(2," block "),p.Yb()),2&t&&p.uc("matTooltip",p.nc(1,1,"Inactive"))}function Wn(t,e){if(1&t&&(p.Zb(0,"div",14),p.Qc(1,Vn,1,1,"a",15),p.Zb(2,"div",16),p.Zb(3,"div"),p.Zb(4,"div"),p.Sc(5),p.Yb(),p.Qc(6,Ln,3,4,"div",17),p.Yb(),p.Zb(7,"div",18),p.Qc(8,Bn,3,3,"mat-icon",19),p.Qc(9,jn,3,3,"mat-icon",19),p.Yb(),p.Yb(),p.Yb()),2&t){const t=e.row,n=p.lc();p.Gb(1),p.tc("ngIf",!n.isMultiSelect),p.Gb(4),p.Tc(t.short_name),p.Gb(1),p.tc("ngIf",n.showVoteWeight),p.Gb(2),p.tc("ngIf",t.is_committee),p.Gb(1),p.tc("ngIf",!t.is_active&&n.operator.hasPerms("users.see_extra"))}}function $n(t,e){1&t&&(p.Zb(0,"span"),p.Sc(1,","),p.Yb())}function Hn(t,e){if(1&t&&(p.Zb(0,"span"),p.Sc(1),p.mc(2,"translate"),p.Qc(3,$n,2,0,"span",12),p.Yb()),2&t){const t=e.$implicit,n=e.last;p.Gb(1),p.Uc(" ",p.nc(2,2,t.getTitle()),""),p.Gb(2),p.tc("ngIf",!n)}}function qn(t,e){if(1&t&&(p.Zb(0,"div"),p.Zb(1,"os-icon-container",26),p.Qc(2,Hn,4,4,"span",27),p.Yb(),p.Yb()),2&t){const t=p.lc().row;p.Gb(2),p.tc("ngForOf",t.groups)}}function Xn(t,e){if(1&t&&(p.Zb(0,"div",28),p.Zb(1,"os-icon-container",29),p.Sc(2),p.Yb(),p.Yb()),2&t){const t=p.lc().row;p.Gb(2),p.Tc(t.structure_level)}}function zn(t,e){if(1&t&&(p.Zb(0,"div",28),p.Zb(1,"os-icon-container",30),p.Sc(2),p.Yb(),p.Yb()),2&t){const t=p.lc().row;p.Gb(2),p.Tc(t.number)}}function Kn(t,e){if(1&t){const t=p.ac();p.Zb(0,"div",23),p.hc("click",(function(n){p.Ic(t);const c=e.row;return p.lc().openEditInfo(c,n)})),p.Zb(1,"div",24),p.Qc(2,qn,3,1,"div",12),p.Qc(3,Xn,3,1,"div",25),p.Qc(4,zn,3,1,"div",25),p.Yb(),p.Yb()}if(2&t){const t=e.row,n=p.lc();p.tc("ngClass",n.isMultiSelect?"":"clickable"),p.Gb(2),p.tc("ngIf",t.groups&&t.groups.length),p.Gb(1),p.tc("ngIf",t.structure_level),p.Gb(1),p.tc("ngIf",t.number)}}function Jn(t,e){if(1&t&&(p.Zb(0,"mat-icon",34),p.mc(1,"translate"),p.Sc(2," mail "),p.Yb()),2&t){const t=p.lc().row,e=p.lc();p.wc("matTooltip","",p.nc(1,2,"Email sent")," (",e.getEmailSentTime(t),")")}}function tc(t,e){if(1&t&&(p.Zb(0,"mat-icon",34),p.Sc(1," comment "),p.Yb()),2&t){const t=p.lc().row;p.uc("matTooltip",t.comment)}}function ec(t,e){1&t&&(p.Zb(0,"os-icon-container",35),p.Zb(1,"span"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Yb()),2&t&&(p.Gb(2),p.Tc(p.nc(3,1,"Is SAML user")))}function nc(t,e){if(1&t&&(p.Zb(0,"div",14),p.Zb(1,"div",31),p.Qc(2,Jn,3,4,"mat-icon",32),p.Qc(3,tc,2,1,"mat-icon",32),p.Qc(4,ec,4,3,"os-icon-container",33),p.Yb(),p.Yb()),2&t){const t=e.row;p.Gb(2),p.tc("ngIf",t.isLastEmailSend),p.Gb(1),p.tc("ngIf",!!t.comment),p.Gb(1),p.tc("ngIf",t.isSamlUser)}}function cc(t,e){if(1&t){const t=p.ac();p.Zb(0,"div",14),p.Zb(1,"mat-checkbox",36),p.hc("change",(function(){p.Ic(t);const n=e.row;return p.lc().setPresent(n)})),p.Zb(2,"span"),p.Sc(3),p.mc(4,"translate"),p.Yb(),p.Yb(),p.Yb()}if(2&t){const t=e.row,n=p.lc();p.Gb(1),p.tc("checked",t.is_present)("disabled",n.isPresentToggleDisabled(t)),p.Gb(2),p.Tc(p.nc(4,3,"Present"))}}const ac=function(t){return{user:t}};function sc(t,e){if(1&t){const t=p.ac();p.Zb(0,"div",14),p.Zb(1,"button",37),p.hc("click",(function(e){return p.Ic(t),e.stopPropagation()})),p.Zb(2,"mat-icon"),p.Sc(3,"more_vert"),p.Yb(),p.Yb(),p.Yb()}if(2&t){const t=e.row,n=p.lc(),c=p.Ec(25);p.Gb(1),p.tc("disabled",n.isMultiSelect)("matMenuTriggerFor",c)("matMenuTriggerData",p.zc(3,ac,t))}}function ic(t,e){if(1&t){const t=p.ac();p.Ub(0,"os-projector-button",38),p.Zb(1,"button",39),p.hc("click",(function(){p.Ic(t);const n=e.user;return p.lc().setPresent(n)})),p.Zb(2,"mat-icon",40),p.Sc(3),p.Yb(),p.Zb(4,"span"),p.Sc(5),p.mc(6,"translate"),p.Yb(),p.Yb()}if(2&t){const t=e.user;p.tc("object",t)("menuItem",!0),p.Gb(3),p.Uc(" ",t.is_present?"check_box":"check_box_outline_blank"," "),p.Gb(2),p.Tc(p.nc(6,4,"Present"))}}function oc(t,e){if(1&t){const t=p.ac();p.Zb(0,"button",39),p.hc("click",(function(){return p.Ic(t),p.lc(2).toggleMultiSelect()})),p.Zb(1,"mat-icon"),p.Sc(2,"library_add"),p.Yb(),p.Zb(3,"span"),p.Sc(4),p.mc(5,"translate"),p.Yb(),p.Yb()}2&t&&(p.Gb(4),p.Tc(p.nc(5,1,"Multiselect")))}function rc(t,e){1&t&&(p.Zb(0,"button",45),p.Zb(1,"mat-icon"),p.Sc(2,"people"),p.Yb(),p.Zb(3,"span"),p.Sc(4),p.mc(5,"translate"),p.Yb(),p.Yb()),2&t&&(p.Gb(4),p.Tc(p.nc(5,1,"Groups")))}function lc(t,e){1&t&&(p.Zb(0,"button",47),p.Zb(1,"mat-icon"),p.Sc(2,"transfer_within_a_station"),p.Yb(),p.Zb(3,"span"),p.Sc(4),p.mc(5,"translate"),p.Yb(),p.Yb()),2&t&&(p.Gb(4),p.Tc(p.nc(5,1,"Presence")))}function bc(t,e){1&t&&(p.Zb(0,"div"),p.Qc(1,lc,6,3,"button",46),p.Yb()),2&t&&(p.Gb(1),p.tc("osPerms","users.can_manage"))}function uc(t,e){if(1&t){const t=p.ac();p.Zb(0,"button",39),p.hc("click",(function(){return p.Ic(t),p.lc(2).onDownloadAccessPdf()})),p.Zb(1,"mat-icon"),p.Sc(2,"picture_as_pdf"),p.Yb(),p.Zb(3,"span"),p.Sc(4),p.mc(5,"translate"),p.Yb(),p.Yb()}2&t&&(p.Gb(4),p.Tc(p.nc(5,1,"Access data (PDF)")))}function mc(t,e){if(1&t){const t=p.ac();p.Zb(0,"button",39),p.hc("click",(function(){return p.Ic(t),p.lc(2).csvExportUserList()})),p.Zb(1,"mat-icon"),p.Sc(2,"archive"),p.Yb(),p.Zb(3,"span"),p.Sc(4),p.mc(5,"translate"),p.Yb(),p.Yb()}2&t&&(p.Gb(4),p.Tc(p.nc(5,1,"Export as CSV")))}function dc(t,e){1&t&&(p.Zb(0,"button",48),p.Zb(1,"mat-icon"),p.Sc(2,"cloud_upload"),p.Yb(),p.Zb(3,"span"),p.Sc(4),p.mc(5,"translate"),p.Yb(),p.Yb()),2&t&&(p.Gb(4),p.Tc(p.nc(5,1,"Import")))}function pc(t,e){1&t&&(p.Zb(0,"div"),p.Ub(1,"mat-divider"),p.Zb(2,"button",49),p.Zb(3,"mat-icon"),p.Sc(4,"settings"),p.Yb(),p.Zb(5,"span"),p.Sc(6),p.mc(7,"translate"),p.Yb(),p.Yb(),p.Yb()),2&t&&(p.Gb(6),p.Tc(p.nc(7,1,"Settings")))}function hc(t,e){if(1&t){const t=p.ac();p.Zb(0,"div"),p.Qc(1,oc,6,3,"button",41),p.Qc(2,rc,6,3,"button",42),p.Qc(3,bc,2,1,"div",12),p.Zb(4,"button",39),p.hc("click",(function(){return p.Ic(t),p.lc().pdfExportUserList()})),p.Zb(5,"mat-icon"),p.Sc(6,"picture_as_pdf"),p.Yb(),p.Zb(7,"span"),p.Sc(8),p.mc(9,"translate"),p.Yb(),p.Yb(),p.Qc(10,uc,6,3,"button",41),p.Qc(11,mc,6,3,"button",41),p.Qc(12,dc,6,3,"button",43),p.Qc(13,pc,8,3,"div",44),p.Yb()}if(2&t){const t=p.lc();p.Gb(1),p.tc("osPerms","users.can_manage"),p.Gb(1),p.tc("osPerms","users.can_manage"),p.Gb(1),p.tc("ngIf",t.presenceViewConfigured),p.Gb(5),p.Tc(p.nc(9,8,"List of participants (PDF)")),p.Gb(2),p.tc("osPerms","users.can_manage"),p.Gb(1),p.tc("osPerms","users.can_manage"),p.Gb(1),p.tc("osPerms","users.can_manage"),p.Gb(1),p.tc("osPerms","core.can_manage_config")}}function fc(t,e){if(1&t){const t=p.ac();p.Zb(0,"div"),p.Ub(1,"mat-divider"),p.Zb(2,"button",50),p.hc("click",(function(){return p.Ic(t),p.lc(3).setStateSelected("is_active")})),p.Zb(3,"mat-icon"),p.Sc(4,"block"),p.Yb(),p.Zb(5,"span"),p.Sc(6),p.mc(7,"translate"),p.Yb(),p.Yb(),p.Zb(8,"button",50),p.hc("click",(function(){return p.Ic(t),p.lc(3).setStateSelected("is_present")})),p.Zb(9,"mat-icon"),p.Sc(10,"check_box"),p.Yb(),p.Zb(11,"span"),p.Sc(12),p.mc(13,"translate"),p.Yb(),p.Yb(),p.Zb(14,"button",50),p.hc("click",(function(){return p.Ic(t),p.lc(3).setStateSelected("is_committee")})),p.Zb(15,"mat-icon"),p.Sc(16,"account_balance"),p.Yb(),p.Zb(17,"span"),p.Sc(18),p.mc(19,"translate"),p.Yb(),p.Yb(),p.Ub(20,"mat-divider"),p.Zb(21,"button",50),p.hc("click",(function(){return p.Ic(t),p.lc(3).sendInvitationEmailSelected()})),p.Zb(22,"mat-icon"),p.Sc(23,"mail"),p.Yb(),p.Zb(24,"span"),p.Sc(25),p.mc(26,"translate"),p.Yb(),p.Yb(),p.Zb(27,"button",50),p.hc("click",(function(){return p.Ic(t),p.lc(3).resetPasswordsToDefaultSelected()})),p.Zb(28,"mat-icon"),p.Sc(29,"vpn_key"),p.Yb(),p.Zb(30,"span"),p.Sc(31),p.mc(32,"translate"),p.Yb(),p.Yb(),p.Zb(33,"button",50),p.hc("click",(function(){return p.Ic(t),p.lc(3).generateNewPasswordsPasswordsSelected()})),p.Zb(34,"mat-icon"),p.Sc(35,"vpn_key"),p.Yb(),p.Zb(36,"span"),p.Sc(37),p.mc(38,"translate"),p.Yb(),p.Yb(),p.Ub(39,"mat-divider"),p.Zb(40,"button",51),p.hc("click",(function(){return p.Ic(t),p.lc(3).deleteSelected()})),p.Zb(41,"mat-icon"),p.Sc(42,"delete"),p.Yb(),p.Zb(43,"span"),p.Sc(44),p.mc(45,"translate"),p.Yb(),p.Yb(),p.Yb()}if(2&t){const t=p.lc(3);p.Gb(2),p.tc("disabled",!t.selectedRows.length),p.Gb(4),p.Tc(p.nc(7,14,"Enable/disable account ...")),p.Gb(2),p.tc("disabled",!t.selectedRows.length),p.Gb(4),p.Tc(p.nc(13,16,"Set presence ...")),p.Gb(2),p.tc("disabled",!t.selectedRows.length),p.Gb(4),p.Tc(p.nc(19,18,"Set committee ...")),p.Gb(3),p.tc("disabled",!t.selectedRows.length),p.Gb(4),p.Tc(p.nc(26,20,"Send invitation email")),p.Gb(2),p.tc("disabled",!t.selectedRows.length),p.Gb(4),p.Tc(p.nc(32,22,"Reset passwords to the default ones")),p.Gb(2),p.tc("disabled",!t.selectedRows.length),p.Gb(4),p.Tc(p.nc(38,24,"Generate new passwords")),p.Gb(3),p.tc("disabled",!t.selectedRows.length),p.Gb(4),p.Tc(p.nc(45,26,"Delete"))}}function gc(t,e){if(1&t){const t=p.ac();p.Zb(0,"div"),p.Ub(1,"mat-divider"),p.Zb(2,"button",50),p.hc("click",(function(){return p.Ic(t),p.lc(2).setGroupSelected()})),p.Zb(3,"mat-icon"),p.Sc(4,"people"),p.Yb(),p.Zb(5,"span"),p.Sc(6),p.mc(7,"translate"),p.Yb(),p.Yb(),p.Qc(8,fc,46,28,"div",44),p.Yb()}if(2&t){const t=p.lc(2);p.Gb(2),p.tc("disabled",!t.selectedRows.length),p.Gb(4),p.Tc(p.nc(7,3,"Add/remove groups ...")),p.Gb(2),p.tc("osPerms","users.can_manage")}}function vc(t,e){if(1&t){const t=p.ac();p.Zb(0,"div"),p.Zb(1,"button",39),p.hc("click",(function(){return p.Ic(t),p.lc().selectAll()})),p.Zb(2,"mat-icon"),p.Sc(3,"done_all"),p.Yb(),p.Zb(4,"span"),p.Sc(5),p.mc(6,"translate"),p.Yb(),p.Yb(),p.Zb(7,"button",50),p.hc("click",(function(){return p.Ic(t),p.lc().deselectAll()})),p.Zb(8,"mat-icon"),p.Sc(9,"clear"),p.Yb(),p.Zb(10,"span"),p.Sc(11),p.mc(12,"translate"),p.Yb(),p.Yb(),p.Qc(13,gc,9,5,"div",44),p.Yb()}if(2&t){const t=p.lc();p.Gb(5),p.Tc(p.nc(6,4,"Select all")),p.Gb(2),p.tc("disabled",!t.selectedRows.length),p.Gb(4),p.Tc(p.nc(12,6,"Deselect all")),p.Gb(2),p.tc("osPerms","users.can_manage")}}function wc(t,e){if(1&t&&(p.Zb(0,"mat-option",61),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t){const t=e.$implicit;p.tc("value",t.id),p.Gb(1),p.Uc(" ",p.nc(2,2,t.getTitle())," ")}}function Gc(t,e){if(1&t&&(p.Zb(0,"mat-option",61),p.Sc(1),p.mc(2,"translate"),p.Yb()),2&t){const t=e.$implicit;p.tc("value",t),p.Gb(1),p.Tc(p.nc(2,2,t))}}const Sc=function(t,e,n,c){return{groups_id:t,gender:e,number:n,structure_level:c}};function Yc(t,e){if(1&t){const t=p.ac();p.Zb(0,"h1",52),p.Zb(1,"span"),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Yb(),p.Zb(4,"div",53),p.Zb(5,"mat-form-field"),p.Zb(6,"mat-select",54),p.hc("ngModelChange",(function(e){return p.Ic(t),p.lc().infoDialog.groups_id=e})),p.mc(7,"translate"),p.Qc(8,wc,3,4,"mat-option",55),p.Yb(),p.Yb(),p.Zb(9,"mat-form-field"),p.Zb(10,"mat-select",56),p.hc("ngModelChange",(function(e){return p.Ic(t),p.lc().infoDialog.gender=e})),p.mc(11,"translate"),p.Zb(12,"mat-option"),p.Sc(13,"-"),p.Yb(),p.Qc(14,Gc,3,4,"mat-option",55),p.Yb(),p.Yb(),p.Zb(15,"mat-form-field"),p.Zb(16,"input",57),p.hc("ngModelChange",(function(e){return p.Ic(t),p.lc().infoDialog.structure_level=e})),p.mc(17,"translate"),p.Yb(),p.Yb(),p.Zb(18,"mat-form-field"),p.Zb(19,"input",57),p.hc("ngModelChange",(function(e){return p.Ic(t),p.lc().infoDialog.number=e})),p.mc(20,"translate"),p.Yb(),p.Yb(),p.Yb(),p.Zb(21,"div",58),p.Zb(22,"button",59),p.Zb(23,"span"),p.Sc(24),p.mc(25,"translate"),p.Yb(),p.Yb(),p.Zb(26,"button",60),p.Zb(27,"span"),p.Sc(28),p.mc(29,"translate"),p.Yb(),p.Yb(),p.Yb()}if(2&t){const t=p.lc();p.Gb(2),p.Vc("",p.nc(3,16,"Edit details for")," ",t.infoDialog.name,""),p.Gb(4),p.uc("placeholder",p.nc(7,18,"Groups")),p.tc("ngModel",t.infoDialog.groups_id),p.Gb(2),p.tc("ngForOf",t.groups),p.Gb(2),p.uc("placeholder",p.nc(11,20,"Gender")),p.tc("ngModel",t.infoDialog.gender),p.Gb(4),p.tc("ngForOf",t.genderList),p.Gb(2),p.uc("placeholder",p.nc(17,22,"Structure level")),p.tc("ngModel",t.infoDialog.structure_level),p.Gb(3),p.uc("placeholder",p.nc(20,24,"Participant number")),p.tc("ngModel",t.infoDialog.number),p.Gb(3),p.tc("mat-dialog-close",p.Cc(30,Sc,t.infoDialog.groups_id,t.infoDialog.gender,t.infoDialog.number,t.infoDialog.structure_level)),p.Gb(2),p.Tc(p.nc(25,26,"Save")),p.Gb(2),p.tc("mat-dialog-close",null),p.Gb(2),p.Tc(p.nc(29,28,"Cancel"))}}const Zc=function(){return["group","presence"]},_c=[{path:"",component:(()=>{class t extends kn.a{constructor(t,e,n,c,a,s,i,o,r,l,b,u,m,d,p,h,f,g){super(t,e,n,a),this.translate=e,this.route=c,this.repo=s,this.groupRepo=i,this.choiceService=o,this.router=r,this.operator=l,this.csvExport=b,this.promptService=u,this.filterService=m,this.sortService=d,this.userPdf=h,this.dialog=f,this.pollService=g,this.genderList=st.c,this._presenceViewConfigured=!1,this.tableColumnDefinition=[{prop:"short_name",width:"auto"},{prop:"group",width:"15%"},{prop:"infos",width:this.singleButtonWidth},{prop:"presence",width:"100px"}],this.filterProps=["full_name","groups","structure_level","number"],this.selfPresentConfStr="users_allow_self_set_present",this.canMultiSelect=!0,p.get("users_enable_presence_view").subscribe(t=>this._presenceViewConfigured=t),p.get("users_activate_vote_weight").subscribe(t=>this.isVoteWeightActive=t),p.get(this.selfPresentConfStr).subscribe(t=>this.allowSelfSetPresent=t)}get presenceViewConfigured(){return this._presenceViewConfigured&&this.operator.hasPerms(i.b.usersCanManage)}get canAddUser(){return this.operator.hasPerms(i.b.usersCanManage)}get showVoteWeight(){return this.pollService.isElectronicVotingEnabled&&this.isVoteWeightActive}ngOnInit(){super.setTitle("Participants"),this.groups=this.groupRepo.getViewModelList().filter(t=>1!==t.id),this.groupRepo.getViewModelListObservable().subscribe(t=>this.groups=t.filter(t=>1!==t.id))}onPlusButton(){this.router.navigate(["./new"],{relativeTo:this.route})}isPresentToggleDisabled(t){return!!this.isMultiSelect||(!this.allowSelfSetPresent||this.operator.viewUser!==t)&&!this.operator.hasPerms(i.b.usersCanManage)}openEditInfo(t,e){if(this.isMultiSelect||!this.operator.hasPerms(i.b.usersCanManage))return;e.stopPropagation(),this.infoDialog={name:t.username,groups_id:t.groups_id,gender:t.gender,structure_level:t.structure_level,number:t.number};const n=this.dialog.open(this.userInfoDialog,m.a);n.keydownEvents().subscribe(t=>{"Enter"===t.key&&t.shiftKey&&n.close(this.infoDialog)}),n.afterClosed().subscribe(e=>{e&&this.repo.update(e,t)})}csvExportUserList(){this.csvExport.export(this.dataSource.filteredData,[{property:"title"},{property:"first_name",label:"Given name"},{property:"last_name",label:"Surname"},{property:"structure_level",label:"Structure level"},{property:"number",label:"Participant number"},{label:"groups",map:t=>t.groups.map(t=>t.name).join(",")},{property:"comment"},{property:"is_active",label:"Is active"},{property:"is_present",label:"Is present"},{property:"is_committee",label:"Is a committee"},{property:"default_password",label:"Initial password"},{property:"email"},{property:"gender"}],this.translate.instant("Participants")+".csv")}onDownloadAccessPdf(){this.userPdf.exportMultipleUserAccessPDF(this.dataSource.filteredData)}pdfExportUserList(){this.userPdf.exportUserList(this.dataSource.filteredData)}deleteSelected(){return Object(o.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Are you sure you want to delete all selected participants?");(yield this.promptService.open(t))&&this.repo.bulkDelete(this.selectedRows).catch(this.raiseError)}))}setGroupSelected(){return Object(o.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("This will add or remove the following groups for all selected participants:"),e=[Object(Tn.a)("add group(s)"),Object(Tn.a)("remove group(s)")],n=yield this.choiceService.open(t,this.groupRepo.getViewModelList(),!0,e);n&&this.repo.bulkAlterGroups(this.selectedRows,n.action===e[0]?"add":"remove",n.items).catch(this.raiseError)}))}setStateSelected(t){return Object(o.a)(this,void 0,void 0,(function*(){let e,n;switch(t){case"is_active":e=[Object(Tn.a)("active"),Object(Tn.a)("inactive")],n="active";break;case"is_present":e=[Object(Tn.a)("present"),Object(Tn.a)("absent")],n="present";break;case"is_committee":e=[Object(Tn.a)("committee"),Object(Tn.a)("no committee")],n="committee"}const c=this.translate.instant(`Set ${n} status for selected participants:`),a=yield this.choiceService.open(c,null,!1,e);a&&this.repo.bulkSetState(this.selectedRows,t,a.action===e[0]).catch(this.raiseError)}))}sendInvitationEmailSelected(){return Object(o.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Are you sure you want to send emails to all selected participants?"),e=this.selectedRows.length+" "+this.translate.instant("emails");(yield this.promptService.open(t,e))&&this.repo.bulkSendInvitationEmail(this.selectedRows).catch(this.raiseError)}))}getEmailSentTime(t){return t.isLastEmailSend?this.repo.lastSentEmailTimeString(t):this.translate.instant("No email sent")}resetPasswordsToDefaultSelected(){return Object(o.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Are you sure you want to reset all passwords to the default ones?");(yield this.promptService.open(t))&&(this.selectedRows.find(t=>t.user.id===this.operator.user.id)&&this.raiseError(this.translate.instant("Note: Your own password was not changed. Please use the password change dialog instead.")),this.repo.bulkResetPasswordsToDefault(this.selectedRows).catch(this.raiseError))}))}generateNewPasswordsPasswordsSelected(){return Object(o.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Are you sure you want to generate new passwords for all selected participants?"),e=this.translate.instant("Note, that the default password will be changed to the new generated one.");(yield this.promptService.open(t,e))&&(this.selectedRows.find(t=>t.user.id===this.operator.user.id)&&this.raiseError(this.translate.instant("Note: Your own password was not changed. Please use the password change dialog instead.")),this.repo.bulkGenerateNewPasswords(this.selectedRows).catch(this.raiseError))}))}setPresent(t){t.user.is_present=!t.user.is_present,this.operator.hasPerms(i.b.usersCanManage)?this.repo.update(t.user,t).catch(this.raiseError):this.allowSelfSetPresent&&this.operator.viewUser===t&&this.operator.setPresence(t.user.is_present).catch(this.raiseError)}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(h.d),p.Tb(f.k),p.Tb(g.a),p.Tb(s.a),p.Tb(yn.a),p.Tb(L.a),p.Tb(b.a),p.Tb(Mn.a),p.Tb(s.f),p.Tb(i.a),p.Tb(de.a),p.Tb(u.a),p.Tb(On),p.Tb(Un),p.Tb(K.a),p.Tb(bt),p.Tb(v.b),p.Tb(ot.a))},t.\u0275cmp=p.Nb({type:t,selectors:[["os-user-list"]],viewQuery:function(t,e){var n;1&t&&p.Oc(Nn,!0),2&t&&p.Dc(n=p.ic())&&(e.userInfoDialog=n.first)},features:[p.Db],decls:33,vars:27,consts:[[3,"hasMainButton","multiSelectMode","mainEvent"],[1,"title-slot"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],[1,"central-info-slot"],["mat-icon-button","",3,"click"],["listStorageKey","user",3,"listObservableProvider","filterService","sortService","columns","filterProps","showListOfSpeakers","multiSelect","hiddenInMobile","selectedRows","selectedRowsChange","dataSourceChange"],["class","cell-slot fill",4,"pblNgridCellDef"],["class","cell-slot fill",3,"ngClass","click",4,"pblNgridCellDef"],["singleItemMenu","matMenu"],["matMenuContent",""],["userMenu","matMenu"],[4,"ngIf"],["userInfoDialog",""],[1,"cell-slot","fill"],["class","detail-link",3,"routerLink",4,"ngIf"],[1,"nameCell"],["class","user-subtitle",4,"ngIf"],[1,"icon-group"],[3,"matTooltip",4,"ngIf"],[1,"detail-link",3,"routerLink"],[1,"user-subtitle"],[3,"matTooltip"],[1,"cell-slot","fill",3,"ngClass","click"],[1,"groupsCell"],["class","spacer-top-5",4,"ngIf"],["icon","people"],[4,"ngFor","ngForOf"],[1,"spacer-top-5"],["icon","flag"],["icon","perm_identity"],[1,"infoCell"],["inline","",3,"matTooltip",4,"ngIf"],["icon","device_hub",4,"ngIf"],["inline","",3,"matTooltip"],["icon","device_hub"],[1,"checkbox-ripple-padding",3,"checked","disabled","change"],["mat-icon-button","",3,"disabled","matMenuTriggerFor","matMenuTriggerData","click"],[3,"object","menuItem"],["mat-menu-item","",3,"click"],["color","accent"],["mat-menu-item","",3,"click",4,"osPerms"],["mat-menu-item","","routerLink","groups",4,"osPerms"],["mat-menu-item","","routerLink","import",4,"osPerms"],[4,"osPerms"],["mat-menu-item","","routerLink","groups"],["mat-menu-item","","routerLink","presence",4,"osPerms"],["mat-menu-item","","routerLink","presence"],["mat-menu-item","","routerLink","import"],["mat-menu-item","","routerLink","/settings/participants"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",1,"red-warning-text",3,"disabled","click"],["mat-dialog-title",""],["mat-dialog-content","",1,"os-form-card-mobile"],["multiple","",3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"placeholder","ngModel","ngModelChange"],["type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["mat-dialog-actions",""],["type","submit","mat-button","","color","accent",3,"mat-dialog-close"],["type","button","mat-button","",3,"mat-dialog-close"],[3,"value"]],template:function(t,e){if(1&t&&(p.Zb(0,"os-head-bar",0),p.hc("mainEvent",(function(){return e.onPlusButton()})),p.Zb(1,"div",1),p.Zb(2,"h2"),p.Sc(3),p.mc(4,"translate"),p.Yb(),p.Yb(),p.Zb(5,"div",2),p.Zb(6,"button",3),p.Zb(7,"mat-icon"),p.Sc(8,"more_vert"),p.Yb(),p.Yb(),p.Yb(),p.Zb(9,"div",4),p.Zb(10,"button",5),p.hc("click",(function(){return e.toggleMultiSelect()})),p.Zb(11,"mat-icon"),p.Sc(12,"arrow_back"),p.Yb(),p.Yb(),p.Zb(13,"span"),p.Sc(14),p.Yb(),p.Zb(15,"span"),p.Sc(16),p.mc(17,"translate"),p.Yb(),p.Yb(),p.Yb(),p.Zb(18,"os-list-view-table",6),p.hc("selectedRowsChange",(function(t){return e.selectedRows=t}))("dataSourceChange",(function(t){return e.onDataSourceChange(t)})),p.Qc(19,Wn,10,5,"div",7),p.Qc(20,Kn,5,4,"div",8),p.Qc(21,nc,5,3,"div",7),p.Qc(22,cc,5,5,"div",7),p.Qc(23,sc,4,5,"div",7),p.Yb(),p.Zb(24,"mat-menu",null,9),p.Qc(26,ic,7,6,"ng-template",10),p.Yb(),p.Zb(27,"mat-menu",null,11),p.Qc(29,hc,14,10,"div",12),p.Qc(30,vc,14,8,"div",12),p.Yb(),p.Qc(31,Yc,30,35,"ng-template",null,13,p.Rc)),2&t){const t=p.Ec(28);p.tc("hasMainButton",e.canAddUser)("multiSelectMode",e.isMultiSelect),p.Gb(3),p.Tc(p.nc(4,22,"Participants")),p.Gb(3),p.tc("matMenuTriggerFor",t),p.Gb(8),p.Uc("",e.selectedRows.length,"\xa0"),p.Gb(2),p.Tc(p.nc(17,24,"selected")),p.Gb(2),p.tc("listObservableProvider",e.repo)("filterService",e.filterService)("sortService",e.sortService)("columns",e.tableColumnDefinition)("filterProps",e.filterProps)("showListOfSpeakers",!1)("multiSelect",e.isMultiSelect)("hiddenInMobile",p.yc(26,Zc))("selectedRows",e.selectedRows),p.Gb(1),p.tc("pblNgridCellDef","short_name"),p.Gb(1),p.tc("pblNgridCellDef","group"),p.Gb(1),p.tc("pblNgridCellDef","infos"),p.Gb(1),p.tc("pblNgridCellDef","presence"),p.Gb(1),p.tc("pblNgridCellDef","menu"),p.Gb(6),p.tc("ngIf",!e.isMultiSelect),p.Gb(1),p.tc("ngIf",e.isMultiSelect)}},directives:[w.a,C.b,ut.e,B.a,Qn.a,Fn.c,ut.f,ut.b,c.t,s.i,j.c,c.q,An.a,c.s,Y.a,Rn.a,ut.c,gt.a,s.g,mt.a,v.i,v.f,Z.c,pt.a,r.s,r.v,ht.n,_.b,r.c,v.c,v.d],pipes:[f.j],styles:[".title-line[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.title-line[_ngcontent-%COMP%]   .icon-prefix[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;font-size:16px;height:16px;width:16px}.title-line[_ngcontent-%COMP%]   .favorite-star[_ngcontent-%COMP%]{padding-right:3px}.mat-table[_ngcontent-%COMP%]{width:100%}.mat-table[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{display:none}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]{position:absolute!important;top:0;right:0;bottom:0;left:0;opacity:.1;z-index:1}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-column-anchor[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{position:relative}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{position:absolute;display:inherit;height:100%;width:100%;line-height:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{z-index:2}.mat-table[_ngcontent-%COMP%]   .mat-table-sticky[_ngcontent-%COMP%]{z-index:3!important}.groupsCell[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.groupsCell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:80%}.infoCell[_ngcontent-%COMP%]{display:grid}.detail-link[_ngcontent-%COMP%]{z-index:2}.nameCell[_ngcontent-%COMP%]{position:relative;z-index:1;display:-ms-flexbox;display:flex}.nameCell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.icon-group[_ngcontent-%COMP%]{margin-left:1em;z-index:3}"]}),t})(),pathMatch:"full",data:{basePerm:i.b.usersCanSeeName}},{path:"password",component:z,data:{basePerm:i.b.usersCanChangePassword}},{path:"password/:id",component:z,data:{basePerm:i.b.usersCanManage}},{path:"new",component:me,data:{basePerm:i.b.usersCanManage}},{path:"import",component:In,data:{basePerm:i.b.usersCanManage}},{path:"presence",component:nt,data:{basePerm:i.b.usersCanManage}},{path:"groups",component:V,data:{basePerm:i.b.usersCanManage}},{path:":id",component:me}];let Pc=(()=>{class t{}return t.\u0275mod=p.Rb({type:t}),t.\u0275inj=p.Qb({factory:function(e){return new(e||t)},imports:[[s.j.forChild(_c)],s.j]}),t})(),Cc=(()=>{class t{}return t.\u0275mod=p.Rb({type:t}),t.\u0275inj=p.Qb({factory:function(e){return new(e||t)},imports:[[c.c,Pc,a.a]]}),t})()},"Jc+d":function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var c=n("mrSG"),a=n("Izkr"),s=n("0IaG"),i=n("fXoL"),o=n("3Pt+"),r=n("ofXK"),l=n("bTqV"),b=n("oqD5"),u=n("sYmb");function m(t,e){if(1&t&&(i.Zb(0,"h2",2),i.Sc(1),i.mc(2,"translate"),i.Yb()),2&t){const t=i.lc();i.Gb(1),i.Tc(i.nc(2,1,t.data.title))}}function d(t,e){if(1&t&&(i.Zb(0,"div",9),i.Ub(1,"os-search-value-selector",10),i.Yb()),2&t){const t=i.lc(2);i.Gb(1),i.tc("multiple",t.data.multiSelect)("formControl",t.selectForm.get("select"))("inputListValues",t.data.choices)}}function p(t,e){if(1&t){const t=i.ac();i.Zb(0,"button",12),i.hc("click",(function(){i.Ic(t);const n=e.$implicit;return i.lc(3).closeDialog(!0,n)})),i.Zb(1,"span"),i.Sc(2),i.mc(3,"translate"),i.Yb(),i.Yb()}if(2&t){const t=e.$implicit,n=i.lc(3);i.tc("disabled",!n.hasSelection),i.Gb(2),i.Tc(i.nc(3,2,t))}}function h(t,e){if(1&t&&(i.Zb(0,"div"),i.Qc(1,p,4,4,"button",11),i.Yb()),2&t){const t=i.lc(2);i.Gb(1),i.tc("ngForOf",t.data.actionButtons)}}function f(t,e){if(1&t){const t=i.ac();i.Zb(0,"button",12),i.hc("click",(function(){return i.Ic(t),i.lc(3).closeDialog(!0)})),i.Zb(1,"span"),i.Sc(2,"OK"),i.Yb(),i.Yb()}if(2&t){const t=i.lc(3);i.tc("disabled",!t.hasSelection)}}function g(t,e){if(1&t&&(i.Zb(0,"div"),i.Qc(1,f,3,1,"button",13),i.Yb()),2&t){const t=i.lc(2);i.Gb(1),i.tc("ngIf",!t.data.multiSelect||t.data.choices)}}function v(t,e){if(1&t){const t=i.ac();i.Zb(0,"button",8),i.hc("click",(function(){i.Ic(t);const e=i.lc(2);return e.closeDialog(!0,e.data.clearChoice)})),i.Zb(1,"span"),i.Sc(2),i.Yb(),i.Yb()}if(2&t){const t=i.lc(2);i.Gb(2),i.Tc(t.data.clearChoice)}}function w(t,e){if(1&t){const t=i.ac();i.Zb(0,"form",3),i.Qc(1,d,2,3,"div",4),i.Zb(2,"div",5),i.Qc(3,h,2,1,"div",6),i.Qc(4,g,2,1,"div",6),i.Qc(5,v,3,1,"button",7),i.Zb(6,"button",8),i.hc("click",(function(){return i.Ic(t),i.lc().closeDialog(!1)})),i.Zb(7,"span"),i.Sc(8),i.mc(9,"translate"),i.Yb(),i.Yb(),i.Yb(),i.Yb()}if(2&t){const t=i.lc();i.tc("formGroup",t.selectForm),i.Gb(1),i.tc("ngIf",t.data.choices),i.Gb(2),i.tc("ngIf",t.data.actionButtons),i.Gb(1),i.tc("ngIf",!t.data.actionButtons),i.Gb(1),i.tc("ngIf",t.data.clearChoice),i.Gb(3),i.Tc(i.nc(9,6,"Cancel"))}}let G=(()=>{class t{constructor(t,e,n){this.dialogRef=t,this.formBuilder=e,this.data=n,this.selectedMultiChoices=[],this.selectForm=this.formBuilder.group({select:[]})}get hasSelection(){return!(this.data&&this.data.choices&&(!this.selectForm.get("select").value||!this.selectForm.get("select").value&&!this.selectForm.get("select").value.length))}closeDialog(t,e){this.data.multiSelect||null!==this.selectedChoice||(e=this.data.clearChoice),t?this.dialogRef.close({action:e||null,items:this.selectForm.get("select").value}):this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(i.Tb(s.h),i.Tb(o.f),i.Tb(s.a))},t.\u0275cmp=i.Nb({type:t,selectors:[["os-choice-dialog"]],decls:2,vars:2,consts:[["mat-dialog-title","",4,"ngIf"],[3,"formGroup",4,"ngIf"],["mat-dialog-title",""],[3,"formGroup"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],[4,"ngIf"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"click"],["mat-dialog-content",""],["ngDefaultControl","",3,"multiple","formControl","inputListValues"],["mat-button","",3,"disabled","click",4,"ngFor","ngForOf"],["mat-button","",3,"disabled","click"],["mat-button","",3,"disabled","click",4,"ngIf"]],template:function(t,e){1&t&&(i.Qc(0,m,3,3,"h2",0),i.Qc(1,w,10,8,"form",1)),2&t&&(i.tc("ngIf",e.data),i.Gb(1),i.tc("ngIf",e.data))},directives:[r.t,s.i,o.I,o.t,o.k,s.c,l.b,s.f,b.a,o.c,o.s,o.h,r.s],pipes:[u.j],styles:[".mat-form-field{width:100%}"],encapsulation:2}),t})(),S=(()=>{class t{constructor(t){this.dialog=t}open(t,e,n=!1,s,i){return Object(c.a)(this,void 0,void 0,(function*(){return this.dialog.open(G,Object.assign(Object.assign({},a.a),{data:{title:t,choices:e,multiSelect:n,actionButtons:s,clearChoice:i}})).afterClosed().toPromise()}))}}return t.\u0275fac=function(e){return new(e||t)(i.dc(s.b))},t.\u0275prov=i.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},wL0i:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var c=n("mV3u");class a extends c.a{constructor(t,e,n,c){super(t,e,n),this.storage=c,this.canMultiSelect=!1,this._multiSelectMode=!1,this.singleButtonWidth="40px",this.badgeButtonWidth="45px",this.selectedRows=[]}onDataSourceChange(t){this.dataSource=t}toggleMultiSelect(){!this.canMultiSelect||this.isMultiSelect?(this._multiSelectMode=!1,this.deselectAll()):this._multiSelectMode=!0}selectAll(){this.dataSource.selection.select(...this.dataSource.filteredData)}deselectAll(){this.dataSource&&this.dataSource.selection.clear()}get isMultiSelect(){return this._multiSelectMode}}}}]);