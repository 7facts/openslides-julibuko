function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=_superPropBase(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{ndCD:function(t,e,n){"use strict";n.r(e),n.d(e,"AmendmentListModule",(function(){return mt}));var i=n("ofXK"),o=n("tyNb"),r=n("mrSG"),c=n("eIep"),a=n("VVsa"),l=n("AOla"),s=n("AqIO"),b=n("dOok"),u=n("a9XT"),m=n("7dBR"),p=n("+az0"),d=n("Izkr"),f=n("wL0i"),g=n("TzFX"),v=n("zyuw"),h=n("d4fM"),S=n("y50V"),y=n("T9hM"),x=n("fXoL"),w=n("jhN1"),Y=n("sYmb"),Z=n("dNgK"),_=n("0IaG"),M=n("mksl"),k=n("bTqV"),T=n("STbY"),G=n("NFeN"),I=n("0Obk"),P=n("dRZP"),R=n("A5z7"),C=n("Tp2j"),O=n("40uZ"),j=n("3Xi6"),D=n("f0Cb"),L=n("pcP9"),z=n("7jBc");function Q(t,e){1&t&&(x.Zb(0,"div",12),x.Zb(1,"h2"),x.Sc(2),x.mc(3,"translate"),x.Yb(),x.Yb()),2&t&&(x.Gb(2),x.Tc(x.nc(3,1,"Amendments")))}function E(t,e){if(1&t&&(x.Zb(0,"div",12),x.Zb(1,"h2"),x.Sc(2),x.mc(3,"translate"),x.mc(4,"async"),x.Yb(),x.Yb()),2&t){var n,i=x.lc();x.Gb(2),x.Vc(" ",x.nc(3,2,"Amendments to")," ",null==(n=x.nc(4,4,i.parentMotion))?null:n.identifierOrTitle," ")}}function A(t,e){1&t&&(x.Zb(0,"span"),x.Sc(1,"\xa0\xb7\xa0"),x.Yb())}function U(t,e){if(1&t&&(x.Zb(0,"span"),x.Qc(1,A,2,0,"span",11),x.Zb(2,"span"),x.Sc(3),x.mc(4,"translate"),x.Yb(),x.Zb(5,"span"),x.Sc(6),x.Yb(),x.Yb()),2&t){var n=x.lc().row;x.Gb(1),x.tc("ngIf",n.identifier),x.Gb(2),x.Tc(x.nc(4,3,"Line")),x.Gb(3),x.Uc("\xa0",n.getChangeLines(),"")}}function N(t,e){if(1&t&&(x.Zb(0,"span"),x.Zb(1,"span"),x.Sc(2),x.mc(3,"translate"),x.Yb(),x.Sc(4),x.Yb()),2&t){var n=x.lc().row;x.Gb(2),x.Tc(x.nc(3,2,"by")),x.Gb(2),x.Uc(" ",n.submitters," ")}}function F(t,e){1&t&&(x.Zb(0,"span"),x.Sc(1," \xb7 "),x.Yb())}function V(t,e){if(1&t&&(x.Zb(0,"mat-basic-chip",20),x.Sc(1),x.Yb()),2&t){var n=x.lc().row,i=x.lc();x.tc("ngClass",n.stateCssColor)("disabled",!0),x.Gb(1),x.Uc(" ",i.motionRepo.getExtendedStateLabel(n)," ")}}function B(t,e){if(1&t&&(x.Zb(0,"div",21),x.Zb(1,"mat-basic-chip",22),x.Sc(2),x.Yb(),x.Yb()),2&t){var n=x.lc().row,i=x.lc();x.Gb(1),x.tc("disabled",!0),x.Gb(1),x.Uc(" ",i.motionRepo.getExtendedRecommendationLabel(n)," ")}}var W=function(){return{back:"true"}};function X(t,e){if(1&t&&(x.Zb(0,"div",13),x.Ub(1,"a",14),x.Zb(2,"div",15),x.Zb(3,"div",16),x.Zb(4,"span"),x.Sc(5),x.Yb(),x.Qc(6,U,7,5,"span",11),x.Yb(),x.Zb(7,"div",17),x.Qc(8,N,5,4,"span",11),x.Qc(9,F,2,0,"span",11),x.Zb(10,"span"),x.Sc(11),x.mc(12,"translate"),x.Yb(),x.Sc(13),x.Yb(),x.Zb(14,"div"),x.Qc(15,V,2,3,"mat-basic-chip",18),x.Yb(),x.Qc(16,B,3,2,"div",19),x.Yb(),x.Yb()),2&t){var n=e.row;x.Gb(1),x.tc("routerLink",n.getDetailStateURL())("state",x.yc(12,W)),x.Gb(4),x.Tc(n.identifier),x.Gb(1),x.tc("ngIf",n.diffLines&&n.diffLines.length),x.Gb(2),x.tc("ngIf",n.submitters.length),x.Gb(1),x.tc("ngIf",n.submitters.length),x.Gb(2),x.Tc(x.nc(12,10,"Sequential number")),x.Gb(2),x.Uc(" ",n.id," "),x.Gb(2),x.tc("ngIf",n.state),x.Gb(1),x.tc("ngIf",n.recommendation&&n.state.next_states_id.length>0)}}function q(t,e){if(1&t&&(x.Zb(0,"div",13),x.Ub(1,"a",23),x.Zb(2,"div",15),x.Ub(3,"div",24),x.mc(4,"trust"),x.Yb(),x.Yb()),2&t){var n=e.row,i=x.lc();x.Gb(1),x.tc("routerLink",n.getDetailStateURL()),x.Gb(2),x.tc("innerHtml",x.oc(4,2,i.getAmendmentSummary(n),"html"),x.Jc)}}var H=function(t){return{motion:t}};function J(t,e){if(1&t){var n=x.ac();x.Zb(0,"div",13),x.Zb(1,"button",25),x.hc("click",(function(t){return x.Ic(n),t.stopPropagation()})),x.Zb(2,"mat-icon"),x.Sc(3,"more_vert"),x.Yb(),x.Yb(),x.Yb()}if(2&t){var i=e.row,o=x.lc(),r=x.Ec(21);x.Gb(1),x.tc("disabled",o.isMultiSelect)("matMenuTriggerFor",r)("matMenuTriggerData",x.zc(3,H,i))}}function K(t,e){if(1&t&&(x.Ub(0,"os-projector-button",26),x.Ub(1,"os-speaker-button",26)),2&t){var n=e.motion;x.tc("object",n)("menuItem",!0),x.Gb(1),x.tc("object",n)("menuItem",!0)}}function $(t,e){if(1&t){var n=x.ac();x.Zb(0,"div"),x.Zb(1,"button",28),x.hc("click",(function(){return x.Ic(n),x.lc(2).toggleMultiSelect()})),x.Zb(2,"mat-icon"),x.Sc(3,"library_add"),x.Yb(),x.Zb(4,"span"),x.Sc(5),x.mc(6,"translate"),x.Yb(),x.Yb(),x.Yb()}2&t&&(x.Gb(5),x.Tc(x.nc(6,1,"Multiselect")))}function tt(t,e){if(1&t){var n=x.ac();x.Zb(0,"div"),x.Qc(1,$,7,3,"div",27),x.Zb(2,"button",28),x.hc("click",(function(){return x.Ic(n),x.lc().openExportDialog()})),x.Zb(3,"mat-icon"),x.Sc(4,"archive"),x.Yb(),x.Zb(5,"span"),x.Sc(6),x.mc(7,"translate"),x.Yb(),x.Yb(),x.Zb(8,"button",28),x.hc("click",(function(){return x.Ic(n),x.lc().exportAmendmentListPdf()})),x.Zb(9,"mat-icon"),x.Sc(10,"picture_as_pdf"),x.Yb(),x.Zb(11,"span"),x.Sc(12),x.mc(13,"translate"),x.Yb(),x.Yb(),x.Yb()}2&t&&(x.Gb(1),x.tc("osPerms","motions.can_manage"),x.Gb(5),x.Tc(x.nc(7,3,"Export")),x.Gb(6),x.Tc(x.nc(13,5,"Amendment list (PDF)")))}function et(t,e){if(1&t){var n=x.ac();x.Xb(0),x.Ub(1,"mat-divider"),x.Zb(2,"os-motion-multiselect-actions",31),x.hc("action",(function(t){return x.Ic(n),x.lc(2).multiselectWrapper(t)})),x.Yb(),x.Wb()}if(2&t){var i=x.lc(2);x.Gb(2),x.tc("selectedMotions",i.selectedRows)}}function nt(t,e){if(1&t){var n=x.ac();x.Zb(0,"div"),x.Zb(1,"button",28),x.hc("click",(function(){return x.Ic(n),x.lc().selectAll()})),x.Zb(2,"mat-icon"),x.Sc(3,"done_all"),x.Yb(),x.Zb(4,"span"),x.Sc(5),x.mc(6,"translate"),x.Yb(),x.Yb(),x.Zb(7,"button",29),x.hc("click",(function(){return x.Ic(n),x.lc().deselectAll()})),x.Zb(8,"mat-icon"),x.Sc(9,"clear"),x.Yb(),x.Zb(10,"span"),x.Sc(11),x.mc(12,"translate"),x.Yb(),x.Yb(),x.Qc(13,et,3,1,"ng-container",30),x.Yb()}if(2&t){var i=x.lc();x.Gb(5),x.Tc(x.nc(6,5,"Select all")),x.Gb(2),x.tc("disabled",!i.selectedRows.length),x.Gb(4),x.Tc(x.nc(12,7,"Deselect all")),x.Gb(2),x.tc("osPerms","motions.can_manage")("osPermsOr","motions.can_manage_metadata")}}var it,ot,rt,ct=function(){return["summary"]},at=((it=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,r,c,a,l,s,b,u,m,d,f,g,v){var h,S;return _classCallCheck(this,n),(S=e.call(this,t,i,o,r)).route=c,S.motionRepo=a,S.motionSortService=l,S.motionMultiSelectService=s,S.amendmentSortService=b,S.amendmentFilterService=u,S.dialog=m,S.motionExport=d,S.linenumberingService=f,S.pdfExport=g,S.overlayService=v,S.itemVisibility=p.b,S.tableColumnDefinition=[{prop:"meta",minWidth:250,width:"auto"},{prop:"summary",minWidth:280,width:"auto"},{prop:"speakers",width:S.singleButtonWidth}],S.filterProps=["submitters","title","identifier","amendment_paragraphs"],_get((h=_assertThisInitialized(S),_getPrototypeOf(n.prototype)),"setTitle",h).call(h,"Amendments"),S.canMultiSelect=!0,S}return _createClass(n,[{key:"ngOnInit",value:function(){var t=this;this.route.snapshot.paramMap.get("id")?this.parentMotion=this.route.paramMap.pipe(Object(c.a)((function(e){return t.parentMotionId=+e.get("id"),t.amendmentFilterService.parentMotionId=t.parentMotionId,t.motionRepo.getViewModelObservable(t.parentMotionId)}))):this.amendmentFilterService.parentMotionId=void 0}},{key:"getAmendmentSummary",value:function(t){var e=this,n=t.diffLines;return n.length?n.map((function(t){return e.linenumberingService.stripLineNumbers(t.text)})).join("[...]"):t.text}},{key:"openExportDialog",value:function(){var t=this;this.dialog.open(g.a,Object.assign(Object.assign({},d.b),{data:this.dataSource})).afterClosed().subscribe((function(e){return t.motionExport.evaluateExportRequest(e,t.isMultiSelect?t.selectedRows:t.dataSource.filteredData)}))}},{key:"multiselectWrapper",value:function(t){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.then((function(){return n.overlayService.hideSpinner()}),this.raiseError);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"exportAmendmentListPdf",value:function(){var t=this.parentMotionId?this.motionRepo.getViewModel(this.parentMotionId):void 0;this.pdfExport.exportAmendmentList(this.dataSource.filteredData,t)}}]),n}(f.a)).\u0275fac=function(t){return new(t||it)(x.Tb(w.d),x.Tb(Y.k),x.Tb(Z.a),x.Tb(s.a),x.Tb(o.a),x.Tb(b.a),x.Tb(y.a),x.Tb(h.a),x.Tb(l.a),x.Tb(a.a),x.Tb(_.b),x.Tb(v.a),x.Tb(u.a),x.Tb(S.a),x.Tb(m.a))},it.\u0275cmp=x.Nb({type:it,selectors:[["os-amendment-list"]],features:[x.Db],decls:27,vars:23,consts:[["prevUrl","../..",3,"nav","multiSelectMode"],["class","title-slot",4,"ngIf"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],[1,"central-info-slot"],["mat-icon-button","",3,"click"],["listStorageKey","amendments",3,"listObservableProvider","sortService","filterService","columns","filterProps","multiSelect","hiddenInMobile","selectedRows","selectedRowsChange","dataSourceChange"],["class","cell-slot fill",4,"pblNgridCellDef"],["singleItemMenu","matMenu"],["matMenuContent",""],["amendmentListMenu","matMenu"],[4,"ngIf"],[1,"title-slot"],[1,"cell-slot","fill"],[1,"detail-link",3,"routerLink","state"],[1,"innerTable"],[1,"title-line","one-line"],[1,"submitters-line","one-line"],[3,"ngClass","disabled",4,"ngIf"],["class","spacer-top-3",4,"ngIf"],[3,"ngClass","disabled"],[1,"spacer-top-3"],[1,"bluegrey",3,"disabled"],[1,"detail-link",3,"routerLink"],[1,"motion-text",3,"innerHtml"],["mat-icon-button","",3,"disabled","matMenuTriggerFor","matMenuTriggerData","click"],[3,"object","menuItem"],[4,"osPerms"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"],[4,"osPerms","osPermsOr"],[3,"selectedMotions","action"]],template:function(t,e){if(1&t&&(x.Zb(0,"os-head-bar",0),x.Qc(1,Q,4,3,"div",1),x.Qc(2,E,5,6,"div",1),x.Zb(3,"div",2),x.Zb(4,"button",3),x.Zb(5,"mat-icon"),x.Sc(6,"more_vert"),x.Yb(),x.Yb(),x.Yb(),x.Zb(7,"div",4),x.Zb(8,"button",5),x.hc("click",(function(){return e.toggleMultiSelect()})),x.Zb(9,"mat-icon"),x.Sc(10,"arrow_back"),x.Yb(),x.Yb(),x.Zb(11,"span"),x.Sc(12),x.Yb(),x.Zb(13,"span"),x.Sc(14),x.mc(15,"translate"),x.Yb(),x.Yb(),x.Yb(),x.Zb(16,"os-list-view-table",6),x.hc("selectedRowsChange",(function(t){return e.selectedRows=t}))("dataSourceChange",(function(t){return e.onDataSourceChange(t)})),x.Qc(17,X,17,13,"div",7),x.Qc(18,q,5,5,"div",7),x.Qc(19,J,4,5,"div",7),x.Yb(),x.Zb(20,"mat-menu",null,8),x.Qc(22,K,2,4,"ng-template",9),x.Yb(),x.Zb(23,"mat-menu",null,10),x.Qc(25,tt,14,7,"div",11),x.Qc(26,nt,14,9,"div",11),x.Yb()),2&t){var n=x.Ec(24);x.tc("nav",!1)("multiSelectMode",e.isMultiSelect),x.Gb(1),x.tc("ngIf",!e.parentMotion),x.Gb(1),x.tc("ngIf",e.parentMotion),x.Gb(2),x.tc("matMenuTriggerFor",n),x.Gb(8),x.Uc("",e.selectedRows.length,"\xa0"),x.Gb(2),x.Tc(x.nc(15,20,"selected")),x.Gb(2),x.tc("listObservableProvider",e.motionRepo)("sortService",e.amendmentSortService)("filterService",e.amendmentFilterService)("columns",e.tableColumnDefinition)("filterProps",e.filterProps)("multiSelect",e.isMultiSelect)("hiddenInMobile",x.yc(22,ct))("selectedRows",e.selectedRows),x.Gb(1),x.tc("pblNgridCellDef","meta"),x.Gb(1),x.tc("pblNgridCellDef","summary"),x.Gb(1),x.tc("pblNgridCellDef","menu"),x.Gb(6),x.tc("ngIf",!e.isMultiSelect),x.Gb(1),x.tc("ngIf",e.isMultiSelect)}},directives:[M.a,i.t,k.b,T.e,G.a,I.a,P.c,T.f,T.b,o.i,R.a,i.q,C.a,O.a,j.a,T.c,D.a,L.a],pipes:[Y.j,i.b,z.a],styles:['.motion-text .insert,.motion-text ins{color:green;text-decoration:underline}.motion-text .delete,.motion-text del{color:red;text-decoration:line-through}.motion-text li{padding-bottom:10px}.motion-text ol,.motion-text ul{margin-left:15px;margin-bottom:0}.motion-text .highlight{background-color:#ff0}.motion-text.line-numbers-outside{padding-left:40px;position:relative}.motion-text.line-numbers-outside .os-line-number{display:inline-block;font-size:0;line-height:0;width:22px;height:22px;position:absolute;left:0;padding-right:55px}.motion-text.line-numbers-outside .os-line-number:after{content:attr(data-line-number);position:absolute;top:13px;vertical-align:top;color:grey;font-size:12px;font-weight:400}.motion-text.line-numbers-outside .os-line-number.selectable:hover:before,.motion-text.line-numbers-outside .os-line-number.selected:before{position:absolute;top:4px;left:20px;display:inline-block;cursor:pointer;content:"";width:16px;height:16px;background:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z" fill="%23337ab7"/><path d="M0 0h24v24H0z" fill="none"/></svg>\');background-size:16px 16px}.motion-text.line-numbers-inline .os-line-break{display:none}.motion-text.line-numbers-inline .os-line-number{display:inline-block}.motion-text.line-numbers-inline .os-line-number:after{display:inline-block;content:attr(data-line-number);vertical-align:top;font-size:10px;font-weight:400;color:grey;margin-top:-3px;margin-left:0;margin-right:0}.motion-text.line-numbers-none .os-line-break,.motion-text.line-numbers-none .os-line-number{display:none}.motion-text .os-split-before{margin-top:0;padding-top:0}.motion-text .os-split-after{margin-bottom:0;padding-bottom:0}.motion-text li.os-split-before{list-style:none}.amendment-view .os-split-after{margin-bottom:0}.amendment-view .os-split-before{margin-top:0}.amendment-view .paragraphcontext{opacity:.5}.amendment-view.amendment-context .paragraphcontext{opacity:1}.submitters-line{font-size:90%}'],encapsulation:2,changeDetection:0}),it),lt=[{path:"",component:at,pathMatch:"full"},{path:":id",component:at}],st=((ot=function t(){_classCallCheck(this,t)}).\u0275mod=x.Rb({type:ot}),ot.\u0275inj=x.Qb({factory:function(t){return new(t||ot)},imports:[[o.j.forChild(lt)],o.j]}),ot),bt=n("PCNd"),ut=n("IItz"),mt=((rt=function t(){_classCallCheck(this,t)}).\u0275mod=x.Rb({type:rt}),rt.\u0275inj=x.Qb({factory:function(t){return new(t||rt)},imports:[[i.c,st,bt.a,ut.a]]}),rt)}}]);