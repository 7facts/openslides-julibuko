function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(t);if(e){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{Iab2:function(t,e,n){var o,r;void 0===(r="function"==typeof(o=function(){"use strict";function e(t,e,n){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){a(o.response,e,n)},o.onerror=function(){console.error("could not download file")},o.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(t,i,a){var c=r.URL||r.webkitURL,l=document.createElement("a");l.download=i=i||t.name||"download",l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?o(l):n(l.href)?e(t,i,a):o(l,l.target="_blank")):(l.href=c.createObjectURL(t),setTimeout((function(){c.revokeObjectURL(l.href)}),4e4),setTimeout((function(){o(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,r,i){if(r=r||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,i),r);else if(n(t))e(t,r,i);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){o(a)}))}}:function(t,n,o,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,o);var c="application/octet-stream"===t.type,l=/constructor/i.test(r.HTMLElement)||r.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||c&&l||i)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},u.readAsDataURL(t)}else{var b=r.URL||r.webkitURL,f=b.createObjectURL(t);a?a.location=f:location.href=f,a=null,setTimeout((function(){b.revokeObjectURL(f)}),4e4)}});r.saveAs=a.saveAs=a,t.exports=a})?o.apply(e,[]):o)||(t.exports=r)},ePZ9:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var o=n("pSLD"),r=n("+B0n"),i=n("dOok"),a=n("+KbT"),c=n("1NkQ"),l=n("a9XT"),s=n("rHPv"),u=n("jDC6"),b=n("3Y4h"),f=n("fXoL"),m=n("sYmb"),d=function(){var t=function(){function t(e,n,o,r,i,a,c){_classCallCheck(this,t),this.csvExport=e,this.translate=n,this.configService=o,this.linenumberingService=r,this.changeRecoRepo=i,this.motionRepo=a,this.commentRepo=c}return _createClass(t,[{key:"createText",value:function(t,e){var n=this.configService.instant("motions_line_length"),o=Object.assign([],this.changeRecoRepo.getChangeRecoOfMotion(t.id)),r=this.motionRepo.getAmendmentsInstantly(t.id);if(r){var i,a=_createForOfIteratorHelper(r);try{for(a.s();!(i=a.n()).done;){var c,l=i.value,s=this.changeRecoRepo.getChangeRecoOfMotion(l.id).filter((function(t){return t.showInFinalView()})),u=_createForOfIteratorHelper(this.motionRepo.getAmendmentAmendedParagraphs(l,n,s));try{for(u.s();!(c=u.n()).done;){var b=c.value;o.push(b)}}catch(m){u.e(m)}finally{u.f()}}}catch(m){a.e(m)}finally{a.f()}}o.sort((function(t,e){return t.getLineFrom()-e.getLineFrom()}));var f=this.motionRepo.formatMotion(t.id,e,o,n);return this.linenumberingService.stripLineNumbers(f)}},{key:"exportMotionList",value:function(t,e,n,o){var r=this;o||(o=this.configService.instant("motions_recommendation_text_mode"));var i=Object(b.j)(["identifier","title"].concat(e)).map((function(t){return"recommendation"===t?{label:"recommendation",map:function(t){return r.motionRepo.getExtendedRecommendationLabel(t)}}:"state"===t?{label:"state",map:function(t){return r.motionRepo.getExtendedStateLabel(t)}}:"text"===t?{label:"Text",map:function(t){return r.createText(t,o)}}:"motion_block"===t?{label:"Motion block",map:function(t){return t.motion_block?t.motion_block.getTitle():""}}:{property:t}}));i.push.apply(i,_toConsumableArray(n.map((function(t){return{label:r.commentRepo.getViewModel(t).getTitle(),map:function(e){var n=r.commentRepo.getViewModel(t),o=e.getCommentForSection(n);return o&&o.comment?Object(s.a)(Object(u.a)(o.comment)):""}}})))),this.csvExport.export(t,i,this.translate.instant("Motions")+".csv")}},{key:"exportCallList",value:function(t){var e=this;this.csvExport.export(t,[{label:"Called",map:function(t){return t.sort_parent_id?"":t.identifierOrTitle}},{label:"Called with",map:function(t){return t.sort_parent_id?t.identifierOrTitle:""}},{label:"submitters",map:function(t){return t.submittersAsUsers.map((function(t){return t.short_name})).join(",")}},{property:"title"},{label:"recommendation",map:function(t){return t.recommendation?e.motionRepo.getExtendedRecommendationLabel(t):""}},{property:"motion_block",label:"Motion block"}],this.translate.instant("Call list")+".csv")}},{key:"exportDummyMotion",value:function(){this.csvExport.dummyCSVExport(["Identifier","Submitters","Title","Text","Reason","Category","Tags","Motion block","Origin"],[["A1","Submitter A","Title 1","Text 1","Reason 1","Category A","Tag 1, Tag 2","Block A","Last Year Conference A"],["B1","Submitter B","Title 2","Text 2","Reason 2","Category B",null,"Block A","Origin B"],["C2",null,"Title 3","Text 3",null,null,null,null,null]],this.translate.instant("motions-example")+".csv")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f.dc(c.a),f.dc(m.k),f.dc(a.a),f.dc(l.a),f.dc(o.a),f.dc(i.a),f.dc(r.a))},t.\u0275prov=f.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},mksl:function(t,e,n){"use strict";n.d(e,"a",(function(){return M}));var o=n("fXoL"),r=n("VR2Q"),i=n("7dBR"),a=n("gsQk"),c=n("KL36"),l=n("tyNb"),s=n("/t3+"),u=n("ofXK"),b=n("bTqV"),f=n("NFeN"),m=n("Qu3c"),d=n("sYmb");function p(t,e){if(1&t){var n=o.ac();o.Zb(0,"button",12),o.hc("click",(function(){return o.Ic(n),o.lc().clickHamburgerMenu()})),o.Zb(1,"mat-icon"),o.Sc(2,"menu"),o.Yb(),o.Yb()}}function v(t,e){if(1&t){var n=o.ac();o.Zb(0,"button",12),o.hc("click",(function(){return o.Ic(n),o.lc().onBackButton()})),o.Zb(1,"mat-icon"),o.Sc(2,"arrow_back"),o.Yb(),o.Yb()}}function h(t,e){if(1&t){var n=o.ac();o.Zb(0,"button",12),o.hc("click",(function(){o.Ic(n);var t=o.lc();return t.isCancelEditUsed?t.sendCancelEditEvent():t.sendMainEvent()})),o.Zb(1,"mat-icon"),o.Sc(2,"close"),o.Yb(),o.Yb()}}function g(t,e){1&t&&(o.Zb(0,"div",13),o.rc(1,1),o.Yb())}function y(t,e){1&t&&o.Ub(0,"div",6)}function w(t,e){1&t&&(o.Zb(0,"div",14),o.rc(1,2),o.Yb())}function k(t,e){if(1&t){var n=o.ac();o.Zb(0,"button",12),o.hc("click",(function(){return o.Ic(n),o.lc().openSearch()})),o.Zb(1,"mat-icon"),o.Sc(2,"search"),o.Yb(),o.Yb()}}function S(t,e){if(1&t){var n=o.ac();o.Zb(0,"button",15),o.hc("click",(function(){return o.Ic(n),o.lc().sendMainEvent()})),o.mc(1,"translate"),o.Zb(2,"mat-icon"),o.Sc(3),o.Yb(),o.Yb()}if(2&t){var r=o.lc();o.uc("matTooltip",o.nc(1,3,r.mainActionTooltip)),o.tc("disabled",!r.isMainButtonEnabled),o.Gb(3),o.Tc(r.mainButtonIcon)}}function T(t,e){if(1&t){var n=o.ac();o.Zb(0,"button",16),o.hc("click",(function(){return o.Ic(n),o.lc().save()})),o.Zb(1,"strong",17),o.Sc(2),o.mc(3,"translate"),o.Yb(),o.Yb()}if(2&t){var r=o.lc();o.tc("disabled",!r.isSaveButtonEnabled),o.Gb(2),o.Tc(o.nc(3,2,r.saveText))}}function C(t,e){1&t&&o.rc(0,3,["*ngIf","!editMode"])}function x(t,e){1&t&&(o.Zb(0,"mat-icon"),o.Sc(1," add "),o.Yb())}function Y(t,e){if(1&t&&(o.Zb(0,"mat-icon"),o.Sc(1),o.Yb()),2&t){var n=o.lc(2);o.Gb(1),o.Uc(" ",n.mainButtonIcon," ")}}function Z(t,e){if(1&t){var n=o.ac();o.Zb(0,"button",18),o.hc("click",(function(){return o.Ic(n),o.lc().sendMainEvent()})),o.mc(1,"translate"),o.Qc(2,x,2,0,"mat-icon",10),o.Qc(3,Y,2,1,"mat-icon",10),o.Yb()}if(2&t){var r=o.lc();o.uc("matTooltip",o.nc(1,4,r.mainActionTooltip)),o.tc("disabled",!r.isMainButtonEnabled),o.Gb(2),o.tc("ngIf","add_circle"===r.mainButtonIcon),o.Gb(1),o.tc("ngIf","add_circle"!==r.mainButtonIcon)}}var E=[[["",8,"extra-controls-slot"]],[["",8,"title-slot"]],[["",8,"central-info-slot"]],[["",8,"menu-slot"]]],I=[".extra-controls-slot",".title-slot",".central-info-slot",".menu-slot"],M=function(){var t=function(){function t(e,n,r,i,a,c){_classCallCheck(this,t),this.vp=e,this.menu=n,this.router=r,this.route=i,this.routingState=a,this.overlayService=c,this.nav=!0,this.mainButtonIcon="add_circle",this.saveText="Save",this.editMode=!1,this.isSearchEnabled=!0,this.isSaveButtonEnabled=!0,this.multiSelectMode=!1,this.hasMainButton=!1,this.isMainButtonEnabled=!0,this.goBack=!1,this.prevUrl="../",this.mainEvent=new o.p,this.cancelEditEvent=new o.p,this.isCancelEditUsed=!1,this.saveEvent=new o.p}return _createClass(t,[{key:"ngOnInit",value:function(){this.isCancelEditUsed=this.cancelEditEvent.observers.length>0}},{key:"sendMainEvent",value:function(){this.mainEvent.next()}},{key:"sendCancelEditEvent",value:function(){this.cancelEditEvent.next()}},{key:"clickHamburgerMenu",value:function(){this.menu.toggleMenu()}},{key:"save",value:function(){this.saveEvent.next(!0)}},{key:"openSearch",value:function(){this.overlayService.showSearch()}},{key:"onBackButton",value:function(){this.goBack?this.routingState.goBack():this.router.navigate(this.routingState.customOrigin&&this.routingState.customOrigin!==this.router.url?[this.routingState.customOrigin]:[this.prevUrl],{relativeTo:this.route})}},{key:"showBackButton",get:function(){return!this.nav&&!this.multiSelectMode&&(this.routingState.isSafePrevUrl||!this.goBack)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Tb(c.a),o.Tb(r.a),o.Tb(l.f),o.Tb(l.a),o.Tb(a.a),o.Tb(i.a))},t.\u0275cmp=o.Nb({type:t,selectors:[["os-head-bar"]],inputs:{nav:"nav",mainButtonIcon:"mainButtonIcon",saveText:"saveText",editMode:"editMode",isSearchEnabled:"isSearchEnabled",isSaveButtonEnabled:"isSaveButtonEnabled",multiSelectMode:"multiSelectMode",hasMainButton:"hasMainButton",isMainButtonEnabled:"isMainButtonEnabled",goBack:"goBack",prevUrl:"prevUrl",mainActionTooltip:"mainActionTooltip"},outputs:{mainEvent:"mainEvent",cancelEditEvent:"cancelEditEvent",saveEvent:"saveEvent"},ngContentSelectors:I,decls:16,vars:12,consts:[["color","primary",1,"sticky-toolbar",3,"ngClass"],[1,"toolbar-left"],["mat-icon-button","",3,"click",4,"ngIf"],["class","toolbar-left-text",4,"ngIf"],["class","spacer",4,"ngIf"],["class","toolbar-centered",4,"ngIf"],[1,"spacer"],[1,"toolbar-right"],["mat-icon-button","",3,"disabled","matTooltip","click",4,"ngIf"],["mat-button","",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["mat-fab","","class","head-button",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"toolbar-left-text"],[1,"toolbar-centered"],["mat-icon-button","",3,"disabled","matTooltip","click"],["mat-button","",3,"disabled","click"],[1,"upper"],["mat-fab","",1,"head-button",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(o.sc(E),o.Zb(0,"mat-toolbar",0),o.Zb(1,"div",1),o.Qc(2,p,3,0,"button",2),o.Qc(3,v,3,0,"button",2),o.Qc(4,h,3,0,"button",2),o.Qc(5,g,2,0,"div",3),o.Yb(),o.Qc(6,y,1,0,"div",4),o.Qc(7,w,2,0,"div",5),o.Ub(8,"div",6),o.Qc(9,k,3,0,"button",2),o.Zb(10,"div",7),o.rc(11),o.Qc(12,S,4,5,"button",8),o.Qc(13,T,4,4,"button",9),o.Qc(14,C,1,0,void 0,10),o.Yb(),o.Yb(),o.Qc(15,Z,4,6,"button",11)),2&t&&(o.tc("ngClass",e.multiSelectMode?"multi-select":""),o.Gb(2),o.tc("ngIf",e.vp.isMobile&&!e.showBackButton&&!e.editMode),o.Gb(1),o.tc("ngIf",e.showBackButton&&!e.editMode),o.Gb(1),o.tc("ngIf",e.editMode),o.Gb(1),o.tc("ngIf",!e.multiSelectMode),o.Gb(1),o.tc("ngIf",!e.multiSelectMode),o.Gb(1),o.tc("ngIf",e.multiSelectMode),o.Gb(2),o.tc("ngIf",!e.editMode&&e.isSearchEnabled),o.Gb(3),o.tc("ngIf",e.hasMainButton&&!e.editMode&&!e.vp.isMobile&&!e.multiSelectMode),o.Gb(1),o.tc("ngIf",e.editMode),o.Gb(1),o.tc("ngIf",!e.editMode),o.Gb(1),o.tc("ngIf",e.hasMainButton&&!e.editMode&&e.vp.isMobile&&!e.multiSelectMode))},directives:[s.a,u.q,u.t,b.b,f.a,m.c],pipes:[d.j],styles:[".head-button{position:fixed;z-index:10;right:20px;bottom:55px}.sticky-toolbar{top:0;z-index:5;position:-webkit-sticky;position:sticky;height:64px!important}.sticky-toolbar .toolbar-left{display:-ms-flexbox;display:flex;max-width:calc(100% - 100px)}.sticky-toolbar .toolbar-left button{margin:12px 0}.sticky-toolbar .toolbar-left .toolbar-left-text{margin-left:10px;width:100%;overflow:hidden}.sticky-toolbar .toolbar-left .toolbar-left-text .title-slot{margin:16px 0;display:block}.sticky-toolbar .toolbar-left .toolbar-left-text .title-slot h2{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sticky-toolbar .toolbar-centered{margin:auto;vertical-align:baseline}.sticky-toolbar .toolbar-right,.sticky-toolbar .toolbar-right .extra-controls-slot{display:-ms-flexbox;display:flex}mat-toolbar.multi-select{background-color:#757575!important}"],encapsulation:2}),t}()},rHPv:function(t,e,n){"use strict";function o(t){return t.replace(/&auml;|&#228;/g,"\xe4").replace(/&Auml;|&#196;/g,"\xc4").replace(/&ouml;|&#246;/g,"\xf6").replace(/&Ouml;|&#214;/g,"\xd6").replace(/&uuml;/g,"\xfc").replace(/&Uuml;/g,"\xdc").replace(/&aring;|&#229;/g,"\xe5").replace(/&Aring;|&#197;/g,"\xc5").replace(/&szlig;|&#223;/g,"\xdf")}n.d(e,"a",(function(){return o}))},xoFW:function(t,e,n){"use strict";n.r(e),n.d(e,"MotionImportModule",(function(){return Ht}));var o,r=n("ofXK"),i=n("PCNd"),a=n("tyNb"),c=n("gjbj"),l=n("ePZ9"),s=n("mrSG"),u=n("iTQr"),b=n("D5Qf"),f=n("dOok"),m=n("lv9T"),d=n("ZDbo"),p=n("E2rH"),v=n("73vO"),h=n("h2Fo"),g=n("XNtA"),y=n("VaoK"),w=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"solveMotionBlocks",value:function(t){var e=this;if(this.csvMotionblock){if(this.csvMotionblock.id)return this.motion_block_id=this.csvMotionblock.id,0;var n=t.find((function(t){return t.name===e.csvMotionblock.name}));return n?(this.csvMotionblock=n,this.motion_block_id=n.id,0):1}return 0}},{key:"solveCategory",value:function(t){var e=this;if(this.csvCategory){if(this.csvCategory.id)return this.category_id=this.csvCategory.id,0;var n=t.find((function(t){return t.name===e.csvCategory.name}));return n?(this.csvCategory=n,this.category_id=n.id,0):1}return 0}},{key:"solveSubmitters",value:function(t){var e=0,n=[];return this.csvSubmitters.forEach((function(o){if(o.id)n.push(o.id);else if(t.length){var r=t.find((function(t){return t.name===o.name}));r?(o.id=r.id,n.push(r.id)):e+=1}else e+=1})),this.submitters_id=n,e}},{key:"solveTags",value:function(t){var e,n=0,o=[],r=_createForOfIteratorHelper(this.csvTags);try{var i=function(){var r=e.value;if(r.id)return o.push(r.id),"continue";if(!t.length)return++n,"continue";var i=t.find((function(t){return t.name===r.name}));i?(r.id=i.id,o.push(i.id)):++n};for(r.s();!(e=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return this.tags_id=o,n}}]),n}(y.a),k=n("3Y4h"),S=n("fXoL"),T=n("sYmb"),C=n("P6Fj"),x=n("dNgK"),Y=((o=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,r,i,a,c,l,s){var u;return _classCallCheck(this,n),(u=e.call(this,c,l,s)).repo=t,u.categoryRepo=o,u.motionBlockRepo=r,u.userRepo=i,u.tagRepo=a,u.errorList={MotionBlock:"Could not resolve the motion block",Category:"Could not resolve the category",Submitters:"Could not resolve the submitters",Tags:"Could not resolve the tags",Title:"A title is required",Text:"A content in the 'text' column is required",Duplicates:"A motion with this identifier already exists."},u.requiredHeaderLength=3,u.newSubmitters=[],u.newCategories=[],u.newMotionBlocks=[],u.newTags=[],u.expectedHeader=k.h.filter((function(t){return!k.g.includes(t)})),u}return _createClass(n,[{key:"clearData",value:function(){this.newSubmitters=[],this.newCategories=[],this.newMotionBlocks=[],this.newTags=[]}},{key:"mapData",value:function(t){for(var e=new w(new y.a),n=Math.min(this.expectedHeader.length,t.length),o=0;o<n;o++)switch(this.expectedHeader[o]){case"submitters":e.csvSubmitters=this.getSubmitters(t[o]);break;case"category":e.csvCategory=this.getCategory(t[o]);break;case"motion_block":e.csvMotionblock=this.getMotionBlock(t[o]);break;case"tags":e.csvTags=this.getTags(t[o]);break;default:e[this.expectedHeader[o]]=t[o]}var r=this.repo.getViewModelList().some((function(t){return t.identifier===e.identifier})),i={newEntry:e,hasDuplicates:r,status:r?"error":"new",errors:r?["Duplicates"]:[]};return i.newEntry.title||this.setError(i,"Title"),i.newEntry.text||this.setError(i,"Title"),i}},{key:"doImport",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createNewMotionBlocks();case 2:return this.newMotionBlocks=t.sent,t.next=5,this.createNewCategories();case 5:return this.newCategories=t.sent,t.next=8,this.createNewUsers();case 8:return this.newSubmitters=t.sent,t.next=11,this.createNewTags();case 11:this.newTags=t.sent,e=_createForOfIteratorHelper(this.entries),t.prev=13,e.s();case 15:if((n=e.n()).done){t.next=40;break}if(o=n.value,t.t0="new"===o.status,!t.t0){t.next=38;break}if(!o.newEntry.solveMotionBlocks(this.newMotionBlocks)){t.next=23;break}this.setError(o,"MotionBlock"),this.updatePreview(),t.next=38;break;case 23:if(!o.newEntry.solveCategory(this.newCategories)){t.next=27;break}this.setError(o,"Category"),this.updatePreview(),t.next=38;break;case 27:if(!o.newEntry.solveSubmitters(this.newSubmitters)){t.next=31;break}this.setError(o,"Submitters"),this.updatePreview(),t.next=38;break;case 31:if(!o.newEntry.solveTags(this.newTags)){t.next=35;break}this.setError(o,"Tags"),this.updatePreview(),t.next=38;break;case 35:return t.next=37,this.repo.create(o.newEntry);case 37:o.status="done";case 38:t.next=15;break;case 40:t.next=45;break;case 42:t.prev=42,t.t1=t.catch(13),e.e(t.t1);case 45:return t.prev=45,e.f(),t.finish(45);case 48:this.updatePreview();case 49:case"end":return t.stop()}}),t,this,[[13,42,45,48]])})))}},{key:"getSubmitters",value:function(t){var e=this,n=[];if(!t)return n;var o,r=_createForOfIteratorHelper(t.split(","));try{var i=function(){var t=o.value,r=e.userRepo.getUsersByName(t.trim());r.length||(e.newSubmitters.find((function(e){return e.name===t}))||e.newSubmitters.push({name:t}),n.push({name:t})),1===r.length&&n.push({name:r[0].short_name,id:r[0].id}),r.length>1&&(n.push({name:t,multiId:r.map((function(t){return t.id}))}),e.matSnackbar.open("TODO: multiple possible users found for this string","ok"))};for(r.s();!(o=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return n}},{key:"getCategory",value:function(t){var e=this;if(!t)return null;var n=this.splitCategoryString(t),o=this.categoryRepo.getViewModelList().find((function(t){return!(n.prefix&&t.prefix!==n.prefix||t.name!==n.name&&e.translate.instant(t.name)!==n.name)}));return o?{name:o.prefixedName,id:o.id}:(this.newCategories.find((function(e){return e.name===t}))||this.newCategories.push({name:t}),{name:t})}},{key:"getMotionBlock",value:function(t){if(!t)return null;t=t.trim();var e=this.motionBlockRepo.getMotionBlocksByTitle(t);return e.length||(e=this.motionBlockRepo.getMotionBlocksByTitle(this.translate.instant(t))),e.length?{id:e[0].id,name:e[0].title}:(this.newMotionBlocks.find((function(e){return e.name===t}))||this.newMotionBlocks.push({name:t}),{name:t})}},{key:"getTags",value:function(t){var e=this,n=[];if(!t)return n;var o,r=_createForOfIteratorHelper(t.split(","));try{var i=function(){var t=o.value;t=t.trim();var r=e.tagRepo.getViewModelList().find((function(e){return e.name===t}));r?n.push({id:r.id,name:r.name}):(e.newTags.find((function(e){return e.name===t}))||e.newTags.push({name:t}),n.push({name:t}))};for(r.s();!(o=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return n}},{key:"createNewUsers",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=_createForOfIteratorHelper(this.newSubmitters);try{for(n.s();!(o=n.n()).done;)r=o.value,e.push(this.userRepo.createFromString(r.name))}catch(i){n.e(i)}finally{n.f()}return t.next=5,Promise.all(e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"createNewMotionBlocks",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,o,r,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=_createForOfIteratorHelper(this.newMotionBlocks);try{for(r=function(){var t=o.value;e.push(i.motionBlockRepo.create(new g.a({title:t.name})).then((function(e){return{name:t.name,id:e.id}})))},n.s();!(o=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}return t.next=5,Promise.all(e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"createNewCategories",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,o,r,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=_createForOfIteratorHelper(this.newCategories);try{for(r=function(){var t=o.value,n=i.splitCategoryString(t.name);e.push(i.categoryRepo.create(new h.a({name:n.name,prefix:n.prefix?n.prefix:null})).then((function(e){return{name:t.name,id:e.id}})))},n.s();!(o=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}return t.next=5,Promise.all(e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"createNewTags",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,o,r,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=_createForOfIteratorHelper(this.newTags);try{for(r=function(){var t=o.value;e.push(i.tagRepo.create(new v.a({name:t.name})).then((function(e){return{name:t.name,id:e.id}})))},n.s();!(o=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}return t.next=5,Promise.all(e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"splitCategoryString",value:function(t){var e=" - ";t.startsWith(e)&&(e=e.substring(1));var n="",o=(t=t.trim()).indexOf(e);return o>=0&&o<6&&(n=t.substring(0,o),t=t.substring(o+e.length)),{prefix:n,name:t}}}]),n}(p.a)).\u0275fac=function(t){return new(t||o)(S.dc(f.a),S.dc(u.a),S.dc(b.a),S.dc(d.a),S.dc(m.a),S.dc(T.k),S.dc(C.a),S.dc(x.a))},o.\u0275prov=S.Pb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),Z=n("jhN1"),E=n("mksl"),I=n("Wp6s"),M=n("bTqV"),_=n("kmnG"),G=n("d3UM"),B=n("IZUe"),R=n("FKr1"),Q=n("+0xr"),O=n("Dh3D"),A=n("NFeN"),U=n("Qu3c");function j(t,e){if(1&t){var n=S.ac();S.Zb(0,"button",17),S.hc("click",(function(){return S.Ic(n),S.lc().doImport()})),S.Zb(1,"span",18),S.Sc(2),S.mc(3,"translate"),S.Yb(),S.Yb()}2&t&&(S.Gb(2),S.Tc(S.nc(3,1,"Import")))}function D(t,e){1&t&&(S.Zb(0,"span"),S.Sc(1,",\xa0"),S.Yb())}function P(t,e){if(1&t&&(S.Zb(0,"span"),S.Zb(1,"span"),S.Sc(2),S.mc(3,"translate"),S.Yb(),S.Qc(4,D,2,0,"span",19),S.Yb()),2&t){var n=e.$implicit,o=e.last;S.Gb(2),S.Tc(S.nc(3,2,n)),S.Gb(2),S.tc("ngIf",!o)}}function F(t,e){if(1&t&&(S.Zb(0,"mat-option",20),S.Sc(1),S.mc(2,"translate"),S.Yb()),2&t){var n=e.$implicit;S.tc("value",n.value),S.Gb(1),S.Uc(" ",S.nc(2,2,n.label)," ")}}function L(t,e){if(1&t&&(S.Zb(0,"mat-option",20),S.Sc(1),S.mc(2,"translate"),S.Yb()),2&t){var n=e.$implicit;S.tc("value",n.value),S.Gb(1),S.Uc(" ",S.nc(2,2,n.label)," ")}}function H(t,e){if(1&t&&(S.Zb(0,"mat-option",20),S.Sc(1),S.mc(2,"translate"),S.Yb()),2&t){var n=e.$implicit;S.tc("value",n.value),S.Gb(1),S.Uc(" ",S.nc(2,2,n.label)," ")}}function N(t,e){if(1&t&&(S.Zb(0,"div"),S.Sc(1," \xa0 "),S.Zb(2,"mat-icon",45),S.Sc(3,"playlist_add"),S.Yb(),S.Zb(4,"span"),S.Sc(5),S.Yb(),S.Zb(6,"span"),S.Sc(7),S.mc(8,"translate"),S.Yb(),S.Yb()),2&t){var n=S.lc(2);S.Gb(5),S.Uc("\xa0",n.newCount,"\xa0"),S.Gb(2),S.Tc(S.nc(8,2,"Motion(s) will be imported."))}}function $(t,e){if(1&t&&(S.Zb(0,"div",46),S.Sc(1," \xa0 "),S.Zb(2,"mat-icon",45),S.Sc(3,"warning"),S.Yb(),S.Zb(4,"span"),S.Sc(5),S.Yb(),S.Zb(6,"span"),S.Sc(7),S.mc(8,"translate"),S.Yb(),S.Yb()),2&t){var n=S.lc(2);S.Gb(5),S.Uc("\xa0",n.nonImportableCount,"\xa0"),S.Gb(2),S.Tc(S.nc(8,2,"entries will be ommitted."))}}function V(t,e){if(1&t&&(S.Zb(0,"div",47),S.Sc(1," \xa0 "),S.Zb(2,"mat-icon",45),S.Sc(3,"done"),S.Yb(),S.Zb(4,"span"),S.Sc(5),S.Yb(),S.Zb(6,"span"),S.Sc(7),S.mc(8,"translate"),S.Yb(),S.Yb()),2&t){var n=S.lc(2);S.Gb(5),S.Uc("\xa0",n.doneCount,"\xa0"),S.Gb(2),S.Tc(S.nc(8,2,"Motions have been imported."))}}function X(t,e){1&t&&(S.Zb(0,"div"),S.Zb(1,"span"),S.Sc(2),S.mc(3,"translate"),S.Yb(),S.Yb()),2&t&&(S.Gb(2),S.Tc(S.nc(3,1,'After verifiy the preview click on "import" please (see top right).')))}function W(t,e){if(1&t){var n=S.ac();S.Zb(0,"mat-select",48),S.hc("valueChange",(function(t){return S.Ic(n),S.lc(2).shown=t}))("selectionChange",(function(){return S.Ic(n),S.lc(2).setFilter()})),S.Zb(1,"mat-option",49),S.Sc(2),S.mc(3,"translate"),S.Yb(),S.Zb(4,"mat-option",50),S.Sc(5),S.mc(6,"translate"),S.Yb(),S.Zb(7,"mat-option",51),S.Sc(8),S.mc(9,"translate"),S.Yb(),S.Yb()}if(2&t){var o=S.lc(2);S.tc("value",o.shown),S.Gb(2),S.Tc(S.nc(3,4,"Show all")),S.Gb(3),S.Tc(S.nc(6,6,"Show errors only")),S.Gb(3),S.Tc(S.nc(9,8,"Show correct entries"))}}function q(t,e){1&t&&S.Ub(0,"mat-header-cell",52)}function K(t,e){if(1&t&&(S.Zb(0,"div"),S.Zb(1,"mat-icon",53),S.mc(2,"translate"),S.Sc(3),S.Yb(),S.Yb()),2&t){var n=S.lc().$implicit,o=S.lc(2);S.Gb(1),S.wc("matTooltip","",n.errors.length," ",S.nc(2,3,"errors"),""),S.Gb(2),S.Uc(" ",o.getActionIcon(n)," ")}}function z(t,e){if(1&t&&(S.Zb(0,"div"),S.Zb(1,"mat-icon",54),S.mc(2,"translate"),S.Sc(3),S.Yb(),S.Yb()),2&t){var n=S.lc().$implicit,o=S.lc(2);S.Gb(1),S.uc("matTooltip",S.nc(2,2,"Motion will be imported")),S.Gb(2),S.Uc(" ",o.getActionIcon(n)," ")}}function J(t,e){if(1&t&&(S.Zb(0,"div"),S.Zb(1,"mat-icon",54),S.mc(2,"translate"),S.Sc(3),S.Yb(),S.Yb()),2&t){var n=S.lc().$implicit,o=S.lc(2);S.Gb(1),S.uc("matTooltip",S.nc(2,2,"Motion has been imported")),S.Gb(2),S.Uc(" ",o.getActionIcon(n)," ")}}function tt(t,e){if(1&t&&(S.Zb(0,"mat-cell",52),S.Qc(1,K,4,5,"div",19),S.Qc(2,z,4,4,"div",19),S.Qc(3,J,4,4,"div",19),S.Yb()),2&t){var n=e.$implicit;S.Gb(1),S.tc("ngIf","error"===n.status),S.Gb(1),S.tc("ngIf","new"===n.status),S.Gb(1),S.tc("ngIf","done"===n.status)}}function et(t,e){1&t&&(S.Zb(0,"mat-header-cell"),S.Sc(1),S.mc(2,"translate"),S.Yb()),2&t&&(S.Gb(1),S.Tc(S.nc(2,1,"Identifier")))}function nt(t,e){if(1&t&&(S.Zb(0,"mat-icon",56),S.mc(1,"translate"),S.Sc(2," warning "),S.Yb()),2&t){var n=S.lc(3);S.uc("matTooltip",S.nc(1,1,n.getVerboseError("Duplicates")))}}function ot(t,e){if(1&t&&(S.Zb(0,"mat-cell"),S.Qc(1,nt,3,3,"mat-icon",55),S.Sc(2),S.Yb()),2&t){var n=e.$implicit,o=S.lc(2);S.Gb(1),S.tc("ngIf",o.hasError(n,"Duplicates")),S.Gb(1),S.Uc(" ",n.newEntry.identifier," ")}}function rt(t,e){1&t&&(S.Zb(0,"mat-header-cell"),S.Sc(1),S.mc(2,"translate"),S.Yb()),2&t&&(S.Gb(1),S.Tc(S.nc(2,1,"Title")))}function it(t,e){if(1&t&&(S.Zb(0,"mat-icon",58),S.mc(1,"translate"),S.Sc(2," warning "),S.Yb()),2&t){var n=S.lc(3);S.uc("matTooltip",S.nc(1,1,n.getVerboseError("Title")))}}function at(t,e){if(1&t&&(S.Zb(0,"mat-cell"),S.Qc(1,it,3,3,"mat-icon",57),S.Sc(2),S.Yb()),2&t){var n=e.$implicit,o=S.lc(2);S.Gb(1),S.tc("ngIf",o.hasError(n,"Title")),S.Gb(1),S.Uc(" ",n.newEntry.title," ")}}function ct(t,e){1&t&&(S.Zb(0,"mat-header-cell"),S.Sc(1),S.mc(2,"translate"),S.Yb()),2&t&&(S.Gb(1),S.Tc(S.nc(2,1,"Motion text")))}function lt(t,e){if(1&t&&(S.Zb(0,"mat-icon",58),S.mc(1,"translate"),S.Sc(2," warning "),S.Yb()),2&t){var n=S.lc(3);S.uc("matTooltip",S.nc(1,1,n.getVerboseError("Text")))}}function st(t,e){if(1&t&&(S.Zb(0,"mat-cell",54),S.Qc(1,lt,3,3,"mat-icon",57),S.Sc(2),S.Yb()),2&t){var n=e.$implicit,o=S.lc(2);S.uc("matTooltip",o.getLongPreview(n.newEntry.text)),S.Gb(1),S.tc("ngIf",o.hasError(n,"Text")),S.Gb(1),S.Uc(" ",o.getShortPreview(n.newEntry.text)," ")}}function ut(t,e){1&t&&(S.Zb(0,"mat-header-cell"),S.Sc(1),S.mc(2,"translate"),S.Yb()),2&t&&(S.Gb(1),S.Tc(S.nc(2,1,"Reason")))}function bt(t,e){if(1&t&&(S.Zb(0,"mat-cell",54),S.Sc(1),S.Yb()),2&t){var n=e.$implicit,o=S.lc(2);S.uc("matTooltip",o.getLongPreview(n.newEntry.reason)),S.Gb(1),S.Uc(" ",o.getShortPreview(n.newEntry.reason)," ")}}function ft(t,e){1&t&&(S.Zb(0,"mat-header-cell"),S.Sc(1),S.mc(2,"translate"),S.Yb()),2&t&&(S.Gb(1),S.Tc(S.nc(2,1,"Submitters")))}function mt(t,e){if(1&t&&(S.Zb(0,"mat-icon",58),S.mc(1,"translate"),S.Sc(2," warning "),S.Yb()),2&t){var n=S.lc(4);S.uc("matTooltip",S.nc(1,1,n.getVerboseError("Submitters")))}}function dt(t,e){1&t&&(S.Zb(0,"mat-icon",60),S.Sc(1,"add"),S.Yb())}function pt(t,e){if(1&t&&(S.Zb(0,"div"),S.Sc(1),S.Qc(2,dt,2,0,"mat-icon",59),S.Sc(3," \xa0 "),S.Yb()),2&t){var n=e.$implicit;S.Gb(1),S.Uc(" ",n.name," "),S.Gb(1),S.tc("ngIf",!n.id)}}function vt(t,e){if(1&t&&(S.Zb(0,"div"),S.Qc(1,mt,3,3,"mat-icon",57),S.Qc(2,pt,4,2,"div",6),S.Yb()),2&t){var n=S.lc().$implicit,o=S.lc(2);S.Gb(1),S.tc("ngIf",o.hasError(n,"Submitters")),S.Gb(1),S.tc("ngForOf",n.newEntry.csvSubmitters)}}function ht(t,e){if(1&t&&(S.Zb(0,"mat-cell"),S.Qc(1,vt,3,2,"div",19),S.Yb()),2&t){var n=e.$implicit;S.Gb(1),S.tc("ngIf",n.newEntry.csvSubmitters&&n.newEntry.csvSubmitters.length)}}function gt(t,e){1&t&&(S.Zb(0,"mat-header-cell"),S.Sc(1),S.mc(2,"translate"),S.Yb()),2&t&&(S.Gb(1),S.Tc(S.nc(2,1,"Category")))}function yt(t,e){if(1&t&&(S.Zb(0,"mat-icon",58),S.mc(1,"translate"),S.Sc(2," warning "),S.Yb()),2&t){var n=S.lc(4);S.uc("matTooltip",S.nc(1,1,n.getVerboseError("Category")))}}function wt(t,e){1&t&&(S.Zb(0,"mat-icon",60),S.Sc(1,"add"),S.Yb())}function kt(t,e){if(1&t&&(S.Zb(0,"div"),S.Qc(1,yt,3,3,"mat-icon",57),S.Sc(2),S.Qc(3,wt,2,0,"mat-icon",59),S.Sc(4,"\xa0 "),S.Yb()),2&t){var n=S.lc().$implicit,o=S.lc(2);S.Gb(1),S.tc("ngIf",o.hasError(n,"Category")),S.Gb(1),S.Uc(" ",n.newEntry.csvCategory.name," "),S.Gb(1),S.tc("ngIf",!n.newEntry.csvCategory.id)}}function St(t,e){if(1&t&&(S.Zb(0,"mat-cell"),S.Qc(1,kt,5,3,"div",19),S.Yb()),2&t){var n=e.$implicit;S.Gb(1),S.tc("ngIf",n.newEntry.csvCategory)}}function Tt(t,e){1&t&&(S.Zb(0,"mat-header-cell"),S.Sc(1),S.mc(2,"translate"),S.Yb()),2&t&&(S.Gb(1),S.Tc(S.nc(2,1,"Tags")))}function Ct(t,e){if(1&t&&(S.Zb(0,"mat-icon",58),S.mc(1,"translate"),S.Sc(2," warning "),S.Yb()),2&t){var n=S.lc(4);S.uc("matTooltip",S.nc(1,1,n.getVerboseError("Tags")))}}function xt(t,e){1&t&&(S.Zb(0,"mat-icon",60),S.Sc(1,"add"),S.Yb())}function Yt(t,e){if(1&t&&(S.Zb(0,"div"),S.Sc(1),S.Qc(2,xt,2,0,"mat-icon",59),S.Yb()),2&t){var n=e.$implicit;S.Gb(1),S.Uc(" ",n.name," "),S.Gb(1),S.tc("ngIf",!n.id)}}function Zt(t,e){if(1&t&&(S.Zb(0,"div"),S.Qc(1,Ct,3,3,"mat-icon",57),S.Qc(2,Yt,3,2,"div",6),S.Yb()),2&t){var n=S.lc().$implicit,o=S.lc(2);S.Gb(1),S.tc("ngIf",o.hasError(n,"Tags")),S.Gb(1),S.tc("ngForOf",n.newEntry.csvTags)}}function Et(t,e){if(1&t&&(S.Zb(0,"mat-cell"),S.Qc(1,Zt,3,2,"div",19),S.Yb()),2&t){var n=e.$implicit;S.Gb(1),S.tc("ngIf",n.newEntry.csvTags)}}function It(t,e){1&t&&(S.Zb(0,"mat-header-cell"),S.Sc(1),S.mc(2,"translate"),S.Yb()),2&t&&(S.Gb(1),S.Tc(S.nc(2,1,"Origin")))}function Mt(t,e){if(1&t&&(S.Zb(0,"mat-cell"),S.Sc(1),S.Yb()),2&t){var n=e.$implicit;S.Gb(1),S.Tc(n.newEntry.origin)}}function _t(t,e){1&t&&(S.Zb(0,"mat-header-cell"),S.Sc(1),S.mc(2,"translate"),S.Yb()),2&t&&(S.Gb(1),S.Tc(S.nc(2,1,"Motion block")))}function Gt(t,e){if(1&t&&(S.Zb(0,"mat-icon",58),S.mc(1,"translate"),S.Sc(2," warning "),S.Yb()),2&t){var n=S.lc(4);S.uc("matTooltip",S.nc(1,1,n.getVerboseError("MotionBlock")))}}function Bt(t,e){1&t&&(S.Zb(0,"mat-icon",60),S.Sc(1," add "),S.Yb())}function Rt(t,e){if(1&t&&(S.Zb(0,"div"),S.Qc(1,Gt,3,3,"mat-icon",57),S.Sc(2),S.Qc(3,Bt,2,0,"mat-icon",59),S.Sc(4," \xa0 "),S.Yb()),2&t){var n=S.lc().$implicit,o=S.lc(2);S.Gb(1),S.tc("ngIf",o.hasError(n,"MotionBlock")),S.Gb(1),S.Uc(" ",n.newEntry.csvMotionblock.name," "),S.Gb(1),S.tc("ngIf",!n.newEntry.csvMotionblock.id)}}function Qt(t,e){if(1&t&&(S.Zb(0,"mat-cell"),S.Qc(1,Rt,5,3,"div",19),S.Yb()),2&t){var n=e.$implicit;S.Gb(1),S.tc("ngIf",n.newEntry.csvMotionblock)}}function Ot(t,e){1&t&&S.Ub(0,"mat-header-row")}function At(t,e){if(1&t&&S.Ub(0,"mat-row",61),2&t){var n=e.$implicit,o=S.lc(2);S.tc("ngClass",o.getStateClass(n))}}function Ut(t,e){if(1&t&&(S.Zb(0,"mat-card",21),S.Zb(1,"h3"),S.Sc(2),S.mc(3,"translate"),S.Yb(),S.Zb(4,"div",22),S.Qc(5,N,9,4,"div",19),S.Qc(6,$,9,4,"div",23),S.Qc(7,V,9,4,"div",24),S.Yb(),S.Qc(8,X,4,3,"div",19),S.Zb(9,"div"),S.Qc(10,W,10,10,"mat-select",25),S.Yb(),S.Zb(11,"div",26),S.Zb(12,"table",27),S.Xb(13,28),S.Qc(14,q,1,0,"mat-header-cell",29),S.Qc(15,tt,4,3,"mat-cell",30),S.Wb(),S.Xb(16,31),S.Qc(17,et,3,3,"mat-header-cell",32),S.Qc(18,ot,3,2,"mat-cell",33),S.Wb(),S.Xb(19,34),S.Qc(20,rt,3,3,"mat-header-cell",32),S.Qc(21,at,3,2,"mat-cell",33),S.Wb(),S.Xb(22,35),S.Qc(23,ct,3,3,"mat-header-cell",32),S.Qc(24,st,3,3,"mat-cell",36),S.Wb(),S.Xb(25,37),S.Qc(26,ut,3,3,"mat-header-cell",32),S.Qc(27,bt,2,2,"mat-cell",36),S.Wb(),S.Xb(28,38),S.Qc(29,ft,3,3,"mat-header-cell",32),S.Qc(30,ht,2,1,"mat-cell",33),S.Wb(),S.Xb(31,39),S.Qc(32,gt,3,3,"mat-header-cell",32),S.Qc(33,St,2,1,"mat-cell",33),S.Wb(),S.Xb(34,40),S.Qc(35,Tt,3,3,"mat-header-cell",32),S.Qc(36,Et,2,1,"mat-cell",33),S.Wb(),S.Xb(37,41),S.Qc(38,It,3,3,"mat-header-cell",32),S.Qc(39,Mt,2,1,"mat-cell",33),S.Wb(),S.Xb(40,42),S.Qc(41,_t,3,3,"mat-header-cell",32),S.Qc(42,Qt,2,1,"mat-cell",33),S.Wb(),S.Qc(43,Ot,1,0,"mat-header-row",43),S.Qc(44,At,1,1,"mat-row",44),S.Yb(),S.Yb(),S.Yb()),2&t){var n=S.lc();S.Gb(2),S.Tc(S.nc(3,9,"Preview")),S.Gb(3),S.tc("ngIf",n.newCount),S.Gb(1),S.tc("ngIf",n.nonImportableCount),S.Gb(1),S.tc("ngIf",n.doneCount),S.Gb(1),S.tc("ngIf",n.newCount),S.Gb(2),S.tc("ngIf",n.nonImportableCount),S.Gb(2),S.tc("dataSource",n.dataSource),S.Gb(31),S.tc("matHeaderRowDef",n.getColumnDefinition()),S.Gb(1),S.tc("matRowDefColumns",n.getColumnDefinition())}}var jt,Dt,Pt,Ft=[{path:"",component:(jt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,r,i,a){var c;return _classCallCheck(this,n),(c=e.call(this,i,t,r,o)).motionCSVExport=a,c}return _createClass(n,[{key:"downloadCsvExample",value:function(){this.motionCSVExport.exportDummyMotion()}},{key:"expectedHeader",get:function(){return this.importer.expectedHeader.map((function(t){return"motion_block"===t?"Motion block":t.charAt(0).toUpperCase()+t.slice(1)}))}}]),n}(c.a),jt.\u0275fac=function(t){return new(t||jt)(S.Tb(Z.d),S.Tb(x.a),S.Tb(T.k),S.Tb(Y),S.Tb(l.a))},jt.\u0275cmp=S.Nb({type:jt,selectors:[["os-motion-import-list"]],features:[S.Db],decls:52,vars:35,consts:[["prevUrl","../..",3,"nav"],[1,"title-slot"],[1,"menu-slot"],["mat-button","",3,"click",4,"ngIf"],[1,"os-form-card","import-table","spacer-bottom-60"],[1,"code","red-warning-text"],[4,"ngFor","ngForOf"],["mat-button","","color","accent",3,"click"],[1,"wrapper"],[1,"selection",3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["value","",1,"selection",3,"selectionChange"],["value",'"',1,"selection",3,"selectionChange"],["id","motion-import-file-input","type","file","accept","text",1,"hidden-input",3,"change"],["fileInput",""],["mat-button","","osAutofocus","","onclick","document.getElementById('motion-import-file-input').click()"],["class","os-form-card import-table",4,"ngIf"],["mat-button","",3,"click"],[1,"upper"],[4,"ngIf"],[3,"value"],[1,"os-form-card","import-table"],[1,"summary"],["class","red-warning-text",4,"ngIf"],["class","green-text",4,"ngIf"],["class","filter-imports",3,"value","valueChange","selectionChange",4,"ngIf"],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","status","sticky",""],["class","first-column",4,"matHeaderCellDef"],["class","first-column",4,"matCellDef"],["matColumnDef","identifier"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","title"],["matColumnDef","text"],[3,"matTooltip",4,"matCellDef"],["matColumnDef","reason"],["matColumnDef","submitters"],["matColumnDef","category"],["matColumnDef","tags"],["matColumnDef","origin"],["matColumnDef","motion_block"],[4,"matHeaderRowDef"],[3,"ngClass",4,"matRowDef","matRowDefColumns"],["inline",""],[1,"red-warning-text"],[1,"green-text"],[1,"filter-imports",3,"value","valueChange","selectionChange"],["value","all"],["value","error"],["value","noerror"],[1,"first-column"],[1,"red-warning-text",3,"matTooltip"],[3,"matTooltip"],["color","warn","inline","",3,"matTooltip",4,"ngIf"],["color","warn","inline","",3,"matTooltip"],["color","warn",3,"matTooltip",4,"ngIf"],["color","warn",3,"matTooltip"],["class","newBadge","color","accent","inline","",4,"ngIf"],["color","accent","inline","",1,"newBadge"],[3,"ngClass"]],template:function(t,e){1&t&&(S.Zb(0,"os-head-bar",0),S.Zb(1,"div",1),S.Zb(2,"h2"),S.Sc(3),S.mc(4,"translate"),S.Yb(),S.Yb(),S.Zb(5,"div",2),S.Qc(6,j,4,3,"button",3),S.Yb(),S.Yb(),S.Zb(7,"mat-card",4),S.Zb(8,"span"),S.Sc(9),S.mc(10,"translate"),S.Yb(),S.Ub(11,"br"),S.Zb(12,"div",5),S.Qc(13,P,5,4,"span",6),S.Yb(),S.Zb(14,"ul"),S.Zb(15,"li"),S.Sc(16),S.mc(17,"translate"),S.Yb(),S.Zb(18,"li"),S.Sc(19),S.mc(20,"translate"),S.Yb(),S.Yb(),S.Zb(21,"button",7),S.hc("click",(function(){return e.downloadCsvExample()})),S.Sc(22),S.mc(23,"translate"),S.Yb(),S.Zb(24,"div",8),S.Zb(25,"mat-form-field"),S.Zb(26,"mat-label"),S.Sc(27),S.mc(28,"translate"),S.Yb(),S.Zb(29,"mat-select",9),S.hc("selectionChange",(function(t){return e.selectEncoding(t)})),S.Qc(30,F,3,4,"mat-option",10),S.Yb(),S.Yb(),S.Zb(31,"mat-form-field"),S.Zb(32,"mat-label"),S.Sc(33),S.mc(34,"translate"),S.Yb(),S.Zb(35,"mat-select",11),S.hc("selectionChange",(function(t){return e.selectColSep(t)})),S.Qc(36,L,3,4,"mat-option",10),S.Yb(),S.Yb(),S.Zb(37,"mat-form-field"),S.Zb(38,"mat-label"),S.Sc(39),S.mc(40,"translate"),S.Yb(),S.Zb(41,"mat-select",12),S.hc("selectionChange",(function(t){return e.selectTextSep(t)})),S.Qc(42,H,3,4,"mat-option",10),S.Yb(),S.Yb(),S.Yb(),S.Zb(43,"div"),S.Zb(44,"div"),S.Zb(45,"input",13,14),S.hc("change",(function(t){return e.onSelectFile(t)})),S.Yb(),S.Zb(47,"button",15),S.Zb(48,"span"),S.Sc(49),S.mc(50,"translate"),S.Yb(),S.Yb(),S.Yb(),S.Yb(),S.Yb(),S.Qc(51,Ut,45,11,"mat-card",16)),2&t&&(S.tc("nav",!1),S.Gb(3),S.Tc(S.nc(4,17,"Import motions")),S.Gb(3),S.tc("ngIf",e.hasFile&&e.newCount),S.Gb(3),S.Tc(S.nc(10,19,"Required comma or semicolon separated values with these column header names in the first row:")),S.Gb(4),S.tc("ngForOf",e.expectedHeader),S.Gb(3),S.Uc(" ",S.nc(17,21,"Identifier, reason, submitter, category, origin and motion block are optional and may be empty.")," "),S.Gb(3),S.Uc(" ",S.nc(20,23,"Additional columns after the required ones may be present and will not affect the import.")," "),S.Gb(3),S.Uc(" ",S.nc(23,25,"Download CSV example file")," "),S.Gb(5),S.Tc(S.nc(28,27,"Encoding of the file")),S.Gb(2),S.tc("value",e.encodings[0].value),S.Gb(1),S.tc("ngForOf",e.encodings),S.Gb(3),S.Tc(S.nc(34,29,"Column separator")),S.Gb(3),S.tc("ngForOf",e.columnSeparators),S.Gb(3),S.Tc(S.nc(40,31,"Text separator")),S.Gb(3),S.tc("ngForOf",e.textSeparators),S.Gb(7),S.Tc(S.nc(50,33,"Select file")),S.Gb(2),S.tc("ngIf",e.hasFile))},directives:[E.a,r.t,I.a,r.s,M.b,_.c,_.g,G.a,B.a,R.n,Q.n,O.a,Q.c,Q.i,Q.b,Q.k,Q.m,A.a,Q.h,Q.a,U.c,Q.j,Q.l,r.q],pipes:[T.j],encapsulation:2}),jt),pathMatch:"full"}],Lt=((Pt=function t(){_classCallCheck(this,t)}).\u0275mod=S.Rb({type:Pt}),Pt.\u0275inj=S.Qb({factory:function(t){return new(t||Pt)},imports:[[a.j.forChild(Ft)],a.j]}),Pt),Ht=((Dt=function t(){_classCallCheck(this,t)}).\u0275mod=S.Rb({type:Dt}),Dt.\u0275inj=S.Qb({factory:function(t){return new(t||Dt)},imports:[[r.c,Lt,i.a]]}),Dt)}}]);