function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=_superPropBase(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(t);if(e){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[24,36],{"+BBA":function(t,e,n){"use strict";n.r(e),n.d(e,"TopicsModule",(function(){return at}));var o=n("ofXK"),r=n("PCNd"),i=n("tyNb"),a=n("OwvW"),c=n("mrSG"),s=n("3Pt+"),u=n("InfO"),l=n("cffc"),b=n("F48D"),p=n("+az0"),f=n("KUsl"),d=n("mV3u"),m=n("W+e+"),h=n("Q/67"),v=n("fXoL"),g=n("jhN1"),y=n("dNgK"),_=n("sYmb"),k=n("mksl"),T=n("3Xi6"),S=n("STbY"),O=n("Tp2j"),w=n("40uZ"),Y=n("bTqV"),C=n("NFeN"),G=n("Wp6s"),Z=n("MutI"),I=n("kmnG"),P=n("qFsG"),F=n("IZUe"),j=n("fB2i"),M=n("JAMN"),L=n("d3UM"),A=n("oqD5"),x=n("FKr1"),R=n("f0Cb"),E=n("7jBc");function B(t,e){1&t&&(v.Zb(0,"span"),v.Sc(1),v.mc(2,"translate"),v.Yb()),2&t&&(v.Gb(1),v.Tc(v.nc(2,1,"New topic")))}function N(t,e){1&t&&(v.Zb(0,"span"),v.Sc(1),v.mc(2,"translate"),v.Yb()),2&t&&(v.Gb(1),v.Tc(v.nc(2,1,"Edit topic")))}function Q(t,e){1&t&&(v.Zb(0,"span"),v.Sc(1),v.mc(2,"translate"),v.Yb()),2&t&&(v.Gb(1),v.Tc(v.nc(2,1,"Topic")))}function U(t,e){if(1&t&&(v.Zb(0,"div",8),v.Zb(1,"button",9),v.Zb(2,"mat-icon"),v.Sc(3,"more_vert"),v.Yb(),v.Yb(),v.Yb()),2&t){v.lc();var n=v.Ec(9);v.Gb(1),v.tc("matMenuTriggerFor",n)}}function D(t,e){if(1&t&&(v.Zb(0,"div"),v.Zb(1,"h1"),v.Sc(2),v.Yb(),v.Yb()),2&t){var n=v.lc(2);v.Gb(2),v.Tc(n.topic.getListTitle())}}function V(t,e){if(1&t&&(v.Zb(0,"span"),v.Ub(1,"div",12),v.mc(2,"trust"),v.Yb()),2&t){var n=v.lc(2);v.Gb(1),v.tc("innerHTML",v.oc(2,1,n.topic.text,"html"),v.Jc)}}function X(t,e){if(1&t&&(v.Zb(0,"mat-list-item"),v.Zb(1,"a",15),v.Sc(2),v.Yb(),v.Yb()),2&t){var n=e.$implicit;v.Gb(1),v.tc("routerLink",n.url),v.Gb(1),v.Tc(n.getTitle())}}function H(t,e){if(1&t&&(v.Zb(0,"div"),v.Zb(1,"h3"),v.Zb(2,"span"),v.Sc(3),v.mc(4,"translate"),v.Yb(),v.Sc(5,": "),v.Zb(6,"mat-list",13),v.Qc(7,X,3,2,"mat-list-item",14),v.Yb(),v.Yb(),v.Yb()),2&t){var n=v.lc(2);v.Gb(3),v.Tc(v.nc(4,2,"Attachments")),v.Gb(4),v.tc("ngForOf",n.topic.attachments)}}function q(t,e){1&t&&(v.Zb(0,"mat-error"),v.Sc(1),v.mc(2,"translate"),v.Yb()),2&t&&(v.Gb(1),v.Tc(v.nc(2,1,"A name is required")))}function K(t,e){if(1&t&&(v.Zb(0,"mat-option",24),v.Zb(1,"span"),v.Sc(2),v.mc(3,"translate"),v.Yb(),v.Yb()),2&t){var n=e.$implicit;v.tc("value",n.key),v.Gb(2),v.Tc(v.nc(3,2,n.name))}}function J(t,e){if(1&t&&(v.Zb(0,"div"),v.Zb(1,"div"),v.Zb(2,"mat-form-field"),v.Zb(3,"mat-select",21),v.mc(4,"translate"),v.Qc(5,K,4,4,"mat-option",22),v.Yb(),v.Yb(),v.Yb(),v.Zb(6,"div"),v.Zb(7,"mat-form-field"),v.Ub(8,"os-search-value-selector",23),v.mc(9,"translate"),v.Yb(),v.Yb(),v.Yb()),2&t){var n=v.lc(3);v.Gb(3),v.uc("placeholder",v.nc(4,5,"Agenda visibility")),v.Gb(2),v.tc("ngForOf",n.itemVisibility),v.Gb(3),v.uc("placeholder",v.nc(9,7,"Parent agenda item")),v.tc("includeNone",!0)("inputListValues",n.itemObserver)}}function W(t,e){if(1&t){var n=v.ac();v.Zb(0,"form",16),v.hc("keydown",(function(t){return v.Ic(n),v.lc(2).onKeyDown(t)})),v.Zb(1,"div"),v.Zb(2,"mat-form-field"),v.Ub(3,"input",17),v.mc(4,"translate"),v.Qc(5,q,3,3,"mat-error",2),v.Yb(),v.Yb(),v.Zb(6,"div",18),v.Zb(7,"h4"),v.Sc(8),v.mc(9,"translate"),v.Yb(),v.Ub(10,"editor",19),v.Yb(),v.Zb(11,"os-attachment-control",20),v.hc("errorHandler",(function(t){return v.Ic(n),v.lc(2).raiseError(t)})),v.Yb(),v.Qc(12,J,10,9,"div",2),v.Yb()}if(2&t){var o=v.lc(2);v.tc("formGroup",o.topicForm),v.Gb(3),v.uc("placeholder",v.nc(4,6,"Title")),v.Gb(2),v.tc("ngIf",o.topicForm.invalid),v.Gb(3),v.Tc(v.nc(9,8,"Text")),v.Gb(2),v.tc("init",o.tinyMceSettings),v.Gb(2),v.tc("ngIf",o.newTopic)}}function z(t,e){if(1&t&&(v.Zb(0,"mat-card",10),v.Qc(1,D,3,1,"div",2),v.Zb(2,"div"),v.Qc(3,V,3,4,"span",2),v.Yb(),v.Qc(4,H,8,4,"div",2),v.Qc(5,W,13,10,"form",11),v.Yb()),2&t){var n=v.lc();v.tc("ngClass",n.editTopic?"os-form-card":"os-card"),v.Gb(1),v.tc("ngIf",!n.editTopic),v.Gb(2),v.tc("ngIf",!n.editTopic),v.Gb(1),v.tc("ngIf",n.topic.hasAttachments()&&!n.editTopic),v.Gb(1),v.tc("ngIf",n.editTopic)}}function $(t,e){if(1&t){var n=v.ac();v.Zb(0,"div"),v.Ub(1,"mat-divider"),v.Zb(2,"button",25),v.hc("click",(function(){return v.Ic(n),v.lc().onDeleteButton()})),v.Zb(3,"mat-icon"),v.Sc(4,"delete"),v.Yb(),v.Zb(5,"span"),v.Sc(6),v.mc(7,"translate"),v.Yb(),v.Yb(),v.Yb()}2&t&&(v.Gb(6),v.Tc(v.nc(7,1,"Delete")))}var tt,et,nt,ot=((tt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,r,i,a,c,s,u,l,b){var f;return _classCallCheck(this,n),(f=e.call(this,t,r,o)).translate=r,f.route=i,f.router=a,f.formBuilder=c,f.repo=s,f.promptService=u,f.operator=l,f.itemRepo=b,f.itemVisibility=p.b,f.getTopicByUrl(),f.createForm(),f.itemObserver=f.itemRepo.getViewModelListBehaviorSubject(),f}return _createClass(n,[{key:"setEditMode",value:function(t){this.editTopic=t,t&&this.patchForm(),!t&&this.newTopic&&this.router.navigate(["./agenda/"])}},{key:"saveTopic",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.topicForm.valid){t.next=17;break}if(t.prev=1,!this.newTopic){t.next=9;break}return this.topicForm.value.agenda_parent_id||delete this.topicForm.value.agenda_parent_id,t.next=6,this.repo.create(new m.a(this.topicForm.value));case 6:this.router.navigate(["/agenda/"]),t.next=12;break;case 9:return t.next=11,this.repo.update(this.topicForm.value,this.topic);case 11:this.setEditMode(!1);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),this.raiseError(t.t0);case 17:case"end":return t.stop()}}),t,this,[[1,14]])})))}},{key:"createForm",value:function(){this.topicForm=this.formBuilder.group({agenda_type:[],agenda_parent_id:[],attachments_id:[[]],text:[""],title:["",s.G.required]}),this.topicForm.get("agenda_type").setValue(1)}},{key:"patchForm",value:function(){var t=this,e={};Object.keys(this.topicForm.controls).forEach((function(n){e[n]=t.topic[n]})),this.topicForm.patchValue(e)}},{key:"getTopicByUrl",value:function(){var t=this;this.route.snapshot.url[0]&&"new"===this.route.snapshot.url[0].path?(this.newTopic=!0,this.editTopic=!0,this.topic=new h.a(new f.a),_get(_getPrototypeOf(n.prototype),"setTitle",this).call(this,"New topic")):this.route.params.subscribe((function(e){t.loadTopic(e.id)}))}},{key:"loadTopic",value:function(t){var e=this;this.repo.getViewModelObservable(t).subscribe((function(t){if(t&&!e.editTopic){var o=t.getTitle();_get(_getPrototypeOf(n.prototype),"setTitle",e).call(e,o),e.topic=t,e.topicForm&&!e.editTopic&&e.patchForm()}}))}},{key:"onDeleteButton",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.translate.instant("Are you sure you want to delete this entry?"),n=this.topic.title,t.next=3,this.promptService.open(e,n);case 3:if(t.t0=t.sent,!t.t0){t.next=8;break}return t.next=7,this.repo.delete(this.topic).catch(this.raiseError);case 7:this.router.navigate(["/agenda"]);case 8:case"end":return t.stop()}}),t,this)})))}},{key:"isAllowed",value:function(t){switch(t){case"see":return this.operator.hasPerms(a.b.agendaCanSee);case"edit":return this.operator.hasPerms(a.b.agendaCanManage);case"default":return!1}}},{key:"onKeyDown",value:function(t){"Enter"===t.key&&t.shiftKey&&this.saveTopic(),"Escape"===t.key&&this.setEditMode(!1)}}]),n}(d.a)).\u0275fac=function(t){return new(t||tt)(v.Tb(g.d),v.Tb(y.a),v.Tb(_.k),v.Tb(i.a),v.Tb(i.f),v.Tb(s.f),v.Tb(l.a),v.Tb(b.a),v.Tb(a.a),v.Tb(u.a))},tt.\u0275cmp=v.Nb({type:tt,selectors:[["os-topic-detail"]],features:[v.Db],decls:13,vars:16,consts:[["mainButtonIcon","edit",3,"hasMainButton","nav","goBack","editMode","isSaveButtonEnabled","mainEvent","saveEvent"],[1,"title-slot"],[4,"ngIf"],["class","menu-slot",4,"osPerms","osPermsOr"],["class","spacer-bottom-60",3,"ngClass",4,"ngIf"],["topicExtraMenu","matMenu"],[3,"object","menuItem"],[4,"osPerms"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],[1,"spacer-bottom-60",3,"ngClass"],[3,"formGroup","keydown",4,"ngIf"],[3,"innerHTML"],["dense",""],[4,"ngFor","ngForOf"],["target","_blank",3,"routerLink"],[3,"formGroup","keydown"],["type","text","matInput","","osAutofocus","","required","","formControlName","title",3,"placeholder"],[1,"spacer-bottom-20"],["formControlName","text",3,"init"],["formControlName","attachments_id",3,"errorHandler"],["formControlName","agenda_type",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["formControlName","agenda_parent_id",3,"includeNone","placeholder","inputListValues"],[3,"value"],["mat-menu-item","",1,"red-warning-text",3,"click"]],template:function(t,e){1&t&&(v.Zb(0,"os-head-bar",0),v.hc("mainEvent",(function(){return e.setEditMode(!e.editTopic)}))("saveEvent",(function(){return e.saveTopic()})),v.Zb(1,"div",1),v.Zb(2,"h2"),v.Qc(3,B,3,3,"span",2),v.Qc(4,N,3,3,"span",2),v.Qc(5,Q,3,3,"span",2),v.Yb(),v.Yb(),v.Qc(6,U,4,1,"div",3),v.Yb(),v.Qc(7,z,6,5,"mat-card",4),v.Zb(8,"mat-menu",null,5),v.Ub(10,"os-projector-button",6),v.Ub(11,"os-speaker-button",6),v.Qc(12,$,8,3,"div",7),v.Yb()),2&t&&(v.tc("hasMainButton",e.isAllowed("edit"))("nav",!1)("goBack",!0)("editMode",e.editTopic)("isSaveButtonEnabled",e.topicForm.valid),v.Gb(3),v.tc("ngIf",e.newTopic),v.Gb(1),v.tc("ngIf",e.editTopic&&!e.newTopic),v.Gb(1),v.tc("ngIf",!e.newTopic&&!e.editTopic),v.Gb(1),v.tc("osPerms","agenda.can_manage")("osPermsOr","agenda.can_see_list_of_speakers"),v.Gb(1),v.tc("ngIf",e.topic||e.editTopic),v.Gb(3),v.tc("object",e.topic)("menuItem",!0),v.Gb(1),v.tc("object",e.topic)("menuItem",!0),v.Gb(1),v.tc("osPerms","agenda.can_manage"))},directives:[k.a,o.t,T.a,S.f,O.a,w.a,Y.b,S.e,C.a,G.a,o.q,Z.a,o.s,Z.d,i.i,s.I,s.t,s.k,I.c,P.b,s.c,F.a,s.D,s.s,s.i,j.a,M.a,I.b,L.a,A.a,x.n,R.a,S.c],pipes:[_.j,E.a],styles:[".topic-text[_ngcontent-%COMP%]{margin:0 20px;padding:25px}.topic-text[_ngcontent-%COMP%]   .missing[_ngcontent-%COMP%]{color:#708090;font-style:italic}"]}),tt),rt=[{path:"new",component:ot,data:{basePerm:a.b.agendaCanManage}},{path:":id",component:ot,data:{basePerm:a.b.agendaCanSee}}],it=((nt=function t(){_classCallCheck(this,t)}).\u0275mod=v.Rb({type:nt}),nt.\u0275inj=v.Qb({factory:function(t){return new(t||nt)},imports:[[i.j.forChild(rt)],i.j]}),nt),at=((et=function t(){_classCallCheck(this,t)}).\u0275mod=v.Rb({type:et}),et.\u0275inj=v.Qb({factory:function(t){return new(t||et)},imports:[[o.c,it,r.a]]}),et)},"40uZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var o=n("/uUt"),r=n("3Y/2"),i=n("J/o/"),a=n("fXoL"),c=n("3Xi6"),s=n("ofXK"),u=n("tyNb"),l=n("bTqV"),b=n("Qu3c"),p=n("NFeN"),f=n("TU8p"),d=n("STbY"),m=n("A5z7"),h=n("sYmb");function v(t,e){if(1&t&&(a.Zb(0,"a",4),a.Zb(1,"button",5),a.mc(2,"translate"),a.Zb(3,"mat-icon",6),a.Sc(4),a.Yb(),a.Yb(),a.Yb()),2&t){var n=a.lc(3);a.tc("routerLink",n.listOfSpeakersUrl),a.Gb(1),a.tc("disabled",n.disabled)("matTooltip",a.nc(2,5,n.tooltip)),a.Gb(2),a.tc("matBadge",n.listOfSpeakers.waitingSpeakerAmount>0?n.listOfSpeakers.waitingSpeakerAmount:null),a.Gb(1),a.Uc(" ",n.icon," ")}}function g(t,e){if(1&t&&(a.Zb(0,"mat-basic-chip",9),a.Zb(1,"span"),a.Sc(2),a.Yb(),a.Yb()),2&t){var n=a.lc(4);a.Gb(2),a.Tc(n.listOfSpeakers.waitingSpeakerAmount)}}function y(t,e){if(1&t&&(a.Zb(0,"button",7),a.Zb(1,"mat-icon"),a.Sc(2),a.Yb(),a.Zb(3,"span"),a.Sc(4),a.mc(5,"translate"),a.Yb(),a.Zb(6,"span"),a.Sc(7,"\xa0"),a.Yb(),a.Qc(8,g,3,1,"mat-basic-chip",8),a.Yb()),2&t){var n=a.lc(3);a.tc("routerLink",n.listOfSpeakers.listOfSpeakersUrl),a.Gb(2),a.Tc(n.icon),a.Gb(2),a.Tc(a.nc(5,4,"List of speakers")),a.Gb(4),a.tc("ngIf",n.listOfSpeakers.waitingSpeakerAmount>0)}}function _(t,e){if(1&t&&(a.Xb(0),a.Qc(1,v,5,7,"a",2),a.Qc(2,y,9,6,"button",3),a.Wb()),2&t){var n=a.lc(2);a.Gb(1),a.tc("ngIf",!n.menuItem),a.Gb(1),a.tc("ngIf",n.menuItem)}}function k(t,e){if(1&t&&(a.Xb(0),a.Qc(1,_,3,2,"ng-container",1),a.Wb()),2&t){var n=a.lc();a.Gb(1),a.tc("ngIf",n.listOfSpeakers)}}var T,S=((T=function(){function t(e){_classCallCheck(this,t),this.listOfSpeakersRepo=e,this.menuItem=!1}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.cleanLosSub()}},{key:"cleanLosSub",value:function(){this.losSub&&(this.losSub.unsubscribe(),this.losSub=null)}},{key:"object",set:function(t){var e,n=this;e=Object(i.b)(t)?t.listOfSpeakers:function(t){return!!t&&void 0!==t.id&&void 0!==t.collection}(t)?this.listOfSpeakersRepo.findByContentObject(t):null,this.cleanLosSub(),e&&(this.losSub=this.listOfSpeakersRepo.getViewModelObservable(e.id).pipe(Object(o.a)()).subscribe((function(t){n.listOfSpeakers=t})))}},{key:"listOfSpeakersUrl",get:function(){if(!this.disabled)return this.listOfSpeakers.listOfSpeakersUrl}},{key:"icon",get:function(){return this.listOfSpeakers.closed?"voice_over_off":"record_voice_over"}},{key:"tooltip",get:function(){return this.listOfSpeakers.closed?"The list of speakers is closed.":"List of speakers"}}]),t}()).\u0275fac=function(t){return new(t||T)(a.Tb(r.a))},T.\u0275cmp=a.Nb({type:T,selectors:[["os-speaker-button"]],inputs:{object:"object",disabled:"disabled",menuItem:"menuItem"},decls:1,vars:1,consts:[[4,"osPerms"],[4,"ngIf"],["class","anchor-button",3,"routerLink",4,"ngIf"],["type","button","mat-menu-item","",3,"routerLink",4,"ngIf"],[1,"anchor-button",3,"routerLink"],["type","button","mat-icon-button","",3,"disabled","matTooltip"],["matBadgeColor","accent",3,"matBadge"],["type","button","mat-menu-item","",3,"routerLink"],["disableRipple","","class","lightblue",4,"ngIf"],["disableRipple","",1,"lightblue"]],template:function(t,e){1&t&&a.Qc(0,k,2,1,"ng-container",0),2&t&&a.tc("osPerms","agenda.can_see_list_of_speakers")},directives:[c.a,s.t,u.i,l.b,b.c,p.a,f.a,d.c,u.g,m.a],pipes:[h.j],styles:[".mat-basic-chip .mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}"],encapsulation:2}),T)},F48D:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n("mrSG"),r=n("LBBb"),i=n("fXoL"),a=n("0IaG"),c=function(){var t=function(){function t(e){_classCallCheck(this,t),this.dialog=e}return _createClass(t,[{key:"open",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.dialog.open(r.a,{width:"250px",data:{title:t,content:e}}).afterClosed().toPromise());case 1:case"end":return n.stop()}}),n,this)})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.dc(a.b))},t.\u0275prov=i.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},JAMN:function(t,e,n){"use strict";n.d(e,"a",(function(){return T}));var o=n("fXoL"),r=n("kmnG"),i=n("lJxs"),a=n("SSyl"),c=n("aAo1"),s=n("Izkr"),u=n("3Pt+"),l=n("u47x"),b=n("0IaG"),p=n("ofXK"),f=n("oqD5"),d=n("3Xi6"),m=n("bTqV"),h=n("NFeN"),v=n("GTZY"),g=n("sYmb");function y(t,e){if(1&t){var n=o.ac();o.Zb(0,"button",5),o.hc("click",(function(){o.Ic(n);var t=o.lc(2),e=o.Ec(2);return t.openUploadDialog(e)})),o.Zb(1,"mat-icon"),o.Sc(2,"cloud_upload"),o.Yb(),o.Yb()}}function _(t,e){if(1&t&&(o.Zb(0,"div",2),o.Zb(1,"mat-form-field"),o.Ub(2,"os-search-value-selector",3),o.mc(3,"translate"),o.Yb(),o.Qc(4,y,3,0,"button",4),o.Yb()),2&t){var n=o.lc();o.Gb(2),o.uc("placeholder",o.nc(3,5,"Attachments")),o.tc("multiple",!0)("formControl",n.contentForm)("inputListValues",n.mediaFileList),o.Gb(2),o.tc("osPerms","mediafiles.can_manage")}}function k(t,e){if(1&t){var n=o.ac();o.Zb(0,"h1",6),o.Zb(1,"span"),o.Sc(2),o.mc(3,"translate"),o.Yb(),o.Yb(),o.Zb(4,"os-media-upload-content",7),o.hc("uploadSuccessEvent",(function(t){return o.Ic(n),o.lc().uploadSuccess(t)}))("errorEvent",(function(t){return o.Ic(n),o.lc().uploadError(t)})),o.Yb()}2&t&&(o.Gb(2),o.Tc(o.nc(3,1,"Upload files")))}var T=function(){var t=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,r,i,a,c,s){var u;return _classCallCheck(this,n),(u=e.call(this,t,r,i,a)).ngControl=a,u.dialogService=c,u.mediaService=s,u.errorHandler=new o.p,u}return _createClass(n,[{key:"ngOnInit",value:function(){this.mediaFileList=this.mediaService.getViewModelListObservable().pipe(Object(i.a)((function(t){return t.filter((function(t){return!t.is_directory}))})))}},{key:"openUploadDialog",value:function(t){this.dialogRef=this.dialogService.open(t,Object.assign(Object.assign({},s.c),{disableClose:!1}))}},{key:"uploadSuccess",value:function(t){var e=[].concat(_toConsumableArray(this.contentForm.value),_toConsumableArray(t));this.updateForm(e),this.dialogRef.close()}},{key:"uploadError",value:function(t){this.errorHandler.emit(t)}},{key:"onContainerClick",value:function(t){}},{key:"initializeForm",value:function(){this.contentForm=this.fb.control([])}},{key:"updateForm",value:function(t){this.contentForm.setValue(t||[])}},{key:"empty",get:function(){return!this.contentForm.value.length}},{key:"controlType",get:function(){return"attachment-control"}}]),n}(c.a);return t.\u0275fac=function(e){return new(e||t)(o.Tb(u.f),o.Tb(l.h),o.Tb(o.m),o.Tb(u.r,10),o.Tb(b.b),o.Tb(a.a))},t.\u0275cmp=o.Nb({type:t,selectors:[["os-attachment-control"]],outputs:{errorHandler:"errorHandler"},features:[o.Fb([{provide:r.d,useExisting:t}]),o.Db],decls:3,vars:1,consts:[["class","attachment-container",4,"ngIf"],["uploadDialog",""],[1,"attachment-container"],[1,"selector",3,"multiple","placeholder","formControl","inputListValues"],["type","button","mat-icon-button","",3,"click",4,"osPerms"],["type","button","mat-icon-button","",3,"click"],["mat-dialog-title",""],[3,"uploadSuccessEvent","errorEvent"]],template:function(t,e){1&t&&(o.Qc(0,_,5,7,"div",0),o.Qc(1,k,5,3,"ng-template",null,1,o.Rc)),2&t&&o.tc("ngIf",e.contentForm)},directives:[p.t,r.c,f.a,u.s,u.h,d.a,m.b,h.a,b.i,v.a],pipes:[g.j],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .attachment-container[_ngcontent-%COMP%]{-ms-flex-pack:justify;justify-content:space-between;display:-ms-flexbox;display:flex}[_nghost-%COMP%]   .attachment-container[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]{width:95%}[_nghost-%COMP%]   .attachment-container[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{top:20px}"],changeDetection:0}),t}()},LBBb:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var o=n("0IaG"),r=n("fXoL"),i=n("ofXK"),a=n("bTqV"),c=n("sYmb");function s(t,e){if(1&t&&(r.Zb(0,"div"),r.Zb(1,"h2",1),r.Sc(2),r.Yb(),r.Ub(3,"mat-dialog-content",2),r.Zb(4,"mat-dialog-actions"),r.Zb(5,"button",3),r.Sc(6),r.mc(7,"translate"),r.Yb(),r.Zb(8,"button",4),r.Sc(9),r.mc(10,"translate"),r.Yb(),r.Yb(),r.Yb()),2&t){var n=r.lc();r.Gb(2),r.Tc(n.data.title),r.Gb(1),r.tc("innerHTML",n.data.content,r.Jc),r.Gb(2),r.tc("mat-dialog-close",!0),r.Gb(1),r.Tc(r.nc(7,6,"Yes")),r.Gb(2),r.tc("mat-dialog-close",!1),r.Gb(1),r.Tc(r.nc(10,8,"Cancel"))}}var u=function(){var t=function t(e,n){_classCallCheck(this,t),this.dialogRef=e,this.data=n};return t.\u0275fac=function(e){return new(e||t)(r.Tb(o.h),r.Tb(o.a))},t.\u0275cmp=r.Nb({type:t,selectors:[["os-prompt-dialog"]],decls:1,vars:1,consts:[[4,"ngIf"],["mat-dialog-title",""],[3,"innerHTML"],["mat-button","","color","warn",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&r.Qc(0,s,11,10,"div",0),2&t&&r.tc("ngIf",e.data)},directives:[i.t,o.i,o.f,o.c,a.b,o.d],pipes:[c.j],encapsulation:2}),t}()}}]);