function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=_superPropBase(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(t);if(e){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[9,38],{"76GY":function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var o=n("ykax"),r=n("fXoL"),a=n("ofXK"),c=n("vYAO"),i=n("iCsr"),l=n("sYmb"),s=n("j7f2"),u=n("6ako"),b=n("QUb3");function p(t,e){if(1&t&&(r.Zb(0,"os-icon-container",9),r.Sc(1),r.mc(2,"translate"),r.mc(3,"pollKeyVerbose"),r.Yb()),2&t){var n=r.lc().$implicit,o=r.lc(2);r.tc("icon",n.value[0].icon)("size",o.iconSize),r.Gb(1),r.Uc(" ",r.nc(2,3,r.nc(3,5,n.votingOption))," ")}}function f(t,e){if(1&t&&(r.Zb(0,"span"),r.Sc(1),r.mc(2,"translate"),r.mc(3,"pollKeyVerbose"),r.Yb()),2&t){var n=r.lc().$implicit;r.Gb(1),r.Uc(" ",r.nc(2,1,r.nc(3,3,n.votingOption))," ")}}function d(t,e){if(1&t&&(r.Zb(0,"span"),r.Sc(1),r.mc(2,"pollPercentBase"),r.Yb()),2&t){var n=r.lc().$implicit,o=r.lc(2);r.Gb(1),r.Uc(" ",r.oc(2,1,n.value[0].amount,o.poll)," ")}}function v(t,e){if(1&t&&(r.Zb(0,"tr"),r.Zb(1,"td"),r.Qc(2,p,4,7,"os-icon-container",6),r.Qc(3,f,4,5,"span",7),r.Yb(),r.Zb(4,"td",8),r.Qc(5,d,3,4,"span",7),r.Yb(),r.Zb(6,"td",8),r.Sc(7),r.mc(8,"parsePollNumber"),r.Yb(),r.Yb()),2&t){var n=e.$implicit;r.Ib(n.votingOption),r.Gb(2),r.tc("ngIf",n.value[0].icon),r.Gb(1),r.tc("ngIf",!n.value[0].icon),r.Gb(2),r.tc("ngIf",n.value[0].showPercent),r.Gb(2),r.Uc(" ",r.nc(8,6,n.value[0].amount)," ")}}function m(t,e){if(1&t&&(r.Zb(0,"div",10),r.Ub(1,"os-charts",11),r.mc(2,"async"),r.Yb()),2&t){var n=r.lc(2);r.Gb(1),r.tc("data",r.nc(2,1,n.chartData))}}function h(t,e){if(1&t&&(r.Zb(0,"div",1),r.Zb(1,"table",2),r.Zb(2,"tbody"),r.Zb(3,"tr"),r.Ub(4,"th"),r.Zb(5,"th",3),r.Sc(6),r.mc(7,"translate"),r.Yb(),r.Yb(),r.Qc(8,v,9,8,"tr",4),r.Yb(),r.Yb(),r.Qc(9,m,3,3,"div",5),r.Yb()),2&t){var n=r.lc();r.Gb(6),r.Tc(r.nc(7,3,"Votes")),r.Gb(2),r.tc("ngForOf",n.getTableData()),r.Gb(1),r.tc("ngIf",n.showChart)}}var g=function(){var t=function(){function t(e){_classCallCheck(this,t),this.motionPollService=e,this.iconSize="large"}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"getTableData",value:function(){return this.motionPollService.generateTableData(this.poll)}},{key:"hasVotes",get:function(){return this.poll&&!!this.poll.options}},{key:"showChart",get:function(){return this.motionPollService.showChart(this.poll)&&this.chartData&&!!this.chartData.value}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Tb(o.a))},t.\u0275cmp=r.Nb({type:t,selectors:[["os-motion-poll-detail-content"]],inputs:{poll:"poll",chartData:"chartData",iconSize:"iconSize"},decls:1,vars:1,consts:[["class","result-wrapper",4,"ngIf"],[1,"result-wrapper"],[1,"result-table"],["colspan","2"],[3,"class",4,"ngFor","ngForOf"],["class","doughnut-chart",4,"ngIf"],[3,"icon","size",4,"ngIf"],[4,"ngIf"],[1,"result-cell-definition"],[3,"icon","size"],[1,"doughnut-chart"],["type","doughnut",3,"data"]],template:function(t,e){1&t&&r.Qc(0,h,10,5,"div",0),2&t&&r.tc("ngIf",e.hasVotes)},directives:[a.t,a.s,c.a,i.a],pipes:[l.j,s.a,u.a,b.a,a.b],styles:[".yes[_ngcontent-%COMP%]{color:#4caf50}.no[_ngcontent-%COMP%]{color:#cc6c5b}.abstain[_ngcontent-%COMP%]{color:#a6a6a6}.voted-yes[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.voted-no[_ngcontent-%COMP%]{background-color:#cc6c5b;color:#fff}.voted-abstain[_ngcontent-%COMP%]{background-color:#a6a6a6;color:#fff}.start-poll-button[_ngcontent-%COMP%]{color:#4caf50}.stop-poll-button[_ngcontent-%COMP%]{color:#ff5252}.publish-poll-button[_ngcontent-%COMP%]{color:#e6b100}.result-wrapper[_ngcontent-%COMP%]{display:grid;grid-gap:2em;margin:2em;grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:right;font-weight:400}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:48px;border-bottom:none!important}.result-wrapper[_ngcontent-%COMP%]   .result-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .result-cell-definition[_ngcontent-%COMP%]{text-align:right}.result-wrapper[_ngcontent-%COMP%]   .doughnut-chart[_ngcontent-%COMP%]{display:block}"]}),t}()},DNKu:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n("mrSG"),r=n("TG9O"),a=n("qnZ9"),c=n("Izkr"),i=n("fXoL"),l=n("0IaG"),s=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.dialog=e,this.mapper=n}return _createClass(t,[{key:"openDialog",value:function(t){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,o,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.dialog.open(this.dialogComponent,Object.assign({data:t},c.c)),e.next=3,n.afterClosed().toPromise();case 3:if(!(o=e.sent)){e.next=15;break}if(r=this.mapper.getRepository(t.collectionString),!t.poll){e.next=13;break}return i=o,t.state!==a.e.Created&&(i={title:o.title,onehundred_percent_base:o.onehundred_percent_base,majority_method:o.majority_method,description:o.description},t.type===a.f.Analog&&(i=Object.assign(Object.assign({},i),{votes:o.votes,publish_immediately:o.publish_immediately}))),e.next=11,r.patch(i,t);case 11:e.next=15;break;case 13:return e.next=15,r.create(o);case 15:case"end":return e.stop()}}),e,this)})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.dc(l.b),i.dc(r.a))},t.\u0275prov=i.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},SHqy:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var o=n("TG9O"),r=n("DNKu"),a=n("cMzF"),c=n("fXoL"),i=n("0IaG"),l=function(){var t=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o){var r;return _classCallCheck(this,n),(r=e.call(this,t,o)).dialogComponent=a.a,r}return n}(r.a);return t.\u0275fac=function(e){return new(e||t)(c.dc(i.b),c.dc(o.a))},t.\u0275prov=c.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},bVYn:function(t,e,n){"use strict";n.r(e),n.d(e,"PollsModule",(function(){return Q}));var o,r=n("ofXK"),a=n("tyNb"),c=n("AqIO"),i=n("M0z7"),l=n("wL0i"),s=n("D/ll"),u=n("+8Rz"),b=n("qnZ9"),p=n("fXoL"),f=n("sYmb"),d=((o=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,r){var a;return _classCallCheck(this,n),(a=e.call(this,t,o)).translate=r,a.storageKey="PollList",a}return _createClass(n,[{key:"preFilter",value:function(t){return t.filter((function(t){return!t.isAnalog}))}},{key:"getFilterDefinitions",value:function(){return[{property:"state",label:this.translate.instant("State"),options:[{condition:b.e.Created,label:this.translate.instant("created")},{condition:b.e.Started,label:this.translate.instant("started")},{condition:b.e.Finished,label:this.translate.instant("finished (unpublished)")},{condition:b.e.Published,label:this.translate.instant("published")}]},{property:"hasVote",label:this.translate.instant("Votings"),options:[{condition:!1,label:this.translate.instant("Voting is currently in progress.")},{condition:!0,label:this.translate.instant("You have already voted.")}]}]}}]),n}(u.a)).\u0275fac=function(t){return new(t||o)(p.dc(c.a),p.dc(s.a),p.dc(f.k))},o.\u0275prov=p.Pb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),v=n("PoOO"),m=n("jhN1"),h=n("dNgK"),g=n("mksl"),y=n("0Obk"),_=n("dRZP"),S=n("NFeN"),k=n("Qu3c");function C(t,e){if(1&t&&p.Ub(0,"a",5),2&t){var n=p.lc().row;p.tc("routerLink",n.parentLink)}}function G(t,e){if(1&t&&(p.Zb(0,"div",3),p.Qc(1,C,1,1,"a",4),p.Zb(2,"span"),p.Sc(3),p.Yb(),p.Yb()),2&t){var n=e.row,o=p.lc();p.Gb(1),p.tc("ngIf",!o.isMultiSelect),p.Gb(2),p.Tc(n.title)}}function P(t,e){if(1&t&&p.Ub(0,"a",5),2&t){var n=p.lc().row;p.tc("routerLink",n.parentLink)}}function w(t,e){if(1&t&&(p.Zb(0,"div",3),p.Qc(1,P,1,1,"a",4),p.Zb(2,"span"),p.Sc(3),p.Yb(),p.Yb()),2&t){var n=e.row,o=p.lc();p.Gb(1),p.tc("ngIf",!o.isMultiSelect),p.Gb(2),p.Tc(n.getContentObject().getListTitle())}}function O(t,e){if(1&t&&p.Ub(0,"a",5),2&t){var n=p.lc().row;p.tc("routerLink",n.parentLink)}}function Y(t,e){if(1&t&&(p.Zb(0,"div",3),p.Qc(1,O,1,1,"a",4),p.Zb(2,"span"),p.Sc(3),p.mc(4,"translate"),p.Yb(),p.Yb()),2&t){var n=e.row,o=p.lc();p.Gb(1),p.tc("ngIf",!o.isMultiSelect),p.Gb(2),p.Tc(p.nc(4,2,n.stateVerbose))}}function T(t,e){1&t&&(p.Zb(0,"mat-icon",8),p.mc(1,"translate"),p.Sc(2," check_circle "),p.Yb()),2&t&&p.uc("matTooltip",p.nc(1,1,"You have already voted."))}function Z(t,e){1&t&&(p.Zb(0,"mat-icon",9),p.mc(1,"translate"),p.Sc(2," warning "),p.Yb()),2&t&&p.uc("matTooltip",p.nc(1,1,"Voting is currently in progress."))}function D(t,e){if(1&t&&(p.Zb(0,"div",3),p.Qc(1,T,3,3,"mat-icon",6),p.Qc(2,Z,3,3,"mat-icon",7),p.Yb()),2&t){var n=e.row;p.Gb(1),p.tc("ngIf",n.hasVote),p.Gb(1),p.tc("ngIf",!n.hasVote&&null!==n.hasVote)}}var I,V,j,x=[{path:"",component:(I=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,r,a,c,i,l){var s,u;return _classCallCheck(this,n),(u=e.call(this,c,i,l,a)).polls=t,u.filterService=o,u.votingService=r,u.storage=a,u.tableColumnDefinition=[{prop:"title",width:"auto"},{prop:"classType",width:"auto"},{prop:"state",width:"auto"},{prop:"votability",width:"25px"}],u.filterProps=["title","state"],_get((s=_assertThisInitialized(u),_getPrototypeOf(n.prototype)),"setTitle",s).call(s,"List of electronic votes"),u}return n}(l.a),I.\u0275fac=function(t){return new(t||I)(p.Tb(v.a),p.Tb(d),p.Tb(i.b),p.Tb(c.a),p.Tb(m.d),p.Tb(f.k),p.Tb(h.a))},I.\u0275cmp=p.Nb({type:I,selectors:[["os-poll-list"]],features:[p.Db],decls:9,vars:12,consts:[[1,"title-slot"],["listStorageKey","polls",3,"listObservableProvider","vScrollFixed","columns","filterProps","filterService"],["class","cell-slot fill",4,"pblNgridCellDef"],[1,"cell-slot","fill"],["class","detail-link",3,"routerLink",4,"ngIf"],[1,"detail-link",3,"routerLink"],["color","accent",3,"matTooltip",4,"ngIf"],["color","warn",3,"matTooltip",4,"ngIf"],["color","accent",3,"matTooltip"],["color","warn",3,"matTooltip"]],template:function(t,e){1&t&&(p.Zb(0,"os-head-bar"),p.Zb(1,"div",0),p.Sc(2),p.mc(3,"translate"),p.Yb(),p.Yb(),p.Zb(4,"os-list-view-table",1),p.Qc(5,G,4,2,"div",2),p.Qc(6,w,4,2,"div",2),p.Qc(7,Y,5,4,"div",2),p.Qc(8,D,3,2,"div",2),p.Yb()),2&t&&(p.Gb(2),p.Tc(p.nc(3,10,"List of electronic votes")),p.Gb(2),p.tc("listObservableProvider",e.polls)("vScrollFixed",64)("columns",e.tableColumnDefinition)("filterProps",e.filterProps)("filterService",e.filterService),p.Gb(1),p.tc("pblNgridCellDef","title"),p.Gb(1),p.tc("pblNgridCellDef","classType"),p.Gb(1),p.tc("pblNgridCellDef","state"),p.Gb(1),p.tc("pblNgridCellDef","votability"))},directives:[g.a,y.a,_.c,r.t,a.i,S.a,k.c],pipes:[f.j],styles:[""]}),I),pathMatch:"full"}],M=((V=function t(){_classCallCheck(this,t)}).\u0275mod=p.Rb({type:V}),V.\u0275inj=p.Qb({factory:function(t){return new(t||V)},imports:[[a.j.forChild(x)],a.j]}),V),N=n("PCNd"),Q=((j=function t(){_classCallCheck(this,t)}).\u0275mod=p.Rb({type:j}),j.\u0275inj=p.Qb({factory:function(t){return new(t||j)},imports:[[r.c,M,N.a]]}),j)},cMzF:function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));var o=n("3Pt+"),r=n("0IaG"),a=n("qnZ9"),c=n("ykax"),i=n("b1ae"),l=n("5NaA"),s=n("8fOK"),u=n("fXoL"),b=n("jhN1"),p=n("sYmb"),f=n("dNgK"),d=n("ofXK"),v=n("bTqV"),m=n("acT5"),h=n("bSwM"),g=n("kmnG"),y=["pollForm"];function _(t,e){1&t&&(u.Zb(0,"mat-error"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Gb(1),u.Uc(" ",u.nc(2,1,"Error in form field."),""))}function S(t,e){if(1&t){var n=u.ac();u.Zb(0,"div"),u.Zb(1,"mat-checkbox",14),u.hc("ngModelChange",(function(t){return u.Ic(n),u.lc(2).publishImmediately=t}))("change",(function(t){return u.Ic(n),u.lc(2).publishStateChanged(t.checked)})),u.Zb(2,"span"),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb(),u.Qc(5,_,3,3,"mat-error",2),u.Yb()}if(2&t){var o=u.lc(2);u.Gb(1),u.tc("ngModel",o.publishImmediately),u.Gb(2),u.Tc(u.nc(4,3,"Publish immediately")),u.Gb(2),u.tc("ngIf",!o.dialogVoteForm.valid)}}function k(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"div",6),u.Zb(2,"form",7),u.Ub(3,"os-check-input",8),u.mc(4,"translate"),u.mc(5,"translate"),u.Ub(6,"os-check-input",9),u.mc(7,"translate"),u.mc(8,"translate"),u.Ub(9,"os-check-input",10),u.mc(10,"translate"),u.mc(11,"translate"),u.Ub(12,"os-check-input",11),u.mc(13,"translate"),u.Ub(14,"os-check-input",12),u.mc(15,"translate"),u.Ub(16,"os-check-input",13),u.mc(17,"translate"),u.Yb(),u.Yb(),u.Qc(18,S,6,5,"div",2),u.Wb()),2&t){var n=u.lc();u.Gb(2),u.tc("formGroup",n.dialogVoteForm),u.Gb(1),u.tc("placeholder",u.nc(4,14,"Yes"))("checkboxValue",-1)("checkboxLabel",u.nc(5,16,"majority")),u.Gb(3),u.tc("placeholder",u.nc(7,18,"No"))("checkboxValue",-1)("checkboxLabel",u.nc(8,20,"majority")),u.Gb(3),u.tc("placeholder",u.nc(10,22,"Abstain"))("checkboxValue",-1)("checkboxLabel",u.nc(11,24,"majority")),u.Gb(3),u.tc("placeholder",u.nc(13,26,"Valid votes")),u.Gb(2),u.tc("placeholder",u.nc(15,28,"Invalid votes")),u.Gb(2),u.tc("placeholder",u.nc(17,30,"Total votes cast")),u.Gb(2),u.tc("ngIf",!n.pollData.isPublished)}}var C=function(){var t=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,r,a,c,i,l){var u;return _classCallCheck(this,n),(u=e.call(this,t,o,r,c)).motionPollService=a,u.dialogRef=c,u.formBuilder=i,u.pollData=l,u.PercentBaseVerbose=s.b,u}return _createClass(n,[{key:"ngOnInit",value:function(){this.createDialog()}},{key:"updateDialogVoteForm",value:function(t){if(this.dialogVoteForm){var e=this.undoReplaceEmptyValues({Y:t.options[0].yes,N:t.options[0].no,A:t.options[0].abstain,votesvalid:t.votesvalid,votesinvalid:t.votesinvalid,votescast:t.votescast});this.dialogVoteForm.setValue(e)}}},{key:"createDialog",value:function(){this.dialogVoteForm=this.formBuilder.group({Y:["",[o.G.min(a.b)]],N:["",[o.G.min(a.b)]],A:["",[o.G.min(a.b)]],votesvalid:["",[o.G.min(a.b)]],votesinvalid:["",[o.G.min(a.b)]],votescast:["",[o.G.min(a.b)]]}),this.pollData&&this.pollData.poll&&this.updateDialogVoteForm(this.pollData)}}]),n}(i.a);return t.\u0275fac=function(e){return new(e||t)(u.Tb(b.d),u.Tb(p.k),u.Tb(f.a),u.Tb(c.a),u.Tb(r.h),u.Tb(o.f),u.Tb(r.a))},t.\u0275cmp=u.Nb({type:t,selectors:[["os-motion-poll-dialog"]],viewQuery:function(t,e){var n;1&t&&u.Zc(y,!0),2&t&&u.Dc(n=u.ic())&&(e.pollForm=n.first)},features:[u.Db],decls:12,vars:12,consts:[[3,"data","pollService","percentBases"],["pollForm",""],[4,"ngIf"],["mat-dialog-actions",""],["mat-button","",3,"disabled","click"],["mat-button","",3,"mat-dialog-close"],["mat-dialog-content","",1,"os-form-card-mobile"],[3,"formGroup"],["inputType","number","formControlName","Y",3,"placeholder","checkboxValue","checkboxLabel"],["inputType","number","formControlName","N",3,"placeholder","checkboxValue","checkboxLabel"],["inputType","number","formControlName","A",3,"placeholder","checkboxValue","checkboxLabel"],["inputType","number","formControlName","votesvalid",3,"placeholder"],["inputType","number","formControlName","votesinvalid",3,"placeholder"],["inputType","number","formControlName","votescast",3,"placeholder"],[3,"ngModel","ngModelChange","change"]],template:function(t,e){if(1&t&&(u.Ub(0,"os-poll-form",0,1),u.Qc(2,k,19,32,"ng-container",2),u.Zb(3,"div",3),u.Zb(4,"button",4),u.hc("click",(function(){return e.submitPoll()})),u.Zb(5,"span"),u.Sc(6),u.mc(7,"translate"),u.Yb(),u.Yb(),u.Zb(8,"button",5),u.Zb(9,"span"),u.Sc(10),u.mc(11,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t){var n=u.Ec(1);u.tc("data",e.pollData)("pollService",e.motionPollService)("percentBases",e.PercentBaseVerbose),u.Gb(2),u.tc("ngIf","analog"===n.contentForm.get("type").value),u.Gb(2),u.tc("disabled",n.contentForm.invalid||e.dialogVoteForm.invalid),u.Gb(2),u.Tc(u.nc(7,8,"Save")),u.Gb(2),u.tc("mat-dialog-close",!1),u.Gb(2),u.Tc(u.nc(11,10,"Cancel"))}},directives:[l.a,d.t,r.c,v.b,r.d,r.f,o.I,o.t,o.k,m.a,o.s,o.i,h.a,o.v,g.b],pipes:[p.j],styles:[""]}),t}()},g4jF:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var o=n("mrSG"),r=n("2Vo4"),a=n("Cfvw"),c=n("pLZG"),i=n("lJxs"),l=n("g96W"),s=n("mV3u"),u=n("fXoL"),b=function(){var t=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,a,c,i,s,u,b,p,f){var d;return _classCallCheck(this,n),(d=e.call(this,t,o,a)).translate=o,d.repo=c,d.route=i,d.groupRepo=s,d.promptService=u,d.pollDialog=b,d.pollService=p,d.votesRepo=f,d.userGroups=[],d.groupObservable=null,d.voteOptionStyle={Y:{css:"yes",icon:"thumb_up"},N:{css:"no",icon:"thumb_down"},A:{css:"abstain",icon:"trip_origin"}},d.poll=null,d.labels=[],d.chartDataSubject=new r.a(null),d.optionsLoaded=new l.a,d.setup(),d}return _createClass(n,[{key:"setup",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.optionsLoaded;case 2:this.votesRepo.getViewModelListObservable().pipe(Object(c.a)((function(){return e.poll&&e.canSeeVotes})),Object(i.a)((function(t){return t.filter((function(t){return t.option.poll_id===e.poll.id}))})),Object(c.a)((function(t){return!!t.length}))).subscribe((function(){e.createVotesData()}));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"ngOnInit",value:function(){var t=this;this.findComponentById(),this.groupObservable=this.groupRepo.getViewModelListObservable(),this.subscriptions.push(this.groupRepo.getViewModelListObservable().subscribe((function(e){return t.userGroups=e})))}},{key:"deletePoll",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.translate.instant("Are you sure you want to delete this vote?"),t.next=3,this.promptService.open(e);case 3:if(t.t0=t.sent,!t.t0){t.next=6;break}this.repo.delete(this.poll).then((function(){return n.onDeleted()}),this.raiseError);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"pseudoanonymizePoll",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.translate.instant("Are you sure you want to anonymize all votes? This cannot be undone."),t.next=3,this.promptService.open(e);case 3:if(t.t0=t.sent,!t.t0){t.next=6;break}this.repo.pseudoanonymize(this.poll).catch(this.raiseError);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"openDialog",value:function(t){this.pollDialog.openDialog(t)}},{key:"onStateChanged",value:function(){}},{key:"setVotesData",value:function(t){this.votesDataObservable=t.every((function(t){return!t.user}))?null:Object(a.a)([t])}},{key:"initChartData",value:function(){this.chartDataSubject.next(this.pollService.generateChartData(this.poll))}},{key:"findComponentById",value:function(){var t=this,e=this.route.snapshot.params;e&&e.id&&this.subscriptions.push(this.repo.getViewModelObservable(e.id).subscribe((function(e){e&&(t.poll=e,t.createVotesData(),t.initChartData(),t.optionsLoaded.resolve())})))}},{key:"canSeeVotes",get:function(){return this.hasPerms&&this.poll.isFinished||this.poll.isPublished}}]),n}(s.a);return t.\u0275fac=function(t){u.gc()},t.\u0275dir=u.Ob({type:t,features:[u.Db]}),t}()},tSYa:function(t,e,n){"use strict";n.r(e),n.d(e,"MotionPollModule",(function(){return it}));var o=n("ofXK"),r=n("PCNd"),a=n("bVYn"),c=n("tyNb"),i=n("OwvW"),l=n("acQf"),s=n("chQs"),u=n("R+Vs"),b=n("+KbT"),p=n("F48D"),f=n("SHqy"),d=n("ykax"),v=n("g4jF"),m=n("fXoL"),h=n("jhN1"),g=n("sYmb"),y=n("dNgK"),_=n("mksl"),S=n("3Xi6"),k=n("Wp6s"),C=n("STbY"),G=n("f0Cb"),P=n("bTqV"),w=n("NFeN"),O=n("76GY"),Y=n("0Obk"),T=n("dRZP"),Z=n("Tp2j");function D(t,e){if(1&t&&(m.Zb(0,"h2"),m.Sc(1),m.mc(2,"translate"),m.Yb()),2&t){var n=m.lc();m.Gb(1),m.Vc("",m.nc(2,2,"Motion")," ",n.poll.motion.identifierOrTitle,"")}}function I(t,e){if(1&t&&(m.Zb(0,"div",11),m.Zb(1,"button",12),m.Zb(2,"mat-icon"),m.Sc(3,"more_vert"),m.Yb(),m.Yb(),m.Yb()),2&t){m.lc();var n=m.Ec(9);m.Gb(1),m.tc("matMenuTriggerFor",n)}}function V(t,e){if(1&t&&(m.Zb(0,"span"),m.Sc(1),m.mc(2,"translate"),m.Yb()),2&t){var n=m.lc(3);m.Gb(1),m.Uc(" ",m.nc(2,1,n.poll.typeVerbose)," \xb7 ")}}function j(t,e){1&t&&(m.Zb(0,"p"),m.Sc(1),m.mc(2,"translate"),m.Yb()),2&t&&(m.Gb(1),m.Tc(m.nc(2,1,"No results yet.")))}function x(t,e){if(1&t&&(m.Zb(0,"div"),m.Sc(1),m.mc(2,"translate"),m.Yb()),2&t){var n=e.col;m.Gb(1),m.Uc(" ",m.nc(2,1,n.label)," ")}}function M(t,e){if(1&t&&(m.Zb(0,"div"),m.Sc(1),m.Yb()),2&t){var n=m.lc(2).row;m.Gb(1),m.Uc(" ",n.user.getLevelAndNumber()," ")}}function N(t,e){if(1&t&&(m.Zb(0,"div"),m.Sc(1),m.mc(2,"translate"),m.Yb()),2&t){var n=m.lc(2).row;m.Gb(1),m.Vc(" ",m.nc(2,2,"Vote weight"),": ",n.user.vote_weight," ")}}function Q(t,e){if(1&t&&(m.Zb(0,"div"),m.Sc(1),m.Zb(2,"div",22),m.Qc(3,M,2,1,"div",2),m.Qc(4,N,3,4,"div",2),m.Yb(),m.Yb()),2&t){var n=m.lc().row,o=m.lc(6);m.Gb(1),m.Uc(" ",n.user.getShortName()," "),m.Gb(2),m.tc("ngIf",n.user.getLevelAndNumber()),m.Gb(1),m.tc("ngIf",o.isVoteWeightActive)}}function A(t,e){1&t&&(m.Zb(0,"div"),m.Sc(1),m.mc(2,"translate"),m.Yb()),2&t&&(m.Gb(1),m.Tc(m.nc(2,1,"Anonymous")))}function L(t,e){if(1&t&&(m.Zb(0,"div"),m.Qc(1,Q,5,3,"div",2),m.Qc(2,A,3,3,"div",2),m.Yb()),2&t){var n=e.row;m.Gb(1),m.tc("ngIf",n.user),m.Gb(1),m.tc("ngIf",!n.user)}}function R(t,e){if(1&t&&(m.Zb(0,"div",23),m.Zb(1,"div",24),m.Zb(2,"mat-icon"),m.Sc(3),m.Yb(),m.Yb(),m.Zb(4,"div"),m.Sc(5),m.mc(6,"translate"),m.Yb(),m.Yb()),2&t){var n=e.row,o=m.lc(6);m.Gb(1),m.tc("ngClass",o.voteOptionStyle[n.value].css),m.Gb(2),m.Tc(o.voteOptionStyle[n.value].icon),m.Gb(2),m.Tc(m.nc(6,3,n.valueVerbose))}}function F(t,e){if(1&t&&(m.Zb(0,"os-list-view-table",18),m.Qc(1,x,3,3,"div",19),m.Qc(2,L,3,2,"div",20),m.Qc(3,R,7,5,"div",21),m.Yb()),2&t){var n=m.lc(5);m.tc("listObservable",n.votesDataObservable)("columns",n.columnDefinition)("filterProps",n.filterProps)("allowProjector",!1)("fullScreen",!0)("vScrollFixed",-1),m.Gb(1),m.tc("pblNgridHeaderCellDef","*"),m.Gb(1),m.tc("pblNgridCellDef","user"),m.Gb(1),m.tc("pblNgridCellDef","vote")}}function U(t,e){1&t&&(m.Zb(0,"div"),m.Sc(1),m.mc(2,"translate"),m.Yb()),2&t&&(m.Gb(1),m.Uc(" ",m.nc(2,1,"The individual votes were anonymized.")," "))}function z(t,e){if(1&t&&(m.Zb(0,"div",16),m.Zb(1,"h2"),m.Sc(2),m.mc(3,"translate"),m.Yb(),m.Qc(4,F,4,9,"os-list-view-table",17),m.Qc(5,U,3,3,"div",2),m.Yb()),2&t){var n=m.lc(4);m.Gb(2),m.Tc(m.nc(3,3,"Single votes")),m.Gb(2),m.tc("ngIf",n.votesDataObservable),m.Gb(1),m.tc("ngIf",!n.votesDataObservable)}}function K(t,e){if(1&t&&(m.Zb(0,"div"),m.Ub(1,"os-motion-poll-detail-content",14),m.Qc(2,z,6,5,"div",15),m.Yb()),2&t){var n=m.lc(3);m.Gb(1),m.tc("poll",n.poll)("chartData",n.chartDataSubject),m.Gb(1),m.tc("ngIf","named"===n.poll.type)}}function B(t,e){1&t&&(m.Zb(0,"span"),m.Sc(1,", "),m.Yb())}function X(t,e){if(1&t&&(m.Zb(0,"span"),m.Sc(1),m.mc(2,"translate"),m.Qc(3,B,2,0,"span",2),m.Yb()),2&t){var n=e.$implicit,o=e.index,r=m.lc(4);m.Gb(1),m.Uc(" ",m.nc(2,2,n.getTitle()),""),m.Gb(2),m.tc("ngIf",o<r.poll.groups.length-1)}}function E(t,e){if(1&t&&(m.Zb(0,"small"),m.Sc(1),m.mc(2,"translate"),m.Qc(3,X,4,4,"span",25),m.Yb()),2&t){var n=m.lc(3);m.Gb(1),m.Uc(" ",m.nc(2,2,"Groups"),": "),m.Gb(2),m.tc("ngForOf",n.poll.groups)}}function W(t,e){if(1&t&&(m.Xb(0),m.Zb(1,"h1"),m.Sc(2),m.mc(3,"translate"),m.Yb(),m.Zb(4,"div"),m.Qc(5,V,3,3,"span",2),m.Zb(6,"span"),m.Sc(7),m.mc(8,"translate"),m.Yb(),m.Yb(),m.Qc(9,j,3,3,"p",2),m.Qc(10,K,3,3,"div",2),m.Zb(11,"div",13),m.Qc(12,E,4,4,"small",2),m.Zb(13,"small"),m.Sc(14),m.mc(15,"translate"),m.mc(16,"translate"),m.Yb(),m.Yb(),m.Wb()),2&t){var n=m.lc(2);m.Gb(2),m.Tc(m.nc(3,8,n.poll.title)),m.Gb(3),m.tc("ngIf","analog"!==n.poll.type),m.Gb(2),m.Uc(" ",m.nc(8,10,n.poll.stateVerbose)," "),m.Gb(2),m.tc("ngIf",!n.poll.hasVotes||!n.poll.stateHasVotes),m.Gb(1),m.tc("ngIf",n.poll.stateHasVotes&&(n.hasPerms()||n.poll.isPublished)),m.Gb(2),m.tc("ngIf",n.poll.groups&&n.poll.type&&"analog"!==n.poll.type),m.Gb(2),m.Vc("",m.nc(15,12,"100% base"),": ",m.nc(16,14,n.poll.percentBaseVerbose),"")}}function q(t,e){if(1&t&&m.Qc(0,W,17,16,"ng-container",2),2&t){var n=m.lc();m.tc("ngIf",n.poll)}}function H(t,e){if(1&t&&m.Ub(0,"os-projector-button",26),2&t){var n=m.lc();m.tc("menuItem",!0)("object",n.poll)}}function $(t,e){if(1&t){var n=m.ac();m.Zb(0,"button",27),m.hc("click",(function(){m.Ic(n);var t=m.lc();return t.openDialog(t.poll)})),m.Zb(1,"mat-icon"),m.Sc(2,"edit"),m.Yb(),m.Zb(3,"span"),m.Sc(4),m.mc(5,"translate"),m.Yb(),m.Yb()}2&t&&(m.Gb(4),m.Tc(m.nc(5,1,"Edit")))}function J(t,e){if(1&t){var n=m.ac();m.Zb(0,"button",27),m.hc("click",(function(){return m.Ic(n),m.lc().pseudoanonymizePoll()})),m.Zb(1,"mat-icon"),m.Sc(2,"warning"),m.Yb(),m.Zb(3,"span"),m.Sc(4),m.mc(5,"translate"),m.Yb(),m.Yb()}2&t&&(m.Gb(4),m.Tc(m.nc(5,1,"Anonymize votes")))}function tt(t,e){if(1&t){var n=m.ac();m.Zb(0,"button",27),m.hc("click",(function(){return m.Ic(n),m.lc().deletePoll()})),m.Zb(1,"mat-icon",28),m.Sc(2,"delete"),m.Yb(),m.Zb(3,"span"),m.Sc(4),m.mc(5,"translate"),m.Yb(),m.Yb()}2&t&&(m.Gb(4),m.Tc(m.nc(5,1,"Delete")))}var et,nt,ot,rt=((et=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,r,a,c,i,l,s,u,b,p,f,d){var v;return _classCallCheck(this,n),(v=e.call(this,t,o,r,a,c,i,l,s,u,b)).operator=f,v.router=d,v.columnDefinition=[{prop:"user",width:"auto",label:"Participant"},{prop:"vote",width:"auto",label:"Vote"}],v.filterProps=["user.getFullName","valueVerbose"],p.get("users_activate_vote_weight").subscribe((function(t){return v.isVoteWeightActive=t})),v}return _createClass(n,[{key:"createVotesData",value:function(){this.setVotesData(this.poll.options[0].votes)}},{key:"openDialog",value:function(){this.pollDialog.openDialog(this.poll)}},{key:"onDeleted",value:function(){this.router.navigate(["motions",this.poll.motion_id])}},{key:"hasPerms",value:function(){return this.operator.hasPerms(i.b.motionsCanManagePolls)}}]),n}(v.a)).\u0275fac=function(t){return new(t||et)(m.Tb(h.d),m.Tb(g.k),m.Tb(y.a),m.Tb(l.a),m.Tb(c.a),m.Tb(u.a),m.Tb(p.a),m.Tb(f.a),m.Tb(d.a),m.Tb(s.a),m.Tb(b.a),m.Tb(i.a),m.Tb(c.f))},et.\u0275cmp=m.Nb({type:et,selectors:[["os-motion-poll-detail"]],features:[m.Db],decls:15,vars:10,consts:[[3,"goBack","nav"],[1,"title-slot"],[4,"ngIf"],["class","menu-slot",4,"osPerms"],[1,"os-card","spacer-bottom-60"],[3,"ngTemplateOutlet"],["viewTemplate",""],["pollDetailMenu","matMenu"],[3,"menuItem","object",4,"osPerms"],["mat-menu-item","",3,"click",4,"osPerms"],["mat-menu-item","",3,"click",4,"osPerms","osPermsAnd"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],[1,"poll-content"],[3,"poll","chartData"],["class","named-result-table",4,"ngIf"],[1,"named-result-table"],["class","single-votes-table","listStorageKey","motion-poll-vote",3,"listObservable","columns","filterProps","allowProjector","fullScreen","vScrollFixed",4,"ngIf"],["listStorageKey","motion-poll-vote",1,"single-votes-table",3,"listObservable","columns","filterProps","allowProjector","fullScreen","vScrollFixed"],[4,"pblNgridHeaderCellDef"],[4,"pblNgridCellDef"],["class","vote-cell",4,"pblNgridCellDef"],[1,"user-subtitle"],[1,"vote-cell"],[1,"vote-cell-icon-container",3,"ngClass"],[4,"ngFor","ngForOf"],[3,"menuItem","object"],["mat-menu-item","",3,"click"],["color","warn"]],template:function(t,e){if(1&t&&(m.Zb(0,"os-head-bar",0),m.Zb(1,"div",1),m.Qc(2,D,3,4,"h2",2),m.Yb(),m.Qc(3,I,4,1,"div",3),m.Yb(),m.Zb(4,"mat-card",4),m.Vb(5,5),m.Yb(),m.Qc(6,q,1,1,"ng-template",null,6,m.Rc),m.Zb(8,"mat-menu",null,7),m.Qc(10,H,1,2,"os-projector-button",8),m.Qc(11,$,6,3,"button",9),m.Qc(12,J,6,3,"button",10),m.Ub(13,"mat-divider"),m.Qc(14,tt,6,3,"button",9),m.Yb()),2&t){var n=m.Ec(7);m.tc("goBack",!0)("nav",!1),m.Gb(2),m.tc("ngIf",e.poll),m.Gb(1),m.tc("osPerms","motions.can_manage_polls"),m.Gb(2),m.tc("ngTemplateOutlet",n),m.Gb(5),m.tc("osPerms","core.can_manage_projector"),m.Gb(1),m.tc("osPerms","motions.can_manage_polls"),m.Gb(1),m.tc("osPerms","motions.can_manage_polls")("osPermsAnd",e.poll&&"named"===e.poll.type),m.Gb(2),m.tc("osPerms","motions.can_manage_polls")}},directives:[_.a,o.t,S.a,k.a,o.A,C.f,G.a,P.b,C.e,w.a,O.a,Y.a,T.h,T.c,o.q,o.s,Z.a,C.c],pipes:[g.j],styles:[".yes{color:#4caf50}.no{color:#cc6c5b}.abstain{color:#a6a6a6}.voted-yes{background-color:#4caf50;color:#fff}.voted-no{background-color:#cc6c5b;color:#fff}.voted-abstain{background-color:#a6a6a6;color:#fff}.start-poll-button{color:#4caf50}.stop-poll-button{color:#ff5252}.publish-poll-button{color:#e6b100}.poll-content{text-align:right;display:grid;padding-top:20px}.named-result-table{grid-area:names}.named-result-table .mat-form-field{font-size:14px;width:100%}.named-result-table .vote-cell,.named-result-table .vote-cell .vote-cell-icon-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.named-result-table .vote-cell .vote-cell-icon-container{margin-right:7px}.single-votes-table{display:block;height:500px}.single-votes-table .list-view-frame{height:100%}.openslides-theme .pbl-ngrid-no-data{top:10%}"],encapsulation:2,changeDetection:0}),et),at=[{path:"new",component:rt},{path:":id",component:rt}],ct=((ot=function t(){_classCallCheck(this,t)}).\u0275mod=m.Rb({type:ot}),ot.\u0275inj=m.Qb({factory:function(t){return new(t||ot)},imports:[[c.j.forChild(at)],c.j]}),ot),it=((nt=function t(){_classCallCheck(this,t)}).\u0275mod=m.Rb({type:nt}),nt.\u0275inj=m.Qb({factory:function(t){return new(t||nt)},imports:[[o.c,r.a,ct,a.PollsModule]]}),nt)},wL0i:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,r,a){var c;return _classCallCheck(this,n),(c=e.call(this,t,o,r)).storage=a,c.canMultiSelect=!1,c._multiSelectMode=!1,c.singleButtonWidth="40px",c.badgeButtonWidth="45px",c.selectedRows=[],c}return _createClass(n,[{key:"onDataSourceChange",value:function(t){this.dataSource=t}},{key:"toggleMultiSelect",value:function(){!this.canMultiSelect||this.isMultiSelect?(this._multiSelectMode=!1,this.deselectAll()):this._multiSelectMode=!0}},{key:"selectAll",value:function(){var t;(t=this.dataSource.selection).select.apply(t,_toConsumableArray(this.dataSource.filteredData))}},{key:"deselectAll",value:function(){this.dataSource&&this.dataSource.selection.clear()}},{key:"isMultiSelect",get:function(){return this._multiSelectMode}}]),n}(n("mV3u").a)}}]);