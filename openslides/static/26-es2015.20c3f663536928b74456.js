(window.webpackJsonp=window.webpackJsonp||[]).push([[26,36],{"1Cmi":function(t,e,o){"use strict";o.r(e),o.d(e,"ProjectorModule",(function(){return Oe}));var n=o("ofXK"),c=o("tyNb"),r=o("OwvW"),i=o("mrSG"),a=o("5+WD"),s=o("PqYM"),l=o("+WZz"),b=o("KXMp"),u=o("L/zN"),p=o("3moa"),d=o("2aHC"),m=o("F48D"),g=o("v/c4"),h=o("P5St"),f=o("Izkr"),j=o("mV3u"),v=o("0QsF"),Y=o("3Pt+"),Z=o("0IaG"),S=o("+KbT"),w=o("fXoL"),C=o("jhN1"),T=o("dNgK"),G=o("sYmb"),k=o("kmnG"),P=o("qFsG"),x=o("IZUe"),O=o("bTqV");let y=(()=>{class t extends j.a{constructor(t,e,o,n,c,r,i){super(t,n,e),this.formBuilder=c,this.durationService=r,this.data=i,this.defaultTime=o.instant("projector_default_countdown")}ngOnInit(){const t=this.data.duration||this.durationService.durationToString(this.defaultTime,"m"),e=this.data.title||`${this.translate.instant("Countdown")} ${this.data.count+1}`;this.countdownForm=this.formBuilder.group({title:[e,Y.G.required],description:[this.data.description],duration:[t,Y.G.required]})}}return t.\u0275fac=function(e){return new(e||t)(w.Tb(C.d),w.Tb(T.a),w.Tb(S.a),w.Tb(G.k),w.Tb(Y.f),w.Tb(d.a),w.Tb(Z.a))},t.\u0275cmp=w.Nb({type:t,selectors:[["os-countdown-dialog"]],features:[w.Db],decls:24,vars:22,consts:[["mat-dialog-title",""],[3,"formGroup"],["mat-dialog-content",""],["matInput","","osAutofocus","","formControlName","title","required","",3,"placeholder"],["matInput","","formControlName","description",3,"placeholder"],["matInput","","formControlName","duration","required","",3,"placeholder"],["mat-dialog-actions",""],["type","submit","mat-button","","color","accent",3,"mat-dialog-close","disabled"],["type","button","mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(w.Zb(0,"h1",0),w.Zb(1,"span"),w.Sc(2),w.mc(3,"translate"),w.Yb(),w.Yb(),w.Zb(4,"form",1),w.Zb(5,"div",2),w.Zb(6,"mat-form-field"),w.Ub(7,"input",3),w.mc(8,"translate"),w.Yb(),w.Zb(9,"mat-form-field"),w.Ub(10,"input",4),w.mc(11,"translate"),w.Yb(),w.Zb(12,"mat-form-field"),w.Ub(13,"input",5),w.mc(14,"translate"),w.Yb(),w.Yb(),w.Zb(15,"div",6),w.Zb(16,"button",7),w.Zb(17,"span"),w.Sc(18),w.mc(19,"translate"),w.Yb(),w.Yb(),w.Zb(20,"button",8),w.Zb(21,"span"),w.Sc(22),w.mc(23,"translate"),w.Yb(),w.Yb(),w.Yb(),w.Yb()),2&t&&(w.Gb(2),w.Tc(w.nc(3,10,"Countdown")),w.Gb(2),w.tc("formGroup",e.countdownForm),w.Gb(3),w.uc("placeholder",w.nc(8,12,"Countdown title")),w.Gb(3),w.uc("placeholder",w.nc(11,14,"Countdown description")),w.Gb(3),w.uc("placeholder",w.nc(14,16,"Countdown time")),w.Gb(3),w.tc("mat-dialog-close",e.countdownForm.value)("disabled",!e.countdownForm.valid),w.Gb(2),w.Tc(w.nc(19,18,"Save")),w.Gb(2),w.tc("mat-dialog-close",null),w.Gb(2),w.Tc(w.nc(23,20,"Cancel")))},directives:[Z.i,Y.I,Y.t,Y.k,Z.f,k.c,P.b,Y.c,x.a,Y.s,Y.i,Y.D,Z.c,O.b,Z.d],pipes:[G.j],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();var _=o("kYDr");let I=(()=>{class t{constructor(t){this.projectorService=t}getCurrentSpeakerChyronProjectorElement(){return{name:"agenda/current-speaker-chyron",stable:!0,getIdentifiers:()=>["name"]}}isProjectedOn(t){return this.projectorService.isProjectedOn(this.getCurrentSpeakerChyronProjectorElement(),t.projector)}toggleOn(t){return Object(i.a)(this,void 0,void 0,(function*(){this.isProjectedOn(t)?yield this.projectorService.removeFrom(t.projector,this.getCurrentSpeakerChyronProjectorElement()):yield this.projectorService.projectOn(t.projector,this.getCurrentSpeakerChyronProjectorElement())}))}}return t.\u0275fac=function(e){return new(e||t)(w.dc(l.a))},t.\u0275prov=w.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var M=o("fB2i");let E=(()=>{class t extends j.a{constructor(t,e,o,n,c){super(t,o,e),this.formBuilder=n,this.data=c}ngOnInit(){this.messageForm=this.formBuilder.group({text:[this.data.text,Y.G.required]})}}return t.\u0275fac=function(e){return new(e||t)(w.Tb(C.d),w.Tb(T.a),w.Tb(G.k),w.Tb(Y.f),w.Tb(Z.a))},t.\u0275cmp=w.Nb({type:t,selectors:[["os-message-dialog"]],features:[w.Db],decls:16,vars:14,consts:[["mat-dialog-title",""],[3,"formGroup"],["mat-dialog-content",""],["formControlName","text",3,"init"],["mat-dialog-actions",""],["type","submit","mat-button","","color","accent",3,"mat-dialog-close","disabled"],["type","button","mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(w.Zb(0,"h1",0),w.Zb(1,"span"),w.Sc(2),w.mc(3,"translate"),w.Yb(),w.Yb(),w.Zb(4,"form",1),w.Zb(5,"div",2),w.Ub(6,"editor",3),w.Yb(),w.Zb(7,"div",4),w.Zb(8,"button",5),w.Zb(9,"span"),w.Sc(10),w.mc(11,"translate"),w.Yb(),w.Yb(),w.Zb(12,"button",6),w.Zb(13,"span"),w.Sc(14),w.mc(15,"translate"),w.Yb(),w.Yb(),w.Yb(),w.Yb()),2&t&&(w.Gb(2),w.Tc(w.nc(3,8,"Message")),w.Gb(2),w.tc("formGroup",e.messageForm),w.Gb(2),w.tc("init",e.tinyMceSettings),w.Gb(2),w.tc("mat-dialog-close",e.messageForm.value)("disabled",!e.messageForm.valid),w.Gb(2),w.Tc(w.nc(11,10,"Save")),w.Gb(2),w.tc("mat-dialog-close",null),w.Gb(2),w.Tc(w.nc(15,12,"Cancel")))},directives:[Z.i,Y.I,Y.t,Y.k,Z.f,M.a,Y.s,Y.i,Z.c,O.b,Z.d],pipes:[G.j],styles:[""]}),t})();var R=o("3UWI"),D=o("/Sqw"),F=o("PAIG"),Q=o("GIVM");let N=(()=>{class t{constructor(t){this.projectorService=t}getClockProjectorElement(){return{name:"core/clock",stable:!0,getIdentifiers:()=>["name"]}}isProjectedOn(t){return this.projectorService.isProjectedOn(this.getClockProjectorElement(),t.projector)}setProjectedOn(t,e){return Object(i.a)(this,void 0,void 0,(function*(){const o=this.isProjectedOn(t);e&&!o?yield this.projectorService.projectOn(t.projector,this.getClockProjectorElement()):!e&&o&&(yield this.projectorService.removeFrom(t.projector,this.getClockProjectorElement()))}))}}return t.\u0275fac=function(e){return new(e||t)(w.dc(l.a))},t.\u0275prov=w.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();o("Ri39");var z=o("f0Cb"),L=o("QibW"),B=o("5RNC"),q=o("bSwM"),A=o("d3UM"),U=o("FKr1"),$=o("Qu3c"),H=o("NFeN");const V=["preview"];function W(t,e){1&t&&(w.Zb(0,"mat-hint"),w.Zb(1,"span"),w.Sc(2),w.mc(3,"translate"),w.Yb(),w.Yb()),2&t&&(w.Gb(2),w.Tc(w.nc(3,1,"Required")))}function X(t,e){if(1&t){const t=w.ac();w.Zb(0,"mat-radio-button",29),w.hc("change",(function(){return w.Ic(t),w.lc(2).onCustomAspectRatio(!1)})),w.Sc(1),w.Yb()}if(2&t){const t=e.$implicit;w.tc("value",t),w.Gb(1),w.Uc(" ",t," ")}}function K(t,e){if(1&t){const t=w.ac();w.Zb(0,"mat-form-field"),w.Zb(1,"input",30),w.hc("change",(function(){return w.Ic(t),w.lc(2).setCustomAspectRatio()})),w.mc(2,"translate"),w.Yb(),w.Yb()}if(2&t){const t=w.lc(2);w.Gb(1),w.uc("placeholder",w.nc(2,2,"Custom aspect ratio")),w.tc("value",t.previewProjector.aspectRatio)}}function J(t,e){if(1&t&&(w.Zb(0,"mat-option",31),w.Sc(1),w.mc(2,"translate"),w.Yb()),2&t){const t=e.$implicit;w.tc("value",t.id),w.Gb(1),w.Uc(" ",w.nc(2,2,t.getTitle())," ")}}function tt(t,e){if(1&t){const t=w.ac();w.Zb(0,"div",32),w.Zb(1,"div",33),w.Zb(2,"mat-form-field",34),w.Zb(3,"span"),w.Sc(4),w.mc(5,"translate"),w.Yb(),w.Ub(6,"input",35),w.Yb(),w.Yb(),w.Zb(7,"div",18),w.Zb(8,"button",36),w.hc("click",(function(){w.Ic(t);const o=e.form;return w.lc(2).resetField(o)})),w.mc(9,"translate"),w.Zb(10,"mat-icon"),w.Sc(11,"replay"),w.Yb(),w.Yb(),w.Yb(),w.Yb()}if(2&t){const t=e.title,o=e.form;w.Gb(4),w.Tc(w.nc(5,3,t)),w.Gb(2),w.tc("formControlName",o),w.Gb(2),w.uc("matTooltip",w.nc(9,5,"Reset"))}}function et(t,e){}function ot(t,e){}function nt(t,e){}function ct(t,e){}function rt(t,e){}function it(t,e){}function at(t,e){}const st=function(){return{title:"Foreground color",form:"color"}},lt=function(){return{title:"Background color",form:"background_color"}},bt=function(){return{title:"Header background color",form:"header_background_color"}},ut=function(){return{title:"Header font color",form:"header_font_color"}},pt=function(){return{title:"Headline color",form:"header_h1_color"}},dt=function(){return{title:"Chyron background color",form:"chyron_background_color"}},mt=function(){return{title:"Chyron font color",form:"chyron_font_color"}};function gt(t,e){if(1&t){const t=w.ac();w.Zb(0,"div",10),w.Zb(1,"mat-form-field"),w.Ub(2,"input",11),w.mc(3,"translate"),w.Qc(4,W,4,3,"mat-hint",12),w.Yb(),w.Zb(5,"h3"),w.Sc(6),w.mc(7,"translate"),w.Yb(),w.Zb(8,"div"),w.Zb(9,"mat-radio-group",13),w.Qc(10,X,2,2,"mat-radio-button",14),w.Zb(11,"mat-radio-button",15),w.hc("change",(function(){return w.Ic(t),w.lc().onCustomAspectRatio(!0)})),w.Sc(12),w.mc(13,"translate"),w.Yb(),w.Qc(14,K,3,4,"mat-form-field",12),w.Yb(),w.Yb(),w.Zb(15,"div",16),w.Ub(16,"mat-slider",17),w.Zb(17,"div",18),w.Zb(18,"mat-form-field"),w.Ub(19,"input",19),w.Yb(),w.Yb(),w.Yb(),w.Zb(20,"div"),w.Zb(21,"div"),w.Zb(22,"mat-checkbox",20),w.Zb(23,"span"),w.Sc(24),w.mc(25,"translate"),w.Yb(),w.Yb(),w.Yb(),w.Zb(26,"div"),w.Zb(27,"mat-checkbox",21),w.Zb(28,"span"),w.Sc(29),w.mc(30,"translate"),w.Yb(),w.Yb(),w.Yb(),w.Zb(31,"div"),w.Zb(32,"mat-checkbox",22),w.Zb(33,"span"),w.Sc(34),w.mc(35,"translate"),w.Yb(),w.Yb(),w.Yb(),w.Zb(36,"div"),w.Zb(37,"mat-checkbox",23),w.Zb(38,"span"),w.Sc(39),w.mc(40,"translate"),w.Yb(),w.Yb(),w.Yb(),w.Yb(),w.Zb(41,"h3"),w.Sc(42),w.mc(43,"translate"),w.Yb(),w.Zb(44,"mat-select",24),w.mc(45,"translate"),w.Qc(46,J,3,4,"mat-option",25),w.Yb(),w.Zb(47,"div",26),w.Qc(48,tt,12,7,"ng-template",null,27,w.Rc),w.Qc(50,et,0,0,"ng-template",28),w.Qc(51,ot,0,0,"ng-template",28),w.Qc(52,nt,0,0,"ng-template",28),w.Qc(53,ct,0,0,"ng-template",28),w.Qc(54,rt,0,0,"ng-template",28),w.Qc(55,it,0,0,"ng-template",28),w.Qc(56,at,0,0,"ng-template",28),w.Yb(),w.Yb()}if(2&t){const t=w.Ec(49),e=w.lc();w.Gb(2),w.uc("placeholder",w.nc(3,37,"Name")),w.Gb(2),w.tc("ngIf",!e.updateForm.controls.name.valid),w.Gb(2),w.Tc(w.nc(7,39,"Resolution and size")),w.Gb(4),w.tc("ngForOf",e.defaultAspectRatio),w.Gb(2),w.Uc(" ",w.nc(13,41,"custom")," "),w.Gb(2),w.tc("ngIf",e.customAspectRatio),w.Gb(2),w.tc("thumbLabel",!0)("min",e.minWidth)("max",e.maxResolution)("step",e.resolutionChangeStep)("value",e.updateForm.value.width),w.Gb(3),w.tc("min",e.minWidth)("max",e.maxResolution)("step",e.resolutionChangeStep)("value",e.updateForm.value.width),w.Gb(5),w.Tc(w.nc(25,43,"Show header and footer")),w.Gb(5),w.Tc(w.nc(30,45,"Show title")),w.Gb(5),w.Tc(w.nc(35,47,"Show logo")),w.Gb(5),w.Tc(w.nc(40,49,"Show clock")),w.Gb(3),w.Tc(w.nc(43,51,"Projection defaults")),w.Gb(2),w.uc("placeholder",w.nc(45,53,"Projection defaults")),w.tc("multiple",!0),w.Gb(2),w.tc("ngForOf",e.projectionDefaults),w.Gb(4),w.tc("ngTemplateOutlet",t)("ngTemplateOutletContext",w.yc(55,st)),w.Gb(1),w.tc("ngTemplateOutlet",t)("ngTemplateOutletContext",w.yc(56,lt)),w.Gb(1),w.tc("ngTemplateOutlet",t)("ngTemplateOutletContext",w.yc(57,bt)),w.Gb(1),w.tc("ngTemplateOutlet",t)("ngTemplateOutletContext",w.yc(58,ut)),w.Gb(1),w.tc("ngTemplateOutlet",t)("ngTemplateOutletContext",w.yc(59,pt)),w.Gb(1),w.tc("ngTemplateOutlet",t)("ngTemplateOutletContext",w.yc(60,dt)),w.Gb(1),w.tc("ngTemplateOutlet",t)("ngTemplateOutletContext",w.yc(61,mt))}}function ht(t,e){if(1&t&&w.Ub(0,"os-projector",37,38),2&t){const t=w.lc();w.tc("projector",t.previewProjector)}}let ft=(()=>{class t extends j.a{constructor(t,e,o,n,c,r,i,a,s,l){super(t,e,o),this.projector=c,this.dialogRef=r,this.repo=i,this.projectionDefaultRepo=a,this.clockSlideService=s,this.cd=l,this.defaultAspectRatio=["4:3","16:9","16:10"],this.maxResolution=2e3,this.minWidth=800,this.resolutionChangeStep=10,this.aspectRatioRe=RegExp("[1-9]+[0-9]*:[1-9]+[0-9]*"),c&&(this.previewProjector=new Q.a(c.getModel()),this.defaultAspectRatio.some(t=>t===this.previewProjector.aspectRatio)||(this.customAspectRatio=!0)),this.updateForm=n.group({name:["",Y.G.required],aspectRatio:["",[Y.G.required,Y.G.pattern(this.aspectRatioRe)]],width:[0,Y.G.required],projectiondefaults_id:[[]],clock:[],color:["",Y.G.required],background_color:["",Y.G.required],header_background_color:["",Y.G.required],header_font_color:["",Y.G.required],header_h1_color:["",Y.G.required],chyron_background_color:["",Y.G.required],chyron_font_color:["",Y.G.required],show_header_footer:[],show_title:[],show_logo:[]}),this.subscriptions.push(this.updateForm.valueChanges.pipe(Object(R.a)(100)).subscribe(()=>{this.onChangeForm()}))}ngOnInit(){this.projectionDefaults=this.projectionDefaultRepo.getViewModelList(),this.subscriptions.push(this.projectionDefaultRepo.getViewModelListObservable().subscribe(t=>this.projectionDefaults=t)),this.projector&&(this.updateForm.patchValue(this.projector.projector),this.updateForm.patchValue({name:this.translate.instant(this.projector.name),clock:this.clockSlideService.isProjectedOn(this.projector),aspectRatio:this.projector.aspectRatio}))}onSubmitProjector(){return Object(i.a)(this,void 0,void 0,(function*(){yield this.applyChanges(),this.dialogRef.close(!0)}))}applyChanges(){return Object(i.a)(this,void 0,void 0,(function*(){const t=new Q.a;Object.assign(t,this.updateForm.value);try{yield this.clockSlideService.setProjectedOn(this.projector,this.updateForm.value.clock),yield this.repo.update(t,this.projector)}catch(e){this.raiseError(e)}}))}onChangeForm(){this.previewProjector&&this.projector&&this.updateForm.valid&&(Object.assign(this.previewProjector,this.updateForm.value),this.preview.setProjector(this.previewProjector),this.cd.markForCheck())}resetField(t){const e={};e[t]=this.projector[t],this.updateForm.patchValue(e)}onCustomAspectRatio(t){this.customAspectRatio=t}setCustomAspectRatio(){const t=this.updateForm.get("aspectRatio").value.match(this.aspectRatioRe);if(t&&t[0]){const e=t[0];this.updateForm.get("aspectRatio").setValue(e)}}}return t.\u0275fac=function(e){return new(e||t)(w.Tb(C.d),w.Tb(G.k),w.Tb(T.a),w.Tb(Y.f),w.Tb(Z.a),w.Tb(Z.h),w.Tb(p.a),w.Tb(D.a),w.Tb(N),w.Tb(w.h))},t.\u0275cmp=w.Nb({type:t,selectors:[["os-projector-edit-dialog"]],viewQuery:function(t,e){var o;1&t&&w.Zc(V,!0),2&t&&w.Dc(o=w.ic())&&(e.preview=o.first)},features:[w.Db],decls:27,vars:19,consts:[["mat-dialog-title",""],[1,"settings-grid"],[3,"formGroup","ngSubmit"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],["type","submit","mat-button","","color","accent"],["type","button","mat-button","",3,"mat-dialog-close"],["type","button","mat-button","",3,"click"],[1,"preview-container"],[3,"projector",4,"ngIf"],["mat-dialog-content",""],["formControlName","name","matInput","","required","",3,"placeholder"],[4,"ngIf"],["formControlName","aspectRatio","name","aspectRatio"],[3,"value","change",4,"ngFor","ngForOf"],[3,"change"],[1,"spacer-top-20","grid-form"],["formControlName","width",1,"grid-start",3,"thumbLabel","min","max","step","value"],[1,"grid-end"],["matInput","","type","number","formControlName","width",3,"min","max","step","value"],["formControlName","show_header_footer"],["formControlName","show_title"],["formControlName","show_logo"],["formControlName","clock"],["formControlName","projectiondefaults_id",3,"placeholder","multiple"],[3,"value",4,"ngFor","ngForOf"],[1,"spacer-top-10"],["colorFormField",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"value","change"],["matInput","","type","text","formControlName","aspectRatio",3,"value","placeholder","change"],[3,"value"],[1,"grid-form"],[1,"grid-start"],[1,"color-picker-form"],["matInput","","type","color",3,"formControlName"],["type","button","mat-icon-button","",3,"matTooltip","click"],[3,"projector"],["preview",""]],template:function(t,e){1&t&&(w.Zb(0,"h1",0),w.Zb(1,"span"),w.Sc(2),w.mc(3,"translate"),w.Yb(),w.Yb(),w.Zb(4,"div",1),w.Zb(5,"form",2),w.hc("ngSubmit",(function(){return e.onSubmitProjector()})),w.Qc(6,gt,57,62,"div",3),w.Zb(7,"div",4),w.Ub(8,"mat-divider"),w.Zb(9,"button",5),w.Zb(10,"span"),w.Sc(11),w.mc(12,"translate"),w.Yb(),w.Yb(),w.Zb(13,"button",6),w.Zb(14,"span"),w.Sc(15),w.mc(16,"translate"),w.Yb(),w.Yb(),w.Zb(17,"button",7),w.hc("click",(function(){return e.applyChanges()})),w.Zb(18,"span"),w.Sc(19),w.mc(20,"translate"),w.Yb(),w.Yb(),w.Yb(),w.Yb(),w.Zb(21,"div"),w.Zb(22,"h3"),w.Sc(23),w.mc(24,"translate"),w.Yb(),w.Zb(25,"div",8),w.Qc(26,ht,2,1,"os-projector",9),w.Yb(),w.Yb(),w.Yb()),2&t&&(w.Gb(2),w.Tc(w.nc(3,9,"Edit projector")),w.Gb(3),w.tc("formGroup",e.updateForm),w.Gb(1),w.tc("ngIf",e.projector),w.Gb(5),w.Tc(w.nc(12,11,"Save")),w.Gb(2),w.tc("mat-dialog-close",null),w.Gb(2),w.Tc(w.nc(16,13,"Cancel")),w.Gb(4),w.Tc(w.nc(20,15,"Apply")),w.Gb(4),w.Tc(w.nc(24,17,"Preview")),w.Gb(3),w.tc("ngIf",e.previewProjector))},directives:[Z.i,Y.I,Y.t,Y.k,n.t,Z.c,z.a,O.b,Z.d,Z.f,k.c,Y.c,P.b,Y.s,Y.i,Y.D,L.b,n.s,L.a,B.a,Y.y,q.a,A.a,n.A,k.f,U.n,$.c,H.a,F.a],pipes:[G.j],styles:["form{overflow:hidden}.settings-grid{display:grid;grid-gap:10px}@media (min-width:960px){.settings-grid{grid-template-columns:40% 60%}}.settings-grid .mat-form-field{width:100%}.grid-form{width:100%;display:grid;grid-template-columns:auto 50px}.grid-form .grid-start{grid-column-start:1;grid-column-end:1;margin:auto 0;width:100%}.grid-form .grid-end{grid-column-start:2;grid-column-end:2;margin:auto 0}.grid-form .color-picker-form .mat-form-field-wrapper{padding-bottom:0}.grid-form .mat-form-field-underline{display:none}.preview-container{border:1px solid #d3d3d3}.no-markup{color:inherit;text-decoration:inherit}.mat-dialog-actions{display:block}"],encapsulation:2,changeDetection:0}),t})();var jt=o("mksl"),vt=o("3Xi6"),Yt=o("STbY"),Zt=o("m1Ob"),St=o("B5uJ"),wt=o("7EHt"),Ct=o("MutI"),Tt=o("SSyl"),Gt=o("smbJ");function kt(t,e){if(1&t){const t=w.ac();w.Zb(0,"button",3),w.hc("click",(function(){w.Ic(t);const e=w.lc(2).$implicit;return w.lc(2).fullscreen(e)})),w.Zb(1,"mat-icon"),w.Sc(2,"check_box_outline_blank"),w.Yb(),w.Yb()}}function Pt(t,e){if(1&t){const t=w.ac();w.Zb(0,"button",3),w.hc("click",(function(){w.Ic(t);const e=w.lc(2).$implicit;return w.lc(2).fullscreen(e)})),w.Zb(1,"mat-icon"),w.Sc(2,"check_box"),w.Yb(),w.Yb()}}function xt(t,e){if(1&t&&(w.Zb(0,"div"),w.Qc(1,kt,3,0,"button",2),w.Qc(2,Pt,3,0,"button",2),w.Zb(3,"span"),w.Sc(4),w.mc(5,"translate"),w.Yb(),w.Yb()),2&t){const t=w.lc().$implicit;w.Gb(1),w.tc("ngIf",!t.fullscreen),w.Gb(1),w.tc("ngIf",!!t.fullscreen),w.Gb(2),w.Tc(w.nc(5,3,"fullscreen"))}}function Ot(t,e){if(1&t){const t=w.ac();w.Zb(0,"div"),w.Zb(1,"button",4),w.hc("click",(function(){w.Ic(t);const e=w.lc().$implicit;return w.lc(2).pdfBackward(e)})),w.Zb(2,"mat-icon"),w.Sc(3,"arrow_back"),w.Yb(),w.Yb(),w.Zb(4,"button",4),w.hc("click",(function(){w.Ic(t);const e=w.lc().$implicit;return w.lc(2).pdfForward(e)})),w.Zb(5,"mat-icon"),w.Sc(6,"arrow_forward"),w.Yb(),w.Yb(),w.Zb(7,"span"),w.Sc(8),w.mc(9,"translate"),w.Yb(),w.Sc(10),w.Ub(11,"br"),w.Zb(12,"button",3),w.hc("click",(function(){w.Ic(t);const e=w.lc().$implicit;return w.lc(2).zoom(e,"in")})),w.Zb(13,"mat-icon"),w.Sc(14,"zoom_in"),w.Yb(),w.Yb(),w.Zb(15,"button",3),w.hc("click",(function(){w.Ic(t);const e=w.lc().$implicit;return w.lc(2).zoom(e,"reset")})),w.Zb(16,"mat-icon"),w.Sc(17,"replay"),w.Yb(),w.Yb(),w.Zb(18,"button",3),w.hc("click",(function(){w.Ic(t);const e=w.lc().$implicit;return w.lc(2).zoom(e,"out")})),w.Zb(19,"mat-icon"),w.Sc(20,"zoom_out"),w.Yb(),w.Yb(),w.Yb()}if(2&t){const t=w.lc().$implicit,e=w.lc(2);w.Gb(1),w.tc("disabled",e.getPage(t)<=1),w.Gb(3),w.tc("disabled",e.getPage(t)>=e.getMediafile(t).pages),w.Gb(4),w.Tc(w.nc(9,5,"Page")),w.Gb(2),w.Vc(" ",e.getPage(t),"/",e.getMediafile(t).pages," ")}}function yt(t,e){if(1&t&&(w.Zb(0,"div"),w.Zb(1,"i"),w.Sc(2),w.Yb(),w.Qc(3,xt,6,5,"div",0),w.Qc(4,Ot,21,7,"div",0),w.Yb()),2&t){const t=e.$implicit,o=w.lc(2);w.Gb(2),w.Tc(o.getMediafile(t).getTitle()),w.Gb(1),w.tc("ngIf",o.getMediafile(t).isImage()),w.Gb(1),w.tc("ngIf",o.getMediafile(t).isPdf())}}function _t(t,e){if(1&t&&(w.Zb(0,"mat-expansion-panel"),w.Zb(1,"mat-expansion-panel-header"),w.Zb(2,"span"),w.Sc(3),w.mc(4,"translate"),w.Yb(),w.Yb(),w.Qc(5,yt,5,3,"div",1),w.Yb()),2&t){const t=w.lc();w.Gb(3),w.Tc(w.nc(4,2,"Media file")),w.Gb(2),w.tc("ngForOf",t.elements)}}let It=(()=>{class t extends j.a{constructor(t,e,o,n,c,r){super(t,e,o),this.mediafileRepo=n,this.slideManager=c,this.projectorService=r,this.elements=[]}set projector(t){this._projector=t,this.updateElements()}get projector(){return this._projector}updateElements(){this.elements=this.projector.elements.filter(t=>{if(t.name!==Gt.a.COLLECTIONSTRING||!t.id)return!1;const e=this.mediafileRepo.getViewModel(t.id);return!!e&&e.isProjectable()})}getMediafile(t){return this.mediafileRepo.getViewModel(t.id)}getPage(t){return t.page||1}pdfForward(t){this.getPage(t)<this.getMediafile(t).pages&&this.pdfSetPage(t,this.getPage(t)+1)}pdfBackward(t){this.getPage(t)>1&&this.pdfSetPage(t,this.getPage(t)-1)}pdfSetPage(t,e){this.getMediafile(t).pages>=e&&(t.page=e,this.updateElement(t))}zoom(t,e){"reset"===e?t.zoom=0:"in"===e?t.zoom=(t.zoom||0)+1:"out"===e&&(t.zoom=(t.zoom||0)-1),this.updateElement(t)}fullscreen(t){t.fullscreen=!t.fullscreen,this.updateElement(t)}updateElement(t){const e=this.slideManager.getIdentifiableProjectorElement(t);this.projectorService.updateElement(this.projector.projector,e).catch(this.raiseError)}}return t.\u0275fac=function(e){return new(e||t)(w.Tb(C.d),w.Tb(G.k),w.Tb(T.a),w.Tb(Tt.a),w.Tb(v.a),w.Tb(l.a))},t.\u0275cmp=w.Nb({type:t,selectors:[["os-presentation-control"]],inputs:{projector:"projector"},features:[w.Db],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["type","button","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-icon-button","",3,"click"],["type","button","mat-icon-button","",3,"disabled","click"]],template:function(t,e){1&t&&w.Qc(0,_t,6,4,"mat-expansion-panel",0),2&t&&w.tc("ngIf",e.elements.length)},directives:[n.t,wt.c,wt.g,n.s,O.b,H.a],pipes:[G.j],styles:[""]}),t})();var Mt=o("vYAO"),Et=o("AqIO"),Rt=o("6sZz"),Dt=(o("memo"),o("Wp6s")),Ft=o("Tp2j"),Qt=o("RY0B");function Nt(t,e){if(1&t){const t=w.ac();w.Zb(0,"button",7),w.hc("click",(function(e){return w.Ic(t),w.lc(2).start(e)})),w.Zb(1,"mat-icon"),w.Sc(2,"play_arrow"),w.Yb(),w.Yb()}}function zt(t,e){if(1&t){const t=w.ac();w.Zb(0,"button",7),w.hc("click",(function(e){return w.Ic(t),w.lc(2).pause(e)})),w.Zb(1,"mat-icon"),w.Sc(2,"pause"),w.Yb(),w.Yb()}}function Lt(t,e){if(1&t){const t=w.ac();w.Zb(0,"mat-card"),w.Zb(1,"div",1),w.Zb(2,"div",2),w.Ub(3,"os-projector-button",3),w.Yb(),w.Zb(4,"div",4),w.Sc(5),w.mc(6,"translate"),w.Yb(),w.Zb(7,"div",5),w.Zb(8,"button",6),w.hc("click",(function(){return w.Ic(t),w.lc().onBringDialog()})),w.mc(9,"translate"),w.Zb(10,"mat-icon"),w.Sc(11," open_in_new "),w.Yb(),w.Yb(),w.Zb(12,"button",7),w.hc("click",(function(){return w.Ic(t),w.lc().onEdit()})),w.Zb(13,"mat-icon"),w.Sc(14," edit "),w.Yb(),w.Yb(),w.Zb(15,"button",7),w.hc("click",(function(){return w.Ic(t),w.lc().onDelete()})),w.Zb(16,"mat-icon"),w.Sc(17," close "),w.Yb(),w.Yb(),w.Yb(),w.Zb(18,"div",8),w.Ub(19,"os-countdown-time",9),w.Zb(20,"div"),w.Zb(21,"button",10),w.hc("click",(function(e){return w.Ic(t),w.lc().stop(e)})),w.Zb(22,"mat-icon"),w.Sc(23,"stop"),w.Yb(),w.Yb(),w.Qc(24,Nt,3,0,"button",11),w.Qc(25,zt,3,0,"button",11),w.Yb(),w.Yb(),w.Yb(),w.Yb()}if(2&t){const t=w.lc();w.Gb(3),w.tc("object",t.countdown)("projector",t.projector),w.Gb(2),w.Tc(w.nc(6,9,t.countdown.getTitle())),w.Gb(3),w.uc("matTooltip",w.nc(9,11,"Open projection dialog")),w.Gb(11),w.tc("countdown",t.countdown)("warningTime",t.warningTime),w.Gb(2),w.tc("disabled",!t.canStop()),w.Gb(3),w.tc("ngIf",!t.countdown.running),w.Gb(1),w.tc("ngIf",t.countdown.running)}}let Bt=(()=>{class t extends j.a{constructor(t,e,o,n,c,r,i,a){super(t,e,o),this.repo=n,this.configService=c,this.promptService=r,this.projectionDialogService=i,this.storage=a,this.editEvent=new w.p,this.storageKey="projectorElementOptions",this.configService.get("agenda_countdown_warning_time").subscribe(t=>this.warningTime=t)}start(t){t.stopPropagation(),this.repo.start(this.countdown).catch(this.raiseError)}pause(t){t.stopPropagation(),this.repo.pause(this.countdown).catch(this.raiseError)}stop(t){t.stopPropagation(),this.repo.stop(this.countdown).catch(this.raiseError)}canStop(){return this.countdown.running||this.countdown.countdown_time!==this.countdown.default_time}onEdit(){this.editEvent.next(this.countdown)}onBringDialog(){this.projectionDialogService.openProjectDialogFor(this.countdown).then(t=>this.storeSettings(t),null)}onDelete(){return Object(i.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Delete countdown")+` ${this.translate.instant(this.countdown.title)}?`;(yield this.promptService.open("Are you sure?",t))&&this.repo.delete(this.countdown).then(()=>{},this.raiseError)}))}storeSettings(t){this.storage.set(this.storageKey,t)}}return t.\u0275fac=function(e){return new(e||t)(w.Tb(C.d),w.Tb(G.k),w.Tb(T.a),w.Tb(b.a),w.Tb(S.a),w.Tb(m.a),w.Tb(Rt.a),w.Tb(Et.a))},t.\u0275cmp=w.Nb({type:t,selectors:[["os-countdown-controls"]],inputs:{countdown:"countdown",projector:"projector"},outputs:{editEvent:"editEvent"},features:[w.Db],decls:1,vars:1,consts:[[4,"ngIf"],[1,"grid-wrapper"],[1,"projector-button"],[3,"object","projector"],[1,"title"],[1,"action-buttons"],["type","button","mat-icon-button","",1,"small-mat-icon-button",3,"matTooltip","click"],["type","button","mat-icon-button","",1,"small-mat-icon-button",3,"click"],[1,"timer"],[1,"larger-countdown",3,"countdown","warningTime"],["type","button","mat-icon-button","",1,"small-mat-icon-button",3,"disabled","click"],["type","button","class","small-mat-icon-button","mat-icon-button","",3,"click",4,"ngIf"]],template:function(t,e){1&t&&w.Qc(0,Lt,26,13,"mat-card",0),2&t&&w.tc("ngIf",e.countdown)},directives:[n.t,Dt.a,Ft.a,O.b,$.c,H.a,Qt.a],pipes:[G.j],styles:['.small-mat-icon-button[_ngcontent-%COMP%]{margin:0 5px;position:relative;width:20px;height:20px}.small-mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;left:0;top:0;line-height:normal;width:20px;height:20px}.small-mat-icon-button[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.grid-wrapper[_ngcontent-%COMP%]{display:grid;width:100%;grid-template-areas:"project title buttons" "project controls controls";grid-gap:10px;grid-template-columns:-webkit-min-content auto -webkit-min-content;grid-template-columns:min-content auto min-content}.projector-button[_ngcontent-%COMP%]{grid-area:project;margin:auto 10px auto 0}.title[_ngcontent-%COMP%]{grid-area:title;padding:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.action-buttons[_ngcontent-%COMP%]{grid-area:buttons;text-align:right}.action-buttons[_ngcontent-%COMP%], .timer[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.timer[_ngcontent-%COMP%]{grid-area:controls}.larger-countdown[_ngcontent-%COMP%]{font-size:150%;min-width:60px}']}),t})();function qt(t,e){if(1&t){const t=w.ac();w.Zb(0,"mat-card"),w.Zb(1,"div",1),w.Zb(2,"div",2),w.Ub(3,"os-projector-button",3),w.Yb(),w.Zb(4,"div",4),w.Zb(5,"button",5),w.hc("click",(function(){return w.Ic(t),w.lc().onBringDialog()})),w.mc(6,"translate"),w.Zb(7,"mat-icon"),w.Sc(8," open_in_new "),w.Yb(),w.Yb(),w.Zb(9,"button",6),w.hc("click",(function(){return w.Ic(t),w.lc().onEdit()})),w.Zb(10,"mat-icon"),w.Sc(11," edit "),w.Yb(),w.Yb(),w.Zb(12,"button",6),w.hc("click",(function(){return w.Ic(t),w.lc().onDelete()})),w.Zb(13,"mat-icon"),w.Sc(14," close "),w.Yb(),w.Yb(),w.Yb(),w.Ub(15,"div",7),w.Yb(),w.Yb()}if(2&t){const t=w.lc();w.Gb(3),w.tc("object",t.message)("projector",t.projector),w.Gb(2),w.uc("matTooltip",w.nc(6,4,"Open projection dialog")),w.Gb(10),w.tc("innerHTML",t.message.getPreview(100),w.Jc)}}o("Of+n");let At=(()=>{class t extends j.a{constructor(t,e,o,n,c,r){super(t,o,e),this.translate=o,this.repo=n,this.promptService=c,this.projectionDialogService=r,this.editEvent=new w.p}ngOnInit(){}onEdit(){this.editEvent.next(this.message)}onBringDialog(){this.projectionDialogService.openProjectDialogFor(this.message)}onDelete(){return Object(i.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Delete message")+` ${this.translate.instant(this.message.getTitle())}?`;(yield this.promptService.open("Are you sure?",t))&&this.repo.delete(this.message).then(()=>{},this.raiseError)}))}}return t.\u0275fac=function(e){return new(e||t)(w.Tb(C.d),w.Tb(T.a),w.Tb(G.k),w.Tb(u.a),w.Tb(m.a),w.Tb(Rt.a))},t.\u0275cmp=w.Nb({type:t,selectors:[["os-message-controls"]],inputs:{message:"message",projector:"projector"},outputs:{editEvent:"editEvent"},features:[w.Db],decls:1,vars:1,consts:[[4,"ngIf"],[1,"grid-wrapper"],[1,"projector-button"],[3,"object","projector"],[1,"action-buttons"],["type","button","mat-icon-button","",1,"small-mat-icon-button",3,"matTooltip","click"],["type","button","mat-icon-button","",1,"small-mat-icon-button",3,"click"],[1,"message",3,"innerHTML"]],template:function(t,e){1&t&&w.Qc(0,qt,16,6,"mat-card",0),2&t&&w.tc("ngIf",e.message)},directives:[n.t,Dt.a,Ft.a,O.b,$.c,H.a],pipes:[G.j],styles:['.small-mat-icon-button[_ngcontent-%COMP%]{margin:0 5px;position:relative;width:20px;height:20px}.small-mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;left:0;top:0;line-height:normal;width:20px;height:20px}.small-mat-icon-button[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.grid-wrapper[_ngcontent-%COMP%]{display:grid;width:100%;grid-template-areas:"project message buttons" "project message buttons";grid-gap:10px;grid-template-columns:-webkit-min-content auto auto;grid-template-columns:min-content auto auto}.projector-button[_ngcontent-%COMP%]{grid-area:project;margin:auto 10px auto 0}.action-buttons[_ngcontent-%COMP%]{grid-area:buttons;text-align:right}']}),t})();function Ut(t,e){if(1&t&&(w.Zb(0,"button",8),w.Zb(1,"mat-icon"),w.Sc(2,"more_vert"),w.Yb(),w.Yb()),2&t){w.lc();const t=w.Ec(8);w.tc("matMenuTriggerFor",t)}}function $t(t,e){1&t&&(w.Zb(0,"mat-icon"),w.Sc(1,"star"),w.Yb())}function Ht(t,e){1&t&&(w.Zb(0,"mat-icon"),w.Sc(1,"star_border"),w.Yb())}function Vt(t,e){if(1&t){const t=w.ac();w.Zb(0,"button",9),w.hc("click",(function(){return w.Ic(t),w.lc().onSetAsClosRef()})),w.Qc(1,$t,2,0,"mat-icon",7),w.Qc(2,Ht,2,0,"mat-icon",7),w.Zb(3,"span"),w.Sc(4),w.mc(5,"translate"),w.Yb(),w.Yb()}if(2&t){const t=w.lc();w.tc("disabled",t.projector.isReferenceProjector),w.Gb(1),w.tc("ngIf",t.projector.isReferenceProjector),w.Gb(1),w.tc("ngIf",!t.projector.isReferenceProjector),w.Gb(2),w.Tc(w.nc(5,4,"Set as reference projector"))}}function Wt(t,e){if(1&t){const t=w.ac();w.Zb(0,"div",18),w.Zb(1,"button",19),w.hc("click",(function(){w.Ic(t);const e=w.lc(3);return e.scale(e.scrollScaleDirection.Down)})),w.mc(2,"translate"),w.Zb(3,"mat-icon"),w.Sc(4,"zoom_out"),w.Yb(),w.Yb(),w.Zb(5,"button",19),w.hc("click",(function(){w.Ic(t);const e=w.lc(3);return e.scale(e.scrollScaleDirection.Up)})),w.mc(6,"translate"),w.Zb(7,"mat-icon"),w.Sc(8,"zoom_in"),w.Yb(),w.Yb(),w.Zb(9,"button",19),w.hc("click",(function(){w.Ic(t);const e=w.lc(3);return e.scale(e.scrollScaleDirection.Reset)})),w.mc(10,"translate"),w.Zb(11,"mat-icon"),w.Sc(12,"refresh"),w.Yb(),w.Yb(),w.Zb(13,"div",20),w.Sc(14),w.Yb(),w.Zb(15,"button",21),w.hc("click",(function(){w.Ic(t);const e=w.lc(3);return e.scroll(e.scrollScaleDirection.Down,5)})),w.mc(16,"translate"),w.Zb(17,"mat-icon"),w.Sc(18,"arrow_upward"),w.Yb(),w.Yb(),w.Zb(19,"button",22),w.hc("click",(function(){w.Ic(t);const e=w.lc(3);return e.scroll(e.scrollScaleDirection.Down)})),w.mc(20,"translate"),w.Zb(21,"mat-icon"),w.Sc(22,"arrow_drop_up"),w.Yb(),w.Yb(),w.Zb(23,"button",19),w.hc("click",(function(){w.Ic(t);const e=w.lc(3);return e.scroll(e.scrollScaleDirection.Up)})),w.mc(24,"translate"),w.Zb(25,"mat-icon"),w.Sc(26,"arrow_drop_down"),w.Yb(),w.Yb(),w.Zb(27,"button",19),w.hc("click",(function(){w.Ic(t);const e=w.lc(3);return e.scroll(e.scrollScaleDirection.Up,5)})),w.mc(28,"translate"),w.Zb(29,"mat-icon"),w.Sc(30,"arrow_downward"),w.Yb(),w.Yb(),w.Zb(31,"button",19),w.hc("click",(function(){w.Ic(t);const e=w.lc(3);return e.scroll(e.scrollScaleDirection.Reset)})),w.mc(32,"translate"),w.Zb(33,"mat-icon"),w.Sc(34,"refresh"),w.Yb(),w.Yb(),w.Zb(35,"div",20),w.Sc(36),w.Yb(),w.Yb()}if(2&t){const t=w.lc(3);w.Gb(1),w.uc("matTooltip",w.nc(2,14,"Zoom out")),w.Gb(4),w.uc("matTooltip",w.nc(6,16,"Zoom in")),w.Gb(4),w.uc("matTooltip",w.nc(10,18,"Reset")),w.Gb(4),w.tc("ngClass",0!=t.projector.scale?"warn":""),w.Gb(1),w.Tc(t.projector.scale),w.Gb(1),w.uc("matTooltip",w.nc(16,20,"Scroll up (big step)")),w.tc("disabled",t.projector.scroll<=4),w.Gb(4),w.uc("matTooltip",w.nc(20,22,"Scroll up")),w.tc("disabled",t.projector.scroll<=0),w.Gb(4),w.uc("matTooltip",w.nc(24,24,"Scroll down")),w.Gb(4),w.uc("matTooltip",w.nc(28,26,"Scroll down (big step)")),w.Gb(4),w.uc("matTooltip",w.nc(32,28,"Reset")),w.Gb(4),w.tc("ngClass",0!=t.projector.scroll?"warn":""),w.Gb(1),w.Uc(" ",t.projector.scroll," ")}}const Xt=function(t){return["/projector",t]};function Kt(t,e){if(1&t&&(w.Zb(0,"div",13),w.Zb(1,"a",14),w.Zb(2,"div",15),w.Ub(3,"os-projector",16),w.Yb(),w.Yb(),w.Qc(4,Wt,37,30,"div",17),w.Yb()),2&t){const t=w.lc(2);w.Gb(1),w.tc("routerLink",w.zc(3,Xt,t.projector.id)),w.Gb(2),w.tc("projector",t.projector),w.Gb(1),w.tc("osPerms","core.can_manage_projector")}}function Jt(t,e){if(1&t&&(w.Zb(0,"os-icon-container",37),w.Sc(1),w.Yb()),2&t){const t=w.lc().$implicit,e=w.lc(4);w.tc("noWrap",!0),w.Gb(1),w.Uc(" ",e.getSlideSubtitle(t)," ")}}function te(t,e){if(1&t){const t=w.ac();w.Zb(0,"mat-list-item",32),w.Zb(1,"div",33),w.Zb(2,"button",34),w.hc("click",(function(){w.Ic(t);const o=e.$implicit;return w.lc(4).unprojectCurrent(o)})),w.Zb(3,"mat-icon"),w.Sc(4,"videocam"),w.Yb(),w.Yb(),w.Zb(5,"span",35),w.Sc(6),w.Qc(7,Jt,2,2,"os-icon-container",36),w.Yb(),w.Zb(8,"button",34),w.hc("click",(function(){w.Ic(t);const o=e.$implicit;return w.lc(4).unprojectCurrent(o)})),w.Zb(9,"mat-icon"),w.Sc(10,"close"),w.Yb(),w.Yb(),w.Yb(),w.Yb()}if(2&t){const t=e.$implicit,o=w.lc(4);w.Gb(6),w.Uc(" ",o.getSlideTitle(t)," "),w.Gb(1),w.tc("ngIf",o.getSlideSubtitle(t))}}function ee(t,e){if(1&t&&(w.Zb(0,"div"),w.Zb(1,"mat-list"),w.Qc(2,te,11,2,"mat-list-item",31),w.Yb(),w.Yb()),2&t){const t=w.lc(3);w.Gb(2),w.tc("ngForOf",t.projector.non_stable_elements)}}function oe(t,e){1&t&&(w.Zb(0,"div",49),w.Zb(1,"mat-icon"),w.Sc(2,"drag_indicator"),w.Yb(),w.Yb())}function ne(t,e){if(1&t){const t=w.ac();w.Zb(0,"div",50),w.Zb(1,"button",34),w.hc("click",(function(){w.Ic(t);const e=w.lc().index;return w.lc(4).projectNow(e)})),w.Zb(2,"mat-icon"),w.Sc(3,"videocam"),w.Yb(),w.Yb(),w.Yb()}}function ce(t,e){if(1&t&&(w.Zb(0,"os-icon-container",51),w.Sc(1),w.Yb()),2&t){const t=w.lc().$implicit,e=w.lc(4);w.tc("noWrap",!0),w.Gb(1),w.Uc(" ",e.getSlideSubtitle(t)," ")}}function re(t,e){if(1&t){const t=w.ac();w.Zb(0,"div",52),w.Zb(1,"div"),w.Zb(2,"button",34),w.hc("click",(function(){w.Ic(t);const e=w.lc().index;return w.lc(4).removePreviewElement(e)})),w.Zb(3,"mat-icon"),w.Sc(4,"delete"),w.Yb(),w.Yb(),w.Yb(),w.Yb()}}function ie(t,e){if(1&t&&(w.Zb(0,"div",42),w.Qc(1,oe,3,0,"div",43),w.Qc(2,ne,4,0,"div",44),w.Zb(3,"div",45),w.Zb(4,"span",46),w.Sc(5),w.Yb(),w.Qc(6,ce,2,2,"os-icon-container",47),w.Yb(),w.Qc(7,re,5,0,"div",48),w.Yb()),2&t){const t=e.$implicit,o=w.lc(4);w.Gb(1),w.tc("ngIf",o.editQueue),w.Gb(1),w.tc("ngIf",!o.editQueue),w.Gb(3),w.Tc(o.getSlideTitle(t)),w.Gb(1),w.tc("ngIf",o.getSlideSubtitle(t)),w.Gb(1),w.tc("ngIf",o.editQueue)}}function ae(t,e){if(1&t){const t=w.ac();w.Zb(0,"button",34),w.hc("click",(function(){w.Ic(t);const e=w.lc(4);return e.editQueue=!e.editQueue})),w.Zb(1,"mat-icon"),w.Sc(2,"edit"),w.Yb(),w.Yb()}}function se(t,e){if(1&t){const t=w.ac();w.Zb(0,"button",34),w.hc("click",(function(){w.Ic(t);const e=w.lc(4);return e.editQueue=!e.editQueue})),w.Zb(1,"mat-icon"),w.Sc(2,"close"),w.Yb(),w.Yb()}}function le(t,e){if(1&t){const t=w.ac();w.Zb(0,"mat-expansion-panel",38),w.Zb(1,"mat-expansion-panel-header"),w.Zb(2,"span"),w.Sc(3),w.mc(4,"translate"),w.Yb(),w.Yb(),w.Zb(5,"div",39),w.hc("cdkDropListDropped",(function(e){return w.Ic(t),w.lc(3).onSortingChange(e)})),w.Qc(6,ie,8,5,"div",40),w.Yb(),w.Zb(7,"mat-action-row"),w.Qc(8,ae,3,0,"button",41),w.Qc(9,se,3,0,"button",41),w.Yb(),w.Yb()}if(2&t){const t=w.lc(3);w.tc("expanded",!0),w.Gb(3),w.Tc(w.nc(4,6,"Queue")),w.Gb(2),w.tc("cdkDropListDisabled",!t.editQueue),w.Gb(1),w.tc("ngForOf",t.projector.elements_preview),w.Gb(2),w.tc("ngIf",!t.editQueue),w.Gb(1),w.tc("ngIf",t.editQueue)}}function be(t,e){if(1&t){const t=w.ac();w.Zb(0,"mat-list-item",53),w.Zb(1,"os-countdown-controls",54),w.hc("editEvent",(function(e){return w.Ic(t),w.lc(3).openCountdownDialog(e)})),w.Yb(),w.Yb()}if(2&t){const t=e.$implicit,o=w.lc(3);w.Gb(1),w.tc("countdown",t)("projector",o.projector.projector)}}function ue(t,e){if(1&t){const t=w.ac();w.Zb(0,"mat-list-item",53),w.Zb(1,"os-message-controls",55),w.hc("editEvent",(function(e){return w.Ic(t),w.lc(3).openMessagesDialog(e)})),w.Yb(),w.Yb()}if(2&t){const t=e.$implicit,o=w.lc(3);w.Gb(1),w.tc("message",t)("projector",o.projector.projector)}}function pe(t,e){if(1&t){const t=w.ac();w.Zb(0,"mat-list"),w.Zb(1,"mat-list-item"),w.Zb(2,"button",29),w.hc("click",(function(){return w.Ic(t),w.lc(3).toggleClos(!1)})),w.Zb(3,"mat-icon"),w.Sc(4,"videocam"),w.Yb(),w.Yb(),w.Zb(5,"span",30),w.Sc(6),w.mc(7,"translate"),w.Yb(),w.Yb(),w.Yb()}if(2&t){const t=w.lc(3);w.Gb(2),w.tc("ngClass",t.isClosProjected(!1)?"projector-active":"projector-inactive"),w.Gb(4),w.Tc(w.nc(7,2,"Slide"))}}function de(t,e){if(1&t&&(w.Zb(0,"li"),w.Sc(1),w.Yb()),2&t){const t=e.$implicit,o=w.lc(4);w.Gb(1),w.Vc(" ",o.getSlideTitle(t[0])," ",o.getSlideSubtitle(t[0])," ")}}function me(t,e){if(1&t&&(w.Zb(0,"mat-expansion-panel"),w.Zb(1,"mat-expansion-panel-header"),w.Zb(2,"span"),w.Sc(3),w.mc(4,"translate"),w.Yb(),w.Yb(),w.Zb(5,"ol"),w.Qc(6,de,2,2,"li",56),w.Yb(),w.Yb()),2&t){const t=w.lc(3);w.Gb(3),w.Tc(w.nc(4,2,"Previous slides")),w.Gb(3),w.tc("ngForOf",t.projector.elements_history)}}function ge(t,e){if(1&t){const t=w.ac();w.Zb(0,"div"),w.Zb(1,"div",23),w.Zb(2,"button",24),w.hc("click",(function(){return w.Ic(t),w.lc(2).projectPreviousSlide()})),w.Zb(3,"mat-icon"),w.Sc(4,"arrow_back"),w.Yb(),w.Zb(5,"span"),w.Sc(6),w.mc(7,"translate"),w.Yb(),w.Yb(),w.Zb(8,"button",24),w.hc("click",(function(){return w.Ic(t),w.lc(2).projectNextSlide()})),w.Zb(9,"span"),w.Sc(10),w.mc(11,"translate"),w.Yb(),w.Zb(12,"mat-icon"),w.Sc(13,"arrow_forward"),w.Yb(),w.Yb(),w.Ub(14,"hr"),w.Yb(),w.Zb(15,"div"),w.Qc(16,ee,3,1,"div",7),w.Zb(17,"mat-accordion",25),w.Qc(18,le,10,8,"mat-expansion-panel",26),w.Zb(19,"mat-expansion-panel"),w.Zb(20,"mat-expansion-panel-header"),w.Zb(21,"span"),w.Sc(22),w.mc(23,"translate"),w.Yb(),w.Yb(),w.Zb(24,"mat-list"),w.Qc(25,be,2,2,"mat-list-item",27),w.Yb(),w.Zb(26,"mat-action-row"),w.Zb(27,"button",28),w.hc("click",(function(){return w.Ic(t),w.lc(2).openCountdownDialog()})),w.Zb(28,"mat-icon"),w.Sc(29,"add"),w.Yb(),w.Zb(30,"span"),w.Sc(31),w.mc(32,"translate"),w.Yb(),w.Yb(),w.Yb(),w.Yb(),w.Zb(33,"mat-expansion-panel"),w.Zb(34,"mat-expansion-panel-header"),w.Zb(35,"span"),w.Sc(36),w.mc(37,"translate"),w.Yb(),w.Yb(),w.Zb(38,"mat-list"),w.Qc(39,ue,2,2,"mat-list-item",27),w.Yb(),w.Zb(40,"mat-action-row"),w.Zb(41,"button",28),w.hc("click",(function(){return w.Ic(t),w.lc(2).openMessagesDialog()})),w.Zb(42,"mat-icon"),w.Sc(43,"add"),w.Yb(),w.Zb(44,"span"),w.Sc(45),w.mc(46,"translate"),w.Yb(),w.Yb(),w.Yb(),w.Yb(),w.Zb(47,"mat-expansion-panel"),w.Zb(48,"mat-expansion-panel-header"),w.Zb(49,"span"),w.Sc(50),w.mc(51,"translate"),w.Yb(),w.Yb(),w.Qc(52,pe,8,4,"mat-list",7),w.Zb(53,"mat-list"),w.Zb(54,"mat-list-item"),w.Zb(55,"button",29),w.hc("click",(function(){return w.Ic(t),w.lc(2).toggleClos(!0)})),w.Zb(56,"mat-icon"),w.Sc(57,"videocam"),w.Yb(),w.Yb(),w.Zb(58,"span",30),w.Sc(59),w.mc(60,"translate"),w.Yb(),w.Yb(),w.Yb(),w.Zb(61,"mat-list"),w.Zb(62,"mat-list-item"),w.Zb(63,"button",29),w.hc("click",(function(){return w.Ic(t),w.lc(2).toggleChyron()})),w.Zb(64,"mat-icon"),w.Sc(65,"videocam"),w.Yb(),w.Yb(),w.Zb(66,"span",30),w.Sc(67),w.mc(68,"translate"),w.Yb(),w.Yb(),w.Yb(),w.Yb(),w.Qc(69,me,7,4,"mat-expansion-panel",7),w.Ub(70,"os-presentation-control",16),w.Yb(),w.Yb(),w.Yb()}if(2&t){const t=w.lc(2);w.Gb(2),w.tc("disabled",0===(null==t.projector?null:t.projector.elements_history.length)),w.Gb(4),w.Tc(w.nc(7,20,"Previous")),w.Gb(2),w.tc("disabled",0===(null==t.projector?null:t.projector.elements_preview.length)),w.Gb(2),w.Tc(w.nc(11,22,"Next")),w.Gb(6),w.tc("ngIf",t.projector.non_stable_elements.length),w.Gb(2),w.tc("ngIf",t.projector.elements_preview.length),w.Gb(4),w.Tc(w.nc(23,24,"Countdowns")),w.Gb(3),w.tc("ngForOf",t.countdowns),w.Gb(6),w.Tc(w.nc(32,26,"Add countdown")),w.Gb(5),w.Tc(w.nc(37,28,"Messages")),w.Gb(3),w.tc("ngForOf",t.messages),w.Gb(6),w.Tc(w.nc(46,30,"Add message")),w.Gb(5),w.Tc(w.nc(51,32,"Current list of speakers")),w.Gb(2),w.tc("ngIf",t.projectorCount>1),w.Gb(3),w.tc("ngClass",t.isClosProjected(!0)?"projector-active":"projector-inactive"),w.Gb(4),w.Tc(w.nc(60,34,"Overlay")),w.Gb(4),w.tc("ngClass",t.isChyronProjected()?"projector-active":"projector-inactive"),w.Gb(4),w.Tc(w.nc(68,36,"Chyron")),w.Gb(2),w.tc("ngIf",t.projector.elements_history.length),w.Gb(1),w.tc("projector",t.projector)}}function he(t,e){if(1&t&&(w.Zb(0,"os-grid-layout"),w.Zb(1,"os-tile",10),w.Qc(2,Kt,5,5,"div",11),w.Yb(),w.Zb(3,"os-tile",10),w.Qc(4,ge,71,38,"div",12),w.Yb(),w.Yb()),2&t){const t=w.lc();w.Gb(1),w.tc("preferredSize",t.projectorTileSizeLeft),w.Gb(1),w.tc("ngIf",t.projector),w.Gb(1),w.tc("preferredSize",t.projectorTileSizeRight),w.Gb(1),w.tc("osPerms","core.can_manage_projector")}}let fe=(()=>{class t extends j.a{constructor(t,e,o,n,c,r,i,a,s,l,b,u,d,m,g,h){super(t,e,o),this.dialog=n,this.repo=c,this.route=r,this.projectorService=i,this.slideManager=a,this.countdownRepo=s,this.messageRepo=l,this.currentListOfSpeakersSlideService=b,this.currentSpeakerChyronService=u,this.durationService=d,this.cd=m,this.promptService=g,this.opertator=h,this.scrollScaleDirection=p.b,this.countdowns=[],this.messages=[],this.projectorTileSizeLeft={medium:8,large:10},this.projectorTileSizeRight={medium:4,large:6},this.editQueue=!1,this.countdownRepo.getViewModelListObservable().subscribe(t=>this.countdowns=t),this.messageRepo.getViewModelListObservable().subscribe(t=>this.messages=t),this.repo.getViewModelListObservable().subscribe(t=>this.projectorCount=t.length)}ngOnInit(){this.route.params.subscribe(t=>{const e=parseInt(t.id,10)||1;this.subscriptions.push(this.repo.getViewModelObservable(e).subscribe(t=>{t&&(super.setTitle(t.name),this.projector=t)}))}),this.subscriptions.push(Object(s.a)(0,500).subscribe(()=>this.cd.detectChanges()))}editProjector(){this.dialog.open(ft,Object.assign({data:this.projector},f.b)).afterClosed().subscribe(t=>{t&&this.cd.detectChanges()})}onSetAsClosRef(){this.repo.setReferenceProjector(this.projector.id)}onDeleteProjectorButton(){return Object(i.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Are you sure you want to delete this projector?");(yield this.promptService.open(t,this.projector.name))&&this.repo.delete(this.projector).catch(this.raiseError)}))}canManage(){return this.opertator.hasPerms(r.b.coreCanManageProjector)}scroll(t,e=1){this.repo.scroll(this.projector,t,e).catch(this.raiseError)}scale(t,e=1){this.repo.scale(this.projector,t,e).catch(this.raiseError)}projectNextSlide(){this.projectorService.projectNextSlide(this.projector.projector).catch(this.raiseError)}projectPreviousSlide(){this.projectorService.projectPreviousSlide(this.projector.projector).catch(this.raiseError)}onSortingChange(t){Object(a.h)(this.projector.elements_preview,t.previousIndex,t.currentIndex),this.projectorService.savePreview(this.projector.projector).catch(this.raiseError)}removePreviewElement(t){this.projector.elements_preview.splice(t,1),this.projectorService.savePreview(this.projector.projector).catch(this.raiseError)}projectNow(t){this.projectorService.projectPreviewSlide(this.projector.projector,t).catch(this.raiseError)}getSlideTitle(t){return this.projectorService.getSlideTitle(t).title}getSlideSubtitle(t){return this.projectorService.getSlideTitle(t).subtitle}isProjected(t){return this.projectorService.isProjectedOn(t,this.projector.projector)}project(t){return Object(i.a)(this,void 0,void 0,(function*(){try{this.isProjected(t)?yield this.projectorService.removeFrom(this.projector.projector,t):yield this.projectorService.projectOn(this.projector.projector,t)}catch(e){this.raiseError(e)}}))}unprojectCurrent(t){const e=this.slideManager.getIdentifiableProjectorElement(t);this.projectorService.removeFrom(this.projector.projector,e).catch(this.raiseError)}isClosProjected(t){return this.currentListOfSpeakersSlideService.isProjectedOn(this.projector,t)}toggleClos(t){this.currentListOfSpeakersSlideService.toggleOn(this.projector,t)}isChyronProjected(){return this.currentSpeakerChyronService.isProjectedOn(this.projector)}toggleChyron(){this.currentSpeakerChyronService.toggleOn(this.projector)}openCountdownDialog(t){let e={title:"",description:"",duration:"",count:this.countdowns.length};t&&(e={title:t.title,description:t.description,duration:this.durationService.durationToString(t.default_time,"m")}),this.dialog.open(y,Object.assign({data:e},f.a)).afterClosed().subscribe(e=>{e&&this.submitCountdown(e,t)})}openMessagesDialog(t){let e={text:""};t&&(e={text:t.message}),this.dialog.open(E,Object.assign({data:e},f.b)).afterClosed().subscribe(e=>{e&&this.submitMessage(e,t)})}submitCountdown(t,e){const o=this.durationService.stringToDuration(t.duration,"m"),n=new g.a({title:t.title,description:t.description,default_time:o,countdown_time:e&&e.running?null:o});e?this.countdownRepo.update(n,e).then(()=>{},this.raiseError):this.countdownRepo.create(n).then(()=>{},this.raiseError)}submitMessage(t,e){const o=new h.a({message:t.text});e?this.messageRepo.update(o,e).then(()=>{},this.raiseError):this.messageRepo.create(o).then(()=>{},this.raiseError)}}return t.\u0275fac=function(e){return new(e||t)(w.Tb(C.d),w.Tb(G.k),w.Tb(T.a),w.Tb(Z.b),w.Tb(p.a),w.Tb(c.a),w.Tb(l.a),w.Tb(v.a),w.Tb(b.a),w.Tb(u.a),w.Tb(_.a),w.Tb(I),w.Tb(d.a),w.Tb(w.h),w.Tb(m.a),w.Tb(r.a))},t.\u0275cmp=w.Nb({type:t,selectors:[["os-projector-detail"]],features:[w.Db],decls:17,vars:12,consts:[["mainButtonIcon","edit",3,"nav","hasMainButton","goBack","mainEvent"],[1,"title-slot"],[1,"menu-slot"],["type","button","mat-icon-button","",3,"matMenuTriggerFor",4,"osPerms"],["projectorExtraMenu","matMenu"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["mat-menu-item","",1,"red-warning-text",3,"click"],[4,"ngIf"],["type","button","mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"disabled","click"],[3,"preferredSize"],["class","projector-detail-wrapper column-left",4,"ngIf"],[4,"osPerms"],[1,"projector-detail-wrapper","column-left"],["target","_blank",3,"routerLink"],["id","projector"],[3,"projector"],["class","control-group projector-controls",4,"osPerms"],[1,"control-group","projector-controls"],["type","button","mat-icon-button","",3,"matTooltip","click"],[1,"button-size",3,"ngClass"],["type","button","mat-icon-button","",1,"spacer-left-50",3,"disabled","matTooltip","click"],["type","button","mat-icon-button","",3,"disabled","matTooltip","click"],[1,"control-group","slide-controls"],["type","button","mat-button","",3,"disabled","click"],["multi","true"],["class","queue",3,"expanded",4,"ngIf"],["class","larger-mat-list-item",4,"ngFor","ngForOf"],["type","button","mat-button","",3,"click"],["type","button","mat-mini-fab","",3,"ngClass","click"],[1,"spacer-left-10"],["class","current-element backgroundColorAccent",4,"ngFor","ngForOf"],[1,"current-element","backgroundColorAccent"],[1,"emelent-grid"],["type","button","mat-icon-button","",3,"click"],[1,"ellipsis-overflow","current-element-text"],["class","subtitle-nocolor","size","small","icon","comment",3,"noWrap",4,"ngIf"],["size","small","icon","comment",1,"subtitle-nocolor",3,"noWrap"],[1,"queue",3,"expanded"],["cdkDropList","",1,"drop-list",3,"cdkDropListDisabled","cdkDropListDropped"],["class","drop-list-entry queue-element backgroundColorLight","cdkDrag","",4,"ngFor","ngForOf"],["type","button","mat-icon-button","",3,"click",4,"ngIf"],["cdkDrag","",1,"drop-list-entry","queue-element","backgroundColorLight"],["class","drag-handle","cdkDragHandle","",4,"ngIf"],["class","drag-handle no-drag",4,"ngIf"],[1,"name"],[1,"ellipsis-overflow"],["class","subtitle","size","small","icon","comment",3,"noWrap",4,"ngIf"],["class","button-right",4,"ngIf"],["cdkDragHandle","",1,"drag-handle"],[1,"drag-handle","no-drag"],["size","small","icon","comment",1,"subtitle",3,"noWrap"],[1,"button-right"],[1,"larger-mat-list-item"],[1,"dynamic-list-entry",3,"countdown","projector","editEvent"],[1,"dynamic-list-entry",3,"message","projector","editEvent"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(w.Zb(0,"os-head-bar",0),w.hc("mainEvent",(function(){return e.editProjector()})),w.Zb(1,"div",1),w.Zb(2,"h2"),w.Sc(3),w.mc(4,"translate"),w.Yb(),w.Yb(),w.Zb(5,"div",2),w.Qc(6,Ut,3,1,"button",3),w.Yb(),w.Zb(7,"mat-menu",null,4),w.Qc(9,Vt,6,6,"button",5),w.Zb(10,"button",6),w.hc("click",(function(){return e.onDeleteProjectorButton()})),w.Zb(11,"mat-icon"),w.Sc(12,"delete"),w.Yb(),w.Zb(13,"span"),w.Sc(14),w.mc(15,"translate"),w.Yb(),w.Yb(),w.Yb(),w.Yb(),w.Qc(16,he,5,4,"os-grid-layout",7)),2&t&&(w.tc("nav",!1)("hasMainButton",e.canManage())("goBack",!0),w.Gb(3),w.Tc(w.nc(4,8,null==e.projector?null:e.projector.name)),w.Gb(3),w.tc("osPerms","core.can_manage_projector"),w.Gb(3),w.tc("ngIf",e.projector),w.Gb(5),w.Tc(w.nc(15,10,"Delete")),w.Gb(2),w.tc("ngIf",e.projector))},directives:[jt.a,vt.a,Yt.f,n.t,Yt.c,H.a,O.b,Yt.e,Zt.a,St.a,c.i,F.a,$.c,n.q,wt.a,wt.c,wt.g,Ct.a,n.s,wt.d,Ct.d,It,Mt.a,a.e,a.a,a.b,Bt,At],pipes:[G.j],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;background-color:#fff;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.projector-detail-wrapper[_ngcontent-%COMP%]   #projector[_ngcontent-%COMP%]{border:1px solid #d3d3d3}.column-left[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}.control-group[_ngcontent-%COMP%]   .button-size[_ngcontent-%COMP%]{padding-left:5px;display:inline-block}.slide-controls[_ngcontent-%COMP%]{text-align:center}.projector-controls[_ngcontent-%COMP%]{text-align:right}.current-element[_ngcontent-%COMP%]{margin-bottom:20px;box-shadow:0 3px 10px 0 rgba(0,0,0,.25)}.current-element[_ngcontent-%COMP%]   .emelent-grid[_ngcontent-%COMP%]{display:grid;width:100%;grid-gap:5px;grid-template-columns:-webkit-min-content 1fr -webkit-min-content;grid-template-columns:min-content 1fr min-content}.current-element[_ngcontent-%COMP%]   .emelent-grid[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{display:inherit}.current-element[_ngcontent-%COMP%]   .emelent-grid[_ngcontent-%COMP%]   .current-element-text[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.queue[_ngcontent-%COMP%]{box-shadow:none!important;background:none!important;margin-bottom:20px}.queue[_ngcontent-%COMP%]   .queue-element[_ngcontent-%COMP%]{margin-bottom:5px}.queue[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 5px 0 0!important;height:36px!important}.queue[_ngcontent-%COMP%]   .mat-action-row[_ngcontent-%COMP%]{border-top-style:none;padding:0}.drop-list[_ngcontent-%COMP%]{width:100%;display:block;overflow:hidden}.drop-list-entry[_ngcontent-%COMP%]{display:table;min-height:50px;width:100%}.drop-list-entry[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{display:table-cell;padding:0 10px;line-height:0;vertical-align:middle;width:25px;color:#708090;cursor:move}.drop-list-entry[_ngcontent-%COMP%]   .drag-handle.no-drag[_ngcontent-%COMP%]{cursor:default}.drop-list-entry[_ngcontent-%COMP%]   .button-right[_ngcontent-%COMP%]{display:table-cell;padding-right:10px;vertical-align:middle;width:auto;white-space:nowrap}.drop-list-entry[_ngcontent-%COMP%]   .button-right[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{float:right}.drop-list-entry[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.drop-list-entry[_ngcontent-%COMP%]:last-child{border:none}.drop-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .drop-list-entry[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.larger-mat-list-item[_ngcontent-%COMP%]{height:auto}.larger-mat-list-item[_ngcontent-%COMP%] + .larger-mat-list-item[_ngcontent-%COMP%]{margin-top:15px}.dynamic-list-entry[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),t})();var je=o("5N+Y");function ve(t,e){1&t&&(w.Zb(0,"mat-icon"),w.Sc(1,"star"),w.Yb())}function Ye(t,e){1&t&&(w.Zb(0,"mat-icon"),w.Sc(1,"star_border"),w.Yb())}function Ze(t,e){if(1&t){const t=w.ac();w.Xb(0,8),w.Zb(1,"button",9),w.hc("click",(function(){return w.Ic(t),w.lc(2).onSetAsClosRef()})),w.mc(2,"translate"),w.Qc(3,ve,2,0,"mat-icon",10),w.Qc(4,Ye,2,0,"mat-icon",10),w.Yb(),w.Zb(5,"button",9),w.hc("click",(function(){return w.Ic(t),w.lc(2).editProjector()})),w.mc(6,"translate"),w.Zb(7,"mat-icon"),w.Sc(8,"edit"),w.Yb(),w.Yb(),w.Zb(9,"button",11),w.hc("click",(function(){return w.Ic(t),w.lc(2).onDeleteButton()})),w.mc(10,"translate"),w.Zb(11,"mat-icon"),w.Sc(12,"delete"),w.Yb(),w.Yb(),w.Wb()}if(2&t){const t=w.lc(2);w.Gb(1),w.uc("matTooltip",w.nc(2,5,"Sets this projector as the reference for the current list of speakers")),w.Gb(2),w.tc("ngIf",t.projector.isReferenceProjector),w.Gb(1),w.tc("ngIf",!t.projector.isReferenceProjector),w.Gb(1),w.uc("matTooltip",w.nc(6,7,"Edit projector")),w.Gb(4),w.uc("matTooltip",w.nc(10,9,"Delete projector"))}}function Se(t,e){if(1&t&&(w.Zb(0,"os-meta-text-block",1),w.Xb(1,2),w.Sc(2),w.mc(3,"translate"),w.Wb(),w.Qc(4,Ze,13,11,"ng-container",3),w.Xb(5,4),w.Zb(6,"a",5),w.Zb(7,"div",6),w.Ub(8,"os-projector",7),w.Yb(),w.Yb(),w.Wb(),w.Yb()),2&t){const t=w.lc();w.tc("disableExpandControl",!0),w.Gb(2),w.Uc(" ",w.nc(3,6,t.projector.getTitle())," "),w.Gb(2),w.tc("osPerms","core.can_manage_projector"),w.Gb(2),w.tc("routerLink",t.getDetailLink())("target",t.projectionTarget),w.Gb(2),w.tc("projector",t.projector)}}let we=(()=>{class t extends j.a{constructor(t,e,o,n,c,r,i){super(t,e,o),this.translate=e,this.repo=n,this.promptService=c,this.dialogService=r,this.operator=i}set projector(t){this._projector=t}get projector(){return this._projector}get projectionTarget(){return this.operator.hasPerms(r.b.coreCanManageProjector)?"_self":"_blank"}ngOnInit(){}editProjector(){this.dialogService.open(ft,Object.assign({data:this.projector},f.b))}onSetAsClosRef(){this.repo.setReferenceProjector(this.projector.id)}getDetailLink(){return this.operator.hasPerms(r.b.coreCanManageProjector)?"/projectors/detail/"+this.projector.id:"/projector/"+this.projector.id}onDeleteButton(){return Object(i.a)(this,void 0,void 0,(function*(){const t=this.translate.instant("Are you sure you want to delete this projector?");(yield this.promptService.open(t,this.projector.name))&&this.repo.delete(this.projector).catch(this.raiseError)}))}}return t.\u0275fac=function(e){return new(e||t)(w.Tb(C.d),w.Tb(G.k),w.Tb(T.a),w.Tb(p.a),w.Tb(m.a),w.Tb(Z.b),w.Tb(r.a))},t.\u0275cmp=w.Nb({type:t,selectors:[["os-projector-list-entry"]],inputs:{projector:"projector"},features:[w.Db],decls:1,vars:1,consts:[["class","projector-tile","showActionRow","false",3,"disableExpandControl",4,"ngIf"],["showActionRow","false",1,"projector-tile",3,"disableExpandControl"],[1,"meta-text-block-title"],["class","meta-text-block-action-row",4,"osPerms"],[1,"meta-text-block-content"],[1,"no-markup",3,"routerLink","target"],[1,"projector"],[3,"projector"],[1,"meta-text-block-action-row"],["mat-icon-button","",3,"matTooltip","click"],[4,"ngIf"],["mat-icon-button","","color","warn",3,"matTooltip","click"]],template:function(t,e){1&t&&w.Qc(0,Se,9,8,"os-meta-text-block",0),2&t&&w.tc("ngIf",e.projector)},directives:[n.t,je.a,vt.a,c.i,F.a,O.b,$.c,H.a],pipes:[G.j],styles:[".projector-tile{height:100%;display:block}.projector-tile>div{height:100%}.projector-tile>div .meta-text-block{margin:0!important;height:100%}.no-markup>div{border:1px solid #d3d3d3}.projector{color:#000}"],encapsulation:2}),t})();function Ce(t,e){1&t&&(w.Zb(0,"mat-hint"),w.Zb(1,"span"),w.Sc(2),w.mc(3,"translate"),w.Yb(),w.Yb()),2&t&&(w.Gb(2),w.Tc(w.nc(3,1,"Required")))}function Te(t,e){if(1&t&&(w.Zb(0,"h1",5),w.Zb(1,"span"),w.Sc(2),w.mc(3,"translate"),w.Yb(),w.Yb(),w.Zb(4,"form",6),w.Zb(5,"div",7),w.Zb(6,"mat-form-field"),w.Ub(7,"input",8),w.mc(8,"translate"),w.Qc(9,Ce,4,3,"mat-hint",9),w.Yb(),w.Yb(),w.Zb(10,"div",10),w.Zb(11,"button",11),w.Zb(12,"span"),w.Sc(13),w.mc(14,"translate"),w.Yb(),w.Yb(),w.Zb(15,"button",12),w.Zb(16,"span"),w.Sc(17),w.mc(18,"translate"),w.Yb(),w.Yb(),w.Yb(),w.Yb()),2&t){const t=w.lc();w.Gb(2),w.Tc(w.nc(3,9,"New Projector")),w.Gb(2),w.tc("formGroup",t.createForm),w.Gb(3),w.uc("placeholder",w.nc(8,11,"Name")),w.Gb(2),w.tc("ngIf",!t.createForm.controls.name.valid),w.Gb(2),w.tc("disabled",!t.createForm.valid)("mat-dialog-close",!0),w.Gb(2),w.Tc(w.nc(14,13,"Create")),w.Gb(2),w.tc("mat-dialog-close",null),w.Gb(2),w.Tc(w.nc(18,15,"Cancel"))}}function Ge(t,e){if(1&t&&(w.Zb(0,"div",13),w.Ub(1,"os-projector-list-entry",14),w.Yb()),2&t){const t=e.$implicit;w.Gb(1),w.tc("projector",t)}}const ke=[{path:"",component:(()=>{class t extends j.a{constructor(t,e,o,n,c,r,i,a){super(t,e,o),this.translate=e,this.repo=n,this.formBuilder=c,this.operator=r,this.dialogService=i,this.cd=a,this.createForm=this.formBuilder.group({name:["",Y.G.required]}),this.subscriptions.push(Object(s.a)(0,1e3).subscribe(()=>{this.cd.detectChanges()}))}get canManage(){return this.operator.hasPerms(r.b.coreCanManageProjector)}ngOnInit(){super.setTitle("Projectors"),this.projectors=this.repo.getViewModelListBehaviorSubject()}createNewProjector(t){this.createForm.reset(),this.dialogService.open(t,Object.assign(Object.assign({},f.a),{disableClose:!0})).afterClosed().subscribe(t=>{if(t){const t={name:this.createForm.value.name,reference_projector_id:this.repo.getReferenceProjectorId()};this.repo.create(t).then(()=>{this.cd.detectChanges()},this.raiseError)}})}ngAfterViewInit(){this.cd.detectChanges()}ngOnDestroy(){super.ngOnDestroy(),this.cd.detach()}}return t.\u0275fac=function(e){return new(e||t)(w.Tb(C.d),w.Tb(G.k),w.Tb(T.a),w.Tb(p.a),w.Tb(Y.f),w.Tb(r.a),w.Tb(Z.b),w.Tb(w.h))},t.\u0275cmp=w.Nb({type:t,selectors:[["os-projector-list"]],features:[w.Db],decls:10,vars:9,consts:[[3,"nav","hasMainButton","mainEvent"],[1,"title-slot"],["projectorDialog",""],["id","card-wrapper"],["class","projector-card",4,"ngFor","ngForOf","ngForTrackBy"],["mat-dialog-title",""],[3,"formGroup"],["mat-dialog-content",""],["formControlName","name","matInput","","required","",3,"placeholder"],[4,"ngIf"],["mat-dialog-actions",""],["type","submit","mat-button","","color","accent",3,"disabled","mat-dialog-close"],["type","button","mat-button","",3,"mat-dialog-close"],[1,"projector-card"],[3,"projector"]],template:function(t,e){if(1&t){const t=w.ac();w.Zb(0,"os-head-bar",0),w.hc("mainEvent",(function(){w.Ic(t);const o=w.Ec(6);return e.createNewProjector(o)})),w.Zb(1,"div",1),w.Zb(2,"h2"),w.Sc(3),w.mc(4,"translate"),w.Yb(),w.Yb(),w.Yb(),w.Qc(5,Te,19,17,"ng-template",null,2,w.Rc),w.Zb(7,"div",3),w.Qc(8,Ge,2,1,"div",4),w.mc(9,"async"),w.Yb()}2&t&&(w.tc("nav",!0)("hasMainButton",e.canManage),w.Gb(3),w.Tc(w.nc(4,5,"Projectors")),w.Gb(5),w.tc("ngForOf",w.nc(9,7,e.projectors))("ngForTrackBy",e.trackByIndex))},directives:[jt.a,n.s,Z.i,Y.I,Y.t,Y.k,Z.f,k.c,Y.c,P.b,Y.s,Y.i,Y.D,n.t,Z.c,O.b,Z.d,k.f,we],pipes:[G.j,n.b],styles:["#card-wrapper{margin:10px;display:grid;grid-gap:10px;grid-template-columns:repeat(auto-fit,minmax(350px,1fr))}#card-wrapper .projector-card{width:100%;max-width:100vmin;max-height:100vh}"],encapsulation:2,changeDetection:0}),t})(),pathMatch:"full"},{path:"detail/:id",component:fe,data:{basePerm:r.b.coreCanManageProjector}}];let Pe=(()=>{class t{}return t.\u0275mod=w.Rb({type:t}),t.\u0275inj=w.Qb({factory:function(e){return new(e||t)},imports:[[c.j.forChild(ke)],c.j]}),t})();var xe=o("PCNd");let Oe=(()=>{class t{}return t.\u0275mod=w.Rb({type:t}),t.\u0275inj=w.Qb({factory:function(e){return new(e||t)},imports:[[n.c,Pe,xe.a]]}),t})()},"5N+Y":function(t,e,o){"use strict";o.d(e,"a",(function(){return S}));var n=o("XNiG"),c=o("KL36"),r=o("w7eE"),i=o("fXoL"),a=o("jhN1"),s=o("sYmb"),l=o("Wp6s"),b=o("ofXK"),u=o("TnkD");function p(t,e){1&t&&i.Vb(0)}function d(t,e){1&t&&i.Vb(0)}function m(t,e){if(1&t&&(i.Zb(0,"div",11),i.Qc(1,d,1,0,"ng-container",3),i.Yb()),2&t){i.lc();const t=i.Ec(18);i.Gb(1),i.tc("ngTemplateOutlet",t)}}function g(t,e){1&t&&i.Vb(0)}function h(t,e){if(1&t){const t=i.ac();i.Zb(0,"div",12),i.Zb(1,"a",13),i.hc("click",(function(){i.Ic(t);const e=i.lc();return e.isExpanded=!e.isExpanded})),i.Sc(2),i.mc(3,"translate"),i.mc(4,"translate"),i.Yb(),i.Yb()}if(2&t){const t=i.lc();i.Gb(2),i.Tc(t.isExpanded?i.nc(3,1,"Hide more text"):i.nc(4,3,"Show full text"))}}function f(t,e){1&t&&i.rc(0)}function j(t,e){1&t&&i.rc(0,1)}function v(t,e){1&t&&i.rc(0,2)}const Y=[[["",8,"meta-text-block-title"]],[["",8,"meta-text-block-content"]],[["",8,"meta-text-block-action-row"]]],Z=[".meta-text-block-title",".meta-text-block-content",".meta-text-block-action-row"];let S=(()=>{class t extends r.a{constructor(t,e,o,c){super(t,e),this.vp=o,this.cd=c,this._disableExpandControl=!1,this.canExpand=!1,this.isExpanded=!1,this.resizeSubject=new n.a}set disableExpandControl(t){this._disableExpandControl=t,t&&(this.isExpanded=!1,this.cd.detectChanges())}get disableExpandControl(){return this._disableExpandControl}ngOnInit(){this.contentSubscription=this.resizeSubject.subscribe(t=>this.resizesContentBox(t))}ngOnDestroy(){this.contentSubscription&&(this.contentSubscription.unsubscribe(),this.contentSubscription=null),this.cd.detach()}resizesContentBox(t){this.canExpand=t>200}}return t.\u0275fac=function(e){return new(e||t)(i.Tb(a.d),i.Tb(s.k),i.Tb(c.a),i.Tb(i.h))},t.\u0275cmp=i.Nb({type:t,selectors:[["os-meta-text-block"]],inputs:{showActionRow:"showActionRow",disableExpandControl:"disableExpandControl"},features:[i.Db],ngContentSelectors:Z,decls:19,vars:6,consts:[[1,"meta-text-block"],[1,"title-container"],[1,"ellipsis-overflow"],[4,"ngTemplateOutlet"],["class","action-row",4,"ngIf"],[1,"content",3,"osHeightResizing","ngClass"],["contentBox",""],["class","small show-entire-text",4,"ngIf"],["title",""],["content",""],["actionRow",""],[1,"action-row"],[1,"small","show-entire-text"],[3,"click"]],template:function(t,e){if(1&t&&(i.sc(Y),i.Zb(0,"div"),i.Zb(1,"mat-card",0),i.Zb(2,"mat-card-header"),i.Zb(3,"mat-card-title"),i.Zb(4,"div",1),i.Zb(5,"div",2),i.Qc(6,p,1,0,"ng-container",3),i.Yb(),i.Qc(7,m,2,1,"div",4),i.Yb(),i.Yb(),i.Yb(),i.Zb(8,"mat-card-content"),i.Zb(9,"div",5,6),i.Qc(11,g,1,0,"ng-container",3),i.Yb(),i.Qc(12,h,5,5,"div",7),i.Yb(),i.Yb(),i.Yb(),i.Qc(13,f,1,0,"ng-template",null,8,i.Rc),i.Qc(15,j,1,0,"ng-template",null,9,i.Rc),i.Qc(17,v,1,0,"ng-template",null,10,i.Rc)),2&t){const t=i.Ec(14),o=i.Ec(16);i.Gb(6),i.tc("ngTemplateOutlet",t),i.Gb(1),i.tc("ngIf",e.showActionRow),i.Gb(2),i.tc("osHeightResizing",e.resizeSubject)("ngClass",e.isExpanded||e.disableExpandControl?"":"collapsed"),i.Gb(2),i.tc("ngTemplateOutlet",o),i.Gb(1),i.tc("ngIf",e.canExpand&&!e.disableExpandControl)}},directives:[l.a,l.f,l.m,b.A,b.t,l.d,u.a,b.q],pipes:[s.j],styles:[""]}),t})()},F48D:function(t,e,o){"use strict";o.d(e,"a",(function(){return a}));var n=o("mrSG"),c=o("LBBb"),r=o("fXoL"),i=o("0IaG");let a=(()=>{class t{constructor(t){this.dialog=t}open(t,e=""){return Object(n.a)(this,void 0,void 0,(function*(){return this.dialog.open(c.a,{width:"250px",data:{title:t,content:e}}).afterClosed().toPromise()}))}}return t.\u0275fac=function(e){return new(e||t)(r.dc(i.b))},t.\u0275prov=r.Pb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},LBBb:function(t,e,o){"use strict";o.d(e,"a",(function(){return l}));var n=o("0IaG"),c=o("fXoL"),r=o("ofXK"),i=o("bTqV"),a=o("sYmb");function s(t,e){if(1&t&&(c.Zb(0,"div"),c.Zb(1,"h2",1),c.Sc(2),c.Yb(),c.Ub(3,"mat-dialog-content",2),c.Zb(4,"mat-dialog-actions"),c.Zb(5,"button",3),c.Sc(6),c.mc(7,"translate"),c.Yb(),c.Zb(8,"button",4),c.Sc(9),c.mc(10,"translate"),c.Yb(),c.Yb(),c.Yb()),2&t){const t=c.lc();c.Gb(2),c.Tc(t.data.title),c.Gb(1),c.tc("innerHTML",t.data.content,c.Jc),c.Gb(2),c.tc("mat-dialog-close",!0),c.Gb(1),c.Tc(c.nc(7,6,"Yes")),c.Gb(2),c.tc("mat-dialog-close",!1),c.Gb(1),c.Tc(c.nc(10,8,"Cancel"))}}let l=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}}return t.\u0275fac=function(e){return new(e||t)(c.Tb(n.h),c.Tb(n.a))},t.\u0275cmp=c.Nb({type:t,selectors:[["os-prompt-dialog"]],decls:1,vars:1,consts:[[4,"ngIf"],["mat-dialog-title",""],[3,"innerHTML"],["mat-button","","color","warn",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&c.Qc(0,s,11,10,"div",0),2&t&&c.tc("ngIf",e.data)},directives:[r.t,n.i,n.f,n.c,i.b,n.d],pipes:[a.j],encapsulation:2}),t})()},TnkD:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var n=o("h9Sk"),c=o("fXoL");let r=(()=>{class t{constructor(t){t&&(this.nativeElement=t.nativeElement)}ngOnInit(){new n.ResizeSensor(this.nativeElement,()=>{this.checkElementForChanges()}),this.checkElementForChanges()}checkElementForChanges(){this.nativeElement.scrollHeight!==this.oldHeight&&(this.oldHeight=this.nativeElement.scrollHeight,this.osHeightResizing&&this.osHeightResizing.next(this.nativeElement.scrollHeight))}}return t.\u0275fac=function(e){return new(e||t)(c.Tb(c.m))},t.\u0275dir=c.Ob({type:t,selectors:[["","osHeightResizing",""]],inputs:{osHeightResizing:"osHeightResizing"}}),t})()}}]);